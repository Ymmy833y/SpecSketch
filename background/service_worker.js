(()=>{"use strict";const e="CLOSE_PANEL",t="DELIVERED";async function n(n){if(!await async function(e){const t=chrome.runtime?.getContexts?.bind(chrome.runtime);if(!t)return!0;try{const n=await t({contextTypes:["SIDE_PANEL"],tabId:e});return Array.isArray(n)&&n.length>0}catch{return!0}}(n))return"NO_RECEIVER";const a={type:e,payload:{tabId:n}};try{return await chrome.runtime.sendMessage(a),t}catch{return"FAILED"}}const a=new Map;chrome.runtime.onInstalled.addListener(async()=>{await chrome.sidePanel.setPanelBehavior({openPanelOnActionClick:!0})}),chrome.webNavigation.onBeforeNavigate.addListener(async({tabId:e,frameId:a})=>{if(0!==a||-1===e)return;const r=await n(e);r!==t&&console.debug("[bg] close_panel:navigate",e,r)}),chrome.tabs.onActivated.addListener(async({tabId:e,windowId:r})=>{const c=a.get(r);if(a.set(r,e),void 0!==c&&c!==e){const e=await n(c);e!==t&&console.debug("[bg] close_panel:tab_switch",c,e)}})})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFja2dyb3VuZC9zZXJ2aWNlX3dvcmtlci5qcyIsIm1hcHBpbmdzIjoibUJBQUEsTUFhYUEsRUFGSSxjQ1ZKQyxFQUNFLFlBMkNSQyxlQUFlQyxFQUFpQkMsR0FDbkMsVUEvQkdGLGVBQWlDRSxHQUVwQyxNQUFNQyxFQUFjQyxPQUFPQyxTQUFTRixhQUFhRyxLQUFLRixPQUFPQyxTQUM3RCxJQUFLRixFQUNELE9BQU8sRUFDWCxJQUNJLE1BQU1JLFFBQWFKLEVBQVksQ0FBRUssYUFBYyxDQUFDLGNBQWVOLFVBQy9ELE9BQU9PLE1BQU1DLFFBQVFILElBQVNBLEVBQUtJLE9BQVMsQ0FDaEQsQ0FDQSxNQUNJLE9BQU8sQ0FDWCxDQUNKLENBbUJnQkMsQ0FBa0JWLEdBQzFCLE1BNUNTLGNBNkNiLE1BQU1XLEVBQU0sQ0FDUkMsS0FBTWhCLEVBQ05pQixRQUFTLENBQUViLFVBRWYsSUFFSSxhQURNRSxPQUFPQyxRQUFRVyxZQUFZSCxHQUMxQmQsQ0FDWCxDQUNBLE1BQ0ksTUFyREksUUFzRFIsQ0FDSixDQzFEQSxNQUFNa0IsRUFBcUIsSUFBSUMsSUFHL0JkLE9BQU9DLFFBQVFjLFlBQVlDLFlBQVlwQixnQkFDN0JJLE9BQU9pQixVQUFVQyxpQkFBaUIsQ0FBRUMsd0JBQXdCLE1BS3RFbkIsT0FBT29CLGNBQWNDLGlCQUFpQkwsWUFBWXBCLE9BQVNFLFFBQU93QixjQUM5RCxHQUFnQixJQUFaQSxJQUE0QixJQUFYeEIsRUFDakIsT0FDSixNQUFNeUIsUUFBWTFCLEVBQWlCQyxHQUMvQnlCLElBQVE1QixHQUNSNkIsUUFBUUMsTUFBTSw0QkFBNkIzQixFQUFPeUIsS0FLMUR2QixPQUFPMEIsS0FBS0MsWUFBWVgsWUFBWXBCLE9BQVNFLFFBQU84QixlQUNoRCxNQUFNQyxFQUFPaEIsRUFBbUJpQixJQUFJRixHQUlwQyxHQUhBZixFQUFtQmtCLElBQUlILEVBQVU5QixRQUdwQmtDLElBQVRILEdBQXNCQSxJQUFTL0IsRUFBTyxDQUN0QyxNQUFNeUIsUUFBWTFCLEVBQWlCZ0MsR0FDL0JOLElBQVE1QixHQUNSNkIsUUFBUUMsTUFBTSw4QkFBK0JJLEVBQU1OLEVBRTNELEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9jb21tb24vbWVzc2FnZXMudHMiLCJ3ZWJwYWNrOi8vLy4vcnVudGltZS9iYWNrZ3JvdW5kL3BhbmVsX2NvbnRyb2wudHMiLCJ3ZWJwYWNrOi8vLy4vcnVudGltZS9iYWNrZ3JvdW5kL3NlcnZpY2Vfd29ya2VyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFAyQyA9IHtcbiAgICBQSU5HOiAnUElORycsXG4gICAgVE9HR0xFX1NFTEVDVDogJ1RPR0dMRV9TRUxFQ1QnLFxuICAgIFJFTkRFUjogJ1JFTkRFUicsXG4gICAgQ0xFQVI6ICdDTEVBUicsXG4gICAgR0VUX1NUQVRFOiAnR0VUX1NUQVRFJyxcbn07XG5jb25zdCBDMlAgPSB7XG4gICAgU0VMRUNURUQ6ICdTRUxFQ1RFRCcsXG59O1xuY29uc3QgQjJQID0ge1xuICAgIENMT1NFX1BBTkVMOiAnQ0xPU0VfUEFORUwnLFxufTtcbmV4cG9ydCBjb25zdCBNU0dfVFlQRSA9IHsgLi4uUDJDLCAuLi5DMlAsIC4uLkIyUCB9O1xuZXhwb3J0IGZ1bmN0aW9uIGlzUmVzcG9uc2UobXNnKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBtc2cgPT09ICdvYmplY3QnICYmIG1zZyAhPT0gbnVsbCAmJiAnaWQnIGluIG1zZyAmJiAnb2snIGluIG1zZztcbn1cbiIsImltcG9ydCB7IE1TR19UWVBFIH0gZnJvbSAnQGNvbW1vbi9tZXNzYWdlcyc7XG5leHBvcnQgY29uc3QgREVMSVZFUllfUkVTVUxUID0ge1xuICAgIERFTElWRVJFRDogJ0RFTElWRVJFRCcsXG4gICAgTk9fUkVDRUlWRVI6ICdOT19SRUNFSVZFUicsXG4gICAgRkFJTEVEOiAnRkFJTEVEJyxcbn07XG4vKipcbiAqIENoZWNrcyB3aGV0aGVyIGEgc2lkZSBwYW5lbCBleGlzdHMgZm9yIHRoZSBzcGVjaWZpZWQgdGFiLlxuICpcbiAqIFRoaXMgdXNlcyB7QGxpbmsgY2hyb21lLnJ1bnRpbWUuZ2V0Q29udGV4dHN9IHdpdGggYGNvbnRleHRUeXBlczogWydTSURFX1BBTkVMJ11gXG4gKiB0byBkZXRlcm1pbmUgaWYgdGhlIGN1cnJlbnQgdGFiIGhvc3RzIGFuIG9wZW4gc2lkZSBwYW5lbC5cbiAqXG4gKiBAcGFyYW0gdGFiSWQgLSBUYXJnZXQgdGFiIElELlxuICogQHJldHVybnMgYHRydWVgIGlmIHdlIHNob3VsZCBhdHRlbXB0IGRlbGl2ZXJ5IHRvIHRoZSBwYW5lbDsgYGZhbHNlYCBpZiB0aGUgcGFuZWwgaXMgZGVmaW5pdGVseSBub3QgcHJlc2VudCBmb3IgdGhlIHRhYi5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHBhbmVsRXhpc3RzRm9yVGFiKHRhYklkKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjb25zdCBnZXRDb250ZXh0cyA9IGNocm9tZS5ydW50aW1lPy5nZXRDb250ZXh0cz8uYmluZChjaHJvbWUucnVudGltZSk7XG4gICAgaWYgKCFnZXRDb250ZXh0cylcbiAgICAgICAgcmV0dXJuIHRydWU7IC8vIEZhbGxiYWNrOiBhc3N1bWUgZGVsaXZlcmFibGUgd2hlbiBBUEkgaXMgdW5hdmFpbGFibGUuXG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY3R4cyA9IGF3YWl0IGdldENvbnRleHRzKHsgY29udGV4dFR5cGVzOiBbJ1NJREVfUEFORUwnXSwgdGFiSWQgfSk7XG4gICAgICAgIHJldHVybiBBcnJheS5pc0FycmF5KGN0eHMpICYmIGN0eHMubGVuZ3RoID4gMDtcbiAgICB9XG4gICAgY2F0Y2gge1xuICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gRmFsbGJhY2sgb24gZXJyb3JzIHRvIG1haW50YWluIGxlZ2FjeSBcInNlbmQgYW55d2F5XCIgYmVoYXZpb3IuXG4gICAgfVxufVxuLyoqXG4gKiBTZW5kcyBhIFwiY2xvc2UgcGFuZWxcIiByZXF1ZXN0IHRvIHRoZSBzaWRlIHBhbmVsIGFzc29jaWF0ZWQgd2l0aCB0aGUgdGFiLFxuICogYW5kIHJlcG9ydHMgdGhlIGRlbGl2ZXJ5IHJlc3VsdCBhcyBhIHZhbHVlLlxuICpcbiAqIEludGVybmFsbHkgdXNlcyB7QGxpbmsgY2hyb21lLnJ1bnRpbWUuc2VuZE1lc3NhZ2V9LiBJZiB0aGUgcmVjZWl2aW5nIGVuZCBkb2VzXG4gKiBub3QgZXhpc3QsIENocm9tZSByZWplY3RzIHRoZSBwcm9taXNlOyB0aGlzIGZ1bmN0aW9uIG1hcHMgdGhhdCBjYXNlIHRvXG4gKiB7QGxpbmsgREVMSVZFUllfUkVTVUxULkZBSUxFRH0gKG9yIHtAbGluayBERUxJVkVSWV9SRVNVTFQuTk9fUkVDRUlWRVJ9IHdoZW5cbiAqIHByZS1jaGVja2VkKSBpbnN0ZWFkIG9mIHRocm93aW5nLlxuICpcbiAqIEBwYXJhbSB0YWJJZCAtIFRhcmdldCB0YWIgSUQuXG4gKiBAcmV0dXJucyBBIHtAbGluayBEZWxpdmVyeVJlc3VsdH0gaW5kaWNhdGluZyB3aGV0aGVyIHRoZSBtZXNzYWdlIHdhcyBkZWxpdmVyZWQsXG4gKiB0aGVyZSB3YXMgbm8gcmVjZWl2ZXIsIG9yIGRlbGl2ZXJ5IGZhaWxlZC5cbiAqXG4gKiBAcmVtYXJrc1xuICogVGhpcyBmdW5jdGlvbiBpbnRlbnRpb25hbGx5IG5vcm1hbGl6ZXMgZXhwZWN0ZWQgXCJubyByZWNlaXZlclwiIHNjZW5hcmlvcyBpbnRvXG4gKiByZXR1cm4gdmFsdWVzIHNvIGNhbGxlcnMgY2FuIGJyYW5jaCBvbiBvdXRjb21lcyB3aXRob3V0IHRyeS9jYXRjaCBub2lzZS5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG5vdGlmeVBhbmVsQ2xvc2UodGFiSWQpIHtcbiAgICBpZiAoIShhd2FpdCBwYW5lbEV4aXN0c0ZvclRhYih0YWJJZCkpKVxuICAgICAgICByZXR1cm4gREVMSVZFUllfUkVTVUxULk5PX1JFQ0VJVkVSO1xuICAgIGNvbnN0IG1zZyA9IHtcbiAgICAgICAgdHlwZTogTVNHX1RZUEUuQ0xPU0VfUEFORUwsXG4gICAgICAgIHBheWxvYWQ6IHsgdGFiSWQgfSxcbiAgICB9O1xuICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IGNocm9tZS5ydW50aW1lLnNlbmRNZXNzYWdlKG1zZyk7IC8vIFJlamVjdHMgaWYgbm8gcmVjZWl2aW5nIGVuZC5cbiAgICAgICAgcmV0dXJuIERFTElWRVJZX1JFU1VMVC5ERUxJVkVSRUQ7XG4gICAgfVxuICAgIGNhdGNoIHtcbiAgICAgICAgcmV0dXJuIERFTElWRVJZX1JFU1VMVC5GQUlMRUQ7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgREVMSVZFUllfUkVTVUxULCBub3RpZnlQYW5lbENsb3NlIH0gZnJvbSAnQGJhY2tncm91bmQvcGFuZWxfY29udHJvbCc7XG5jb25zdCBsYXN0QWN0aXZlQnlXaW5kb3cgPSBuZXcgTWFwKCk7XG4vLyBGaXJlZCB3aGVuIHRoZSBleHRlbnNpb24gaXMgaW5zdGFsbGVkIG9yIHVwZGF0ZWQuXG4vLyBDb25maWd1cmVzIHNpZGUgcGFuZWwgdG8gb3BlbiBvbiBleHRlbnNpb24gYWN0aW9uIGNsaWNrLlxuY2hyb21lLnJ1bnRpbWUub25JbnN0YWxsZWQuYWRkTGlzdGVuZXIoYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IGNocm9tZS5zaWRlUGFuZWwuc2V0UGFuZWxCZWhhdmlvcih7IG9wZW5QYW5lbE9uQWN0aW9uQ2xpY2s6IHRydWUgfSk7XG59KTtcbi8qKlxuICogQ2xvc2UgdGhlIHNpZGUgcGFuZWwgYmVmb3JlIHRvcC1sZXZlbCBuYXZpZ2F0aW9ucyB0byBhdm9pZCBCRkNhY2hlIHJhY2VzLlxuICovXG5jaHJvbWUud2ViTmF2aWdhdGlvbi5vbkJlZm9yZU5hdmlnYXRlLmFkZExpc3RlbmVyKGFzeW5jICh7IHRhYklkLCBmcmFtZUlkIH0pID0+IHtcbiAgICBpZiAoZnJhbWVJZCAhPT0gMCB8fCB0YWJJZCA9PT0gLTEpXG4gICAgICAgIHJldHVybjtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBub3RpZnlQYW5lbENsb3NlKHRhYklkKTtcbiAgICBpZiAocmVzICE9PSBERUxJVkVSWV9SRVNVTFQuREVMSVZFUkVEKSB7XG4gICAgICAgIGNvbnNvbGUuZGVidWcoJ1tiZ10gY2xvc2VfcGFuZWw6bmF2aWdhdGUnLCB0YWJJZCwgcmVzKTtcbiAgICB9XG59KTtcbi8vIEFsc28gaGlkZSB0aGUgc2lkZSBwYW5lbCB3aGVuIHRoZSB1c2VyIHN3aXRjaGVzIHRvIGFub3RoZXIgdGFiLlxuLy8gV2UgcmVtZW1iZXIgdGhlIGxhc3QgYWN0aXZlIHRhYiBwZXIgd2luZG93IGFuZCBjbG9zZSBpdHMgcGFuZWwgd2hlbiBhIGRpZmZlcmVudCB0YWIgYmVjb21lcyBhY3RpdmUgaW4gdGhlIHNhbWUgd2luZG93LlxuY2hyb21lLnRhYnMub25BY3RpdmF0ZWQuYWRkTGlzdGVuZXIoYXN5bmMgKHsgdGFiSWQsIHdpbmRvd0lkIH0pID0+IHtcbiAgICBjb25zdCBwcmV2ID0gbGFzdEFjdGl2ZUJ5V2luZG93LmdldCh3aW5kb3dJZCk7XG4gICAgbGFzdEFjdGl2ZUJ5V2luZG93LnNldCh3aW5kb3dJZCwgdGFiSWQpO1xuICAgIC8vIElmIHRoZXJlIHdhcyBhIHByZXZpb3VzbHkgYWN0aXZlIHRhYiBpbiB0aGlzIHdpbmRvdyBhbmQgaXQncyBkaWZmZXJlbnQsXG4gICAgLy8gYXNrIGl0cyBwYW5lbCAoaWYgYW55KSB0byBjbG9zZSBpdHNlbGYuXG4gICAgaWYgKHByZXYgIT09IHVuZGVmaW5lZCAmJiBwcmV2ICE9PSB0YWJJZCkge1xuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBub3RpZnlQYW5lbENsb3NlKHByZXYpO1xuICAgICAgICBpZiAocmVzICE9PSBERUxJVkVSWV9SRVNVTFQuREVMSVZFUkVEKSB7XG4gICAgICAgICAgICBjb25zb2xlLmRlYnVnKCdbYmddIGNsb3NlX3BhbmVsOnRhYl9zd2l0Y2gnLCBwcmV2LCByZXMpO1xuICAgICAgICB9XG4gICAgfVxufSk7XG4iXSwibmFtZXMiOlsiTVNHX1RZUEUiLCJERUxJVkVSWV9SRVNVTFQiLCJhc3luYyIsIm5vdGlmeVBhbmVsQ2xvc2UiLCJ0YWJJZCIsImdldENvbnRleHRzIiwiY2hyb21lIiwicnVudGltZSIsImJpbmQiLCJjdHhzIiwiY29udGV4dFR5cGVzIiwiQXJyYXkiLCJpc0FycmF5IiwibGVuZ3RoIiwicGFuZWxFeGlzdHNGb3JUYWIiLCJtc2ciLCJ0eXBlIiwicGF5bG9hZCIsInNlbmRNZXNzYWdlIiwibGFzdEFjdGl2ZUJ5V2luZG93IiwiTWFwIiwib25JbnN0YWxsZWQiLCJhZGRMaXN0ZW5lciIsInNpZGVQYW5lbCIsInNldFBhbmVsQmVoYXZpb3IiLCJvcGVuUGFuZWxPbkFjdGlvbkNsaWNrIiwid2ViTmF2aWdhdGlvbiIsIm9uQmVmb3JlTmF2aWdhdGUiLCJmcmFtZUlkIiwicmVzIiwiY29uc29sZSIsImRlYnVnIiwidGFicyIsIm9uQWN0aXZhdGVkIiwid2luZG93SWQiLCJwcmV2IiwiZ2V0Iiwic2V0IiwidW5kZWZpbmVkIl0sInNvdXJjZVJvb3QiOiIifQ==