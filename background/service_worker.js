(()=>{"use strict";const e="ACTIVE_TAB_CHANGED";function a(e,a=!1){try{const t=new URL(e);return a?`${t.origin}${t.pathname}${t.search}${t.hash}`:`${t.origin}${t.pathname}${t.search}`}catch{return e}}chrome.runtime.onInstalled.addListener(async()=>{await chrome.sidePanel.setPanelBehavior({openPanelOnActionClick:!0})}),chrome.tabs.onActivated.addListener(async({tabId:t,windowId:n})=>{try{const[i]=await chrome.tabs.query({active:!0,windowId:n}),r=i?.url,d=r?a(r):void 0;await chrome.runtime.sendMessage({type:e,payload:{tabId:t,windowId:n,url:r,pageKey:d}})}catch{}}),chrome.tabs.onUpdated.addListener(async(t,n,i)=>{if(i?.active&&("loading"===n.status||"string"==typeof n.url))try{const n=i.url,r=n?a(n):void 0;await chrome.runtime.sendMessage({type:e,payload:{tabId:t,windowId:i.windowId,url:n,pageKey:r}})}catch{}})})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFja2dyb3VuZC9zZXJ2aWNlX3dvcmtlci5qcyIsIm1hcHBpbmdzIjoibUJBQUEsTUFnQmFBLEVBRlcscUJDTmpCLFNBQVNDLEVBQVFDLEVBQUtDLEdBQWMsR0FDdkMsSUFDSSxNQUFNQyxFQUFJLElBQUlDLElBQUlILEdBQ2xCLE9BQU9DLEVBQ0QsR0FBR0MsRUFBRUUsU0FBU0YsRUFBRUcsV0FBV0gsRUFBRUksU0FBU0osRUFBRUssT0FDeEMsR0FBR0wsRUFBRUUsU0FBU0YsRUFBRUcsV0FBV0gsRUFBRUksUUFDdkMsQ0FDQSxNQUNJLE9BQU9OLENBQ1gsQ0FDSixDQ2ZBUSxPQUFPQyxRQUFRQyxZQUFZQyxZQUFZQyxnQkFDN0JKLE9BQU9LLFVBQVVDLGlCQUFpQixDQUFFQyx3QkFBd0IsTUNvQ2xFUCxPQUFPUSxLQUFLQyxZQUFZTixZQWhDSkMsT0FBU00sUUFBT0MsZUFDaEMsSUFDSSxNQUFPQyxTQUFhWixPQUFPUSxLQUFLSyxNQUFNLENBQUVDLFFBQVEsRUFBTUgsYUFDaERuQixFQUFNb0IsR0FBS3BCLElBQ1h1QixFQUFNdkIsRUFBTUQsRUFBUUMsUUFBT3dCLFFBQzNCaEIsT0FBT0MsUUFBUWdCLFlBQVksQ0FDN0JDLEtBQU01QixFQUNONkIsUUFBUyxDQUFFVCxRQUFPQyxXQUFVbkIsTUFBS0QsUUFBU3dCLElBRWxELENBQ0EsTUFFQSxJQXFCSmYsT0FBT1EsS0FBS1ksVUFBVWpCLFlBbEJKQyxNQUFPTSxFQUFPVyxFQUFNVCxLQUNsQyxHQUFLQSxHQUFLRSxTQUVVLFlBQWhCTyxFQUFLQyxRQUE0QyxpQkFBYkQsRUFBSzdCLEtBQ3pDLElBQ0ksTUFBTUEsRUFBTW9CLEVBQUlwQixJQUNWdUIsRUFBTXZCLEVBQU1ELEVBQVFDLFFBQU93QixRQUMzQmhCLE9BQU9DLFFBQVFnQixZQUFZLENBQzdCQyxLQUFNNUIsRUFDTjZCLFFBQVMsQ0FBRVQsUUFBT0MsU0FBVUMsRUFBSUQsU0FBVW5CLE1BQUtELFFBQVN3QixJQUVoRSxDQUNBLE1BRUEsRyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2NvbW1vbi9tZXNzYWdlcy50cyIsIndlYnBhY2s6Ly8vLi9jb21tb24vdXJsLnRzIiwid2VicGFjazovLy8uL3J1bnRpbWUvYmFja2dyb3VuZC9zZXJ2aWNlX3dvcmtlci50cyIsIndlYnBhY2s6Ly8vLi9pbmZyYS9jaHJvbWUvdGFicy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBQMkMgPSB7XG4gICAgUElORzogJ1BJTkcnLFxuICAgIFRPR0dMRV9TRUxFQ1Q6ICdUT0dHTEVfU0VMRUNUJyxcbiAgICBSRU5ERVI6ICdSRU5ERVInLFxuICAgIENMRUFSOiAnQ0xFQVInLFxuICAgIEhPVkVSOiAnSE9WRVInLFxuICAgIE1FQVNVUkVfU0laRTogJ01FQVNVUkVfU0laRScsXG59O1xuY29uc3QgQzJQID0ge1xuICAgIFNFTEVDVEVEOiAnU0VMRUNURUQnLFxuICAgIE1JU1NJTkdfSURTOiAnTUlTU0lOR19JRFMnLFxuICAgIENPTlRFTlRfU0laRV9SRVNVTFQ6ICdDT05URU5UX1NJWkVfUkVTVUxUJyxcbn07XG5jb25zdCBCMlAgPSB7XG4gICAgQUNUSVZFX1RBQl9DSEFOR0VEOiAnQUNUSVZFX1RBQl9DSEFOR0VEJyxcbn07XG5leHBvcnQgY29uc3QgTVNHX1RZUEUgPSB7IC4uLlAyQywgLi4uQzJQLCAuLi5CMlAgfTtcbmV4cG9ydCBmdW5jdGlvbiBpc1Jlc3BvbnNlKG1zZykge1xuICAgIHJldHVybiB0eXBlb2YgbXNnID09PSAnb2JqZWN0JyAmJiBtc2cgIT09IG51bGwgJiYgJ2lkJyBpbiBtc2cgJiYgJ29rJyBpbiBtc2c7XG59XG4iLCIvKipcbiAqIEJ1aWxkcyBhIHBhZ2Uga2V5IGZyb20gYSBVUkwuIEJ5IGRlZmF1bHQgZXhjbHVkZXMgdGhlIGhhc2ggYW5kIHVzZXNcbiAqIG9yaWdpbiArIHBhdGhuYW1lICsgc2VhcmNoLlxuICpcbiAqIEBwYXJhbSB1cmwgLSBJbnB1dCBVUkwgKHJldHVybmVkIGFzLWlzIGlmIGludmFsaWQpXG4gKiBAcGFyYW0gaW5jbHVkZUhhc2ggLSBXaGV0aGVyIHRvIGluY2x1ZGUgdGhlIGhhc2ggKGRlZmF1bHQ6IGZhbHNlKVxuICogQHJldHVybnMgUGFnZSBrZXkgc3RyaW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYWdlS2V5KHVybCwgaW5jbHVkZUhhc2ggPSBmYWxzZSkge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHUgPSBuZXcgVVJMKHVybCk7XG4gICAgICAgIHJldHVybiBpbmNsdWRlSGFzaFxuICAgICAgICAgICAgPyBgJHt1Lm9yaWdpbn0ke3UucGF0aG5hbWV9JHt1LnNlYXJjaH0ke3UuaGFzaH1gXG4gICAgICAgICAgICA6IGAke3Uub3JpZ2lufSR7dS5wYXRobmFtZX0ke3Uuc2VhcmNofWA7XG4gICAgfVxuICAgIGNhdGNoIHtcbiAgICAgICAgcmV0dXJuIHVybDtcbiAgICB9XG59XG4vKipcbiAqIERldGVybWluZXMgd2hldGhlciBhIFVSTCBzaG91bGQgYmUgZXhjbHVkZWQgZnJvbSBleHRlbnNpb24gb3BlcmF0aW9uLlxuICpcbiAqIFVucGFyc2VhYmxlL3Vua25vd24gc2NoZW1lcyBhcmUgdHJlYXRlZCBhcyByZXN0cmljdGVkLlxuICogTm9uLXdlYiBzY2hlbWVzIChlLmcuLCB2aWV3LXNvdXJjZTosIGRhdGE6LCBibG9iOiwgZmlsZXN5c3RlbTopIGFyZSBibG9ja2VkIGVhcmx5LlxuICogQ2hyb21lIFdlYiBTdG9yZSBwYWdlcyBhcmUgYWx3YXlzIGV4Y2x1ZGVkIChjb250ZW50IHNjcmlwdHMgYXJlIG5vdCBhbGxvd2VkIHRoZXJlKS5cbiAqXG4gKiBAcGFyYW0gcmF3IC0gVVJMIHN0cmluZyB0byBldmFsdWF0ZS5cbiAqIEByZXR1cm5zIGB0cnVlYCBpZiB0aGUgVVJMIHNob3VsZCBiZSBza2lwcGVkIGJ5IHRoZSBleHRlbnNpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1Jlc3RyaWN0ZWQocmF3KSB7XG4gICAgaWYgKCFyYXcpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIGlmIChyYXcuc3RhcnRzV2l0aCgndmlldy1zb3VyY2U6JykgfHxcbiAgICAgICAgcmF3LnN0YXJ0c1dpdGgoJ2RhdGE6JykgfHxcbiAgICAgICAgcmF3LnN0YXJ0c1dpdGgoJ2Jsb2I6JykgfHxcbiAgICAgICAgcmF3LnN0YXJ0c1dpdGgoJ2ZpbGVzeXN0ZW06JykpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGxldCB1cmw7XG4gICAgdHJ5IHtcbiAgICAgICAgdXJsID0gbmV3IFVSTChyYXcpO1xuICAgIH1cbiAgICBjYXRjaCB7XG4gICAgICAgIC8vIEludmFsaWQgb3Igbm9uLXN0YW5kYXJkIFVSTCDihpIgc2tpcCBmb3Igc2FmZXR5LlxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLy8gQWxsb3ctbGlzdCBwb2xpY3k6IG9ubHkgb3BlcmF0ZSBvbiB0eXBpY2FsIHdlYiBwYWdlcy5cbiAgICBjb25zdCBhbGxvd2VkID0gbmV3IFNldChbJ2h0dHA6JywgJ2h0dHBzOicsICdmaWxlOiddKTtcbiAgICBpZiAoIWFsbG93ZWQuaGFzKHVybC5wcm90b2NvbCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8vIENocm9tZSBXZWIgU3RvcmUgKGN1cnJlbnQgYW5kIGxlZ2FjeSBob3N0KSDigJQgY29udGVudCBzY3JpcHRzIGFyZSBkaXNhbGxvd2VkIGJ5IHBsYXRmb3JtIHBvbGljeS5cbiAgICBjb25zdCB3ZWJTdG9yZUhvc3RzID0gbmV3IFNldChbJ2Nocm9tZXdlYnN0b3JlLmdvb2dsZS5jb20nLCAnY2hyb21lLmdvb2dsZS5jb20nXSk7XG4gICAgaWYgKHdlYlN0b3JlSG9zdHMuaGFzKHVybC5ob3N0bmFtZSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbiIsImltcG9ydCB7IHJlZ2lzdGVyQWN0aXZlVGFiQnJvYWRjYXN0IH0gZnJvbSAnQGluZnJhL2Nocm9tZS90YWJzJztcbi8vIEZpcmVkIHdoZW4gdGhlIGV4dGVuc2lvbiBpcyBpbnN0YWxsZWQgb3IgdXBkYXRlZC5cbi8vIENvbmZpZ3VyZXMgc2lkZSBwYW5lbCB0byBvcGVuIG9uIGV4dGVuc2lvbiBhY3Rpb24gY2xpY2suXG5jaHJvbWUucnVudGltZS5vbkluc3RhbGxlZC5hZGRMaXN0ZW5lcihhc3luYyAoKSA9PiB7XG4gICAgYXdhaXQgY2hyb21lLnNpZGVQYW5lbC5zZXRQYW5lbEJlaGF2aW9yKHsgb3BlblBhbmVsT25BY3Rpb25DbGljazogdHJ1ZSB9KTtcbn0pO1xucmVnaXN0ZXJBY3RpdmVUYWJCcm9hZGNhc3QoKTtcbiIsImltcG9ydCB7IE1TR19UWVBFIH0gZnJvbSAnQGNvbW1vbi9tZXNzYWdlcyc7XG5pbXBvcnQgeyBwYWdlS2V5IH0gZnJvbSAnQGNvbW1vbi91cmwnO1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFjdGl2ZVRhYigpIHtcbiAgICBjb25zdCB0YWJzID0gYXdhaXQgY2hyb21lLnRhYnMucXVlcnkoeyBhY3RpdmU6IHRydWUsIGN1cnJlbnRXaW5kb3c6IHRydWUgfSk7XG4gICAgcmV0dXJuIHRhYnNbMF07XG59XG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJBY3RpdmVUYWJCcm9hZGNhc3QoKSB7XG4gICAgLy8gVGFiIHN3aXRjaGluZ1xuICAgIGNvbnN0IG9uQWN0aXZhdGVkID0gYXN5bmMgKHsgdGFiSWQsIHdpbmRvd0lkIH0pID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IFt0YWJdID0gYXdhaXQgY2hyb21lLnRhYnMucXVlcnkoeyBhY3RpdmU6IHRydWUsIHdpbmRvd0lkIH0pO1xuICAgICAgICAgICAgY29uc3QgdXJsID0gdGFiPy51cmw7XG4gICAgICAgICAgICBjb25zdCBrZXkgPSB1cmwgPyBwYWdlS2V5KHVybCkgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICBhd2FpdCBjaHJvbWUucnVudGltZS5zZW5kTWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgdHlwZTogTVNHX1RZUEUuQUNUSVZFX1RBQl9DSEFOR0VELFxuICAgICAgICAgICAgICAgIHBheWxvYWQ6IHsgdGFiSWQsIHdpbmRvd0lkLCB1cmwsIHBhZ2VLZXk6IGtleSB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgLyogbm8tb3AgKi9cbiAgICAgICAgfVxuICAgIH07XG4gICAgLy8gUmVsb2FkL3RyYW5zaXRpb24gZGV0ZWN0aW9uIHdpdGhpbiB0aGUgc2FtZSB0YWJcbiAgICBjb25zdCBvblVwZGF0ZWQgPSBhc3luYyAodGFiSWQsIGluZm8sIHRhYikgPT4ge1xuICAgICAgICBpZiAoIXRhYj8uYWN0aXZlKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAoaW5mby5zdGF0dXMgPT09ICdsb2FkaW5nJyB8fCB0eXBlb2YgaW5mby51cmwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHVybCA9IHRhYi51cmw7XG4gICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gdXJsID8gcGFnZUtleSh1cmwpIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIGF3YWl0IGNocm9tZS5ydW50aW1lLnNlbmRNZXNzYWdlKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogTVNHX1RZUEUuQUNUSVZFX1RBQl9DSEFOR0VELFxuICAgICAgICAgICAgICAgICAgICBwYXlsb2FkOiB7IHRhYklkLCB3aW5kb3dJZDogdGFiLndpbmRvd0lkLCB1cmwsIHBhZ2VLZXk6IGtleSB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgICAgIC8qIG5vLW9wICovXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNocm9tZS50YWJzLm9uQWN0aXZhdGVkLmFkZExpc3RlbmVyKG9uQWN0aXZhdGVkKTtcbiAgICBjaHJvbWUudGFicy5vblVwZGF0ZWQuYWRkTGlzdGVuZXIob25VcGRhdGVkKTtcbn1cbiJdLCJuYW1lcyI6WyJNU0dfVFlQRSIsInBhZ2VLZXkiLCJ1cmwiLCJpbmNsdWRlSGFzaCIsInUiLCJVUkwiLCJvcmlnaW4iLCJwYXRobmFtZSIsInNlYXJjaCIsImhhc2giLCJjaHJvbWUiLCJydW50aW1lIiwib25JbnN0YWxsZWQiLCJhZGRMaXN0ZW5lciIsImFzeW5jIiwic2lkZVBhbmVsIiwic2V0UGFuZWxCZWhhdmlvciIsIm9wZW5QYW5lbE9uQWN0aW9uQ2xpY2siLCJ0YWJzIiwib25BY3RpdmF0ZWQiLCJ0YWJJZCIsIndpbmRvd0lkIiwidGFiIiwicXVlcnkiLCJhY3RpdmUiLCJrZXkiLCJ1bmRlZmluZWQiLCJzZW5kTWVzc2FnZSIsInR5cGUiLCJwYXlsb2FkIiwib25VcGRhdGVkIiwiaW5mbyIsInN0YXR1cyJdLCJzb3VyY2VSb290IjoiIn0=