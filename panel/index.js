(()=>{"use strict";const e="PING",t="TOGGLE_SELECT",i="RENDER",s="CLEAR",a="HOVER",n="MEASURE_SIZE",o="SELECTED",r="MISSING_IDS",l="CONTENT_SIZE_RESULT",c="ACTIVE_TAB_CHANGED";function d(e){if(!e)return!0;if(e.startsWith("view-source:")||e.startsWith("data:")||e.startsWith("blob:")||e.startsWith("filesystem:"))return!0;let t;try{t=new URL(e)}catch{return!0}return!new Set(["http:","https:","file:"]).has(t.protocol)||!!new Set(["chromewebstore.google.com","chrome.google.com"]).has(t.hostname)}const E=["Gray","Red","Yellow","Green","Blue","Lime","Purple","Pink","Orange","Cyan"],h=["circle","square"],u=["right-top-outside","right-top-inside","right-outside","right-inside","right-bottom-outside","right-bottom-inside","top-outside","top-inside","center","bottom-outside","bottom-inside","left-top-outside","left-top-inside","left-outside","left-inside","left-bottom-outside","left-bottom-inside"],p="__ungrouped__",m="",T={status:"DISCONNECTED",tabId:null,pageKey:"",pageKeys:[],theme:"device",selectionEnabled:!1,items:[],defaultSize:14,defaultColor:"Blue",defaultShape:"circle",defaultPosition:"left-top-outside",defaultGroup:m,capture:{format:"png",area:"full",quality:90,scale:1,panelExpanded:!1},selectItems:[],missingIds:[]},_=function(e,t){const i="screenStateByPage";async function s(){return(await chrome.storage.local.get(i))[i]??{}}async function a(e){await chrome.storage.local.set({[i]:e})}return{key:i,readAll:s,writeAll:a,get:async function(e){const i=(await s())[e];return void 0!==i?i:t?t():void 0},set:async function(e,t){const i=await s();i[e]=t,await a(i)},remove:async function(e){const t=await s();e in t&&(delete t[e],await a(t))},clear:async function(){await a({})}}}(0,()=>({items:[],nextId:1,defaultSize:14,defaultColor:"Blue",defaultShape:"circle",defaultPosition:"left-top-outside",defaultGroup:m})),g=function(){const e="themeMode";return{key:e,get:async function(){const t=(await chrome.storage.local.get(e))[e];return void 0===t?"device":t},set:async function(t){await chrome.storage.local.set({[e]:t})},remove:async function(){await chrome.storage.local.remove(e)}}}();function S(e){const t=new Map;e.forEach((e,i)=>{const s=(e.group??"").trim();t.has(s)||t.set(s,[]),t.get(s).push({index:i,item:e})});const i=e.slice();for(const[,e]of t)e.sort((e,t)=>e.item.label!==t.item.label?e.item.label-t.item.label:e.item.id-t.item.id),e.forEach(({index:e,item:t},s)=>{const a=s+1;t.label!==a&&(i[e]={...t,label:a})});return i}function C(e,t){return chrome.i18n.getMessage(e,t)||e}const f={get:C,localize:function(e=document){e.querySelectorAll("[data-i18n]").forEach(e=>{const t=e.getAttribute("data-i18n");t&&(e.textContent=C(t))}),e.querySelectorAll("[data-i18n-attr]").forEach(e=>{const t=e.getAttribute("data-i18n-attr");if(t)for(const i of t.split(";")){const[t,s]=i.split(":").map(e=>e?.trim());t&&s&&e.setAttribute(t,C(s))}})}},A="CONNECTED",R={RESTRICTED:"status_restricted",CONNECTING:"status_connecting",CONNECTED:"status_connected",DISCONNECTED:"status_disconnected"},N={RESTRICTED:{body:["bg-amber-50","border-amber-200","text-amber-700","dark:bg-amber-950","dark:border-amber-900/50","dark:text-amber-300"],dot:["bg-amber-500"]},CONNECTING:{body:["bg-sky-50","border-sky-200","text-sky-700","dark:bg-sky-950","dark:border-sky-900/50","dark:text-sky-300"],dot:["bg-sky-500"]},CONNECTED:{body:["bg-emerald-50","border-emerald-200","text-emerald-700","dark:bg-emerald-950","dark:border-emerald-900/50","dark:text-emerald-300"],dot:["bg-emerald-500"]},DISCONNECTED:{body:["bg-rose-50","border-rose-200","text-rose-700","dark:bg-rose-950","dark:border-rose-900/50","dark:text-rose-300"],dot:["bg-rose-500"]}};var O,I;!function(e){e.INIT="INIT",e.CONNECTED="CONNECTED",e.SET_STATUS="SET_STATUS",e.RESTORE_STATE="RESTORE_STATE",e.SET_MISSING_IDS="SET_MISSING_IDS",e.TOGGLE_SELECT="TOGGLE_SELECT",e.CLEAR_ALL="CLEAR_ALL",e.CONTENT_SELECTED="CONTENT_SELECTED",e.SET_BADGE_SIZE="SET_BADGE_SIZE",e.SET_BADGE_COLOR="SET_BADGE_COLOR",e.SET_BADGE_SHAPE="SET_BADGE_SHAPE",e.BADGE_DELETE="BADGE_DELETE",e.SET_BADGE_POSITION="SET_BADGE_POSITION",e.SET_CAPTURE_FORMAT="SET_CAPTURE_FORMAT",e.SET_CAPTURE_AREA="SET_CAPTURE_AREA",e.SET_CAPTURE_QUALITY="SET_CAPTURE_QUALITY",e.SET_CAPTURE_SCALE="SET_CAPTURE_SCALE",e.TOGGLE_CAPTURE_PANEL="TOGGLE_CAPTURE_PANEL",e.MEASURE_CONTENT_SIZE="MEASURE_CONTENT_SIZE",e.CAPTURE_REQUESTED="CAPTURE_REQUESTED",e.CAPTURE_SUCCEEDED="CAPTURE_SUCCEEDED",e.CAPTURE_FAILED="CAPTURE_FAILED",e.REORDER_ITEMS="REORDER_ITEMS",e.SET_GROUP="SET_GROUP",e.PORT_DISCONNECTED="PORT_DISCONNECTED",e.CLOSE_PANEL_REQUESTED="CLOSE_PANEL_REQUESTED",e.ITEM_SELECTION_CHANGED="ITEM_SELECTION_CHANGED",e.ITEM_HOVER_IN="ITEM_HOVER_IN",e.ITEM_HOVER_OUT="ITEM_HOVER_OUT",e.UPDATE_ITEM_COMMENT="UPDATE_ITEM_COMMENT",e.SET_THEME="SET_THEME",e.UPDATE_THEME="UPDATE_THEME",e.STORE_RELOAD_REQUESTED="STORE_RELOAD_REQUESTED",e.STORE_RELOAD_SUCCEEDED="STORE_RELOAD_SUCCEEDED",e.REMOVE_SCREEN_STATE_BY_PAGE="REMOVE_SCREEN_STATE_BY_PAGE"}(O||(O={})),function(e){e.RENDER_CONTENT="RENDER_CONTENT",e.TOGGLE_SELECT_ON_CONTENT="TOGGLE_SELECT_ON_CONTENT",e.CLEAR_CONTENT="CLEAR_CONTENT",e.HOVER="HOVER",e.MEASURE_CONTENT_SIZE="MEASURE_CONTENT_SIZE",e.CAPTURE="CAPTURE",e.CLEAR_STATE="CLEAR_STATE",e.PERSIST_STATE="PERSIST_STATE",e.SET_THEME="SET_THEME",e.UPDATE_THEME="UPDATE_THEME",e.READ_SCREEN_STATE_STORE="READ_SCREEN_STATE_STORE",e.REMOVE_SCREEN_STATE_STORE_BY_PAGE_KEY="REMOVE_SCREEN_STATE_STORE_BY_PAGE_KEY",e.NOTIFY_ERROR="NOTIFY_ERROR"}(I||(I={}));const b="spsk:panel-content:v1";class L{rpc;constructor(e){this.rpc=e}send(e){const t={id:crypto.randomUUID(),expectReply:!1,...e};return this.rpc.send(t)}render(e){return this.send({type:i,payload:{items:e}})}toggleSelect(e){return this.send({type:t,payload:{enabled:e}})}clear(){return this.send({type:s})}hover(e){return this.send({type:a,payload:{id:e}})}measureSize(){return this.send({type:n})}ping(){const t={id:crypto.randomUUID(),expectReply:!0,type:e};return this.rpc.send(t,5e3)}}class y{port;pending=new Map;alive=!0;constructor(e){this.port=e,this.port.onMessage.addListener(e=>{(function(e){return"object"==typeof e&&null!==e&&"id"in e&&"ok"in e})(e)&&(this.pending.get(e.id)?.(e),this.pending.delete(e.id))}),this.port.onDisconnect.addListener(()=>{this.alive=!1;const e=chrome.runtime.lastError?.message??"disconnected";for(const[t,i]of this.pending)i({id:t,ok:!1,error:e});this.pending.clear()})}get isAlive(){return this.alive}send(e,t=5e3){return new Promise(i=>{if(!this.alive)return i(void e.expectReply);if(e.expectReply){const s=setTimeout(()=>{this.pending.delete(e.id),i(void 0)},t);this.pending.set(e.id,e=>{clearTimeout(s),i(e)})}try{this.port.postMessage(e)}catch{return e.expectReply&&this.pending.delete(e.id),void i(void 0)}e.expectReply||i(void 0)})}}const v=new Set;async function D(e,t,i){return await new Promise((s,a)=>{chrome.debugger.sendCommand(e,t,i??{},e=>{const t=function(){const e=chrome.runtime.lastError;return e?new Error(e.message||String(e)):null}();t?a(t):s(e??{})})})}async function w(e){const t=await chrome.tabs.get(e.tabId);if(!t.id||d(t.url))return void console.warn("Capturing is not possible due to restricted URL:",t.url);const i={tabId:t.id},s=e.format??"png",a=e.settleMs??500,n=e.scale??1,o=e.area??"full";let r=!1,l=!1;try{r=await async function(e){const t=e.tabId??null;return await new Promise((i,s)=>{chrome.debugger.attach(e,"1.3",()=>{const e=chrome.runtime.lastError;if(!e)return null!=t&&v.add(t),void i(!0);const a=e.message||"";a.includes("Another debugger is already attached")?null!=t&&v.has(t)?i(!1):s(new Error("Debugger is already attached by another client (DevTools/extension).")):s(new Error(a))})})}(i),await D(i,"Page.enable"),(e.bringToFront??1)&&await D(i,"Page.bringToFront");const c=await async function(e,t,i,s){if("viewport"===t){const{x:t,y:s,width:a,height:n}=await async function(e){const t=(await D(e,"Page.getLayoutMetrics")).cssVisualViewport;return{x:Math.max(0,0|Math.floor(t.pageX)),y:Math.max(0,0|Math.floor(t.pageY)),width:Math.max(1,0|Math.ceil(t.clientWidth)),height:Math.max(1,0|Math.ceil(t.clientHeight))}}(e);return{useOverride:!1,clip:{x:t,y:s,width:a,height:n,scale:i},captureBeyondViewport:!0,shouldScrollTop:!1}}const a=Math.max(1,0|Math.ceil(s.width)),n=Math.max(1,0|Math.ceil(s.height));return{useOverride:!0,metrics:{width:a,height:n,deviceScaleFactor:1,mobile:!1,screenWidth:a,screenHeight:n,positionX:0,positionY:0},clip:{x:0,y:0,width:a,height:n,scale:i},captureBeyondViewport:!0,shouldScrollTop:!0}}(i,o,n,e.contentSize);c.shouldScrollTop&&await D(i,"Runtime.evaluate",{expression:"window.scrollTo(0,0)"}),c.useOverride&&c.metrics&&(l=!0,await D(i,"Emulation.setDeviceMetricsOverride",c.metrics)),await new Promise(e=>setTimeout(e,a));const d={format:s,fromSurface:!0,captureBeyondViewport:c.captureBeyondViewport,clip:c.clip};"jpeg"===s&&"number"==typeof e.quality&&(d.quality=Math.min(100,Math.max(0,Math.round(e.quality))));const{data:E}=await D(i,"Page.captureScreenshot",d),h=`data:${"png"===s?"image/png":"image/jpeg"};base64,${E}`,u=e.filename??function(e,t){let i=(e.title&&e.title.trim()?e.title:"")||(()=>{try{return new URL(e.url??"").host||"page"}catch{return"page"}})();return i=i.replace(/[\\/:*?"<>|]/g,"_").replace(/\s+/g," ").trim(),i.length>80&&(i=i.slice(0,80)),`${i}-${(new Date).toISOString().replace(/[:.]/g,"-")}.${t}`}(t,s);return await chrome.downloads.download({url:h,filename:u,saveAs:!1})}finally{if(l)try{await D(i,"Emulation.clearDeviceMetricsOverride")}catch{}if(r)try{await async function(e){const t=e.tabId??null;null!=t&&v.has(t)&&(await async function(e){await new Promise(t=>{chrome.debugger.detach(e,()=>t())})}(e),v.delete(t))}(i)}catch{}}}var P;chrome.debugger.onDetach.addListener(e=>{const t=e.tabId;"number"==typeof t&&v.delete(t)}),function(e){e.TOGGLE_SELECT="TOGGLE_SELECT",e.CLEAR="CLEAR",e.CAPTURE="CAPTURE",e.BADGE_SIZE_CHANGE="BADGE_SIZE_CHANGE",e.BADGE_COLOR_SELECT="BADGE_COLOR_SELECT",e.BADGE_SHAPE_CHANGE="BADGE_SHAPE_CHANGE",e.BADGE_DELETE="BADGE_DELETE",e.BADGE_POSITION_SELECT="BADGE_POSITION_SELECT",e.SET_GROUP="SET_GROUP",e.CAPTURE_FORMAT_CHANGE="CAPTURE_FORMAT_CHANGE",e.CAPTURE_AREA_CHANGE="CAPTURE_AREA_CHANGE",e.CAPTURE_QUALITY_CHANGE="CAPTURE_QUALITY_CHANGE",e.CAPTURE_SCALE_CHANGE="CAPTURE_SCALE_CHANGE",e.TOGGLE_CAPTURE_PANEL="TOGGLE_CAPTURE_PANEL",e.REORDER_ITEMS="REORDER_ITEMS",e.ITEM_SELECTION_CHANGED="ITEM_SELECTION_CHANGED",e.ITEM_HOVER_IN="ITEM_HOVER_IN",e.ITEM_HOVER_OUT="ITEM_HOVER_OUT",e.ITEM_COMMENT_APPLY="ITEM_COMMENT_APPLY",e.UPDATE_THEME="UPDATE_THEME",e.SETTING_MODAL_SHOW="SETTING_MODAL_SHOW",e.REMOVE_PAGE_CLICK="REMOVE_PAGE_CLICK"}(P||(P={}));class G{view;model=structuredClone(T);conn=null;currentWindowId=null;static REQUIRES_CONN=new Set([I.RENDER_CONTENT,I.TOGGLE_SELECT_ON_CONTENT,I.CLEAR_CONTENT,I.HOVER]);constructor(e){this.view=e}async start(){this.dispatch({type:O.INIT});const{ok:e}=await this.ensureConnectionAlive({forceReconnect:!0});if(!e)return void this.view.render(this.model);this.registerViewHandlers(),this.view.render(this.model);const t=await chrome.windows.getCurrent();this.currentWindowId=t.id??null,chrome.runtime.onMessage.addListener(e=>{if(e.type!==c)return;const t=e.payload.windowId;null!=this.currentWindowId&&this.currentWindowId===t&&this.ensureConnectionAlive({forceReconnect:!0})})}registerViewHandlers(){this.view.on(P.TOGGLE_SELECT,()=>this.dispatch({type:O.TOGGLE_SELECT})),this.view.on(P.CLEAR,()=>this.dispatch({type:O.CLEAR_ALL})),this.view.on(P.CAPTURE,()=>this.dispatch({type:O.MEASURE_CONTENT_SIZE})),this.view.on(P.BADGE_SIZE_CHANGE,({size:e})=>this.dispatch({type:O.SET_BADGE_SIZE,size:e})),this.view.on(P.BADGE_COLOR_SELECT,({color:e})=>this.dispatch({type:O.SET_BADGE_COLOR,color:e})),this.view.on(P.BADGE_SHAPE_CHANGE,({shape:e})=>this.dispatch({type:O.SET_BADGE_SHAPE,shape:e})),this.view.on(P.BADGE_DELETE,()=>this.dispatch({type:O.BADGE_DELETE})),this.view.on(P.BADGE_POSITION_SELECT,({position:e})=>this.dispatch({type:O.SET_BADGE_POSITION,position:e})),this.view.on(P.TOGGLE_CAPTURE_PANEL,()=>this.dispatch({type:O.TOGGLE_CAPTURE_PANEL})),this.view.on(P.CAPTURE_FORMAT_CHANGE,({format:e})=>this.dispatch({type:O.SET_CAPTURE_FORMAT,format:e})),this.view.on(P.CAPTURE_AREA_CHANGE,({area:e})=>this.dispatch({type:O.SET_CAPTURE_AREA,area:e})),this.view.on(P.CAPTURE_QUALITY_CHANGE,({quality:e})=>this.dispatch({type:O.SET_CAPTURE_QUALITY,quality:e})),this.view.on(P.CAPTURE_SCALE_CHANGE,({scale:e})=>this.dispatch({type:O.SET_CAPTURE_SCALE,scale:e})),this.view.on(P.REORDER_ITEMS,({fromId:e,fromIndex:t,toIndex:i})=>this.dispatch({type:O.REORDER_ITEMS,fromId:e,fromIndex:t,toIndex:i})),this.view.on(P.SET_GROUP,({group:e})=>this.dispatch({type:O.SET_GROUP,group:e})),this.view.on(P.ITEM_SELECTION_CHANGED,e=>this.dispatch({type:O.ITEM_SELECTION_CHANGED,...e})),this.view.on(P.ITEM_HOVER_IN,({id:e})=>this.dispatch({type:O.ITEM_HOVER_IN,id:e})),this.view.on(P.ITEM_HOVER_OUT,()=>this.dispatch({type:O.ITEM_HOVER_OUT})),this.view.on(P.ITEM_COMMENT_APPLY,({id:e,comment:t})=>this.dispatch({type:O.UPDATE_ITEM_COMMENT,id:e,comment:t})),this.view.on(P.UPDATE_THEME,({theme:e})=>this.dispatch({type:O.UPDATE_THEME,theme:e})),this.view.on(P.SETTING_MODAL_SHOW,()=>this.dispatch({type:O.STORE_RELOAD_REQUESTED})),this.view.on(P.REMOVE_PAGE_CLICK,({pageKey:e})=>this.dispatch({type:O.REMOVE_SCREEN_STATE_BY_PAGE,pageKey:e}))}dispatch(e){const{model:t,effects:i}=function(e,t){switch(t.type){case O.INIT:return{model:e,effects:[{kind:I.SET_THEME}]};case O.CONNECTED:return{model:{...e,tabId:t.tabId,pageKey:t.pageKey},effects:[]};case O.SET_STATUS:return t.status===A?{model:{...e,status:t.status},effects:[]}:{model:{...e,items:[],status:t.status},effects:[]};case O.RESTORE_STATE:return{model:{...e,items:t.state.items,defaultSize:t.state.defaultSize,defaultColor:t.state.defaultColor,defaultShape:t.state.defaultShape,defaultPosition:t.state.defaultPosition,defaultGroup:t.state.defaultGroup},effects:[{kind:I.RENDER_CONTENT,items:t.state.items}]};case O.SET_MISSING_IDS:return{model:{...e,missingIds:t.missingIds},effects:[]};case O.TOGGLE_SELECT:{const t=!e.selectionEnabled;return{model:{...e,selectionEnabled:t},effects:[{kind:I.TOGGLE_SELECT_ON_CONTENT,enabled:t}]}}case O.CLEAR_ALL:return{model:{...e,items:[]},effects:[{kind:I.CLEAR_CONTENT},{kind:I.CLEAR_STATE}]};case O.CONTENT_SELECTED:return{model:e,effects:[]};case O.TOGGLE_CAPTURE_PANEL:return{model:{...e,capture:{...e.capture,panelExpanded:!e.capture.panelExpanded}},effects:[]};case O.SET_BADGE_SIZE:{const i=e.items.map(i=>({...i,...e.selectItems.includes(i.id)?{size:t.size}:{}}));return{model:{...e,defaultSize:t.size,items:i},effects:[{kind:I.PERSIST_STATE},{kind:I.RENDER_CONTENT,items:i}]}}case O.SET_BADGE_COLOR:{const i=e.items.map(i=>({...i,...e.selectItems.includes(i.id)?{color:t.color}:{}}));return{model:{...e,defaultColor:t.color,items:i},effects:[{kind:I.PERSIST_STATE},{kind:I.RENDER_CONTENT,items:i}]}}case O.SET_BADGE_SHAPE:{const i=e.items.map(i=>({...i,...e.selectItems.includes(i.id)?{shape:t.shape}:{}}));return{model:{...e,defaultShape:t.shape,items:i},effects:[{kind:I.PERSIST_STATE},{kind:I.RENDER_CONTENT,items:i}]}}case O.BADGE_DELETE:{const t=S(e.items.filter(t=>!e.selectItems.includes(t.id)));return{model:{...e,items:t},effects:[{kind:I.PERSIST_STATE},{kind:I.RENDER_CONTENT,items:t}]}}case O.SET_BADGE_POSITION:{const i=e.items.map(i=>({...i,...e.selectItems.includes(i.id)?{position:t.position}:{}}));return{model:{...e,defaultPosition:t.position,items:i},effects:[{kind:I.PERSIST_STATE},{kind:I.RENDER_CONTENT,items:i}]}}case O.SET_GROUP:{const i=function(e,t,i){const s=(i??"").trim();let a=0;return e.sort((e,t)=>t.id-e.id).map(e=>{if(t.includes(e.id)&&e.group!==s){const t=Number.MAX_SAFE_INTEGER-a++;return{...e,group:s,label:t}}return e})}(e.items,e.selectItems,t.group),s=S(i);return{model:{...e,defaultGroup:t.group,items:s},effects:[{kind:I.PERSIST_STATE},{kind:I.RENDER_CONTENT,items:s}]}}case O.SET_CAPTURE_FORMAT:return{model:{...e,capture:{...e.capture,format:t.format}},effects:[]};case O.SET_CAPTURE_AREA:return{model:{...e,capture:{...e.capture,area:t.area}},effects:[]};case O.SET_CAPTURE_QUALITY:return{model:{...e,capture:{...e.capture,quality:t.quality}},effects:[]};case O.SET_CAPTURE_SCALE:return{model:{...e,capture:{...e.capture,scale:t.scale}},effects:[]};case O.MEASURE_CONTENT_SIZE:return{model:e,effects:[{kind:I.MEASURE_CONTENT_SIZE}]};case O.CAPTURE_REQUESTED:return null==e.tabId?{model:e,effects:[{kind:I.NOTIFY_ERROR,error:"No tabId"}]}:{model:e,effects:[{kind:I.CAPTURE,payload:{tabId:e.tabId,format:e.capture.format,area:e.capture.area,quality:e.capture.quality,scale:e.capture.scale,contentSize:t.contentSize}}]};case O.CAPTURE_SUCCEEDED:return{model:e,effects:[]};case O.CAPTURE_FAILED:return{model:e,effects:[{kind:I.NOTIFY_ERROR,error:t.error}]};case O.REORDER_ITEMS:{const i=function(e,t,i,s){if(s<0||s>=e.length)throw new RangeError(`toIndex out of range: ${s}`);const a=e.findIndex(e=>e.id===t);if(-1===a)throw new Error(`Item not found for id=${t}`);if(s<0||s>=e.filter(t=>t.group===e[a].group).length)throw new RangeError(`toIndex out of range: ${s}`);const n=s+(i<s?1.1:.1);return e.map(e=>e.id===t?{...e,label:n}:e)}(e.items,t.fromId,t.fromIndex,t.toIndex),s=S(i);return{model:{...e,items:s},effects:[{kind:I.PERSIST_STATE},{kind:I.RENDER_CONTENT,items:s}]}}case O.ITEM_SELECTION_CHANGED:if("id"in t){const i=function(e,t,i){return t&&!i.includes(e)?[...i,e]:i.filter(t=>t!==e)}(t.id,t.isCheck,e.selectItems);return{model:{...e,selectItems:i},effects:[]}}if("group"in t){const i=function(e,t,i,s){const a=e.trim(),n=s.filter(e=>(e.group??m).trim()===a).map(e=>e.id);if(0===n.length)return i;if(t){const e=new Set(i);for(const t of n)e.add(t);return[...e]}{const e=new Set(n);return i.filter(t=>!e.has(t))}}(t.group,t.isCheck,e.selectItems,e.items);return{model:{...e,selectItems:i},effects:[]}}{const a=(i=t.allCheck,s=e.items,i?s.map(e=>e.id):[]);return{model:{...e,selectItems:a},effects:[]}}case O.ITEM_HOVER_IN:return{model:e,effects:[{kind:I.HOVER,id:t.id}]};case O.ITEM_HOVER_OUT:return{model:e,effects:[{kind:I.HOVER,id:null}]};case O.UPDATE_ITEM_COMMENT:{const i=e.items.map(e=>({...e,...e.id===t.id?{comment:t.comment}:{}}));return{model:{...e,items:i},effects:[{kind:I.PERSIST_STATE},{kind:I.RENDER_CONTENT,items:i}]}}case O.PORT_DISCONNECTED:return{model:{...e,status:"DISCONNECTED",selectionEnabled:!1},effects:[{kind:I.TOGGLE_SELECT_ON_CONTENT,enabled:!1}]};case O.SET_THEME:return{model:{...e,theme:t.theme},effects:[]};case O.UPDATE_THEME:return{model:{...e,theme:t.theme},effects:[{kind:I.UPDATE_THEME,theme:t.theme}]};case O.STORE_RELOAD_REQUESTED:return{model:e,effects:[{kind:I.READ_SCREEN_STATE_STORE}]};case O.STORE_RELOAD_SUCCEEDED:return{model:{...e,pageKeys:t.pageKeys},effects:[]};case O.REMOVE_SCREEN_STATE_BY_PAGE:return{model:e,effects:[{kind:I.REMOVE_SCREEN_STATE_STORE_BY_PAGE_KEY,pageKey:t.pageKey}]};default:return{model:e,effects:[]}}var i,s}(this.model,e);this.model=t,this.view.render(this.model),this.execEffects(i).catch(console.error)}async execEffects(e){if(e.some(e=>G.REQUIRES_CONN.has(e.kind))){const e=await this.ensureConnectionAlive();if(!e.ok||e.contextChanged)return}for(const t of e)switch(t.kind){case I.RENDER_CONTENT:await(this.conn?.api.render(t.items));break;case I.TOGGLE_SELECT_ON_CONTENT:await(this.conn?.api.toggleSelect(t.enabled));break;case I.CLEAR_CONTENT:await(this.conn?.api.clear());break;case I.HOVER:await(this.conn?.api.hover(t.id));break;case I.CLEAR_STATE:await _.set(this.model.pageKey,{items:this.model.items,nextId:1,defaultSize:this.model.defaultSize,defaultColor:this.model.defaultColor,defaultShape:this.model.defaultShape,defaultPosition:this.model.defaultPosition,defaultGroup:this.model.defaultGroup});break;case I.PERSIST_STATE:{const e=await _.get(this.model.pageKey);await _.set(this.model.pageKey,{...e,items:this.model.items,defaultSize:this.model.defaultSize,defaultColor:this.model.defaultColor,defaultShape:this.model.defaultShape,defaultPosition:this.model.defaultPosition,defaultGroup:this.model.defaultGroup});break}case I.SET_THEME:{const e=await g.get();this.dispatch({type:O.SET_THEME,theme:e});break}case I.UPDATE_THEME:await g.set(t.theme);break;case I.READ_SCREEN_STATE_STORE:{const e=await _.readAll(),t=Object.keys(e);this.dispatch({type:O.STORE_RELOAD_SUCCEEDED,pageKeys:t});break}case I.REMOVE_SCREEN_STATE_STORE_BY_PAGE_KEY:{await _.remove(t.pageKey);const e=await _.readAll(),i=Object.keys(e);this.dispatch({type:O.STORE_RELOAD_SUCCEEDED,pageKeys:i});const s=await _.get(this.model.pageKey);this.dispatch({type:O.RESTORE_STATE,state:{items:s.items,defaultSize:s.defaultSize,defaultColor:s.defaultColor,defaultShape:s.defaultShape,defaultPosition:s.defaultPosition,defaultGroup:s.defaultGroup}});break}case I.MEASURE_CONTENT_SIZE:await(this.conn?.api.measureSize());break;case I.CAPTURE:try{await w(t.payload),this.dispatch({type:O.CAPTURE_SUCCEEDED})}catch(e){this.dispatch({type:O.CAPTURE_FAILED,error:e})}break;case I.NOTIFY_ERROR:console.error(t.error)}}async ensureConnectionAlive(e){const t=this.model.pageKey;if(!0!==e?.forceReconnect&&void 0!==await(this.conn?.api.ping()))return{ok:!0,contextChanged:!1};const i=await async function(){return(await chrome.tabs.query({active:!0,currentWindow:!0}))[0]}();if(!i?.id||d(i.url))return this.dispatch({type:O.SET_STATUS,status:"RESTRICTED"}),{ok:!1};const s=function(e,t=!1){try{const i=new URL(e);return t?`${i.origin}${i.pathname}${i.search}${i.hash}`:`${i.origin}${i.pathname}${i.search}`}catch{return e}}(i.url),a=i.id;this.dispatch({type:O.CONNECTED,tabId:a,pageKey:s}),this.dispatch({type:O.SET_STATUS,status:"CONNECTING"});try{this.conn?.port.disconnect()}catch{}this.conn=await async function(e){await chrome.scripting.executeScript({target:{tabId:e},files:["content/main.js"]}).catch(()=>{});const t=chrome.tabs.connect(e,{name:b}),i=new y(t),s=new L(i),a=[];return t.onDisconnect.addListener(()=>a.forEach(e=>e())),{api:s,port:t,rpc:i,onDisconnect:e=>a.push(e),dispose:()=>{try{t.disconnect()}catch{}}}}(a),this.conn.onDisconnect(()=>this.dispatch({type:O.PORT_DISCONNECTED})),this.conn.port.onMessage.addListener(async e=>{if(e?.type===o){const t=await async function(e,t){const i=await _.get(e),s=Array.from(new Set(t.map(e=>e.value))).map(e=>t.find(t=>t.value===e)).filter(Boolean),a=[],n=[];for(const e of s){const t=i.items.find(t=>t.anchor.kind===e.kind&&t.anchor.value===e.value);t?a.push(t.id):n.push({anchor:e})}const o={};return a.length&&(o.removedIds=a),n.length&&(o.added=n),async function(e,t){const i=await _.get(e);if(t.removedIds?.length){const e=new Set(t.removedIds);i.items=i.items.filter(t=>!e.has(t.id))}if(t.added?.length)for(const e of t.added){const t={id:i.nextId++,label:1/0,anchor:e.anchor,size:i.defaultSize,color:i.defaultColor,shape:i.defaultShape,position:i.defaultPosition,group:i.defaultGroup};i.items.push(t)}return i.items=S(i.items),await _.set(e,i),i}(e,o)}(this.model.pageKey,e.payload.anchors);this.dispatch({type:O.RESTORE_STATE,state:{items:t.items,defaultSize:t.defaultSize,defaultColor:t.defaultColor,defaultShape:t.defaultShape,defaultPosition:t.defaultPosition,defaultGroup:t.defaultGroup}})}else e?.type===r?this.dispatch({type:O.SET_MISSING_IDS,missingIds:e.payload.missingIds}):e?.type===l&&this.dispatch({type:O.CAPTURE_REQUESTED,contentSize:e.payload})});const n=await _.get(s);return this.dispatch({type:O.RESTORE_STATE,state:{items:n.items,defaultSize:n.defaultSize,defaultColor:n.defaultColor,defaultShape:n.defaultShape,defaultPosition:n.defaultPosition,defaultGroup:n.defaultGroup}}),this.dispatch({type:O.SET_STATUS,status:A}),{ok:!0,contextChanged:!!t&&t!==s}}}const M={caretDown:{d:"M5.23 7.21a.75.75 0 011.06.02L10 10.939l3.71-3.71a.75.75 0 111.06 1.062L10.53 12.53a.75.75 0 01-1.06 0L5.23 8.27a.75.75 0 01.02-1.06z",viewBox:"0 0 20 20"},caretDownFill:{d:"M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z",viewBox:"0 0 16 16"},caretRight:{d:"M7.293 14.707a1 1 0 01-1.414-1.414L10.172 9 5.879 4.707a1 1 0 011.414-1.414l5 5a1 1 0 010 1.414l-5 5z",viewBox:"0 0 20 20"},caretRightFill:{d:"m12.14 8.753-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 0 1 1.659-.753l5.48 4.796a1 1 0 0 1 0 1.506z",viewBox:"0 0 16 16"},warn:{d:"M9.049 2.927a1.5 1.5 0 012.902 0l6.41 11.94A1.5 1.5 0 0117.01 17H2.99a1.5 1.5 0 01-1.351-2.133l6.41-11.94zM11 13a1 1 0 10-2 0 1 1 0 002 0zm-1-2a1 1 0 001-1V7a1 1 0 10-2 0v3a1 1 0 001 1z",viewBox:"0 0 20 20"},comment:{d:"M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H4.414a1 1 0 0 0-.707.293L.854 15.146A.5.5 0 0 1 0 14.793zm5 4a1 1 0 1 0-2 0 1 1 0 0 0 2 0m4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0m3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2",viewBox:"0 0 16 16"},remove:{d:"M7 3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v1h3a1 1 0 1 1 0 2h-1l-1 10a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2L5 6H4a1 1 0 1 1 0-2h3V3Zm1 3a1 1 0 0 0-1 1v8a1 1 0 1 0 2 0V7a1 1 0 0 0-1-1Zm4 0a1 1 0 0 0-1 1v8a1 1 0 1 0 2 0V7a1 1 0 0 0-1-1Z",viewBox:"0 0 20 20"}};function U(e){const{d:t,viewBox:i="0 0 20 20"}=M[e];return{d:t,viewBox:i}}function k(e,t){return e.label!==t.label?e.label-t.label:e.id-t.id}class B{doc;listeners={};els;NEW_GROUP="__newgroup__";HOVER_OUT_DELAY=1e3;dragEl=null;dragStartParent=null;dragStartIndex=-1;hoverOutTimer=null;collapsedGroups=new Set;constructor(e){this.doc=e,f.localize(e),this.els={status:this.$("#status"),toggleBtn:this.$("#toggle-select"),toggleIcon:this.$("#toggle-select-icon"),toggleLabel:this.$("#toggle-select-label"),clearBtn:this.$("#clear"),captureBtn:this.$("#capture"),list:this.$("#select-list"),empty:this.$("#select-empty"),count:this.$("#select-count"),captureOptionsToggle:this.$("#capture-options-toggle"),captureOptionsPanel:this.$("#capture-options"),captureFmtRadios:this.$all('input[name="capture-format"]'),captureAreaRadios:this.$all('input[name="capture-area"]'),jpegOnlyEls:this.$all(".jpeg-only"),jpegQualityRange:this.$("#jpeg-quality-range"),jpegQualityNumber:this.$("#jpeg-quality-number"),captureScaleRange:this.$("#capture-scale-range"),captureScaleNumber:this.$("#capture-scale-number"),badgeSizeRange:this.$("#badge-size-range"),badgeSizeNumber:this.$("#badge-size-number"),badgeColorButtons:this.$all("#badge-color-pop button"),badgeColorLabel:this.$("#badge-color-label"),badgeColorDot:this.$("#badge-color-dot"),badgeShapeSelect:this.$("#badge-shape-select"),badgeDeleteButton:this.$("#badge-delete-button"),badgePositionButtons:this.$all("#badge-position-pop button"),badgePositionLabel:this.$("#badge-position-label"),badgeGroupSelect:this.$("#badge-group-select"),groupNameModal:this.$("#group-name-modal"),groupNameInput:this.$("#group-name-input"),groupNameCancelBtn:this.$("#group-name-cancel-btn"),groupNameCreatelBtn:this.$("#group-name-create-btn"),itemCommentModal:this.$("#item-comment-modal"),itemCommentInput:this.$("#item-comment-input"),itemCommentIdInput:this.$("#item-comment-id-input"),itemCommentCancelBtn:this.$("#item-comment-cancel-btn"),itemCommentApplyBtn:this.$("#item-comment-apply-btn"),selectItemAllCheckbox:this.$('input[type="checkbox"][name="item-select"][value="all"]'),settingModal:this.$("#setting-modal"),settingButton:this.$("#setting-button"),settingCloseButton:this.$("#setting-close-btn"),themeLightBtn:this.$("#theme-light-btn"),themeDarkBtn:this.$("#theme-dark-btn"),themeDeviceBtn:this.$("#theme-device-btn"),storeCount:this.$("#store-count"),storeList:this.$("#store-list"),storeEmpty:this.$("#store-empty")},this.els.toggleBtn.addEventListener("click",()=>this.emit(P.TOGGLE_SELECT,void 0)),this.els.clearBtn.addEventListener("click",()=>this.emit(P.CLEAR,void 0)),this.els.captureBtn.addEventListener("click",()=>this.emit(P.CAPTURE,void 0)),this.els.captureOptionsToggle.addEventListener("click",()=>{this.emit(P.TOGGLE_CAPTURE_PANEL,void 0)}),this.els.captureFmtRadios.forEach(e=>e.addEventListener("change",()=>{this.updateQualityVisibility(),this.emit(P.CAPTURE_FORMAT_CHANGE,{format:this.getSelectedCaptureFormat()})})),this.els.captureAreaRadios.forEach(e=>e.addEventListener("change",()=>{this.emit(P.CAPTURE_AREA_CHANGE,{area:this.getSelectedCaptureArea()})})),this.bindSync(this.els.jpegQualityRange,this.els.jpegQualityNumber,e=>this.emit(P.CAPTURE_QUALITY_CHANGE,{quality:e})),this.bindSync(this.els.captureScaleRange,this.els.captureScaleNumber,e=>this.emit(P.CAPTURE_SCALE_CHANGE,{scale:e})),this.bindSync(this.els.badgeSizeRange,this.els.badgeSizeNumber);const t=()=>{const e=Number(this.els.badgeSizeNumber.value);Number.isFinite(e)&&this.emit(P.BADGE_SIZE_CHANGE,{size:e})};this.els.badgeSizeRange.addEventListener("change",t),this.els.badgeSizeNumber.addEventListener("change",t),this.els.badgeColorButtons.forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.colorName??"",i="string"==typeof(s=t)&&E.includes(s)?t:"Blue";var s;this.emit(P.BADGE_COLOR_SELECT,{color:i})})}),this.els.badgeShapeSelect.addEventListener("change",()=>{const e=this.els.badgeShapeSelect.value??null,t=function(e){return"string"==typeof e&&h.includes(e)}(e)?e:"circle";this.emit(P.BADGE_SHAPE_CHANGE,{shape:t})}),this.els.badgeDeleteButton.addEventListener("click",()=>{this.emit(P.BADGE_DELETE,void 0)}),this.els.badgePositionButtons.forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.positionName??"",i="string"==typeof(s=t)&&u.includes(s)?t:"left-top-outside";var s;this.emit(P.BADGE_POSITION_SELECT,{position:i})})}),this.els.badgeGroupSelect.addEventListener("change",()=>{const e=this.els.badgeGroupSelect.value??p,t=e===p?m:e;t===this.NEW_GROUP&&this.els.groupNameModal.classList.remove("hidden"),this.emit(P.SET_GROUP,{group:t})}),this.els.groupNameCancelBtn.addEventListener("click",()=>{this.els.groupNameModal.classList.add("hidden")}),this.els.groupNameCreatelBtn.addEventListener("click",()=>{const e=this.els.groupNameInput.value??p,t=e===p||e===this.NEW_GROUP?m:e;this.emit(P.SET_GROUP,{group:t}),this.els.groupNameModal.classList.add("hidden"),this.els.groupNameInput.value=""}),this.els.itemCommentCancelBtn.addEventListener("click",()=>{this.els.itemCommentModal.classList.add("hidden")}),this.els.itemCommentApplyBtn.addEventListener("click",()=>{const e=this.els.itemCommentInput.value,t=Number(this.els.itemCommentIdInput.value);this.emit(P.ITEM_COMMENT_APPLY,{id:t,comment:e}),this.els.itemCommentModal.classList.add("hidden")}),this.els.settingButton.addEventListener("click",()=>{this.els.settingModal.classList.remove("hidden"),this.emit(P.SETTING_MODAL_SHOW,void 0)}),this.els.settingCloseButton.addEventListener("click",()=>{this.els.settingModal.classList.add("hidden")}),this.els.themeLightBtn.addEventListener("click",()=>{this.applyTheme("light"),this.emit(P.UPDATE_THEME,{theme:"light"})}),this.els.themeDarkBtn.addEventListener("click",()=>{this.applyTheme("dark"),this.emit(P.UPDATE_THEME,{theme:"dark"})}),this.els.themeDeviceBtn.addEventListener("click",()=>{this.applyTheme("device"),this.emit(P.UPDATE_THEME,{theme:"device"})}),this.updateQualityVisibility(),this.els.selectItemAllCheckbox.addEventListener("change",e=>{const t=e.target.checked;this.emit(P.ITEM_SELECTION_CHANGED,{allCheck:t})}),this.els.list.addEventListener("pointerenter",()=>this.cancelHoverOut()),this.els.list.addEventListener("pointerleave",()=>this.scheduleHoverOut()),e.addEventListener("pointerleave",()=>{this.cancelHoverOut(),this.emit(P.ITEM_HOVER_OUT,void 0)})}on(e,t){(this.listeners[e]??=[]).push(t)}emit(e,t){const i=this.listeners[e];i?.forEach(e=>e(t))}render(e){this.renderStatus(e.status),this.renderToggle(e.selectionEnabled),this.renderList(e.items,e.selectItems,e.missingIds),this.selectRadioByValue(this.els.captureFmtRadios,e.capture.format),this.selectRadioByValue(this.els.captureAreaRadios,e.capture.area),this.els.jpegQualityNumber.value=String(e.capture.quality),this.els.jpegQualityRange.value=String(e.capture.quality),this.els.captureScaleNumber.value=String(e.capture.scale),this.els.captureScaleRange.value=String(e.capture.scale),this.updateQualityVisibility(e.capture.format),this.applyCaptureOptionsToggleUI(e.capture.panelExpanded),this.els.badgeSizeNumber.value=String(e.defaultSize),this.els.badgeSizeRange.value=String(e.defaultSize),this.applyBadgeColorUI(e.defaultColor),this.els.badgeShapeSelect.value=e.defaultShape,this.applyBadgePositonUI(e.defaultPosition),this.applyBadgeGroupSelectUI(this.getExistingGroups(e.items),e.defaultGroup),this.applyTheme(e.theme),this.applyStore(e.pageKeys)}renderStatus(e){const t=N[e],i=this.els.status;i.className="",i.classList.add("connect-status",...t.body);const s=this.doc.createElement("span");s.classList.add("connect-status-dot",...t.dot);const a=this.doc.createElement("span");a.textContent=function(e){const t=R[e];return f.get(t)||t}(e),i.replaceChildren(s,a),this.disableFormControls(e!==A)}renderToggle(e){const t=this.els.toggleIcon;t.className="",t.classList.add("select-toggle-icon",e?"bg-indigo-500":"bg-slate-300"),this.els.toggleLabel.textContent=f.get(e?"toggle_on":"toggle_off")}renderList(e,t,i){this.els.count.textContent=String(e.length);const s=0!==e.length&&e.every(e=>t.includes(e.id));if(this.els.selectItemAllCheckbox.checked=s,!e.length)return this.els.empty.classList.remove("hidden"),void this.els.list.replaceChildren();this.els.empty.classList.add("hidden");const a=this.groupByGroup(e),n=Array.from(a.keys()).sort((e,t)=>e===p?-1:t===p?1:e.localeCompare(t)),o=this.doc.createDocumentFragment();for(const e of n){const s=this.renderGroupSection(e,a.get(e),t,i);o.appendChild(s)}this.els.list.replaceChildren(o)}renderGroupSection(e,t,i,s){const a=this.collapsedGroups.has(e),n=this.el("section","select-item-section"),o=this.el("div","select-item-header"),r=this.el("div","spsk-checkwrap"),l=this.el("input","spsk-checkbox spsk-checkbox--normal");l.type="checkbox",l.name="item-select",l.value=e===p?f.get("group_ungrouped"):e,l.checked=t.every(e=>i.includes(e.id)),l.addEventListener("change",t=>{const i=t.target.checked;this.emit(P.ITEM_SELECTION_CHANGED,{group:e===p?m:e,isCheck:i})}),r.append(l);const c=this.el("span","select-item-gh-title",e===p?f.get("group_ungrouped"):e),d=this.el("div","select-item-gh-left");d.append(r,c);const E=this.el("span","select-item-gh-count",String(t.length)),h=this.el("button","select-item-gh-toggle");h.type="button",h.setAttribute("aria-expanded",String(!a));const{d:u,viewBox:T}=U(a?"caretRight":"caretDown"),_=this.createSvgIcon(u,{className:"icon-sm",viewBox:T}),g=_.querySelector("path");h.append(_),o.append(d,E,h);const S=this.el("ul","select-item-list");a&&S.classList.add("hidden"),this.attachUlDnDHandlers(S);for(const e of t.sort(k)){const t=i.includes(e.id);S.appendChild(this.renderItem(e,t,s))}return h.addEventListener("click",()=>{this.collapsedGroups.has(e)?(this.collapsedGroups.delete(e),S.classList.remove("hidden"),g.setAttribute("d",U("caretDown").d),h.setAttribute("aria-expanded","true")):(this.collapsedGroups.add(e),S.classList.add("hidden"),g.setAttribute("d",U("caretRight").d),h.setAttribute("aria-expanded","false"))}),n.append(o,S),n}renderItem(e,t,i){const s=i.includes(e.id),a="select-item",n=this.el("li",s?`group ${a} select-item--warn`:a);n.dataset.id=String(e.id),n.draggable=!0,n.addEventListener("dragstart",e=>{this.dragEl=n,this.dragStartParent=n.parentElement,this.dragStartIndex=Array.prototype.indexOf.call(n.parentElement?.children??[],n),e.dataTransfer&&(e.dataTransfer.effectAllowed="move"),n.classList.add("opacity-60")}),n.addEventListener("dragend",()=>{if(!this.dragEl)return;const e=this.dragEl.parentElement,t=e?Array.prototype.indexOf.call(e.children,this.dragEl):-1;this.dragEl.classList.remove("opacity-60");const i=this.dragEl.dataset.id??"";this.dragEl=null,i&&this.dragStartIndex>=0&&t>=0&&t!==this.dragStartIndex&&this.emit(P.REORDER_ITEMS,{fromId:Number(i),fromIndex:this.dragStartIndex,toIndex:t}),this.dragStartIndex=-1,this.dragStartParent=null});const o=this.el("div","spsk-checkwrap"),r=s?"spsk-checkbox spsk-checkbox--warn":"spsk-checkbox spsk-checkbox--normal",l=this.el("input",r);l.type="checkbox",l.name="item-select",l.value=String(e.id),l.checked=t,l.addEventListener("change",t=>{const i=t.target.checked;this.emit(P.ITEM_SELECTION_CHANGED,{id:e.id,isCheck:i})}),o.append(l);const c=s?"spsk-badge spsk-badge--warn":"spsk-badge spsk-badge--norm",d=this.el("span",c,String(e.label)),E=this.el("div","min-w-0 flex-1");if(E.addEventListener("pointerenter",()=>{this.dragStartParent||s||(this.cancelHoverOut(),this.emit(P.ITEM_HOVER_IN,{id:e.id}))}),s){const e=this.el("span","chip-warn"),{d:t,viewBox:i}=U("warn"),s=this.createSvgIcon(t,{className:"h-3.5 w-3.5",viewBox:i}),a=this.el("span",void 0,f.get("missing_item"));e.append(s,a),E.append(e)}const h=this.el("div","anchor",e.anchor.value);E.append(h);const u=this.generateCommentBtn(e);return n.append(o,d,E,u),n}generateCommentBtn(e){const t=document.createElement("button");t.className="btn-icon";const{d:i,viewBox:s}=U("comment"),a=this.createSvgIcon(i,{className:"h-3.5 w-3.5",viewBox:s});return t.appendChild(a),t.addEventListener("click",()=>{this.els.itemCommentModal.classList.remove("hidden"),this.els.itemCommentInput.value=e.comment??"",this.els.itemCommentIdInput.value=String(e.id)}),t}scheduleHoverOut(){this.hoverOutTimer&&clearTimeout(this.hoverOutTimer),this.dragStartParent||(this.hoverOutTimer=setTimeout(()=>{this.hoverOutTimer=null,this.emit(P.ITEM_HOVER_OUT,void 0)},this.HOVER_OUT_DELAY))}cancelHoverOut(){this.hoverOutTimer&&(clearTimeout(this.hoverOutTimer),this.hoverOutTimer=null)}attachUlDnDHandlers(e){e.addEventListener("dragover",t=>{if(t.preventDefault(),!this.dragEl)return;if(this.dragStartParent&&e!==this.dragStartParent)return;const i=t.target?.closest("li");if(i&&i!==this.dragEl){const s=i.getBoundingClientRect(),a=t.clientY-s.top>s.height/2;e.insertBefore(this.dragEl,a?i.nextSibling:i)}else i||e.appendChild(this.dragEl)}),e.addEventListener("drop",e=>e.preventDefault())}getExistingGroups(e){return Array.from(new Set(e.map(e=>(e.group??"").trim()).filter(e=>e.length>0))).sort((e,t)=>e.localeCompare(t))}groupByGroup(e){const t=new Map;for(const i of e){const e=(i.group??m).trim()||p;t.has(e)||t.set(e,[]),t.get(e).push(i)}return t}getSelectedCaptureFormat(){const e=this.doc.querySelector('input[name="capture-format"]:checked')?.value;return"jpeg"===e?"jpeg":"png"}getSelectedCaptureArea(){const e=this.doc.querySelector('input[name="capture-area"]:checked')?.value;return"viewport"===e?"viewport":"full"}updateQualityVisibility(e){const t="jpeg"===(e??this.getSelectedCaptureFormat());this.els.jpegOnlyEls.forEach(e=>e.classList.toggle("hidden",!t)),this.els.jpegQualityRange.disabled=!t,this.els.jpegQualityNumber.disabled=!t}selectRadioByValue(e,t){e.forEach(e=>e.checked=e.value===t)}bindSync(e,t,i){const s=(e,t)=>{const i=null!=e&&""!==e?Number(e):NaN;return Number.isFinite(i)?i:t},a=a=>{const n=s(t.min||e.min,Number.NEGATIVE_INFINITY),o=s(t.max||e.max,Number.POSITIVE_INFINITY),r=s(t.step||e.step,1),l=Number(a),c=((e,t,i)=>Math.min(Math.max(e,t),i))(Number.isFinite(l)?l:0,n,o),d=Math.round(c/r)*r,E=Number(d.toFixed(6));t.value=String(E),e.value=String(E),i?.(E)};e.addEventListener("input",()=>a(e.value)),t.addEventListener("input",()=>a(t.value))}disableFormControls(e){this.doc.querySelectorAll("button, select, input, textarea").forEach(t=>{t.hasAttribute("data-ignore-disable")||"disabled"in t&&(t.disabled=e)})}applyCaptureOptionsToggleUI(e){this.els.captureOptionsToggle.setAttribute("aria-expanded",String(e));const{d:t,viewBox:i}=U(e?"caretDownFill":"caretRightFill");this.els.captureOptionsToggle.innerHTML="",this.els.captureOptionsToggle.appendChild(this.createSvgIcon(t,{viewBox:i,className:"h-4 w-4"})),this.els.captureOptionsPanel.classList.toggle("hidden",!e)}getBadgeColorStyleName(e){return`bg-${("Gray"===e?"slate":e).toLowerCase()}-500`}applyBadgeColorUI(e){this.els.badgeColorButtons.forEach(t=>{const i=t.dataset.colorName===e;t.setAttribute("aria-selected",i?"true":"false")}),this.els.badgeColorLabel.textContent=e,this.els.badgeColorDot.className="inline-block w-4 h-4 rounded-full",this.els.badgeColorDot.classList.add(this.getBadgeColorStyleName(e))}applyBadgePositonUI(e){this.els.badgePositionButtons.forEach(t=>{const i=t.dataset.positionName===e;t.setAttribute("data-selected",i?"true":"false")}),this.els.badgePositionLabel.textContent=e.replaceAll("-"," ")}applyBadgeGroupSelectUI(e,t){this.els.badgeGroupSelect.innerHTML="",this.els.badgeGroupSelect.append(this.makeOpt(p,f.get("group_ungrouped"),t===p));for(const i of e){const e=(e=>(e??"").trim())(i);this.els.badgeGroupSelect.append(this.makeOpt(e,i,t===i))}const i=this.makeOpt(this.NEW_GROUP,f.get("common_create"));this.els.badgeGroupSelect.append(i)}applyTheme(e){const t=document.documentElement;("device"===e?window.matchMedia("(prefers-color-scheme: dark)").matches:"dark"===e)?t.classList.add("dark"):t.classList.remove("dark"),this.els.themeLightBtn.setAttribute("data-active",String("light"===e)),this.els.themeDarkBtn.setAttribute("data-active",String("dark"===e)),this.els.themeDeviceBtn.setAttribute("data-active",String("device"===e))}applyStore(e){if(this.els.storeCount.textContent=String(e.length),this.els.storeList.innerHTML="",e.length<=0)return this.els.storeList.classList.add("hidden"),void this.els.storeEmpty.classList.remove("hidden");for(const t of e){const e=this.el("li","select-item"),i=this.el("div","min-w-0 flex-1"),s=this.el("a","anchor whitespace-normal break-words",t);s.href=t,s.target="_blank",i.appendChild(s);const a=this.el("button","btn-icon btn-icon--danger");a.setAttribute("data-ignore-disable","true");const{d:n,viewBox:o}=U("remove"),r=this.createSvgIcon(n,{className:"icon-sm",viewBox:o});a.appendChild(r),e.appendChild(i),e.appendChild(a),this.els.storeList.appendChild(e),a.addEventListener("click",()=>{this.emit(P.REMOVE_PAGE_CLICK,{pageKey:t})})}this.els.storeList.classList.remove("hidden"),this.els.storeEmpty.classList.add("hidden")}$(e){const t=this.doc.querySelector(e);if(!t)throw new Error(`[PanelView] Missing element: ${e}`);return t}$all(e){return this.doc.querySelectorAll(e)}el(e,t,i){const s=this.doc.createElement(e);return t&&(s.className=t),void 0!==i&&(s.textContent=i),s}makeOpt(e,t,i=!1){const s=this.doc.createElement("option");return s.value=e,s.textContent=t,i&&(s.selected=!0),s}createSvgIcon(e,t={}){const i="http://www.w3.org/2000/svg",s=document.createElementNS(i,"svg");if(s.setAttribute("viewBox",t.viewBox??"0 0 20 20"),s.setAttribute("class",t.className??"h-3.5 w-3.5"),s.setAttribute("fill","currentColor"),s.setAttribute("aria-hidden","true"),t.attrs)for(const[e,i]of Object.entries(t.attrs))s.setAttribute(e,i);const a=document.createElementNS(i,"path");return a.setAttribute("d",e),s.appendChild(a),s}}async function x(){const e=new B(document),t=new G(e);await t.start()}"complete"===document.readyState||"interactive"===document.readyState?x().catch(e=>{console.error("Panel bootstrap failed:",e)}):document.addEventListener("DOMContentLoaded",()=>{x().catch(e=>{console.error("Panel bootstrap failed:",e)})},{once:!0})})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUF4QnpnQixTQUFTeWdCLFdBQzFDL1csSUFBUWlHLE1BQU9sTCxJQUNoQk0sUUFBUXZCLE1BQU0sMEJBQTJCaUIsS0FJN0N6RSxTQUFTZ1gsaUJBQWlCLG1CQUFvQixLQUFXdE4sSUFBUWlHLE1BQU9sTCxJQUNwRU0sUUFBUXZCLE1BQU0sMEJBQTJCaUIsTUFDekMsQ0FDQWljLE1BQU0sRyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2NvbW1vbi9tZXNzYWdlcy50cyIsIndlYnBhY2s6Ly8vLi9jb21tb24vdXJsLnRzIiwid2VicGFjazovLy8uL2NvbW1vbi90eXBlcy50cyIsIndlYnBhY2s6Ly8vLi9ydW50aW1lL3BhbmVsL2FwcC9tb2RlbC50cyIsIndlYnBhY2s6Ly8vLi9ydW50aW1lL3BhbmVsL3N0b3JhZ2UvdGFibGVzLnRzIiwid2VicGFjazovLy8uL3J1bnRpbWUvcGFuZWwvc2VydmljZXMvc3RhdGUudHMiLCJ3ZWJwYWNrOi8vLy4vY29tbW9uL2kxOG4udHMiLCJ3ZWJwYWNrOi8vLy4vcnVudGltZS9wYW5lbC92aWV3L3N0YXR1cy50cyIsIndlYnBhY2s6Ly8vLi9ydW50aW1lL3BhbmVsL3R5cGVzL2FjdGlvbl90eXBlcy50cyIsIndlYnBhY2s6Ly8vLi9ydW50aW1lL3BhbmVsL3R5cGVzL2VmZmVjdF90eXBlcy50cyIsIndlYnBhY2s6Ly8vLi9jb21tb24vY29uc3RhbnRzLnRzIiwid2VicGFjazovLy8uL3J1bnRpbWUvcGFuZWwvbWVzc2FnaW5nL2FwaS50cyIsIndlYnBhY2s6Ly8vLi9ydW50aW1lL3BhbmVsL21lc3NhZ2luZy9wb3J0X3JwYy50cyIsIndlYnBhY2s6Ly8vLi9pbmZyYS9jZHAvY2RwX2NsaWVudC50cyIsIndlYnBhY2s6Ly8vLi9ydW50aW1lL3BhbmVsL3NlcnZpY2VzL2NhcHR1cmUudHMiLCJ3ZWJwYWNrOi8vLy4vcnVudGltZS9wYW5lbC90eXBlcy91aV9ldmVudF90eXBlcy50cyIsIndlYnBhY2s6Ly8vLi9ydW50aW1lL3BhbmVsL2NvbnRyb2xsZXIvcGFuZWxfY29udHJvbGxlci50cyIsIndlYnBhY2s6Ly8vLi9ydW50aW1lL3BhbmVsL2FwcC91cGRhdGUudHMiLCJ3ZWJwYWNrOi8vLy4vaW5mcmEvY2hyb21lL3RhYnMudHMiLCJ3ZWJwYWNrOi8vLy4vcnVudGltZS9wYW5lbC9tZXNzYWdpbmcvY29ubmVjdGlvbi50cyIsIndlYnBhY2s6Ly8vLi9jb21tb24vaWNvbnMudHMiLCJ3ZWJwYWNrOi8vLy4vcnVudGltZS9wYW5lbC92aWV3L3BhbmVsX3ZpZXcudHMiLCJ3ZWJwYWNrOi8vLy4vcnVudGltZS9wYW5lbC9hcHAvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgUDJDID0ge1xuICAgIFBJTkc6ICdQSU5HJyxcbiAgICBUT0dHTEVfU0VMRUNUOiAnVE9HR0xFX1NFTEVDVCcsXG4gICAgUkVOREVSOiAnUkVOREVSJyxcbiAgICBDTEVBUjogJ0NMRUFSJyxcbiAgICBIT1ZFUjogJ0hPVkVSJyxcbiAgICBNRUFTVVJFX1NJWkU6ICdNRUFTVVJFX1NJWkUnLFxufTtcbmNvbnN0IEMyUCA9IHtcbiAgICBTRUxFQ1RFRDogJ1NFTEVDVEVEJyxcbiAgICBNSVNTSU5HX0lEUzogJ01JU1NJTkdfSURTJyxcbiAgICBDT05URU5UX1NJWkVfUkVTVUxUOiAnQ09OVEVOVF9TSVpFX1JFU1VMVCcsXG59O1xuY29uc3QgQjJQID0ge1xuICAgIEFDVElWRV9UQUJfQ0hBTkdFRDogJ0FDVElWRV9UQUJfQ0hBTkdFRCcsXG59O1xuZXhwb3J0IGNvbnN0IE1TR19UWVBFID0geyAuLi5QMkMsIC4uLkMyUCwgLi4uQjJQIH07XG5leHBvcnQgZnVuY3Rpb24gaXNSZXNwb25zZShtc2cpIHtcbiAgICByZXR1cm4gdHlwZW9mIG1zZyA9PT0gJ29iamVjdCcgJiYgbXNnICE9PSBudWxsICYmICdpZCcgaW4gbXNnICYmICdvaycgaW4gbXNnO1xufVxuIiwiLyoqXG4gKiBCdWlsZHMgYSBwYWdlIGtleSBmcm9tIGEgVVJMLiBCeSBkZWZhdWx0IGV4Y2x1ZGVzIHRoZSBoYXNoIGFuZCB1c2VzXG4gKiBvcmlnaW4gKyBwYXRobmFtZSArIHNlYXJjaC5cbiAqXG4gKiBAcGFyYW0gdXJsIC0gSW5wdXQgVVJMIChyZXR1cm5lZCBhcy1pcyBpZiBpbnZhbGlkKVxuICogQHBhcmFtIGluY2x1ZGVIYXNoIC0gV2hldGhlciB0byBpbmNsdWRlIHRoZSBoYXNoIChkZWZhdWx0OiBmYWxzZSlcbiAqIEByZXR1cm5zIFBhZ2Uga2V5IHN0cmluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gcGFnZUtleSh1cmwsIGluY2x1ZGVIYXNoID0gZmFsc2UpIHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB1ID0gbmV3IFVSTCh1cmwpO1xuICAgICAgICByZXR1cm4gaW5jbHVkZUhhc2hcbiAgICAgICAgICAgID8gYCR7dS5vcmlnaW59JHt1LnBhdGhuYW1lfSR7dS5zZWFyY2h9JHt1Lmhhc2h9YFxuICAgICAgICAgICAgOiBgJHt1Lm9yaWdpbn0ke3UucGF0aG5hbWV9JHt1LnNlYXJjaH1gO1xuICAgIH1cbiAgICBjYXRjaCB7XG4gICAgICAgIHJldHVybiB1cmw7XG4gICAgfVxufVxuLyoqXG4gKiBEZXRlcm1pbmVzIHdoZXRoZXIgYSBVUkwgc2hvdWxkIGJlIGV4Y2x1ZGVkIGZyb20gZXh0ZW5zaW9uIG9wZXJhdGlvbi5cbiAqXG4gKiBVbnBhcnNlYWJsZS91bmtub3duIHNjaGVtZXMgYXJlIHRyZWF0ZWQgYXMgcmVzdHJpY3RlZC5cbiAqIE5vbi13ZWIgc2NoZW1lcyAoZS5nLiwgdmlldy1zb3VyY2U6LCBkYXRhOiwgYmxvYjosIGZpbGVzeXN0ZW06KSBhcmUgYmxvY2tlZCBlYXJseS5cbiAqIENocm9tZSBXZWIgU3RvcmUgcGFnZXMgYXJlIGFsd2F5cyBleGNsdWRlZCAoY29udGVudCBzY3JpcHRzIGFyZSBub3QgYWxsb3dlZCB0aGVyZSkuXG4gKlxuICogQHBhcmFtIHJhdyAtIFVSTCBzdHJpbmcgdG8gZXZhbHVhdGUuXG4gKiBAcmV0dXJucyBgdHJ1ZWAgaWYgdGhlIFVSTCBzaG91bGQgYmUgc2tpcHBlZCBieSB0aGUgZXh0ZW5zaW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNSZXN0cmljdGVkKHJhdykge1xuICAgIGlmICghcmF3KVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICBpZiAocmF3LnN0YXJ0c1dpdGgoJ3ZpZXctc291cmNlOicpIHx8XG4gICAgICAgIHJhdy5zdGFydHNXaXRoKCdkYXRhOicpIHx8XG4gICAgICAgIHJhdy5zdGFydHNXaXRoKCdibG9iOicpIHx8XG4gICAgICAgIHJhdy5zdGFydHNXaXRoKCdmaWxlc3lzdGVtOicpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBsZXQgdXJsO1xuICAgIHRyeSB7XG4gICAgICAgIHVybCA9IG5ldyBVUkwocmF3KTtcbiAgICB9XG4gICAgY2F0Y2gge1xuICAgICAgICAvLyBJbnZhbGlkIG9yIG5vbi1zdGFuZGFyZCBVUkwg4oaSIHNraXAgZm9yIHNhZmV0eS5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8vIEFsbG93LWxpc3QgcG9saWN5OiBvbmx5IG9wZXJhdGUgb24gdHlwaWNhbCB3ZWIgcGFnZXMuXG4gICAgY29uc3QgYWxsb3dlZCA9IG5ldyBTZXQoWydodHRwOicsICdodHRwczonLCAnZmlsZTonXSk7XG4gICAgaWYgKCFhbGxvd2VkLmhhcyh1cmwucHJvdG9jb2wpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvLyBDaHJvbWUgV2ViIFN0b3JlIChjdXJyZW50IGFuZCBsZWdhY3kgaG9zdCkg4oCUIGNvbnRlbnQgc2NyaXB0cyBhcmUgZGlzYWxsb3dlZCBieSBwbGF0Zm9ybSBwb2xpY3kuXG4gICAgY29uc3Qgd2ViU3RvcmVIb3N0cyA9IG5ldyBTZXQoWydjaHJvbWV3ZWJzdG9yZS5nb29nbGUuY29tJywgJ2Nocm9tZS5nb29nbGUuY29tJ10pO1xuICAgIGlmICh3ZWJTdG9yZUhvc3RzLmhhcyh1cmwuaG9zdG5hbWUpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG4iLCJjb25zdCBJVEVNX0NPTE9SUyA9IFtcbiAgICAnR3JheScsXG4gICAgJ1JlZCcsXG4gICAgJ1llbGxvdycsXG4gICAgJ0dyZWVuJyxcbiAgICAnQmx1ZScsXG4gICAgJ0xpbWUnLFxuICAgICdQdXJwbGUnLFxuICAgICdQaW5rJyxcbiAgICAnT3JhbmdlJyxcbiAgICAnQ3lhbicsXG5dO1xuZXhwb3J0IGZ1bmN0aW9uIGlzSXRlbUNvbG9yKHYpIHtcbiAgICByZXR1cm4gdHlwZW9mIHYgPT09ICdzdHJpbmcnICYmIElURU1fQ09MT1JTLmluY2x1ZGVzKHYpO1xufVxuY29uc3QgSVRFTV9TSEFQRSA9IFsnY2lyY2xlJywgJ3NxdWFyZSddO1xuZXhwb3J0IGZ1bmN0aW9uIGlzSXRlbVNoYXBlKHYpIHtcbiAgICByZXR1cm4gdHlwZW9mIHYgPT09ICdzdHJpbmcnICYmIElURU1fU0hBUEUuaW5jbHVkZXModik7XG59XG5leHBvcnQgY29uc3QgSVRFTV9QT1NJVElPTl9WQUxVRVMgPSBbXG4gICAgJ3JpZ2h0LXRvcC1vdXRzaWRlJyxcbiAgICAncmlnaHQtdG9wLWluc2lkZScsXG4gICAgJ3JpZ2h0LW91dHNpZGUnLFxuICAgICdyaWdodC1pbnNpZGUnLFxuICAgICdyaWdodC1ib3R0b20tb3V0c2lkZScsXG4gICAgJ3JpZ2h0LWJvdHRvbS1pbnNpZGUnLFxuICAgICd0b3Atb3V0c2lkZScsXG4gICAgJ3RvcC1pbnNpZGUnLFxuICAgICdjZW50ZXInLFxuICAgICdib3R0b20tb3V0c2lkZScsXG4gICAgJ2JvdHRvbS1pbnNpZGUnLFxuICAgICdsZWZ0LXRvcC1vdXRzaWRlJyxcbiAgICAnbGVmdC10b3AtaW5zaWRlJyxcbiAgICAnbGVmdC1vdXRzaWRlJyxcbiAgICAnbGVmdC1pbnNpZGUnLFxuICAgICdsZWZ0LWJvdHRvbS1vdXRzaWRlJyxcbiAgICAnbGVmdC1ib3R0b20taW5zaWRlJyxcbl07XG5leHBvcnQgZnVuY3Rpb24gaXNJdGVtUG9zaXRpb24odikge1xuICAgIHJldHVybiB0eXBlb2YgdiA9PT0gJ3N0cmluZycgJiYgSVRFTV9QT1NJVElPTl9WQUxVRVMuaW5jbHVkZXModik7XG59XG5leHBvcnQgY29uc3QgVU5HUk9VUEVEID0gJ19fdW5ncm91cGVkX18nO1xuZXhwb3J0IGNvbnN0IFVOR1JPVVBFRF9WQUxVRSA9ICcnO1xuIiwiaW1wb3J0IHsgVU5HUk9VUEVEX1ZBTFVFLCB9IGZyb20gJ0Bjb21tb24vdHlwZXMnO1xuZXhwb3J0IGNvbnN0IGluaXRpYWxNb2RlbCA9IHtcbiAgICBzdGF0dXM6ICdESVNDT05ORUNURUQnLFxuICAgIHRhYklkOiBudWxsLFxuICAgIHBhZ2VLZXk6ICcnLFxuICAgIHBhZ2VLZXlzOiBbXSxcbiAgICB0aGVtZTogJ2RldmljZScsXG4gICAgc2VsZWN0aW9uRW5hYmxlZDogZmFsc2UsXG4gICAgaXRlbXM6IFtdLFxuICAgIGRlZmF1bHRTaXplOiAxNCxcbiAgICBkZWZhdWx0Q29sb3I6ICdCbHVlJyxcbiAgICBkZWZhdWx0U2hhcGU6ICdjaXJjbGUnLFxuICAgIGRlZmF1bHRQb3NpdGlvbjogJ2xlZnQtdG9wLW91dHNpZGUnLFxuICAgIGRlZmF1bHRHcm91cDogVU5HUk9VUEVEX1ZBTFVFLFxuICAgIGNhcHR1cmU6IHtcbiAgICAgICAgZm9ybWF0OiAncG5nJyxcbiAgICAgICAgYXJlYTogJ2Z1bGwnLFxuICAgICAgICBxdWFsaXR5OiA5MCxcbiAgICAgICAgc2NhbGU6IDEsXG4gICAgICAgIHBhbmVsRXhwYW5kZWQ6IGZhbHNlLFxuICAgIH0sXG4gICAgc2VsZWN0SXRlbXM6IFtdLFxuICAgIG1pc3NpbmdJZHM6IFtdLFxufTtcbiIsImltcG9ydCB7IFVOR1JPVVBFRF9WQUxVRSB9IGZyb20gJ0Bjb21tb24vdHlwZXMnO1xuLyoqXG4gKiBDcmVhdGVzIGEga2V5LXNjb3BlZCDigJxtYXAgdGFibGXigJ0gdGhhdCBzdG9yZXMgYSByZWNvcmQgYHsgW3BhZ2VLZXldOiBUIH1gXG4gKiB1bmRlciBhIHNpbmdsZSByb290IGtleSBpbiBgY2hyb21lLnN0b3JhZ2UubG9jYWxgLlxuICpcbiAqIFVzZSB0aGlzIGZvciBwZXItcGFnZSBvciBwZXItc2NvcGUgc3RhdGUgd2hlcmUgdmFsdWVzIGFyZSBkaXN0aW5ndWlzaGVkIGJ5IGEgcm93IGtleS5cbiAqXG4gKiBAdHlwZVBhcmFtIFQgLSBWYWx1ZSB0eXBlIHN0b3JlZCBwZXIgcm93LlxuICogQHBhcmFtIHJvb3RLZXkgLSBSb290IGtleSAod2l0aG91dCBuYW1lc3BhY2UgcHJlZml4KSB1bmRlciB3aGljaCB0aGUgZW50aXJlIG1hcCBpcyBzdG9yZWQuXG4gKiBAcGFyYW0gZGVmYXVsdE9mIC0gT3B0aW9uYWwgZmFjdG9yeSB0aGF0IHJldHVybnMgYSBkZWZhdWx0IHZhbHVlIHdoZW4gYSByb3cgaXMgbWlzc2luZy5cbiAqIEByZXR1cm5zIEFuIG9iamVjdCB3aXRoIENSVUQgaGVscGVycyBmb3IgdGhlIHRhYmxlOiBgeyBrZXksIHJlYWRBbGwsIHdyaXRlQWxsLCBnZXQsIHNldCwgcmVtb3ZlLCBjbGVhciB9YC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU1hcFRhYmxlKHJvb3RLZXksIGRlZmF1bHRPZikge1xuICAgIGNvbnN0IEtFWSA9IHJvb3RLZXk7XG4gICAgLyoqXG4gICAgICogTG9hZHMgdGhlIGVudGlyZSBzdGF0ZSBtYXAgZnJvbSBgY2hyb21lLnN0b3JhZ2UubG9jYWxgIGZvciB0aGlzIHRhYmxlLlxuICAgICAqXG4gICAgICogQHJldHVybnMgUHJvbWlzZSByZXNvbHZpbmcgdG8gdGhlIGZ1bGwgc3RhdGUgbWFwOyByZXR1cm5zIGFuIGVtcHR5IG9iamVjdCB3aGVuIG5vdGhpbmcgaXMgc3RvcmVkLlxuICAgICAqIEByZW1hcmtzIFBlcmZvcm1zIHN0b3JhZ2UgSS9PIG9uIGV2ZXJ5IGNhbGwuXG4gICAgICovXG4gICAgYXN5bmMgZnVuY3Rpb24gcmVhZEFsbCgpIHtcbiAgICAgICAgY29uc3QgcmF3ID0gYXdhaXQgY2hyb21lLnN0b3JhZ2UubG9jYWwuZ2V0KEtFWSk7XG4gICAgICAgIHJldHVybiByYXdbS0VZXSA/PyB7fTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGVyc2lzdHMgdGhlIGVudGlyZSBzdGF0ZSBtYXAgdG8gYGNocm9tZS5zdG9yYWdlLmxvY2FsYCBmb3IgdGhpcyB0YWJsZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBtYXAgLSBUaGUgY29tcGxldGUgc3RhdGUgbWFwIHRvIHdyaXRlLlxuICAgICAqIEByZXR1cm5zIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHRoZSB3cml0ZSBjb21wbGV0ZXMuXG4gICAgICovXG4gICAgYXN5bmMgZnVuY3Rpb24gd3JpdGVBbGwobWFwKSB7XG4gICAgICAgIGF3YWl0IGNocm9tZS5zdG9yYWdlLmxvY2FsLnNldCh7IFtLRVldOiBtYXAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyBhIHNpbmdsZSByb3cgYnkgaXRzIHBhZ2Uga2V5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHBhZ2VLZXkgLSBSb3cga2V5IChlLmcuLCBwYWdlIGlkZW50aWZpZXIpLlxuICAgICAqIEByZXR1cm5zIFByb21pc2UgcmVzb2x2aW5nIHRvIHRoZSBzdG9yZWQgdmFsdWU7IGlmIG1pc3NpbmcgYW5kIGBkZWZhdWx0T2ZgIGlzIHByb3ZpZGVkLCB0aGF0IGRlZmF1bHQgaXMgcmV0dXJuZWQuXG4gICAgICogQHJlbWFya3MgV2hlbiBgZGVmYXVsdE9mYCBpcyBub3QgcHJvdmlkZWQgYW5kIHRoZSByb3cgaXMgbWlzc2luZywgYHVuZGVmaW5lZGAgaXMgcmV0dXJuZWQgKHR5cGVkIGFzIGBUYCkuXG4gICAgICovXG4gICAgYXN5bmMgZnVuY3Rpb24gZ2V0KHBhZ2VLZXkpIHtcbiAgICAgICAgY29uc3QgbWFwID0gYXdhaXQgcmVhZEFsbCgpO1xuICAgICAgICBjb25zdCBmb3VuZCA9IG1hcFtwYWdlS2V5XTtcbiAgICAgICAgaWYgKGZvdW5kICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXR1cm4gZm91bmQ7XG4gICAgICAgIGlmIChkZWZhdWx0T2YpXG4gICAgICAgICAgICByZXR1cm4gZGVmYXVsdE9mKHBhZ2VLZXkpO1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcHNlcnRzIGEgc2luZ2xlIHJvdyBmb3IgdGhlIGdpdmVuIHBhZ2Uga2V5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHBhZ2VLZXkgLSBSb3cga2V5IHRvIHdyaXRlLlxuICAgICAqIEBwYXJhbSB2YWx1ZSAtIFZhbHVlIHRvIHBlcnNpc3QuXG4gICAgICovXG4gICAgYXN5bmMgZnVuY3Rpb24gc2V0KHBhZ2VLZXksIHZhbHVlKSB7XG4gICAgICAgIGNvbnN0IG1hcCA9IGF3YWl0IHJlYWRBbGwoKTtcbiAgICAgICAgbWFwW3BhZ2VLZXldID0gdmFsdWU7XG4gICAgICAgIGF3YWl0IHdyaXRlQWxsKG1hcCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlbGV0ZXMgYSBzaW5nbGUgcm93IGZvciB0aGUgZ2l2ZW4gcGFnZSBrZXkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGFnZUtleSAtIFJvdyBrZXkgdG8gZGVsZXRlLlxuICAgICAqL1xuICAgIGFzeW5jIGZ1bmN0aW9uIHJlbW92ZShwYWdlS2V5KSB7XG4gICAgICAgIGNvbnN0IG1hcCA9IGF3YWl0IHJlYWRBbGwoKTtcbiAgICAgICAgaWYgKHBhZ2VLZXkgaW4gbWFwKSB7XG4gICAgICAgICAgICBkZWxldGUgbWFwW3BhZ2VLZXldO1xuICAgICAgICAgICAgYXdhaXQgd3JpdGVBbGwobWFwKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbGVhcnMgdGhlIGVudGlyZSB0YWJsZSAocmVtb3ZlcyBhbGwgcm93cyB1bmRlciB0aGlzIHJvb3Qga2V5KS5cbiAgICAgKi9cbiAgICBhc3luYyBmdW5jdGlvbiBjbGVhcigpIHtcbiAgICAgICAgYXdhaXQgd3JpdGVBbGwoe30pO1xuICAgIH1cbiAgICByZXR1cm4geyBrZXk6IEtFWSwgcmVhZEFsbCwgd3JpdGVBbGwsIGdldCwgc2V0LCByZW1vdmUsIGNsZWFyIH07XG59XG4vKipcbiAqIENyZWF0ZXMgYSBrZXktc2NvcGVkIOKAnHNpbmdsZXRvbuKAnSBzdG9yZSB0aGF0IHNhdmVzIGEgc2luZ2xlIHZhbHVlIGRpcmVjdGx5XG4gKiB1bmRlciB0aGUgZ2l2ZW4gcm9vdCBrZXkgaW4gYGNocm9tZS5zdG9yYWdlLmxvY2FsYC5cbiAqXG4gKiBVc2UgdGhpcyBmb3IgZ2xvYmFsIHNldHRpbmdzIG9yIGFueSBjb25maWd1cmF0aW9uIHRoYXQgaXMgbm90IGtleWVkIGJ5IHBhZ2UuXG4gKlxuICogQHR5cGVQYXJhbSBUIC0gVmFsdWUgdHlwZSBzdG9yZWQgYXMgYSBzaW5nbGV0b24uXG4gKiBAcGFyYW0gcm9vdEtleSAtIFJvb3Qga2V5ICh3aXRob3V0IG5hbWVzcGFjZSBwcmVmaXgpIHVuZGVyIHdoaWNoIHRoZSB2YWx1ZSBpcyBzdG9yZWQuXG4gKiBAcGFyYW0gZGVmYXVsdEZhY3RvcnkgLSBGYWN0b3J5IGZ1bmN0aW9uIHRvIGxhemlseSBzdXBwbHkgdGhlIGRlZmF1bHQgd2hlbiBubyB2YWx1ZSBleGlzdHMuXG4gKiBAcmV0dXJucyBBbiBvYmplY3Qgd2l0aCBoZWxwZXJzIGZvciB0aGUgc2luZ2xldG9uOiBgeyBrZXksIGdldCwgc2V0LCByZW1vdmUgfWAuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTaW5nbGV0b24ocm9vdEtleSwgZGVmYXVsdEZhY3RvcnkpIHtcbiAgICBjb25zdCBLRVkgPSByb290S2V5O1xuICAgIC8qKlxuICAgICAqIFJlYWRzIHRoZSBzaW5nbGV0b24gdmFsdWUgZnJvbSBzdG9yYWdlLlxuICAgICAqXG4gICAgICogQHJldHVybnMgUHJvbWlzZSByZXNvbHZpbmcgdG8gdGhlIHN0b3JlZCB2YWx1ZTsgZmFsbHMgYmFjayB0byBgZGVmYXVsdEZhY3RvcnkoKWAgd2hlbiBtaXNzaW5nLlxuICAgICAqL1xuICAgIGFzeW5jIGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgY29uc3QgcmF3ID0gYXdhaXQgY2hyb21lLnN0b3JhZ2UubG9jYWwuZ2V0KEtFWSk7XG4gICAgICAgIGNvbnN0IHZhbCA9IHJhd1tLRVldO1xuICAgICAgICByZXR1cm4gdmFsID09PSB1bmRlZmluZWQgPyBkZWZhdWx0RmFjdG9yeSgpIDogdmFsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXcml0ZXMgdGhlIHNpbmdsZXRvbiB2YWx1ZSB0byBzdG9yYWdlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHZhbHVlIC0gVmFsdWUgdG8gcGVyc2lzdC5cbiAgICAgKi9cbiAgICBhc3luYyBmdW5jdGlvbiBzZXQodmFsdWUpIHtcbiAgICAgICAgYXdhaXQgY2hyb21lLnN0b3JhZ2UubG9jYWwuc2V0KHsgW0tFWV06IHZhbHVlIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRoZSBzaW5nbGV0b24gdmFsdWUgZnJvbSBzdG9yYWdlLlxuICAgICAqL1xuICAgIGFzeW5jIGZ1bmN0aW9uIHJlbW92ZSgpIHtcbiAgICAgICAgYXdhaXQgY2hyb21lLnN0b3JhZ2UubG9jYWwucmVtb3ZlKEtFWSk7XG4gICAgfVxuICAgIHJldHVybiB7IGtleTogS0VZLCBnZXQsIHNldCwgcmVtb3ZlIH07XG59XG5mdW5jdGlvbiBkZWZhdWx0U2NyZWVuU3RhdGUoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgaXRlbXM6IFtdLFxuICAgICAgICBuZXh0SWQ6IDEsXG4gICAgICAgIGRlZmF1bHRTaXplOiAxNCxcbiAgICAgICAgZGVmYXVsdENvbG9yOiAnQmx1ZScsXG4gICAgICAgIGRlZmF1bHRTaGFwZTogJ2NpcmNsZScsXG4gICAgICAgIGRlZmF1bHRQb3NpdGlvbjogJ2xlZnQtdG9wLW91dHNpZGUnLFxuICAgICAgICBkZWZhdWx0R3JvdXA6IFVOR1JPVVBFRF9WQUxVRSxcbiAgICB9O1xufVxuLyoqXG4gKiBUYWJsZSBmb3IgcGVyLXBhZ2UgYFNjcmVlblN0YXRlYCB2YWx1ZXMuXG4gKiBFYWNoIHJvdyBpcyBhZGRyZXNzZWQgYnkgYSBwYWdlIGtleTsgbWlzc2luZyByb3dzIGZhbGwgYmFjayB0byBgZGVmYXVsdFNjcmVlblN0YXRlKClgLlxuICovXG5leHBvcnQgY29uc3Qgc2NyZWVuU3RhdGVUYWJsZSA9IGNyZWF0ZU1hcFRhYmxlKCdzY3JlZW5TdGF0ZUJ5UGFnZScsICgpID0+IGRlZmF1bHRTY3JlZW5TdGF0ZSgpKTtcbi8qKlxuICogU2luZ2xldG9uIGZvciBnbG9iYWwgdGhlbWUgbW9kZS5cbiAqIFN0b3JlcyBhIHNpbmdsZSBgVGhlbWVNb2RlYCB2YWx1ZTsgZGVmYXVsdHMgdG8gYCdkZXZpY2UnYCB3aGVuIG5vdCBzZXQuXG4gKi9cbmV4cG9ydCBjb25zdCB0aGVtZVRhYmxlID0gY3JlYXRlU2luZ2xldG9uKCd0aGVtZU1vZGUnLCAoKSA9PiAnZGV2aWNlJyk7XG4iLCJpbXBvcnQgeyBzY3JlZW5TdGF0ZVRhYmxlIH0gZnJvbSAnQHBhbmVsL3N0b3JhZ2UvdGFibGVzJztcbi8qKlxuICogQXBwbGllcyBhIHBhdGNoIChhZGQvdXBkYXRlL3JlbW92ZSkgdG8gdGhlIHN0YXRlIGZvciB0aGUgZ2l2ZW4gcGFnZSBrZXksXG4gKiByZWxhYmVscyBzZXF1ZW50aWFsbHkgaWYgYW55IHJlbW92YWwgb2NjdXJyZWQsIHBlcnNpc3RzIHRoZSByZXN1bHQsXG4gKiBhbmQgcmV0dXJucyB0aGUgdXBkYXRlZCBzdGF0ZS5cbiAqXG4gKiBAcGFyYW0gcGFnZUtleVN0ciAtIFBhZ2Uga2V5IG9mIHRoZSBzdGF0ZSB0byBtb2RpZnkuXG4gKiBAcGFyYW0gcGF0Y2ggLSBDaGFuZ2VzIHRvIGFwcGx5IHRvIHRoZSBzdGF0ZS5cbiAqIEByZXR1cm5zIFByb21pc2UgcmVzb2x2aW5nIHRvIHRoZSB1cGRhdGVkIFNjcmVlblN0YXRlLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYXBwbHlQYXRjaChwYWdlS2V5LCBwYXRjaCkge1xuICAgIGNvbnN0IHN0YXRlID0gYXdhaXQgc2NyZWVuU3RhdGVUYWJsZS5nZXQocGFnZUtleSk7XG4gICAgaWYgKHBhdGNoLnJlbW92ZWRJZHM/Lmxlbmd0aCkge1xuICAgICAgICBjb25zdCB0b1JlbW92ZSA9IG5ldyBTZXQocGF0Y2gucmVtb3ZlZElkcyk7XG4gICAgICAgIHN0YXRlLml0ZW1zID0gc3RhdGUuaXRlbXMuZmlsdGVyKChpdCkgPT4gIXRvUmVtb3ZlLmhhcyhpdC5pZCkpO1xuICAgIH1cbiAgICBpZiAocGF0Y2guYWRkZWQ/Lmxlbmd0aCkge1xuICAgICAgICBmb3IgKGNvbnN0IGEgb2YgcGF0Y2guYWRkZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGlkID0gc3RhdGUubmV4dElkKys7XG4gICAgICAgICAgICBjb25zdCBsYWJlbCA9IEluZmluaXR5O1xuICAgICAgICAgICAgY29uc3QgaXQgPSB7XG4gICAgICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICAgICAgbGFiZWwsXG4gICAgICAgICAgICAgICAgYW5jaG9yOiBhLmFuY2hvcixcbiAgICAgICAgICAgICAgICBzaXplOiBzdGF0ZS5kZWZhdWx0U2l6ZSxcbiAgICAgICAgICAgICAgICBjb2xvcjogc3RhdGUuZGVmYXVsdENvbG9yLFxuICAgICAgICAgICAgICAgIHNoYXBlOiBzdGF0ZS5kZWZhdWx0U2hhcGUsXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IHN0YXRlLmRlZmF1bHRQb3NpdGlvbixcbiAgICAgICAgICAgICAgICBncm91cDogc3RhdGUuZGVmYXVsdEdyb3VwLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHN0YXRlLml0ZW1zLnB1c2goaXQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRlLml0ZW1zID0gbm9ybWFsaXplR3JvdXBMYWJlbHNBbmRDb3VudFVuZ3JvdXBlZChzdGF0ZS5pdGVtcyk7XG4gICAgYXdhaXQgc2NyZWVuU3RhdGVUYWJsZS5zZXQocGFnZUtleSwgc3RhdGUpO1xuICAgIHJldHVybiBzdGF0ZTtcbn1cbi8qKlxuICogVG9nZ2xlcyBzZWxlY3Rpb24gZm9yIHRoZSBnaXZlbiBhbmNob3JzIChmcm9tIENvbnRlbnQpOiBpZiBhbiBhbmNob3IgYWxyZWFkeVxuICogZXhpc3RzLCByZW1vdmUgaXQ7IG90aGVyd2lzZSBhZGQgaXQuIERlZHVwZSBpbmNvbWluZyBhbmNob3JzIGJ5IGB2YWx1ZWAsXG4gKiBhcHBseSB0aGUgY29ycmVzcG9uZGluZyBwYXRjaCwgcGVyc2lzdCwgYW5kIHJldHVybiB0aGUgbGF0ZXN0IHN0YXRlLlxuICpcbiAqIEBwYXJhbSBwYWdlS2V5U3RyIC0gUGFnZSBrZXkgb2YgdGhlIHN0YXRlIHRvIHVwZGF0ZS5cbiAqIEBwYXJhbSBhbmNob3JzIC0gQW5jaG9ycyByZXBvcnRlZCBieSBDb250ZW50LlxuICogQHJldHVybnMgUHJvbWlzZSByZXNvbHZpbmcgdG8gdGhlIHVwZGF0ZWQgU2NyZWVuU3RhdGUuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYW5kbGVTZWxlY3RlZChwYWdlS2V5LCBhbmNob3JzKSB7XG4gICAgY29uc3Qgc3RhdGUgPSBhd2FpdCBzY3JlZW5TdGF0ZVRhYmxlLmdldChwYWdlS2V5KTtcbiAgICBjb25zdCB1bmlxID0gQXJyYXkuZnJvbShuZXcgU2V0KGFuY2hvcnMubWFwKChhKSA9PiBhLnZhbHVlKSkpXG4gICAgICAgIC5tYXAoKHYpID0+IGFuY2hvcnMuZmluZCgoYSkgPT4gYS52YWx1ZSA9PT0gdikpXG4gICAgICAgIC5maWx0ZXIoQm9vbGVhbik7XG4gICAgY29uc3QgcmVtb3ZlZElkcyA9IFtdO1xuICAgIGNvbnN0IHRvQWRkID0gW107XG4gICAgZm9yIChjb25zdCBhIG9mIHVuaXEpIHtcbiAgICAgICAgY29uc3QgZm91bmQgPSBzdGF0ZS5pdGVtcy5maW5kKChpdCkgPT4gaXQuYW5jaG9yLmtpbmQgPT09IGEua2luZCAmJiBpdC5hbmNob3IudmFsdWUgPT09IGEudmFsdWUpO1xuICAgICAgICBpZiAoZm91bmQpIHtcbiAgICAgICAgICAgIHJlbW92ZWRJZHMucHVzaChmb3VuZC5pZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0b0FkZC5wdXNoKHsgYW5jaG9yOiBhIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHBhdGNoID0ge307XG4gICAgaWYgKHJlbW92ZWRJZHMubGVuZ3RoKVxuICAgICAgICBwYXRjaC5yZW1vdmVkSWRzID0gcmVtb3ZlZElkcztcbiAgICBpZiAodG9BZGQubGVuZ3RoKVxuICAgICAgICBwYXRjaC5hZGRlZCA9IHRvQWRkO1xuICAgIHJldHVybiBhcHBseVBhdGNoKHBhZ2VLZXksIHBhdGNoKTtcbn1cbi8qKlxuICogUmVsYWJlbHMgaXRlbXMgY29uc2VjdXRpdmVseSAoMS4ubikgKndpdGhpbiBlYWNoIGdyb3VwKiBhbmQgcmVwb3J0c1xuICogdGhlIGN1cnJlbnQgc2l6ZSBvZiB0aGUgXCJubyBncm91cFwiIGJ1Y2tldC5cbiAqXG4gKiBAcGFyYW0gaXRlbXMgLSBUaGUgb3JpZ2luYWwgbGlzdCBvZiBpdGVtcyAodHJlYXRlZCBpbW11dGFibHkpLlxuICogQHJldHVybnMgQW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIG5vcm1hbGl6ZWQgaXRlbXMgYW5kIHRoZSBuby1ncm91cCBjb3VudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZUdyb3VwTGFiZWxzQW5kQ291bnRVbmdyb3VwZWQoaXRlbXMpIHtcbiAgICBjb25zdCBub3JtYWxpemUgPSAoZykgPT4gKGcgPz8gJycpLnRyaW0oKTsgLy8gJycgaXMgdW5pZmllZCBhcyBVbkdyb3VwXG4gICAgLy8gQnVja2V0IFtpbmRleCwgaXRlbV0gZm9yIGVhY2ggZ3JvdXBcbiAgICBjb25zdCBidWNrZXRzID0gbmV3IE1hcCgpO1xuICAgIGl0ZW1zLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IGtleSA9IG5vcm1hbGl6ZShpdGVtLmdyb3VwKTtcbiAgICAgICAgaWYgKCFidWNrZXRzLmhhcyhrZXkpKVxuICAgICAgICAgICAgYnVja2V0cy5zZXQoa2V5LCBbXSk7XG4gICAgICAgIGJ1Y2tldHMuZ2V0KGtleSkucHVzaCh7IGluZGV4LCBpdGVtIH0pO1xuICAgIH0pO1xuICAgIGNvbnN0IG91dCA9IGl0ZW1zLnNsaWNlKCk7XG4gICAgLy8gU29ydCBlYWNoIGdyb3VwIOKGkiBSZWFzc2lnbiAxLi5uXG4gICAgZm9yIChjb25zdCBbLCBidWNrZXRdIG9mIGJ1Y2tldHMpIHtcbiAgICAgICAgYnVja2V0LnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgIGlmIChhLml0ZW0ubGFiZWwgIT09IGIuaXRlbS5sYWJlbClcbiAgICAgICAgICAgICAgICByZXR1cm4gYS5pdGVtLmxhYmVsIC0gYi5pdGVtLmxhYmVsO1xuICAgICAgICAgICAgcmV0dXJuIGEuaXRlbS5pZCAtIGIuaXRlbS5pZDtcbiAgICAgICAgfSk7XG4gICAgICAgIGJ1Y2tldC5mb3JFYWNoKCh7IGluZGV4LCBpdGVtIH0sIGkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGRlc2lyZWQgPSBpICsgMTtcbiAgICAgICAgICAgIGlmIChpdGVtLmxhYmVsICE9PSBkZXNpcmVkKSB7XG4gICAgICAgICAgICAgICAgb3V0W2luZGV4XSA9IHsgLi4uaXRlbSwgbGFiZWw6IGRlc2lyZWQgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBvdXQ7XG59XG4iLCJjb25zdCBpMThuID0geyBnZXQsIGxvY2FsaXplIH07XG4vKipcbiAqIFJldHJpZXZlcyBhIGxvY2FsaXplZCBtZXNzYWdlIGJ5IGtleS4gRmFsbHMgYmFjayB0byB0aGUga2V5IGl0c2VsZiB3aGVuIG5vdCBmb3VuZC5cbiAqXG4gKiBAcGFyYW0ga2V5IC0gS2V5IGRlZmluZWQgaW4gX2xvY2FsZXMvbWVzc2FnZXMuanNvblxuICogQHBhcmFtIHN1YnMgLSBPcHRpb25hbCBzdWJzdGl0dXRpb24gYXJndW1lbnRzXG4gKiBAcmV0dXJucyBMb2NhbGl6ZWQgc3RyaW5nXG4gKi9cbmZ1bmN0aW9uIGdldChrZXksIHN1YnMpIHtcbiAgICByZXR1cm4gY2hyb21lLmkxOG4uZ2V0TWVzc2FnZShrZXksIHN1YnMpIHx8IGtleTtcbn1cbi8qKlxuICogV2Fsa3MgdGhlIERPTSBhbmQgYXBwbGllcyBsb2NhbGl6ZWQgc3RyaW5ncyB0byBlbGVtZW50cyB3aXRoXG4gKiBgZGF0YS1pMThuYCBhbmQgYGRhdGEtaTE4bi1hdHRyYC5cbiAqXG4gKiBAcGFyYW0gcm9vdCAtIFJvb3Qgbm9kZSB0byBsb2NhbGl6ZSAoZGVmYXVsdHMgdG8gZG9jdW1lbnQpXG4gKiBAcmVtYXJrc1xuICogLSBgZGF0YS1pMThuYCByZXBsYWNlcyBgdGV4dENvbnRlbnRgLlxuICogLSBgZGF0YS1pMThuLWF0dHJgIHVzZXMgYGF0dHI6a2V5O2F0dHI6a2V5Oy4uLmAgdG8gc2V0IGF0dHJpYnV0ZXMuXG4gKiAtIE11dGF0ZXMgdGhlIERPTSBpbiBwbGFjZS5cbiAqL1xuZnVuY3Rpb24gbG9jYWxpemUocm9vdCA9IGRvY3VtZW50KSB7XG4gICAgcm9vdC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1pMThuXScpLmZvckVhY2goKGVsKSA9PiB7XG4gICAgICAgIGNvbnN0IGtleSA9IGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1pMThuJyk7XG4gICAgICAgIGlmIChrZXkpXG4gICAgICAgICAgICBlbC50ZXh0Q29udGVudCA9IGdldChrZXkpO1xuICAgIH0pO1xuICAgIHJvb3QucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtaTE4bi1hdHRyXScpLmZvckVhY2goKGVsKSA9PiB7XG4gICAgICAgIGNvbnN0IHNwZWMgPSBlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaTE4bi1hdHRyJyk7XG4gICAgICAgIGlmICghc3BlYylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgZm9yIChjb25zdCBwYWlyIG9mIHNwZWMuc3BsaXQoJzsnKSkge1xuICAgICAgICAgICAgY29uc3QgW2F0dHIsIGtleV0gPSBwYWlyLnNwbGl0KCc6JykubWFwKChzKSA9PiBzPy50cmltKCkpO1xuICAgICAgICAgICAgaWYgKGF0dHIgJiYga2V5KVxuICAgICAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZShhdHRyLCBnZXQoa2V5KSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbmV4cG9ydCBkZWZhdWx0IGkxOG47XG4iLCJpbXBvcnQgaTE4biBmcm9tICdAY29tbW9uL2kxOG4nO1xuZXhwb3J0IGNvbnN0IFNUQVRVUyA9IHtcbiAgICBSRVNUUklDVEVEOiAnUkVTVFJJQ1RFRCcsXG4gICAgQ09OTkVDVElORzogJ0NPTk5FQ1RJTkcnLFxuICAgIENPTk5FQ1RFRDogJ0NPTk5FQ1RFRCcsXG4gICAgRElTQ09OTkVDVEVEOiAnRElTQ09OTkVDVEVEJyxcbn07XG5jb25zdCBTVEFUVVNfTVNHX0tFWSA9IHtcbiAgICBSRVNUUklDVEVEOiAnc3RhdHVzX3Jlc3RyaWN0ZWQnLFxuICAgIENPTk5FQ1RJTkc6ICdzdGF0dXNfY29ubmVjdGluZycsXG4gICAgQ09OTkVDVEVEOiAnc3RhdHVzX2Nvbm5lY3RlZCcsXG4gICAgRElTQ09OTkVDVEVEOiAnc3RhdHVzX2Rpc2Nvbm5lY3RlZCcsXG59O1xuZXhwb3J0IGNvbnN0IFNUQVRVU19MQUJFTF9TVFlMRSA9IHtcbiAgICBSRVNUUklDVEVEOiB7XG4gICAgICAgIGJvZHk6IFtcbiAgICAgICAgICAgICdiZy1hbWJlci01MCcsXG4gICAgICAgICAgICAnYm9yZGVyLWFtYmVyLTIwMCcsXG4gICAgICAgICAgICAndGV4dC1hbWJlci03MDAnLFxuICAgICAgICAgICAgJ2Rhcms6YmctYW1iZXItOTUwJyxcbiAgICAgICAgICAgICdkYXJrOmJvcmRlci1hbWJlci05MDAvNTAnLFxuICAgICAgICAgICAgJ2Rhcms6dGV4dC1hbWJlci0zMDAnLFxuICAgICAgICBdLFxuICAgICAgICBkb3Q6IFsnYmctYW1iZXItNTAwJ10sXG4gICAgfSxcbiAgICBDT05ORUNUSU5HOiB7XG4gICAgICAgIGJvZHk6IFtcbiAgICAgICAgICAgICdiZy1za3ktNTAnLFxuICAgICAgICAgICAgJ2JvcmRlci1za3ktMjAwJyxcbiAgICAgICAgICAgICd0ZXh0LXNreS03MDAnLFxuICAgICAgICAgICAgJ2Rhcms6Ymctc2t5LTk1MCcsXG4gICAgICAgICAgICAnZGFyazpib3JkZXItc2t5LTkwMC81MCcsXG4gICAgICAgICAgICAnZGFyazp0ZXh0LXNreS0zMDAnLFxuICAgICAgICBdLFxuICAgICAgICBkb3Q6IFsnYmctc2t5LTUwMCddLFxuICAgIH0sXG4gICAgQ09OTkVDVEVEOiB7XG4gICAgICAgIGJvZHk6IFtcbiAgICAgICAgICAgICdiZy1lbWVyYWxkLTUwJyxcbiAgICAgICAgICAgICdib3JkZXItZW1lcmFsZC0yMDAnLFxuICAgICAgICAgICAgJ3RleHQtZW1lcmFsZC03MDAnLFxuICAgICAgICAgICAgJ2Rhcms6YmctZW1lcmFsZC05NTAnLFxuICAgICAgICAgICAgJ2Rhcms6Ym9yZGVyLWVtZXJhbGQtOTAwLzUwJyxcbiAgICAgICAgICAgICdkYXJrOnRleHQtZW1lcmFsZC0zMDAnLFxuICAgICAgICBdLFxuICAgICAgICBkb3Q6IFsnYmctZW1lcmFsZC01MDAnXSxcbiAgICB9LFxuICAgIERJU0NPTk5FQ1RFRDoge1xuICAgICAgICBib2R5OiBbXG4gICAgICAgICAgICAnYmctcm9zZS01MCcsXG4gICAgICAgICAgICAnYm9yZGVyLXJvc2UtMjAwJyxcbiAgICAgICAgICAgICd0ZXh0LXJvc2UtNzAwJyxcbiAgICAgICAgICAgICdkYXJrOmJnLXJvc2UtOTUwJyxcbiAgICAgICAgICAgICdkYXJrOmJvcmRlci1yb3NlLTkwMC81MCcsXG4gICAgICAgICAgICAnZGFyazp0ZXh0LXJvc2UtMzAwJyxcbiAgICAgICAgXSxcbiAgICAgICAgZG90OiBbJ2JnLXJvc2UtNTAwJ10sXG4gICAgfSxcbn07XG5leHBvcnQgZnVuY3Rpb24gZ2V0U3RhdHVzTWVzc2FnZShrZXkpIHtcbiAgICBjb25zdCBtc2dLZXkgPSBTVEFUVVNfTVNHX0tFWVtrZXldO1xuICAgIHJldHVybiBpMThuLmdldChtc2dLZXkpIHx8IG1zZ0tleTtcbn1cbiIsIi8qKlxuICogQWN0aW9uVHlwZVxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIEFuIGV4aGF1c3RpdmUgbGlzdCBvZiAqYXBwbGljYXRpb24tbGV2ZWwgZXZlbnRzKiBjb25zdW1lZCBieSB0aGUgcmVkdWNlciAodXBkYXRlLnRzKS5cbiAqIE9yaWdpbnM6XG4gKiAgIC0gVmlldyBVSSBldmVudHMgKG5vcm1hbGl6ZWQgYnkgdGhlIENvbnRyb2xsZXIpXG4gKiAgIC0gTWVzc2FnZXMgZnJvbSBDb250ZW50L0JhY2tncm91bmQgc2NyaXB0c1xuICogICAtIFJlc3VsdHMgb2YgYXN5bmMgSS9PIChjYXB0dXJlIHN1Y2Nlc3MvZmFpbHVyZSwgZXRjLilcbiAqIFVzYWdlOlxuICogICAtIEFjdHMgYXMgdGhlIGRpc2NyaW1pbmFudCBmb3IgYHN3aXRjaChhY3Rpb24udHlwZSlgIGluIHRoZSByZWR1Y2VyXG4gKiAgIC0gUHVyZWx5IGRldGVybWluZXMgaG93IHRoZSBNb2RlbCB0cmFuc2l0aW9ucyAobm8gc2lkZSBlZmZlY3RzIGhlcmUpXG4gKi9cbmV4cG9ydCB2YXIgQWN0aW9uVHlwZTtcbihmdW5jdGlvbiAoQWN0aW9uVHlwZSkge1xuICAgIC8qKiBBcHAgYm9vdHN0cmFwIC8gc3RhcnQgKi9cbiAgICBBY3Rpb25UeXBlW1wiSU5JVFwiXSA9IFwiSU5JVFwiO1xuICAgIC8qKiBBY3RpdmUgdGFiIHJlc29sdmVkIGFuZCBjb25uZWN0aW9uIGVzdGFibGlzaGVkICh0YWJJZC9wYWdlS2V5IGRlY2lkZWQpICovXG4gICAgQWN0aW9uVHlwZVtcIkNPTk5FQ1RFRFwiXSA9IFwiQ09OTkVDVEVEXCI7XG4gICAgLyoqIFVwZGF0ZSBwYW5lbCBzdGF0dXMgKENPTk5FQ1RJTkcgLyBDT05ORUNURUQgLyBSRVNUUklDVEVEIC8gRElTQ09OTkVDVEVELCBldGMuKSAqL1xuICAgIEFjdGlvblR5cGVbXCJTRVRfU1RBVFVTXCJdID0gXCJTRVRfU1RBVFVTXCI7XG4gICAgLyoqIFJlc3RvcmUgcGVyc2lzdGVkIHN0YXRlOiBpdGVtcyBhbmQgZGVmYXVsdHMgKHNpemUvY29sb3Ivc2hhcGUpICovXG4gICAgQWN0aW9uVHlwZVtcIlJFU1RPUkVfU1RBVEVcIl0gPSBcIlJFU1RPUkVfU1RBVEVcIjtcbiAgICAvKiogT3ZlcndyaXRlcyB0aGUgc2V0IG9mIGVsZW1lbnRzIHRoYXQgYXJlIG5vdCBwcmVzZW50IGluIHRoZSBjb250ZW50ICovXG4gICAgQWN0aW9uVHlwZVtcIlNFVF9NSVNTSU5HX0lEU1wiXSA9IFwiU0VUX01JU1NJTkdfSURTXCI7XG4gICAgLyoqIFRvZ2dsZSBzZWxlY3Rpb24gbW9kZSBvbiB0aGUgcGFnZSBvdmVybGF5ICovXG4gICAgQWN0aW9uVHlwZVtcIlRPR0dMRV9TRUxFQ1RcIl0gPSBcIlRPR0dMRV9TRUxFQ1RcIjtcbiAgICAvKiogQ2xlYXIgYWxsIHNlbGVjdGlvbnMgKi9cbiAgICBBY3Rpb25UeXBlW1wiQ0xFQVJfQUxMXCJdID0gXCJDTEVBUl9BTExcIjtcbiAgICAvKiogQ29udGVudCDihpIgUGFuZWw6IGFuY2hvcnMgd2VyZSB0b2dnbGVkIChzZWxlY3RlZC91bnNlbGVjdGVkKSBvbiB0aGUgcGFnZSAqL1xuICAgIEFjdGlvblR5cGVbXCJDT05URU5UX1NFTEVDVEVEXCJdID0gXCJDT05URU5UX1NFTEVDVEVEXCI7XG4gICAgLyoqIFVwZGF0ZSBkZWZhdWx0IGJhZGdlIHNpemUgKGFsc28gYXBwbHkgdG8gZXhpc3RpbmcgaXRlbXMpICovXG4gICAgQWN0aW9uVHlwZVtcIlNFVF9CQURHRV9TSVpFXCJdID0gXCJTRVRfQkFER0VfU0laRVwiO1xuICAgIC8qKiBVcGRhdGUgZGVmYXVsdCBiYWRnZSBjb2xvciAoYWxzbyBhcHBseSB0byBleGlzdGluZyBpdGVtcykgKi9cbiAgICBBY3Rpb25UeXBlW1wiU0VUX0JBREdFX0NPTE9SXCJdID0gXCJTRVRfQkFER0VfQ09MT1JcIjtcbiAgICAvKiogVXBkYXRlIGRlZmF1bHQgYmFkZ2Ugc2hhcGUgKGFsc28gYXBwbHkgdG8gZXhpc3RpbmcgaXRlbXMpICovXG4gICAgQWN0aW9uVHlwZVtcIlNFVF9CQURHRV9TSEFQRVwiXSA9IFwiU0VUX0JBREdFX1NIQVBFXCI7XG4gICAgLyoqIERlbGV0ZSB0aGUgc2VsZWN0ZWQgYmFkZ2UgKi9cbiAgICBBY3Rpb25UeXBlW1wiQkFER0VfREVMRVRFXCJdID0gXCJCQURHRV9ERUxFVEVcIjtcbiAgICAvKiogVXBkYXRlIGRlZmF1bHQgYmFkZ2UgcG9zaXRpb24gKGFsc28gYXBwbHkgdG8gZXhpc3RpbmcgaXRlbXMpICovXG4gICAgQWN0aW9uVHlwZVtcIlNFVF9CQURHRV9QT1NJVElPTlwiXSA9IFwiU0VUX0JBREdFX1BPU0lUSU9OXCI7XG4gICAgLyoqIFVwZGF0ZSBjYXB0dXJlIGZvcm1hdCAocG5nL2pwZWcpICovXG4gICAgQWN0aW9uVHlwZVtcIlNFVF9DQVBUVVJFX0ZPUk1BVFwiXSA9IFwiU0VUX0NBUFRVUkVfRk9STUFUXCI7XG4gICAgLyoqIFVwZGF0ZSBjYXB0dXJlIGFyZWEgKGZ1bGwvdmlld3BvcnQpICovXG4gICAgQWN0aW9uVHlwZVtcIlNFVF9DQVBUVVJFX0FSRUFcIl0gPSBcIlNFVF9DQVBUVVJFX0FSRUFcIjtcbiAgICAvKiogVXBkYXRlIEpQRUcgcXVhbGl0eSAqL1xuICAgIEFjdGlvblR5cGVbXCJTRVRfQ0FQVFVSRV9RVUFMSVRZXCJdID0gXCJTRVRfQ0FQVFVSRV9RVUFMSVRZXCI7XG4gICAgLyoqIFVwZGF0ZSBjYXB0dXJlIHNjYWxlIGZhY3RvciAqL1xuICAgIEFjdGlvblR5cGVbXCJTRVRfQ0FQVFVSRV9TQ0FMRVwiXSA9IFwiU0VUX0NBUFRVUkVfU0NBTEVcIjtcbiAgICAvKiogVG9nZ2xlIGNhcHR1cmUgb3B0aW9ucyBkcm9wZG93biAoZXhwYW5kL2NvbGxhcHNlKSAqL1xuICAgIEFjdGlvblR5cGVbXCJUT0dHTEVfQ0FQVFVSRV9QQU5FTFwiXSA9IFwiVE9HR0xFX0NBUFRVUkVfUEFORUxcIjtcbiAgICAvKiogcmVxdWVzdCBtZWFzdXJpbmcgdGhlIGNvbnRlbnQgc2l6ZSAqL1xuICAgIEFjdGlvblR5cGVbXCJNRUFTVVJFX0NPTlRFTlRfU0laRVwiXSA9IFwiTUVBU1VSRV9DT05URU5UX1NJWkVcIjtcbiAgICAvKiogUmVxdWVzdCB0byBydW4gYSBjYXB0dXJlICovXG4gICAgQWN0aW9uVHlwZVtcIkNBUFRVUkVfUkVRVUVTVEVEXCJdID0gXCJDQVBUVVJFX1JFUVVFU1RFRFwiO1xuICAgIC8qKiBDYXB0dXJlIGNvbXBsZXRlZCBzdWNjZXNzZnVsbHkgKi9cbiAgICBBY3Rpb25UeXBlW1wiQ0FQVFVSRV9TVUNDRUVERURcIl0gPSBcIkNBUFRVUkVfU1VDQ0VFREVEXCI7XG4gICAgLyoqIENhcHR1cmUgZmFpbGVkIHdpdGggYW4gZXJyb3IgKi9cbiAgICBBY3Rpb25UeXBlW1wiQ0FQVFVSRV9GQUlMRURcIl0gPSBcIkNBUFRVUkVfRkFJTEVEXCI7XG4gICAgLyoqIFJlb3JkZXJpbmcgc2VsZWN0ZWQgaXRlbXMgKGRyYWcgYW5kIGRyb3ApICovXG4gICAgQWN0aW9uVHlwZVtcIlJFT1JERVJfSVRFTVNcIl0gPSBcIlJFT1JERVJfSVRFTVNcIjtcbiAgICAvKiogVXBkYXRlIGEgZ3JvdXAgb2YgZWxlbWVudHMgKi9cbiAgICBBY3Rpb25UeXBlW1wiU0VUX0dST1VQXCJdID0gXCJTRVRfR1JPVVBcIjtcbiAgICAvKiogUG9ydCBkaXNjb25uZWN0ZWQgKGxvc3QgY29ubmVjdGlvbiB0byBDb250ZW50L1NlcnZpY2UgV29ya2VyKSAqL1xuICAgIEFjdGlvblR5cGVbXCJQT1JUX0RJU0NPTk5FQ1RFRFwiXSA9IFwiUE9SVF9ESVNDT05ORUNURURcIjtcbiAgICAvKiogUmVxdWVzdCB0byBjbG9zZSB0aGUgcGFuZWwgd2hlbiB0aGUgdGFiSWQgbWF0Y2hlcyAoQmFja2dyb3VuZCDihpIgUGFuZWwpICovXG4gICAgQWN0aW9uVHlwZVtcIkNMT1NFX1BBTkVMX1JFUVVFU1RFRFwiXSA9IFwiQ0xPU0VfUEFORUxfUkVRVUVTVEVEXCI7XG4gICAgLyoqIEVtaXR0ZWQgd2hlbiBhbiBpdGVtJ3MgZWRpdC1zZWxlY3Rpb24gY2hlY2tib3ggY2hhbmdlcyBzdGF0ZSAqL1xuICAgIEFjdGlvblR5cGVbXCJJVEVNX1NFTEVDVElPTl9DSEFOR0VEXCJdID0gXCJJVEVNX1NFTEVDVElPTl9DSEFOR0VEXCI7XG4gICAgLyoqIFN0YXJ0IGl0ZW0gaG92ZXIgKi9cbiAgICBBY3Rpb25UeXBlW1wiSVRFTV9IT1ZFUl9JTlwiXSA9IFwiSVRFTV9IT1ZFUl9JTlwiO1xuICAgIC8qKiBFbmQgaXRlbSBob3ZlciAqL1xuICAgIEFjdGlvblR5cGVbXCJJVEVNX0hPVkVSX09VVFwiXSA9IFwiSVRFTV9IT1ZFUl9PVVRcIjtcbiAgICAvKiogUGVyc2lzdCB0aGUgZWRpdGVkIGNvbW1lbnQgdGV4dCBmb3IgdGhlIHRhcmdldGVkIGl0ZW0gKi9cbiAgICBBY3Rpb25UeXBlW1wiVVBEQVRFX0lURU1fQ09NTUVOVFwiXSA9IFwiVVBEQVRFX0lURU1fQ09NTUVOVFwiO1xuICAgIC8qKiBTZXRlIFVJIHRoZW1lICovXG4gICAgQWN0aW9uVHlwZVtcIlNFVF9USEVNRVwiXSA9IFwiU0VUX1RIRU1FXCI7XG4gICAgLyoqIFVwZGF0ZSB0aGUgVUkgdGhlbWUgKi9cbiAgICBBY3Rpb25UeXBlW1wiVVBEQVRFX1RIRU1FXCJdID0gXCJVUERBVEVfVEhFTUVcIjtcbiAgICAvKiogRGlzcGF0Y2hlZCB0byByZXF1ZXN0IHJlbG9hZGluZyB0aGUgbGF0ZXN0IGRhdGEgKi9cbiAgICBBY3Rpb25UeXBlW1wiU1RPUkVfUkVMT0FEX1JFUVVFU1RFRFwiXSA9IFwiU1RPUkVfUkVMT0FEX1JFUVVFU1RFRFwiO1xuICAgIC8qKiBEaXNwYXRjaGVkIGFmdGVyIHRoZSBzdG9yZSBpcyBzdWNjZXNzZnVsbHkgcmVsb2FkZWQgd2l0aCB0aGUgbGF0ZXN0IGRhdGEgKi9cbiAgICBBY3Rpb25UeXBlW1wiU1RPUkVfUkVMT0FEX1NVQ0NFRURFRFwiXSA9IFwiU1RPUkVfUkVMT0FEX1NVQ0NFRURFRFwiO1xuICAgIC8qKiBSZW1vdmUgc2NyZWVuIHN0YXRlIGJ5IHBhZ2Uga2V5ICovXG4gICAgQWN0aW9uVHlwZVtcIlJFTU9WRV9TQ1JFRU5fU1RBVEVfQllfUEFHRVwiXSA9IFwiUkVNT1ZFX1NDUkVFTl9TVEFURV9CWV9QQUdFXCI7XG59KShBY3Rpb25UeXBlIHx8IChBY3Rpb25UeXBlID0ge30pKTtcbiIsIi8qKlxuICogRWZmZWN0VHlwZVxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIEEgZGVjbGFyYXRpdmUgc2V0IG9mICpzaWRlLWVmZmVjdCByZXF1ZXN0cyogcHJvZHVjZWQgYnkgdGhlIHJlZHVjZXIuXG4gKiBFeGVjdXRvcjpcbiAqICAgLSBUaGUgQ29udHJvbGxlciBpbnRlcnByZXRzIGFuZCBwZXJmb3JtcyBlYWNoIGVmZmVjdCAoSS9PLCBSUEMsIHBlcnNpc3RlbmNlKS5cbiAqIFB1cnBvc2U6XG4gKiAgIC0gS2VlcCB0aGUgcmVkdWNlciBwdXJlIHdoaWxlIHN0aWxsIGVuYWJsaW5nIG5lY2Vzc2FyeSBleHRlcm5hbCBlZmZlY3RzLlxuICovXG5leHBvcnQgdmFyIEVmZmVjdFR5cGU7XG4oZnVuY3Rpb24gKEVmZmVjdFR5cGUpIHtcbiAgICAvKiogUHVzaCB0aGUgY3VycmVudCBpdGVtcyB0byB0aGUgQ29udGVudCBzY3JpcHQgdG8gcmVuZGVyIHRoZSBvdmVybGF5ICovXG4gICAgRWZmZWN0VHlwZVtcIlJFTkRFUl9DT05URU5UXCJdID0gXCJSRU5ERVJfQ09OVEVOVFwiO1xuICAgIC8qKiBFbmFibGUvZGlzYWJsZSBzZWxlY3Rpb24gbW9kZSBvbiB0aGUgQ29udGVudCBzaWRlICovXG4gICAgRWZmZWN0VHlwZVtcIlRPR0dMRV9TRUxFQ1RfT05fQ09OVEVOVFwiXSA9IFwiVE9HR0xFX1NFTEVDVF9PTl9DT05URU5UXCI7XG4gICAgLyoqIENsZWFyIG92ZXJsYXkgb24gdGhlIENvbnRlbnQgc2lkZSAqL1xuICAgIEVmZmVjdFR5cGVbXCJDTEVBUl9DT05URU5UXCJdID0gXCJDTEVBUl9DT05URU5UXCI7XG4gICAgLyoqIGl0ZW0gaG92ZXIgKi9cbiAgICBFZmZlY3RUeXBlW1wiSE9WRVJcIl0gPSBcIkhPVkVSXCI7XG4gICAgLyoqIHJlcXVlc3QgbWVhc3VyaW5nIHRoZSBjb250ZW50IHNpemUgKi9cbiAgICBFZmZlY3RUeXBlW1wiTUVBU1VSRV9DT05URU5UX1NJWkVcIl0gPSBcIk1FQVNVUkVfQ09OVEVOVF9TSVpFXCI7XG4gICAgLyoqIFJ1biBhIGNhcHR1cmUgd2l0aCB0aGUgZ2l2ZW4gcGFyYW1ldGVycyAodGFiSWQvZm9ybWF0L2FyZWEvcXVhbGl0eS9zY2FsZSkgKi9cbiAgICBFZmZlY3RUeXBlW1wiQ0FQVFVSRVwiXSA9IFwiQ0FQVFVSRVwiO1xuICAgIC8qKiBQZXJzaXN0IHRoZSBzdGF0ZSB0byBzdG9yYWdlIHdpdGggc2VsZWN0ZWQgaXRlbXMgcmVzZXQgKGNsZWFyZWQpLiAqL1xuICAgIEVmZmVjdFR5cGVbXCJDTEVBUl9TVEFURVwiXSA9IFwiQ0xFQVJfU1RBVEVcIjtcbiAgICAvKipcbiAgICAgKiBQZXJzaXN0IHRoZSBjdXJyZW50IHN0YXRlIHRvIHN0b3JhZ2UuXG4gICAgICogTk9URTogTXVzdCBwcmVzZXJ2ZSBleGlzdGluZyBjb3VudGVycyAobmV4dElkL25leHRMYWJlbCk7IGRvIG5vdCByZXNldCB0aGVtLlxuICAgICAqL1xuICAgIEVmZmVjdFR5cGVbXCJQRVJTSVNUX1NUQVRFXCJdID0gXCJQRVJTSVNUX1NUQVRFXCI7XG4gICAgLyoqIFNldGUgVUkgdGhlbWUgKi9cbiAgICBFZmZlY3RUeXBlW1wiU0VUX1RIRU1FXCJdID0gXCJTRVRfVEhFTUVcIjtcbiAgICAvKiogVXBkYXRlIHRoZSBVSSB0aGVtZSAqL1xuICAgIEVmZmVjdFR5cGVbXCJVUERBVEVfVEhFTUVcIl0gPSBcIlVQREFURV9USEVNRVwiO1xuICAgIC8qKiBSZWFkIHRoZSBzY3JlZW4tc3RhdGUgbWFwIGZyb20gYGNocm9tZS5zdG9yYWdlLmxvY2FsYCAqL1xuICAgIEVmZmVjdFR5cGVbXCJSRUFEX1NDUkVFTl9TVEFURV9TVE9SRVwiXSA9IFwiUkVBRF9TQ1JFRU5fU1RBVEVfU1RPUkVcIjtcbiAgICAvKiogUmVtb3ZlIHNjcmVlbiBzdGF0ZSBieSBwYWdlIGtleSAqL1xuICAgIEVmZmVjdFR5cGVbXCJSRU1PVkVfU0NSRUVOX1NUQVRFX1NUT1JFX0JZX1BBR0VfS0VZXCJdID0gXCJSRU1PVkVfU0NSRUVOX1NUQVRFX1NUT1JFX0JZX1BBR0VfS0VZXCI7XG4gICAgLyoqIFJlcG9ydC9sb2cgYW4gZXJyb3IgKGFuZCBvcHRpb25hbGx5IHN1cmZhY2UgaXQgdG8gdGhlIFVJKSAqL1xuICAgIEVmZmVjdFR5cGVbXCJOT1RJRllfRVJST1JcIl0gPSBcIk5PVElGWV9FUlJPUlwiO1xufSkoRWZmZWN0VHlwZSB8fCAoRWZmZWN0VHlwZSA9IHt9KSk7XG4iLCJleHBvcnQgY29uc3QgUFJPVE9DT0xfVkVSU0lPTiA9IDE7XG5leHBvcnQgY29uc3QgQ0hBTk5FTCA9IHtcbiAgICBQQU5FTF9DT05URU5UOiBgc3BzazpwYW5lbC1jb250ZW50OnYke1BST1RPQ09MX1ZFUlNJT059YCxcbn07XG4vKipcbiAqIENoZWNrcyB3aGV0aGVyIHRoZSBnaXZlbiBQb3J0Lm5hbWUgbWF0Y2hlcyB0aGUgc3BlY2lmaWVkIGNoYW5uZWwuXG4gKiBVc2UgdGhpcyB0byBzYWZlbHkgZGlzdGluZ3Vpc2ggY29ubmVjdGlvbiB0eXBlcyBiZXR3ZWVuIFBhbmVsIGFuZCBDb250ZW50LlxuICpcbiAqIEBwYXJhbSBwb3J0IC0gQSBjb25uZWN0ZWQgcnVudGltZS5Qb3J0XG4gKiBAcGFyYW0gbmFtZSAtIFRhcmdldCBjaGFubmVsIG5hbWUgdG8gY29tcGFyZVxuICogQHJldHVybnMgVHJ1ZSBpZiB0aGUgcG9ydCBiZWxvbmdzIHRvIHRoZSBjaGFubmVsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0NoYW5uZWwocG9ydCwgbmFtZSkge1xuICAgIHJldHVybiBwb3J0Lm5hbWUgPT09IG5hbWU7XG59XG4vKipcbiAqIERldGVybWluZXMgd2hldGhlciB0aGUgcG9ydCBpcyB1c2VkIGZvciBQYW5lbCDihpQgQ29udGVudCBjb21tdW5pY2F0aW9uLlxuICogQSBjb252ZW5pZW5jZSB3cmFwcGVyIGZvciBDSEFOTkVMLlBBTkVMX0NPTlRFTlQuXG4gKlxuICogQHBhcmFtIHBvcnQgLSBBIGNvbm5lY3RlZCBydW50aW1lLlBvcnRcbiAqIEByZXR1cm5zIFRydWUgaWYgdGhlIHBvcnQgaXMgdGhlIFBhbmVs4oCTQ29udGVudCBjaGFubmVsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1BhbmVsQ29udGVudFBvcnQocG9ydCkge1xuICAgIHJldHVybiBpc0NoYW5uZWwocG9ydCwgQ0hBTk5FTC5QQU5FTF9DT05URU5UKTtcbn1cbiIsImltcG9ydCB7IE1TR19UWVBFIH0gZnJvbSAnQGNvbW1vbi9tZXNzYWdlcyc7XG4vKipcbiAqIFRoaW4gUlBDIHdyYXBwZXIgZm9yIHNlbmRpbmcgbWVzc2FnZXMgZnJvbSBQYW5lbCB0byBDb250ZW50LlxuICogRXhwb3NlcyBoaWdoLWxldmVsIG1ldGhvZHMgZm9yIGVhY2ggbWVzc2FnZSB0eXBlLlxuICovXG5leHBvcnQgY2xhc3MgUGFuZWxBcGkge1xuICAgIHJwYztcbiAgICBjb25zdHJ1Y3RvcihycGMpIHtcbiAgICAgICAgdGhpcy5ycGMgPSBycGM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEludGVybmFsIHNlbmQgaGVscGVyIHRoYXQgYXR0YWNoZXMgYW4gUlBDIHJlcXVlc3QgaWQgYXMgbmVlZGVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGJvZHkgLSBNZXNzYWdlIHBheWxvYWQgdG8gc2VuZFxuICAgICAqIEByZXR1cm5zIFZvaWQtbGlrZSB3aGVuIG5vIHJlcGx5IGlzIGV4cGVjdGVkOyBvdGhlcndpc2UgcmVzb2x2ZXMgd2l0aCBhIHJlc3BvbnNlXG4gICAgICovXG4gICAgc2VuZChib2R5KSB7XG4gICAgICAgIGNvbnN0IHJlcSA9IHtcbiAgICAgICAgICAgIGlkOiBjcnlwdG8ucmFuZG9tVVVJRCgpLFxuICAgICAgICAgICAgZXhwZWN0UmVwbHk6IGZhbHNlLFxuICAgICAgICAgICAgLi4uYm9keSxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMucnBjLnNlbmQocmVxKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVxdWVzdHMgQ29udGVudCB0byByZW5kZXIgdGhlIGdpdmVuIGl0ZW1zLlxuICAgICAqIEBwYXJhbSBpdGVtcyAtIEl0ZW1zIHRvIGRyYXdcbiAgICAgKi9cbiAgICByZW5kZXIoaXRlbXMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VuZCh7IHR5cGU6IE1TR19UWVBFLlJFTkRFUiwgcGF5bG9hZDogeyBpdGVtcyB9IH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUb2dnbGVzIHNlbGVjdGlvbiBtb2RlIGluIENvbnRlbnQuXG4gICAgICogQHBhcmFtIGVuYWJsZWQgLSBUcnVlIHRvIGVuYWJsZVxuICAgICAqL1xuICAgIHRvZ2dsZVNlbGVjdChlbmFibGVkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlbmQoeyB0eXBlOiBNU0dfVFlQRS5UT0dHTEVfU0VMRUNULCBwYXlsb2FkOiB7IGVuYWJsZWQgfSB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xlYXJzIHRoZSBDb250ZW50IG92ZXJsYXkuXG4gICAgICovXG4gICAgY2xlYXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlbmQoeyB0eXBlOiBNU0dfVFlQRS5DTEVBUiB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBob3ZlcmVkIGl0ZW0gYW5kIHJlcXVlc3QgYSB0cmFuc2llbnQgaGlnaGxpZ2h0IG9uIENvbnRlbnQuXG4gICAgICogUGFzcyBgbnVsbGAgdG8gY2xlYXIgdGhlIGN1cnJlbnQgaG92ZXIgaGlnaGxpZ2h0LlxuICAgICAqXG4gICAgICogQHBhcmFtIGlkIC0gVGFyZ2V0IGl0ZW0gSUQsIG9yIGBudWxsYCB0byBjbGVhci5cbiAgICAgKi9cbiAgICBob3ZlcihpZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZW5kKHsgdHlwZTogTVNHX1RZUEUuSE9WRVIsIHBheWxvYWQ6IHsgaWQgfSB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZHMgYSByZXF1ZXN0IHRvIG1lYXN1cmUgdGhlIGN1cnJlbnQgY29udGVudCBzaXplLlxuICAgICAqL1xuICAgIG1lYXN1cmVTaXplKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZW5kKHsgdHlwZTogTVNHX1RZUEUuTUVBU1VSRV9TSVpFIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtcyBhIGNvbm5lY3Rpdml0eSBoZWFsdGggY2hlY2sgKHJvdW5kLXRyaXApLlxuICAgICAqIFNlbnQgYXMgYSByZXF1ZXN0IGV4cGVjdGluZyBhIHJlcGx5LlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIHJlc3BvbnNlLCBvciB1bmRlZmluZWQgb24gdGltZW91dFxuICAgICAqL1xuICAgIHBpbmcoKSB7XG4gICAgICAgIGNvbnN0IHJlcSA9IHtcbiAgICAgICAgICAgIGlkOiBjcnlwdG8ucmFuZG9tVVVJRCgpLFxuICAgICAgICAgICAgZXhwZWN0UmVwbHk6IHRydWUsXG4gICAgICAgICAgICB0eXBlOiBNU0dfVFlQRS5QSU5HLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGhpcy5ycGMuc2VuZChyZXEsIDUwMDApO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IGlzUmVzcG9uc2UgfSBmcm9tICdAY29tbW9uL21lc3NhZ2VzJztcbi8qKlxuICogSW1wbGVtZW50cyBhIG1pbmltYWwgcmVxdWVzdC9yZXNwb25zZSBSUEMgb3ZlciBjaHJvbWUucnVudGltZS5Qb3J0LlxuICogVHJhY2tzIHBlbmRpbmcgcmVxdWVzdHMgYnkgaWQgYW5kIGhhbmRsZXMgdGltZW91dHMgYW5kIGRpc2Nvbm5lY3RzLlxuICovXG5leHBvcnQgY2xhc3MgUG9ydFJwYyB7XG4gICAgcG9ydDtcbiAgICBwZW5kaW5nID0gbmV3IE1hcCgpO1xuICAgIGFsaXZlID0gdHJ1ZTtcbiAgICAvKipcbiAgICAgKiBTdWJzY3JpYmVzIHRvIHBvcnQgbWVzc2FnZSBhbmQgZGlzY29ubmVjdCBldmVudHMuXG4gICAgICogQHBhcmFtIHBvcnQgLSBUaGUgcnVudGltZS5Qb3J0IHVzZWQgZm9yIG1lc3NhZ2luZ1xuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHBvcnQpIHtcbiAgICAgICAgdGhpcy5wb3J0ID0gcG9ydDtcbiAgICAgICAgdGhpcy5wb3J0Lm9uTWVzc2FnZS5hZGRMaXN0ZW5lcigobXNnKSA9PiB7XG4gICAgICAgICAgICBpZiAoaXNSZXNwb25zZShtc2cpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wZW5kaW5nLmdldChtc2cuaWQpPy4obXNnKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBlbmRpbmcuZGVsZXRlKG1zZy5pZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnBvcnQub25EaXNjb25uZWN0LmFkZExpc3RlbmVyKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuYWxpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgIC8vIFJlYXNvbnMgc3VjaCBhcyBCRkNhY2hlIG1heSBiZSBpbmNsdWRlZFxuICAgICAgICAgICAgY29uc3QgcmVhc29uID0gY2hyb21lLnJ1bnRpbWUubGFzdEVycm9yPy5tZXNzYWdlID8/ICdkaXNjb25uZWN0ZWQnO1xuICAgICAgICAgICAgLy8gVHJlYXQgcGVuZGluZyBzdGF0dXMgYXMgZmFpbHVyZSB3aGVuIGEgZGlzY29ubmVjdGlvbiBvY2N1cnMuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtpZCwgcmVzb2x2ZV0gb2YgdGhpcy5wZW5kaW5nKSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh7IGlkLCBvazogZmFsc2UsIGVycm9yOiByZWFzb24gfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBlbmRpbmcuY2xlYXIoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIEdldCB0aGUgY3VycmVudCBjb25uZWN0aW9uIHN0YXR1c1xuICAgIGdldCBpc0FsaXZlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hbGl2ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZHMgYW4gUlBDIHJlcXVlc3QgYW5kIG9wdGlvbmFsbHkgYXdhaXRzIGEgcmVzcG9uc2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcmVxIC0gVGhlIFJQQyByZXF1ZXN0IHRvIHNlbmRcbiAgICAgKiBAcGFyYW0gdGltZW91dE1zIC0gVGltZW91dCAobXMpIHdoZW4gd2FpdGluZyBmb3IgYSByZXBseSAoZGVmYXVsdCA1MDAwKVxuICAgICAqIEByZXR1cm5zIFRoZSByZXNwb25zZSB3aGVuIGBleHBlY3RSZXBseWAgaXMgdHJ1ZTsgb3RoZXJ3aXNlIHVuZGVmaW5lZFxuICAgICAqL1xuICAgIHNlbmQocmVxLCB0aW1lb3V0TXMgPSA1MDAwKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICAgICAgLy8gSWYgYWxyZWFkeSBkaXNjb25uZWN0ZWQsIGltbWVkaWF0ZWx5IHRlcm1pbmF0ZSAoYXZvaWQgVW5jaGVja2VkIHJ1bnRpbWUubGFzdEVycm9yKVxuICAgICAgICAgICAgaWYgKCF0aGlzLmFsaXZlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUocmVxLmV4cGVjdFJlcGx5ID8gdW5kZWZpbmVkIDogdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXEuZXhwZWN0UmVwbHkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0aW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBlbmRpbmcuZGVsZXRlKHJlcS5pZCk7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUodW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICB9LCB0aW1lb3V0TXMpO1xuICAgICAgICAgICAgICAgIHRoaXMucGVuZGluZy5zZXQocmVxLmlkLCAocmVzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wb3J0LnBvc3RNZXNzYWdlKHJlcSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICAgICAgaWYgKHJlcS5leHBlY3RSZXBseSlcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wZW5kaW5nLmRlbGV0ZShyZXEuaWQpO1xuICAgICAgICAgICAgICAgIHJlc29sdmUodW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXJlcS5leHBlY3RSZXBseSlcbiAgICAgICAgICAgICAgICByZXNvbHZlKHVuZGVmaW5lZCk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiIsImV4cG9ydCBjb25zdCBDRFBfVkVSU0lPTiA9ICcxLjMnO1xuLyoqXG4gKiBXcmFwcyBgY2hyb21lLnJ1bnRpbWUubGFzdEVycm9yYCBpbnRvIGEgc3RhbmRhcmQgYEVycm9yYCBpbnN0YW5jZS5cbiAqXG4gKiBAcmV0dXJucyBBbiBgRXJyb3JgIGlmIGEgbGFzdCBlcnJvciBleGlzdHM7IG90aGVyd2lzZSBgbnVsbGAuXG4gKi9cbmZ1bmN0aW9uIGxhc3RFcnJvcigpIHtcbiAgICBjb25zdCBlcnIgPSBjaHJvbWUucnVudGltZS5sYXN0RXJyb3I7XG4gICAgcmV0dXJuIGVyciA/IG5ldyBFcnJvcihlcnIubWVzc2FnZSB8fCBTdHJpbmcoZXJyKSkgOiBudWxsO1xufVxuLyoqIFRyYWNrcyB0YWJJZHMgdGhhdCB0aGlzIGV4dGVuc2lvbiBjdXJyZW50bHkgb3ducyAoYXR0YWNoZWQgYnkgaXRzZWxmKS4gKi9cbmNvbnN0IE9XTkVEID0gbmV3IFNldCgpO1xuLyoqIENsZWFycyBvd25lcnNoaXAgb24gZGV0YWNoIChjb3ZlcnMgZXh0ZXJuYWwgY2F1c2VzIGxpa2Ugb3BlbmluZy9jbG9zaW5nIERldlRvb2xzKS4gKi9cbmNocm9tZS5kZWJ1Z2dlci5vbkRldGFjaC5hZGRMaXN0ZW5lcigoZGVidWdnZWUpID0+IHtcbiAgICBjb25zdCBpZCA9IGRlYnVnZ2VlLnRhYklkO1xuICAgIGlmICh0eXBlb2YgaWQgPT09ICdudW1iZXInKVxuICAgICAgICBPV05FRC5kZWxldGUoaWQpO1xufSk7XG4vKipcbiAqIERldGFjaGVzIHRoZSBDaHJvbWUgRGVidWdnZXIgKENEUCkgZnJvbSB0aGUgZ2l2ZW4gdGFyZ2V0LlxuICpcbiAqIEBwYXJhbSB0YXJnZXQgLSBUaGUgZGVidWdnZWUgdG8gZGV0YWNoIGZyb20uXG4gKiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyBvbmNlIGRldGFjaG1lbnQgY29tcGxldGVzLlxuICovXG5hc3luYyBmdW5jdGlvbiBkZXRhY2godGFyZ2V0KSB7XG4gICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgY2hyb21lLmRlYnVnZ2VyLmRldGFjaCh0YXJnZXQsICgpID0+IHJlc29sdmUoKSk7XG4gICAgfSk7XG59XG4vKipcbiAqIFNhZmVseSBhdHRhY2hlcyB0byB0aGUgdGFyZ2V0LiBJZiBhIHByZXZpb3VzIHNlc3Npb24gb3duZWQgYnkgdGhpcyBleHRlbnNpb25cbiAqIGlzIGFscmVhZHkgYXR0YWNoZWQsIGl0IHJldXNlcyBpdCBpbnN0ZWFkIG9mIGZhaWxpbmcuXG4gKlxuICogQHBhcmFtIHRhcmdldCAtIFRoZSBkZWJ1Z2dlZSB0byBhdHRhY2ggdG8gKGUuZy4sIGB7IHRhYklkIH1gKS5cbiAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGB0cnVlYCB3aGVuIHRoaXMgY2FsbCBwZXJmb3JtZWQgYSBuZXcgYXR0YWNoLFxuICogICAgICAgICAgb3IgYGZhbHNlYCB3aGVuIGFuIGV4aXN0aW5nIG93bmVkIHNlc3Npb24gaXMgcmV1c2VkLlxuICogQHRocm93cyBJZiBhbm90aGVyIGNsaWVudCAoRGV2VG9vbHMvYW5vdGhlciBleHRlbnNpb24pIGlzIGF0dGFjaGVkLCBvciBvbiBvdGhlciBhdHRhY2ggZXJyb3JzLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYXR0YWNoT3duZWQodGFyZ2V0KSB7XG4gICAgY29uc3QgdGFiSWQgPSB0YXJnZXQudGFiSWQgPz8gbnVsbDtcbiAgICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBjaHJvbWUuZGVidWdnZXIuYXR0YWNoKHRhcmdldCwgQ0RQX1ZFUlNJT04sICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGVyciA9IGNocm9tZS5ydW50aW1lLmxhc3RFcnJvcjtcbiAgICAgICAgICAgIGlmICghZXJyKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRhYklkICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIE9XTkVELmFkZCh0YWJJZCk7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKTsgLy8gbmV3bHkgYXR0YWNoZWQgYnkgdGhpcyBjYWxsXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbXNnID0gZXJyLm1lc3NhZ2UgfHwgJyc7XG4gICAgICAgICAgICBpZiAobXNnLmluY2x1ZGVzKCdBbm90aGVyIGRlYnVnZ2VyIGlzIGFscmVhZHkgYXR0YWNoZWQnKSkge1xuICAgICAgICAgICAgICAgIC8vIEFscmVhZHkgYXR0YWNoZWQ6IHJldXNlIG9ubHkgaWYgb3duZWQgYnkgdGhpcyBleHRlbnNpb24uXG4gICAgICAgICAgICAgICAgaWYgKHRhYklkICE9IG51bGwgJiYgT1dORUQuaGFzKHRhYklkKSkge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGZhbHNlKTsgLy8gcmV1c2UgZXhpc3Rpbmcgb3duZWQgc2Vzc2lvblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignRGVidWdnZXIgaXMgYWxyZWFkeSBhdHRhY2hlZCBieSBhbm90aGVyIGNsaWVudCAoRGV2VG9vbHMvZXh0ZW5zaW9uKS4nKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihtc2cpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG4vKipcbiAqIFNhZmVseSBkZXRhY2hlcyBvbmx5IHdoZW4gdGhlIGN1cnJlbnQgZXh0ZW5zaW9uIG93bnMgdGhlIHNlc3Npb24uXG4gKiBOby1vcHMgaWYgdGhlIHRhcmdldCBpcyBub3Qgb3duZWQuXG4gKlxuICogQHBhcmFtIHRhcmdldCAtIFRoZSBkZWJ1Z2dlZSB0byBkZXRhY2ggZnJvbS5cbiAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIGFmdGVyIGRldGFjaGluZyAob3IgaW1tZWRpYXRlbHkgaWYgbm90IG93bmVkKS5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRldGFjaE93bmVkKHRhcmdldCkge1xuICAgIGNvbnN0IHRhYklkID0gdGFyZ2V0LnRhYklkID8/IG51bGw7XG4gICAgaWYgKHRhYklkID09IG51bGwpXG4gICAgICAgIHJldHVybjtcbiAgICBpZiAoIU9XTkVELmhhcyh0YWJJZCkpXG4gICAgICAgIHJldHVybjsgLy8gbm90IG93bmVkIGJ5IHRoaXMgZXh0ZW5zaW9uXG4gICAgYXdhaXQgZGV0YWNoKHRhcmdldCk7XG4gICAgT1dORUQuZGVsZXRlKHRhYklkKTtcbn1cbi8qKlxuICogU2VuZHMgYSBDRFAgY29tbWFuZCB0byB0aGUgYXR0YWNoZWQgdGFyZ2V0LlxuICpcbiAqIEB0eXBlUGFyYW0gVCAtIEV4cGVjdGVkIHJlc3VsdCB0eXBlIG9mIHRoZSBjb21tYW5kLlxuICogQHBhcmFtIHRhcmdldCAtIFRoZSBkZWJ1Z2dlZSB0byB3aGljaCB0aGUgY29tbWFuZCBpcyBzZW50LlxuICogQHBhcmFtIG1ldGhvZCAtIENEUCBtZXRob2QgbmFtZSAoZS5nLiwgYCdQYWdlLmNhcHR1cmVTY3JlZW5zaG90J2ApLlxuICogQHBhcmFtIHBhcmFtcyAtIE9wdGlvbmFsIHBhcmFtZXRlcnMgb2JqZWN0IGZvciB0aGUgY29tbWFuZC5cbiAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIGNvbW1hbmQgcmVzdWx0IG9yIHJlamVjdHMgaWYgYW4gZXJyb3Igb2NjdXJzLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2VuZCh0YXJnZXQsIG1ldGhvZCwgcGFyYW1zKSB7XG4gICAgcmV0dXJuIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgY2hyb21lLmRlYnVnZ2VyLnNlbmRDb21tYW5kKHRhcmdldCwgbWV0aG9kLCBwYXJhbXMgPz8ge30sIChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGVyciA9IGxhc3RFcnJvcigpO1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgocmVzdWx0ID8/IHt9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuIiwiaW1wb3J0IHsgaXNSZXN0cmljdGVkIH0gZnJvbSAnQGNvbW1vbi91cmwnO1xuaW1wb3J0IHsgYXR0YWNoT3duZWQsIGRldGFjaE93bmVkLCBzZW5kIH0gZnJvbSAnQGluZnJhL2NkcC9jZHBfY2xpZW50Jztcbi8qKlxuICogTm9ybWFsaXplcyBhIHN0cmluZyBmb3Igc2FmZSB1c2UgYXMgYSBmaWxlbmFtZTpcbiAqIHJlcGxhY2VzIHJlc2VydmVkIGNoYXJhY3RlcnMsIGNvbGxhcHNlcyB3aGl0ZXNwYWNlLCBhbmQgdHJpbXMgZW5kcy5cbiAqXG4gKiBAcGFyYW0gcyAtIFJhdyBzdHJpbmcgdG8gc2FuaXRpemUuXG4gKiBAcmV0dXJucyBTYW5pdGl6ZWQgZmlsZW5hbWUtc2FmZSBzdHJpbmcuXG4gKi9cbmZ1bmN0aW9uIHNhbml0aXplRm9yRmlsZW5hbWUocykge1xuICAgIHJldHVybiBzXG4gICAgICAgIC5yZXBsYWNlKC9bXFxcXC86Kj9cIjw+fF0vZywgJ18nKVxuICAgICAgICAucmVwbGFjZSgvXFxzKy9nLCAnICcpXG4gICAgICAgIC50cmltKCk7XG59XG4vKipcbiAqIEJ1aWxkcyBhIHRpbWVzdGFtcGVkIGZpbGVuYW1lIGZvciB0aGUgY2FwdHVyZSBiYXNlZCBvbiB0aGUgdGFiJ3MgdGl0bGUgb3IgaG9zdC5cbiAqIFRydW5jYXRlcyB0aGUgYmFzZSBuYW1lIHRvIDgwIGNoYXJhY3RlcnMgYW5kIGFwcGVuZHMgdGhlIHByb3BlciBleHRlbnNpb24uXG4gKlxuICogQHBhcmFtIHRhYiAtIFNvdXJjZSB0YWIgKHRpdGxlL3VybCB1c2VkIGZvciBuYW1pbmcpLlxuICogQHBhcmFtIGZtdCAtIFRhcmdldCBpbWFnZSBmb3JtYXQgKCdwbmcnIHwgJ2pwZWcnKS5cbiAqIEByZXR1cm5zIEEgZmlsZW5hbWUgbGlrZSBgcGFnZS0yMDI1LTA4LTEzVDEwLTIwLTMwLTAwMFoucG5nYC5cbiAqL1xuZnVuY3Rpb24gbWFrZUZpbGVuYW1lKHRhYiwgZm10KSB7XG4gICAgY29uc3QgdGl0bGUgPSB0YWIudGl0bGUgJiYgdGFiLnRpdGxlLnRyaW0oKSA/IHRhYi50aXRsZSA6ICcnO1xuICAgIGxldCBiYXNlID0gdGl0bGUgfHxcbiAgICAgICAgKCgpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBVUkwodGFiLnVybCA/PyAnJykuaG9zdCB8fCAncGFnZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICdwYWdlJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkoKTtcbiAgICBiYXNlID0gc2FuaXRpemVGb3JGaWxlbmFtZShiYXNlKTtcbiAgICBpZiAoYmFzZS5sZW5ndGggPiA4MClcbiAgICAgICAgYmFzZSA9IGJhc2Uuc2xpY2UoMCwgODApO1xuICAgIGNvbnN0IHRzID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnJlcGxhY2UoL1s6Ll0vZywgJy0nKTtcbiAgICByZXR1cm4gYCR7YmFzZX0tJHt0c30uJHtmbXR9YDtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgY3VycmVudCB2aXN1YWwgdmlld3BvcnQgcmVjdGFuZ2xlIGluIENTUyBwaXhlbHMgKGZvciB2aWV3cG9ydCBjYXB0dXJlKS5cbiAqIEBwYXJhbSB0YXJnZXQgLSBEZXZUb29scyBQcm90b2NvbCB0YXJnZXQgdGFiIChgY2hyb21lLmRlYnVnZ2VyLkRlYnVnZ2VlYCkuXG4gKiBAcmV0dXJucyBQcm9taXNlIHJlc29sdmluZyB0byBgeyB4LCB5LCB3aWR0aCwgaGVpZ2h0IH1gIGluIENTUyBwaXhlbHMuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGdldFZpZXdwb3J0Q3NzUmVjdCh0YXJnZXQpIHtcbiAgICBjb25zdCBsbSA9IGF3YWl0IHNlbmQodGFyZ2V0LCAnUGFnZS5nZXRMYXlvdXRNZXRyaWNzJyk7XG4gICAgY29uc3QgdiA9IGxtLmNzc1Zpc3VhbFZpZXdwb3J0O1xuICAgIHJldHVybiB7XG4gICAgICAgIHg6IE1hdGgubWF4KDAsIE1hdGguZmxvb3Iodi5wYWdlWCkgfCAwKSxcbiAgICAgICAgeTogTWF0aC5tYXgoMCwgTWF0aC5mbG9vcih2LnBhZ2VZKSB8IDApLFxuICAgICAgICB3aWR0aDogTWF0aC5tYXgoMSwgTWF0aC5jZWlsKHYuY2xpZW50V2lkdGgpIHwgMCksXG4gICAgICAgIGhlaWdodDogTWF0aC5tYXgoMSwgTWF0aC5jZWlsKHYuY2xpZW50SGVpZ2h0KSB8IDApLFxuICAgIH07XG59XG4vKipcbiAqIFJlc29sdmVzIHNjcmVlbnNob3QgZ2VvbWV0cnkgZm9yIHRoZSBzZWxlY3RlZCBjYXB0dXJlIGFyZWEuXG4gKiBAcGFyYW0gdGFyZ2V0IC0gRGV2VG9vbHMgUHJvdG9jb2wgdGFyZ2V0IHRhYiAoYGNocm9tZS5kZWJ1Z2dlci5EZWJ1Z2dlZWApLlxuICogQHBhcmFtIGFyZWEgLSBDYXB0dXJlIGFyZWE6IGAnZnVsbCdgIChlbnRpcmUgcGFnZSkgb3IgYCd2aWV3cG9ydCdgICh2aXNpYmxlIGFyZWEpLlxuICogQHBhcmFtIHNjYWxlIC0gSW1hZ2Ugc2NhbGUgZmFjdG9yIGFwcGxpZWQgdG8gYGNsaXAuc2NhbGVgLlxuICogQHBhcmFtIGNvbnRlbnRTaXplIC0gTWVhc3VyZWQgcGFnZSBjb250ZW50IHNpemUgaW4gQ1NTIHBpeGVscyB1c2VkIHdoZW4gYGFyZWFgIGlzIGAnZnVsbCdgLlxuICogQHJldHVybnMgYENhcHR1cmVHZW9tZXRyeWAgZGVzY3JpYmluZyB3aGV0aGVyIGRldmljZSBtZXRyaWNzIG92ZXJyaWRlIGlzIHJlcXVpcmVkIGFuZCB0aGUgY2xpcCByZWN0YW5nbGUgZm9yIGBQYWdlLmNhcHR1cmVTY3JlZW5zaG90YC5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gcmVzb2x2ZUdlb21ldHJ5KHRhcmdldCwgYXJlYSwgc2NhbGUsIGNvbnRlbnRTaXplKSB7XG4gICAgaWYgKGFyZWEgPT09ICd2aWV3cG9ydCcpIHtcbiAgICAgICAgLy8gTm8gb3ZlcnJpZGUgcmVxdWlyZWQ6IENsaXAgdGhlIGN1cnJlbnQgZGlzcGxheSBhcmVhIHdpdGggY2xpcFxuICAgICAgICBjb25zdCB7IHgsIHksIHdpZHRoLCBoZWlnaHQgfSA9IGF3YWl0IGdldFZpZXdwb3J0Q3NzUmVjdCh0YXJnZXQpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdXNlT3ZlcnJpZGU6IGZhbHNlLFxuICAgICAgICAgICAgY2xpcDogeyB4LCB5LCB3aWR0aCwgaGVpZ2h0LCBzY2FsZSB9LFxuICAgICAgICAgICAgY2FwdHVyZUJleW9uZFZpZXdwb3J0OiB0cnVlLFxuICAgICAgICAgICAgc2hvdWxkU2Nyb2xsVG9wOiBmYWxzZSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29uc3Qgd2lkdGggPSBNYXRoLm1heCgxLCBNYXRoLmNlaWwoY29udGVudFNpemUud2lkdGgpIHwgMCk7XG4gICAgY29uc3QgaGVpZ2h0ID0gTWF0aC5tYXgoMSwgTWF0aC5jZWlsKGNvbnRlbnRTaXplLmhlaWdodCkgfCAwKTtcbiAgICByZXR1cm4ge1xuICAgICAgICB1c2VPdmVycmlkZTogdHJ1ZSxcbiAgICAgICAgbWV0cmljczoge1xuICAgICAgICAgICAgd2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQsXG4gICAgICAgICAgICBkZXZpY2VTY2FsZUZhY3RvcjogMSxcbiAgICAgICAgICAgIG1vYmlsZTogZmFsc2UsXG4gICAgICAgICAgICBzY3JlZW5XaWR0aDogd2lkdGgsXG4gICAgICAgICAgICBzY3JlZW5IZWlnaHQ6IGhlaWdodCxcbiAgICAgICAgICAgIHBvc2l0aW9uWDogMCxcbiAgICAgICAgICAgIHBvc2l0aW9uWTogMCxcbiAgICAgICAgfSxcbiAgICAgICAgY2xpcDogeyB4OiAwLCB5OiAwLCB3aWR0aCwgaGVpZ2h0LCBzY2FsZSB9LFxuICAgICAgICBjYXB0dXJlQmV5b25kVmlld3BvcnQ6IHRydWUsXG4gICAgICAgIHNob3VsZFNjcm9sbFRvcDogdHJ1ZSxcbiAgICB9O1xufVxuLyoqXG4gKiBDYXB0dXJlIHNjcmVlbnNob3RzIGFuZCBzYXZlIHRoZW0gdmlhIHRoZSBkb3dubG9hZCBBUEkuXG4gKlxuICogQHBhcmFtIG9wdHMgLSBDYXB0dXJlIG9wdGlvbnMgKHRhYiBpZCwgZm9ybWF0LCBxdWFsaXR5LCBzY2FsZSwgZXRjLikuXG4gKiBAcmV0dXJucyBUaGUgYGRvd25sb2FkSWRgIHdoZW4gc2F2ZWQgc3VjY2Vzc2Z1bGx5OyBgdW5kZWZpbmVkYCB3aGVuIGNhcHR1cmUgaXMgc2tpcHBlZC5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNhcHR1cmUob3B0cykge1xuICAgIGNvbnN0IHRhYiA9IGF3YWl0IGNocm9tZS50YWJzLmdldChvcHRzLnRhYklkKTtcbiAgICBpZiAoIXRhYi5pZCB8fCBpc1Jlc3RyaWN0ZWQodGFiLnVybCkpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdDYXB0dXJpbmcgaXMgbm90IHBvc3NpYmxlIGR1ZSB0byByZXN0cmljdGVkIFVSTDonLCB0YWIudXJsKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB0YXJnZXQgPSB7IHRhYklkOiB0YWIuaWQgfTtcbiAgICBjb25zdCBmbXQgPSBvcHRzLmZvcm1hdCA/PyAncG5nJztcbiAgICBjb25zdCBzZXR0bGVNcyA9IG9wdHMuc2V0dGxlTXMgPz8gNTAwO1xuICAgIGNvbnN0IHNjYWxlID0gb3B0cy5zY2FsZSA/PyAxO1xuICAgIGNvbnN0IGFyZWEgPSBvcHRzLmFyZWEgPz8gJ2Z1bGwnO1xuICAgIGxldCBkaWRBdHRhY2ggPSBmYWxzZTtcbiAgICBsZXQgdXNlZE92ZXJyaWRlID0gZmFsc2U7XG4gICAgdHJ5IHtcbiAgICAgICAgZGlkQXR0YWNoID0gYXdhaXQgYXR0YWNoT3duZWQodGFyZ2V0KTtcbiAgICAgICAgYXdhaXQgc2VuZCh0YXJnZXQsICdQYWdlLmVuYWJsZScpO1xuICAgICAgICBpZiAob3B0cy5icmluZ1RvRnJvbnQgPz8gdHJ1ZSkge1xuICAgICAgICAgICAgYXdhaXQgc2VuZCh0YXJnZXQsICdQYWdlLmJyaW5nVG9Gcm9udCcpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGdlb20gPSBhd2FpdCByZXNvbHZlR2VvbWV0cnkodGFyZ2V0LCBhcmVhLCBzY2FsZSwgb3B0cy5jb250ZW50U2l6ZSk7XG4gICAgICAgIGlmIChnZW9tLnNob3VsZFNjcm9sbFRvcCkge1xuICAgICAgICAgICAgYXdhaXQgc2VuZCh0YXJnZXQsICdSdW50aW1lLmV2YWx1YXRlJywgeyBleHByZXNzaW9uOiAnd2luZG93LnNjcm9sbFRvKDAsMCknIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChnZW9tLnVzZU92ZXJyaWRlICYmIGdlb20ubWV0cmljcykge1xuICAgICAgICAgICAgdXNlZE92ZXJyaWRlID0gdHJ1ZTtcbiAgICAgICAgICAgIC8vIFNjcm9sbCB0byB0b3AgJiB3YWl0IGJyaWVmbHkgZm9yIGxheW91dC9pbWFnZSBzdGFiaWxpemF0aW9uXG4gICAgICAgICAgICBhd2FpdCBzZW5kKHRhcmdldCwgJ0VtdWxhdGlvbi5zZXREZXZpY2VNZXRyaWNzT3ZlcnJpZGUnLCBnZW9tLm1ldHJpY3MpO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyKSA9PiBzZXRUaW1lb3V0KHIsIHNldHRsZU1zKSk7XG4gICAgICAgIGNvbnN0IGNhcFBhcmFtcyA9IHtcbiAgICAgICAgICAgIGZvcm1hdDogZm10LFxuICAgICAgICAgICAgZnJvbVN1cmZhY2U6IHRydWUsXG4gICAgICAgICAgICBjYXB0dXJlQmV5b25kVmlld3BvcnQ6IGdlb20uY2FwdHVyZUJleW9uZFZpZXdwb3J0LFxuICAgICAgICAgICAgY2xpcDogZ2VvbS5jbGlwLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoZm10ID09PSAnanBlZycgJiYgdHlwZW9mIG9wdHMucXVhbGl0eSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIGNhcFBhcmFtcy5xdWFsaXR5ID0gTWF0aC5taW4oMTAwLCBNYXRoLm1heCgwLCBNYXRoLnJvdW5kKG9wdHMucXVhbGl0eSkpKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IHNlbmQodGFyZ2V0LCAnUGFnZS5jYXB0dXJlU2NyZWVuc2hvdCcsIGNhcFBhcmFtcyk7XG4gICAgICAgIGNvbnN0IG1pbWUgPSBmbXQgPT09ICdwbmcnID8gJ2ltYWdlL3BuZycgOiAnaW1hZ2UvanBlZyc7XG4gICAgICAgIGNvbnN0IHVybCA9IGBkYXRhOiR7bWltZX07YmFzZTY0LCR7ZGF0YX1gO1xuICAgICAgICBjb25zdCBmaWxlbmFtZSA9IG9wdHMuZmlsZW5hbWUgPz8gbWFrZUZpbGVuYW1lKHRhYiwgZm10KTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IGNocm9tZS5kb3dubG9hZHMuZG93bmxvYWQoeyB1cmwsIGZpbGVuYW1lLCBzYXZlQXM6IGZhbHNlIH0pO1xuICAgIH1cbiAgICBmaW5hbGx5IHtcbiAgICAgICAgaWYgKHVzZWRPdmVycmlkZSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCBzZW5kKHRhcmdldCwgJ0VtdWxhdGlvbi5jbGVhckRldmljZU1ldHJpY3NPdmVycmlkZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgICAgIC8qIG5vLW9wICovXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRpZEF0dGFjaCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCBkZXRhY2hPd25lZCh0YXJnZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgICAgIC8qIG5vLW9wICovXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCIvKipcbiAqIFVJRXZlbnRUeXBlIC8gVUlFdmVudFBheWxvYWRNYXBcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBBIHR5cGVkIGNhdGFsb2cgb2YgKnB1cmUgVUkgZXZlbnRzKiBlbWl0dGVkIGJ5IHRoZSBWaWV3IChwYW5lbF92aWV3LnRzKS5cbiAqIC0gVGhlIFZpZXcgcmVhZHMgRE9NIHN0YXRlLCBub3JtYWxpemVzIGl0LCBhbmQgZW1pdHMgb25lIG9mIHRoZXNlIGV2ZW50cy5cbiAqIC0gVGhlIENvbnRyb2xsZXIgbWFwcyBlYWNoIFVJIGV2ZW50IHRvIGFuIEFjdGlvblR5cGUgYW5kIGRpc3BhdGNoZXMgaXQuXG4gKiAtIFBheWxvYWRzIGFyZSBzdHJvbmdseSB0eXBlZCB2aWEgVUlFdmVudFBheWxvYWRNYXA7IHVzZSBgdW5kZWZpbmVkYCBmb3Igbm8gcGF5bG9hZC5cbiAqL1xuZXhwb3J0IHZhciBVSUV2ZW50VHlwZTtcbihmdW5jdGlvbiAoVUlFdmVudFR5cGUpIHtcbiAgICAvKiogVG9nZ2xlIHNlbGVjdGlvbiBtb2RlICovXG4gICAgVUlFdmVudFR5cGVbXCJUT0dHTEVfU0VMRUNUXCJdID0gXCJUT0dHTEVfU0VMRUNUXCI7XG4gICAgLyoqIENsZWFyIGFsbCBzZWxlY3Rpb25zICovXG4gICAgVUlFdmVudFR5cGVbXCJDTEVBUlwiXSA9IFwiQ0xFQVJcIjtcbiAgICAvKiogVHJpZ2dlciBwYWdlIGNhcHR1cmUgKi9cbiAgICBVSUV2ZW50VHlwZVtcIkNBUFRVUkVcIl0gPSBcIkNBUFRVUkVcIjtcbiAgICAvKiogQmFkZ2Ugc2l6ZSBjaGFuZ2VkIChyYW5nZS9udW1iZXIgaW5wdXRzKSAqL1xuICAgIFVJRXZlbnRUeXBlW1wiQkFER0VfU0laRV9DSEFOR0VcIl0gPSBcIkJBREdFX1NJWkVfQ0hBTkdFXCI7XG4gICAgLyoqIEJhZGdlIGNvbG9yIHBpY2tlZCAocG9wb3ZlciBidXR0b25zKSAqL1xuICAgIFVJRXZlbnRUeXBlW1wiQkFER0VfQ09MT1JfU0VMRUNUXCJdID0gXCJCQURHRV9DT0xPUl9TRUxFQ1RcIjtcbiAgICAvKiogQmFkZ2Ugc2hhcGUgY2hhbmdlZCAoc2VsZWN0KSAqL1xuICAgIFVJRXZlbnRUeXBlW1wiQkFER0VfU0hBUEVfQ0hBTkdFXCJdID0gXCJCQURHRV9TSEFQRV9DSEFOR0VcIjtcbiAgICAvKiogRGVsZXRlIHRoZSBzZWxlY3RlZCBiYWRnZSAqL1xuICAgIFVJRXZlbnRUeXBlW1wiQkFER0VfREVMRVRFXCJdID0gXCJCQURHRV9ERUxFVEVcIjtcbiAgICAvKiogQmFkZ2UgcG9zaXRpb24gcGlja2VkIChwb3BvdmVyIGJ1dHRvbnMpICovXG4gICAgVUlFdmVudFR5cGVbXCJCQURHRV9QT1NJVElPTl9TRUxFQ1RcIl0gPSBcIkJBREdFX1BPU0lUSU9OX1NFTEVDVFwiO1xuICAgIC8qKiBVcGRhdGUgYSBncm91cCBvZiBlbGVtZW50cyAqL1xuICAgIFVJRXZlbnRUeXBlW1wiU0VUX0dST1VQXCJdID0gXCJTRVRfR1JPVVBcIjtcbiAgICAvKiogQ2FwdHVyZSBmb3JtYXQgY2hhbmdlZCAocmFkaW8pICovXG4gICAgVUlFdmVudFR5cGVbXCJDQVBUVVJFX0ZPUk1BVF9DSEFOR0VcIl0gPSBcIkNBUFRVUkVfRk9STUFUX0NIQU5HRVwiO1xuICAgIC8qKiBDYXB0dXJlIGFyZWEgY2hhbmdlZCAocmFkaW8pICovXG4gICAgVUlFdmVudFR5cGVbXCJDQVBUVVJFX0FSRUFfQ0hBTkdFXCJdID0gXCJDQVBUVVJFX0FSRUFfQ0hBTkdFXCI7XG4gICAgLyoqIEpQRUcgcXVhbGl0eSBjaGFuZ2VkIChyYW5nZS9udW1iZXIpICovXG4gICAgVUlFdmVudFR5cGVbXCJDQVBUVVJFX1FVQUxJVFlfQ0hBTkdFXCJdID0gXCJDQVBUVVJFX1FVQUxJVFlfQ0hBTkdFXCI7XG4gICAgLyoqIENhcHR1cmUgc2NhbGUgY2hhbmdlZCAocmFuZ2UvbnVtYmVyKSAqL1xuICAgIFVJRXZlbnRUeXBlW1wiQ0FQVFVSRV9TQ0FMRV9DSEFOR0VcIl0gPSBcIkNBUFRVUkVfU0NBTEVfQ0hBTkdFXCI7XG4gICAgLyoqIFRvZ2dsZSBjYXB0dXJlIG9wdGlvbnMgZHJvcGRvd24gKGV4cGFuZC9jb2xsYXBzZSkgKi9cbiAgICBVSUV2ZW50VHlwZVtcIlRPR0dMRV9DQVBUVVJFX1BBTkVMXCJdID0gXCJUT0dHTEVfQ0FQVFVSRV9QQU5FTFwiO1xuICAgIC8qKiBSZW9yZGVyaW5nIHNlbGVjdGVkIGl0ZW1zIChkcmFnIGFuZCBkcm9wKSAqL1xuICAgIFVJRXZlbnRUeXBlW1wiUkVPUkRFUl9JVEVNU1wiXSA9IFwiUkVPUkRFUl9JVEVNU1wiO1xuICAgIC8qKiBFbWl0dGVkIHdoZW4gYW4gaXRlbSdzIGVkaXQtc2VsZWN0aW9uIGNoZWNrYm94IGNoYW5nZXMgc3RhdGUgKi9cbiAgICBVSUV2ZW50VHlwZVtcIklURU1fU0VMRUNUSU9OX0NIQU5HRURcIl0gPSBcIklURU1fU0VMRUNUSU9OX0NIQU5HRURcIjtcbiAgICAvKiogU3RhcnQgaXRlbSBob3ZlciAqL1xuICAgIFVJRXZlbnRUeXBlW1wiSVRFTV9IT1ZFUl9JTlwiXSA9IFwiSVRFTV9IT1ZFUl9JTlwiO1xuICAgIC8qKiBFbmQgaXRlbSBob3ZlciAqL1xuICAgIFVJRXZlbnRUeXBlW1wiSVRFTV9IT1ZFUl9PVVRcIl0gPSBcIklURU1fSE9WRVJfT1VUXCI7XG4gICAgLyoqIEFwcGx5IHBlbmRpbmcgY29tbWVudCBlZGl0cyB0byB0aGUgc2VsZWN0ZWQgaXRlbSAqL1xuICAgIFVJRXZlbnRUeXBlW1wiSVRFTV9DT01NRU5UX0FQUExZXCJdID0gXCJJVEVNX0NPTU1FTlRfQVBQTFlcIjtcbiAgICAvKiogVXBkYXRlIHRoZSBVSSB0aGVtZSAqL1xuICAgIFVJRXZlbnRUeXBlW1wiVVBEQVRFX1RIRU1FXCJdID0gXCJVUERBVEVfVEhFTUVcIjtcbiAgICAvKiogRW1pdHRlZCBhZnRlciB0aGUgU2V0dGluZ3MgbW9kYWwgaXMgc2hvdyAqL1xuICAgIFVJRXZlbnRUeXBlW1wiU0VUVElOR19NT0RBTF9TSE9XXCJdID0gXCJTRVRUSU5HX01PREFMX1NIT1dcIjtcbiAgICAvKiogQ2xpY2sgdG8gcmVtb3ZlIHRoZSBzYXZlZCBwYWdlICovXG4gICAgVUlFdmVudFR5cGVbXCJSRU1PVkVfUEFHRV9DTElDS1wiXSA9IFwiUkVNT1ZFX1BBR0VfQ0xJQ0tcIjtcbn0pKFVJRXZlbnRUeXBlIHx8IChVSUV2ZW50VHlwZSA9IHt9KSk7XG4iLCJpbXBvcnQgeyBNU0dfVFlQRSB9IGZyb20gJ0Bjb21tb24vbWVzc2FnZXMnO1xuaW1wb3J0IHsgaXNSZXN0cmljdGVkLCBwYWdlS2V5IH0gZnJvbSAnQGNvbW1vbi91cmwnO1xuaW1wb3J0IHsgZ2V0QWN0aXZlVGFiIH0gZnJvbSAnQGluZnJhL2Nocm9tZS90YWJzJztcbmltcG9ydCB7IGluaXRpYWxNb2RlbCB9IGZyb20gJ0BwYW5lbC9hcHAvbW9kZWwnO1xuaW1wb3J0IHsgdXBkYXRlIH0gZnJvbSAnQHBhbmVsL2FwcC91cGRhdGUnO1xuaW1wb3J0IHsgY29ubmVjdFRvVGFiIH0gZnJvbSAnQHBhbmVsL21lc3NhZ2luZy9jb25uZWN0aW9uJztcbmltcG9ydCB7IGNhcHR1cmUgfSBmcm9tICdAcGFuZWwvc2VydmljZXMvY2FwdHVyZSc7XG5pbXBvcnQgeyBoYW5kbGVTZWxlY3RlZCB9IGZyb20gJ0BwYW5lbC9zZXJ2aWNlcy9zdGF0ZSc7XG5pbXBvcnQgeyBzY3JlZW5TdGF0ZVRhYmxlLCB0aGVtZVRhYmxlIH0gZnJvbSAnQHBhbmVsL3N0b3JhZ2UvdGFibGVzJztcbmltcG9ydCB7IEFjdGlvblR5cGUgfSBmcm9tICdAcGFuZWwvdHlwZXMvYWN0aW9uX3R5cGVzJztcbmltcG9ydCB7IEVmZmVjdFR5cGUgfSBmcm9tICdAcGFuZWwvdHlwZXMvZWZmZWN0X3R5cGVzJztcbmltcG9ydCB7IFVJRXZlbnRUeXBlIH0gZnJvbSAnQHBhbmVsL3R5cGVzL3VpX2V2ZW50X3R5cGVzJztcbmltcG9ydCB7IFNUQVRVUyB9IGZyb20gJ0BwYW5lbC92aWV3L3N0YXR1cyc7XG5leHBvcnQgY2xhc3MgUGFuZWxDb250cm9sbGVyIHtcbiAgICB2aWV3O1xuICAgIG1vZGVsID0gc3RydWN0dXJlZENsb25lKGluaXRpYWxNb2RlbCk7XG4gICAgY29ubiA9IG51bGw7XG4gICAgY3VycmVudFdpbmRvd0lkID0gbnVsbDtcbiAgICBzdGF0aWMgUkVRVUlSRVNfQ09OTiA9IG5ldyBTZXQoW1xuICAgICAgICBFZmZlY3RUeXBlLlJFTkRFUl9DT05URU5ULFxuICAgICAgICBFZmZlY3RUeXBlLlRPR0dMRV9TRUxFQ1RfT05fQ09OVEVOVCxcbiAgICAgICAgRWZmZWN0VHlwZS5DTEVBUl9DT05URU5ULFxuICAgICAgICBFZmZlY3RUeXBlLkhPVkVSLFxuICAgIF0pO1xuICAgIGNvbnN0cnVjdG9yKHZpZXcpIHtcbiAgICAgICAgdGhpcy52aWV3ID0gdmlldztcbiAgICB9XG4gICAgYXN5bmMgc3RhcnQoKSB7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2goeyB0eXBlOiBBY3Rpb25UeXBlLklOSVQgfSk7XG4gICAgICAgIGNvbnN0IHsgb2sgfSA9IGF3YWl0IHRoaXMuZW5zdXJlQ29ubmVjdGlvbkFsaXZlKHsgZm9yY2VSZWNvbm5lY3Q6IHRydWUgfSk7XG4gICAgICAgIGlmICghb2spIHtcbiAgICAgICAgICAgIHRoaXMudmlldy5yZW5kZXIodGhpcy5tb2RlbCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZWdpc3RlclZpZXdIYW5kbGVycygpO1xuICAgICAgICB0aGlzLnZpZXcucmVuZGVyKHRoaXMubW9kZWwpO1xuICAgICAgICBjb25zdCB3ID0gYXdhaXQgY2hyb21lLndpbmRvd3MuZ2V0Q3VycmVudCgpO1xuICAgICAgICB0aGlzLmN1cnJlbnRXaW5kb3dJZCA9IHcuaWQgPz8gbnVsbDtcbiAgICAgICAgY2hyb21lLnJ1bnRpbWUub25NZXNzYWdlLmFkZExpc3RlbmVyKChtc2cpID0+IHtcbiAgICAgICAgICAgIGlmIChtc2cudHlwZSAhPT0gTVNHX1RZUEUuQUNUSVZFX1RBQl9DSEFOR0VEKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGNvbnN0IHNlbmRlcldpbmRvd0lkID0gbXNnLnBheWxvYWQud2luZG93SWQ7XG4gICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50V2luZG93SWQgPT0gbnVsbCB8fCB0aGlzLmN1cnJlbnRXaW5kb3dJZCAhPT0gc2VuZGVyV2luZG93SWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgdm9pZCB0aGlzLmVuc3VyZUNvbm5lY3Rpb25BbGl2ZSh7IGZvcmNlUmVjb25uZWN0OiB0cnVlIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmVnaXN0ZXJWaWV3SGFuZGxlcnMoKSB7XG4gICAgICAgIHRoaXMudmlldy5vbihVSUV2ZW50VHlwZS5UT0dHTEVfU0VMRUNULCAoKSA9PiB0aGlzLmRpc3BhdGNoKHsgdHlwZTogQWN0aW9uVHlwZS5UT0dHTEVfU0VMRUNUIH0pKTtcbiAgICAgICAgdGhpcy52aWV3Lm9uKFVJRXZlbnRUeXBlLkNMRUFSLCAoKSA9PiB0aGlzLmRpc3BhdGNoKHsgdHlwZTogQWN0aW9uVHlwZS5DTEVBUl9BTEwgfSkpO1xuICAgICAgICB0aGlzLnZpZXcub24oVUlFdmVudFR5cGUuQ0FQVFVSRSwgKCkgPT4gdGhpcy5kaXNwYXRjaCh7IHR5cGU6IEFjdGlvblR5cGUuTUVBU1VSRV9DT05URU5UX1NJWkUgfSkpO1xuICAgICAgICB0aGlzLnZpZXcub24oVUlFdmVudFR5cGUuQkFER0VfU0laRV9DSEFOR0UsICh7IHNpemUgfSkgPT4gdGhpcy5kaXNwYXRjaCh7IHR5cGU6IEFjdGlvblR5cGUuU0VUX0JBREdFX1NJWkUsIHNpemUgfSkpO1xuICAgICAgICB0aGlzLnZpZXcub24oVUlFdmVudFR5cGUuQkFER0VfQ09MT1JfU0VMRUNULCAoeyBjb2xvciB9KSA9PiB0aGlzLmRpc3BhdGNoKHsgdHlwZTogQWN0aW9uVHlwZS5TRVRfQkFER0VfQ09MT1IsIGNvbG9yIH0pKTtcbiAgICAgICAgdGhpcy52aWV3Lm9uKFVJRXZlbnRUeXBlLkJBREdFX1NIQVBFX0NIQU5HRSwgKHsgc2hhcGUgfSkgPT4gdGhpcy5kaXNwYXRjaCh7IHR5cGU6IEFjdGlvblR5cGUuU0VUX0JBREdFX1NIQVBFLCBzaGFwZSB9KSk7XG4gICAgICAgIHRoaXMudmlldy5vbihVSUV2ZW50VHlwZS5CQURHRV9ERUxFVEUsICgpID0+IHRoaXMuZGlzcGF0Y2goeyB0eXBlOiBBY3Rpb25UeXBlLkJBREdFX0RFTEVURSB9KSk7XG4gICAgICAgIHRoaXMudmlldy5vbihVSUV2ZW50VHlwZS5CQURHRV9QT1NJVElPTl9TRUxFQ1QsICh7IHBvc2l0aW9uIH0pID0+IHRoaXMuZGlzcGF0Y2goeyB0eXBlOiBBY3Rpb25UeXBlLlNFVF9CQURHRV9QT1NJVElPTiwgcG9zaXRpb24gfSkpO1xuICAgICAgICB0aGlzLnZpZXcub24oVUlFdmVudFR5cGUuVE9HR0xFX0NBUFRVUkVfUEFORUwsICgpID0+IHRoaXMuZGlzcGF0Y2goeyB0eXBlOiBBY3Rpb25UeXBlLlRPR0dMRV9DQVBUVVJFX1BBTkVMIH0pKTtcbiAgICAgICAgdGhpcy52aWV3Lm9uKFVJRXZlbnRUeXBlLkNBUFRVUkVfRk9STUFUX0NIQU5HRSwgKHsgZm9ybWF0IH0pID0+IHRoaXMuZGlzcGF0Y2goeyB0eXBlOiBBY3Rpb25UeXBlLlNFVF9DQVBUVVJFX0ZPUk1BVCwgZm9ybWF0IH0pKTtcbiAgICAgICAgdGhpcy52aWV3Lm9uKFVJRXZlbnRUeXBlLkNBUFRVUkVfQVJFQV9DSEFOR0UsICh7IGFyZWEgfSkgPT4gdGhpcy5kaXNwYXRjaCh7IHR5cGU6IEFjdGlvblR5cGUuU0VUX0NBUFRVUkVfQVJFQSwgYXJlYSB9KSk7XG4gICAgICAgIHRoaXMudmlldy5vbihVSUV2ZW50VHlwZS5DQVBUVVJFX1FVQUxJVFlfQ0hBTkdFLCAoeyBxdWFsaXR5IH0pID0+IHRoaXMuZGlzcGF0Y2goeyB0eXBlOiBBY3Rpb25UeXBlLlNFVF9DQVBUVVJFX1FVQUxJVFksIHF1YWxpdHkgfSkpO1xuICAgICAgICB0aGlzLnZpZXcub24oVUlFdmVudFR5cGUuQ0FQVFVSRV9TQ0FMRV9DSEFOR0UsICh7IHNjYWxlIH0pID0+IHRoaXMuZGlzcGF0Y2goeyB0eXBlOiBBY3Rpb25UeXBlLlNFVF9DQVBUVVJFX1NDQUxFLCBzY2FsZSB9KSk7XG4gICAgICAgIHRoaXMudmlldy5vbihVSUV2ZW50VHlwZS5SRU9SREVSX0lURU1TLCAoeyBmcm9tSWQsIGZyb21JbmRleCwgdG9JbmRleCB9KSA9PiB0aGlzLmRpc3BhdGNoKHsgdHlwZTogQWN0aW9uVHlwZS5SRU9SREVSX0lURU1TLCBmcm9tSWQsIGZyb21JbmRleCwgdG9JbmRleCB9KSk7XG4gICAgICAgIHRoaXMudmlldy5vbihVSUV2ZW50VHlwZS5TRVRfR1JPVVAsICh7IGdyb3VwIH0pID0+IHRoaXMuZGlzcGF0Y2goeyB0eXBlOiBBY3Rpb25UeXBlLlNFVF9HUk9VUCwgZ3JvdXAgfSkpO1xuICAgICAgICB0aGlzLnZpZXcub24oVUlFdmVudFR5cGUuSVRFTV9TRUxFQ1RJT05fQ0hBTkdFRCwgKHBheWxvYWQpID0+IHRoaXMuZGlzcGF0Y2goeyB0eXBlOiBBY3Rpb25UeXBlLklURU1fU0VMRUNUSU9OX0NIQU5HRUQsIC4uLnBheWxvYWQgfSkpO1xuICAgICAgICB0aGlzLnZpZXcub24oVUlFdmVudFR5cGUuSVRFTV9IT1ZFUl9JTiwgKHsgaWQgfSkgPT4gdGhpcy5kaXNwYXRjaCh7IHR5cGU6IEFjdGlvblR5cGUuSVRFTV9IT1ZFUl9JTiwgaWQgfSkpO1xuICAgICAgICB0aGlzLnZpZXcub24oVUlFdmVudFR5cGUuSVRFTV9IT1ZFUl9PVVQsICgpID0+IHRoaXMuZGlzcGF0Y2goeyB0eXBlOiBBY3Rpb25UeXBlLklURU1fSE9WRVJfT1VUIH0pKTtcbiAgICAgICAgdGhpcy52aWV3Lm9uKFVJRXZlbnRUeXBlLklURU1fQ09NTUVOVF9BUFBMWSwgKHsgaWQsIGNvbW1lbnQgfSkgPT4gdGhpcy5kaXNwYXRjaCh7IHR5cGU6IEFjdGlvblR5cGUuVVBEQVRFX0lURU1fQ09NTUVOVCwgaWQsIGNvbW1lbnQgfSkpO1xuICAgICAgICB0aGlzLnZpZXcub24oVUlFdmVudFR5cGUuVVBEQVRFX1RIRU1FLCAoeyB0aGVtZSB9KSA9PiB0aGlzLmRpc3BhdGNoKHsgdHlwZTogQWN0aW9uVHlwZS5VUERBVEVfVEhFTUUsIHRoZW1lIH0pKTtcbiAgICAgICAgdGhpcy52aWV3Lm9uKFVJRXZlbnRUeXBlLlNFVFRJTkdfTU9EQUxfU0hPVywgKCkgPT4gdGhpcy5kaXNwYXRjaCh7IHR5cGU6IEFjdGlvblR5cGUuU1RPUkVfUkVMT0FEX1JFUVVFU1RFRCB9KSk7XG4gICAgICAgIHRoaXMudmlldy5vbihVSUV2ZW50VHlwZS5SRU1PVkVfUEFHRV9DTElDSywgKHsgcGFnZUtleSB9KSA9PiB0aGlzLmRpc3BhdGNoKHsgdHlwZTogQWN0aW9uVHlwZS5SRU1PVkVfU0NSRUVOX1NUQVRFX0JZX1BBR0UsIHBhZ2VLZXkgfSkpO1xuICAgIH1cbiAgICBkaXNwYXRjaChhY3Rpb24pIHtcbiAgICAgICAgY29uc3QgeyBtb2RlbDogbmV4dCwgZWZmZWN0cyB9ID0gdXBkYXRlKHRoaXMubW9kZWwsIGFjdGlvbik7XG4gICAgICAgIHRoaXMubW9kZWwgPSBuZXh0O1xuICAgICAgICB0aGlzLnZpZXcucmVuZGVyKHRoaXMubW9kZWwpO1xuICAgICAgICB2b2lkIHRoaXMuZXhlY0VmZmVjdHMoZWZmZWN0cykuY2F0Y2goY29uc29sZS5lcnJvcik7XG4gICAgfVxuICAgIGFzeW5jIGV4ZWNFZmZlY3RzKGVmZmVjdHMpIHtcbiAgICAgICAgY29uc3QgbmVlZHNDb25uID0gZWZmZWN0cy5zb21lKChmeCkgPT4gUGFuZWxDb250cm9sbGVyLlJFUVVJUkVTX0NPTk4uaGFzKGZ4LmtpbmQpKTtcbiAgICAgICAgaWYgKG5lZWRzQ29ubikge1xuICAgICAgICAgICAgY29uc3QgciA9IGF3YWl0IHRoaXMuZW5zdXJlQ29ubmVjdGlvbkFsaXZlKCk7XG4gICAgICAgICAgICBpZiAoIXIub2sgfHwgci5jb250ZXh0Q2hhbmdlZClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBmeCBvZiBlZmZlY3RzKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGZ4LmtpbmQpIHtcbiAgICAgICAgICAgICAgICBjYXNlIEVmZmVjdFR5cGUuUkVOREVSX0NPTlRFTlQ6XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuY29ubj8uYXBpLnJlbmRlcihmeC5pdGVtcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgRWZmZWN0VHlwZS5UT0dHTEVfU0VMRUNUX09OX0NPTlRFTlQ6XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuY29ubj8uYXBpLnRvZ2dsZVNlbGVjdChmeC5lbmFibGVkKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBFZmZlY3RUeXBlLkNMRUFSX0NPTlRFTlQ6XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuY29ubj8uYXBpLmNsZWFyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgRWZmZWN0VHlwZS5IT1ZFUjpcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jb25uPy5hcGkuaG92ZXIoZnguaWQpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIEVmZmVjdFR5cGUuQ0xFQVJfU1RBVEU6XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHNjcmVlblN0YXRlVGFibGUuc2V0KHRoaXMubW9kZWwucGFnZUtleSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXM6IHRoaXMubW9kZWwuaXRlbXMsXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0SWQ6IDEsXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0U2l6ZTogdGhpcy5tb2RlbC5kZWZhdWx0U2l6ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRDb2xvcjogdGhpcy5tb2RlbC5kZWZhdWx0Q29sb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0U2hhcGU6IHRoaXMubW9kZWwuZGVmYXVsdFNoYXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFBvc2l0aW9uOiB0aGlzLm1vZGVsLmRlZmF1bHRQb3NpdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRHcm91cDogdGhpcy5tb2RlbC5kZWZhdWx0R3JvdXAsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIEVmZmVjdFR5cGUuUEVSU0lTVF9TVEFURToge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmV2ID0gYXdhaXQgc2NyZWVuU3RhdGVUYWJsZS5nZXQodGhpcy5tb2RlbC5wYWdlS2V5KTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgc2NyZWVuU3RhdGVUYWJsZS5zZXQodGhpcy5tb2RlbC5wYWdlS2V5LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5wcmV2LFxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXM6IHRoaXMubW9kZWwuaXRlbXMsXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0U2l6ZTogdGhpcy5tb2RlbC5kZWZhdWx0U2l6ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRDb2xvcjogdGhpcy5tb2RlbC5kZWZhdWx0Q29sb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0U2hhcGU6IHRoaXMubW9kZWwuZGVmYXVsdFNoYXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFBvc2l0aW9uOiB0aGlzLm1vZGVsLmRlZmF1bHRQb3NpdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRHcm91cDogdGhpcy5tb2RlbC5kZWZhdWx0R3JvdXAsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSBFZmZlY3RUeXBlLlNFVF9USEVNRToge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0aGVtZSA9IGF3YWl0IHRoZW1lVGFibGUuZ2V0KCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2goeyB0eXBlOiBBY3Rpb25UeXBlLlNFVF9USEVNRSwgdGhlbWUgfSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIEVmZmVjdFR5cGUuVVBEQVRFX1RIRU1FOlxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGVtZVRhYmxlLnNldChmeC50aGVtZSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgRWZmZWN0VHlwZS5SRUFEX1NDUkVFTl9TVEFURV9TVE9SRToge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzY3JlZW5TdGF0ZXMgPSBhd2FpdCBzY3JlZW5TdGF0ZVRhYmxlLnJlYWRBbGwoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFnZUtleXMgPSBPYmplY3Qua2V5cyhzY3JlZW5TdGF0ZXMpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IEFjdGlvblR5cGUuU1RPUkVfUkVMT0FEX1NVQ0NFRURFRCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VLZXlzLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgRWZmZWN0VHlwZS5SRU1PVkVfU0NSRUVOX1NUQVRFX1NUT1JFX0JZX1BBR0VfS0VZOiB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHNjcmVlblN0YXRlVGFibGUucmVtb3ZlKGZ4LnBhZ2VLZXkpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzY3JlZW5TdGF0ZXMgPSBhd2FpdCBzY3JlZW5TdGF0ZVRhYmxlLnJlYWRBbGwoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFnZUtleXMgPSBPYmplY3Qua2V5cyhzY3JlZW5TdGF0ZXMpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IEFjdGlvblR5cGUuU1RPUkVfUkVMT0FEX1NVQ0NFRURFRCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VLZXlzLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3QgPSBhd2FpdCBzY3JlZW5TdGF0ZVRhYmxlLmdldCh0aGlzLm1vZGVsLnBhZ2VLZXkpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IEFjdGlvblR5cGUuUkVTVE9SRV9TVEFURSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXM6IHN0Lml0ZW1zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRTaXplOiBzdC5kZWZhdWx0U2l6ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0Q29sb3I6IHN0LmRlZmF1bHRDb2xvcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0U2hhcGU6IHN0LmRlZmF1bHRTaGFwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0UG9zaXRpb246IHN0LmRlZmF1bHRQb3NpdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0R3JvdXA6IHN0LmRlZmF1bHRHcm91cCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSBFZmZlY3RUeXBlLk1FQVNVUkVfQ09OVEVOVF9TSVpFOlxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmNvbm4/LmFwaS5tZWFzdXJlU2l6ZSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIEVmZmVjdFR5cGUuQ0FQVFVSRTpcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGNhcHR1cmUoZngucGF5bG9hZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoKHsgdHlwZTogQWN0aW9uVHlwZS5DQVBUVVJFX1NVQ0NFRURFRCB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaCh7IHR5cGU6IEFjdGlvblR5cGUuQ0FQVFVSRV9GQUlMRUQsIGVycm9yOiBlIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgRWZmZWN0VHlwZS5OT1RJRllfRVJST1I6XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZnguZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBlbnN1cmVDb25uZWN0aW9uQWxpdmUob3B0cykge1xuICAgICAgICBjb25zdCBwcmV2S2V5ID0gdGhpcy5tb2RlbC5wYWdlS2V5O1xuICAgICAgICBjb25zdCBmb3JjZSA9IG9wdHM/LmZvcmNlUmVjb25uZWN0ID09PSB0cnVlO1xuICAgICAgICBpZiAoIWZvcmNlKSB7XG4gICAgICAgICAgICBjb25zdCBwb25nID0gYXdhaXQgdGhpcy5jb25uPy5hcGkucGluZygpO1xuICAgICAgICAgICAgaWYgKHBvbmcgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICByZXR1cm4geyBvazogdHJ1ZSwgY29udGV4dENoYW5nZWQ6IGZhbHNlIH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdGFiID0gYXdhaXQgZ2V0QWN0aXZlVGFiKCk7XG4gICAgICAgIGlmICghdGFiPy5pZCB8fCBpc1Jlc3RyaWN0ZWQodGFiLnVybCkpIHtcbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2goeyB0eXBlOiBBY3Rpb25UeXBlLlNFVF9TVEFUVVMsIHN0YXR1czogU1RBVFVTLlJFU1RSSUNURUQgfSk7XG4gICAgICAgICAgICByZXR1cm4geyBvazogZmFsc2UgfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXdLZXkgPSBwYWdlS2V5KHRhYi51cmwpO1xuICAgICAgICBjb25zdCB0YWJJZCA9IHRhYi5pZDtcbiAgICAgICAgdGhpcy5kaXNwYXRjaCh7IHR5cGU6IEFjdGlvblR5cGUuQ09OTkVDVEVELCB0YWJJZCwgcGFnZUtleTogbmV3S2V5IH0pO1xuICAgICAgICB0aGlzLmRpc3BhdGNoKHsgdHlwZTogQWN0aW9uVHlwZS5TRVRfU1RBVFVTLCBzdGF0dXM6IFNUQVRVUy5DT05ORUNUSU5HIH0pO1xuICAgICAgICAvLyBFeHBsaWNpdGx5IGNsb3NlIHRoZSBvbGQgcG9ydFxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5jb25uPy5wb3J0LmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICAvKiBuby1vcCAqL1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY29ubiA9IGF3YWl0IGNvbm5lY3RUb1RhYih0YWJJZCk7XG4gICAgICAgIHRoaXMuY29ubi5vbkRpc2Nvbm5lY3QoKCkgPT4gdGhpcy5kaXNwYXRjaCh7IHR5cGU6IEFjdGlvblR5cGUuUE9SVF9ESVNDT05ORUNURUQgfSkpO1xuICAgICAgICB0aGlzLmNvbm4ucG9ydC5vbk1lc3NhZ2UuYWRkTGlzdGVuZXIoYXN5bmMgKG1zZykgPT4ge1xuICAgICAgICAgICAgaWYgKG1zZz8udHlwZSA9PT0gTVNHX1RZUEUuU0VMRUNURUQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gYXdhaXQgaGFuZGxlU2VsZWN0ZWQodGhpcy5tb2RlbC5wYWdlS2V5LCBtc2cucGF5bG9hZC5hbmNob3JzKTtcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogQWN0aW9uVHlwZS5SRVNUT1JFX1NUQVRFLFxuICAgICAgICAgICAgICAgICAgICBzdGF0ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXM6IHMuaXRlbXMsXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0U2l6ZTogcy5kZWZhdWx0U2l6ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRDb2xvcjogcy5kZWZhdWx0Q29sb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0U2hhcGU6IHMuZGVmYXVsdFNoYXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFBvc2l0aW9uOiBzLmRlZmF1bHRQb3NpdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRHcm91cDogcy5kZWZhdWx0R3JvdXAsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChtc2c/LnR5cGUgPT09IE1TR19UWVBFLk1JU1NJTkdfSURTKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaCh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IEFjdGlvblR5cGUuU0VUX01JU1NJTkdfSURTLFxuICAgICAgICAgICAgICAgICAgICBtaXNzaW5nSWRzOiBtc2cucGF5bG9hZC5taXNzaW5nSWRzLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobXNnPy50eXBlID09PSBNU0dfVFlQRS5DT05URU5UX1NJWkVfUkVTVUxUKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaCh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IEFjdGlvblR5cGUuQ0FQVFVSRV9SRVFVRVNURUQsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRTaXplOiBtc2cucGF5bG9hZCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHN0ID0gYXdhaXQgc2NyZWVuU3RhdGVUYWJsZS5nZXQobmV3S2V5KTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaCh7XG4gICAgICAgICAgICB0eXBlOiBBY3Rpb25UeXBlLlJFU1RPUkVfU1RBVEUsXG4gICAgICAgICAgICBzdGF0ZToge1xuICAgICAgICAgICAgICAgIGl0ZW1zOiBzdC5pdGVtcyxcbiAgICAgICAgICAgICAgICBkZWZhdWx0U2l6ZTogc3QuZGVmYXVsdFNpemUsXG4gICAgICAgICAgICAgICAgZGVmYXVsdENvbG9yOiBzdC5kZWZhdWx0Q29sb3IsXG4gICAgICAgICAgICAgICAgZGVmYXVsdFNoYXBlOiBzdC5kZWZhdWx0U2hhcGUsXG4gICAgICAgICAgICAgICAgZGVmYXVsdFBvc2l0aW9uOiBzdC5kZWZhdWx0UG9zaXRpb24sXG4gICAgICAgICAgICAgICAgZGVmYXVsdEdyb3VwOiBzdC5kZWZhdWx0R3JvdXAsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaCh7IHR5cGU6IEFjdGlvblR5cGUuU0VUX1NUQVRVUywgc3RhdHVzOiBTVEFUVVMuQ09OTkVDVEVEIH0pO1xuICAgICAgICBjb25zdCBjb250ZXh0Q2hhbmdlZCA9ICEhcHJldktleSAmJiBwcmV2S2V5ICE9PSBuZXdLZXk7XG4gICAgICAgIHJldHVybiB7IG9rOiB0cnVlLCBjb250ZXh0Q2hhbmdlZCB9O1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFVOR1JPVVBFRF9WQUxVRSB9IGZyb20gJ0Bjb21tb24vdHlwZXMnO1xuaW1wb3J0IHsgbm9ybWFsaXplR3JvdXBMYWJlbHNBbmRDb3VudFVuZ3JvdXBlZCB9IGZyb20gJ0BwYW5lbC9zZXJ2aWNlcy9zdGF0ZSc7XG5pbXBvcnQgeyBTVEFUVVMgfSBmcm9tICdAcGFuZWwvdmlldy9zdGF0dXMnO1xuaW1wb3J0IHsgQWN0aW9uVHlwZSB9IGZyb20gJy4uL3R5cGVzL2FjdGlvbl90eXBlcyc7XG5pbXBvcnQgeyBFZmZlY3RUeXBlIH0gZnJvbSAnLi4vdHlwZXMvZWZmZWN0X3R5cGVzJztcbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGUobW9kZWwsIGFjdGlvbikge1xuICAgIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICAgICAgY2FzZSBBY3Rpb25UeXBlLklOSVQ6XG4gICAgICAgICAgICByZXR1cm4geyBtb2RlbCwgZWZmZWN0czogW3sga2luZDogRWZmZWN0VHlwZS5TRVRfVEhFTUUgfV0gfTtcbiAgICAgICAgY2FzZSBBY3Rpb25UeXBlLkNPTk5FQ1RFRDpcbiAgICAgICAgICAgIHJldHVybiB7IG1vZGVsOiB7IC4uLm1vZGVsLCB0YWJJZDogYWN0aW9uLnRhYklkLCBwYWdlS2V5OiBhY3Rpb24ucGFnZUtleSB9LCBlZmZlY3RzOiBbXSB9O1xuICAgICAgICBjYXNlIEFjdGlvblR5cGUuU0VUX1NUQVRVUzoge1xuICAgICAgICAgICAgaWYgKGFjdGlvbi5zdGF0dXMgPT09IFNUQVRVUy5DT05ORUNURUQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBtb2RlbDogeyAuLi5tb2RlbCwgc3RhdHVzOiBhY3Rpb24uc3RhdHVzIH0sIGVmZmVjdHM6IFtdIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geyBtb2RlbDogeyAuLi5tb2RlbCwgaXRlbXM6IFtdLCBzdGF0dXM6IGFjdGlvbi5zdGF0dXMgfSwgZWZmZWN0czogW10gfTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIEFjdGlvblR5cGUuUkVTVE9SRV9TVEFURTpcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbW9kZWw6IHtcbiAgICAgICAgICAgICAgICAgICAgLi4ubW9kZWwsXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zOiBhY3Rpb24uc3RhdGUuaXRlbXMsXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRTaXplOiBhY3Rpb24uc3RhdGUuZGVmYXVsdFNpemUsXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRDb2xvcjogYWN0aW9uLnN0YXRlLmRlZmF1bHRDb2xvcixcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFNoYXBlOiBhY3Rpb24uc3RhdGUuZGVmYXVsdFNoYXBlLFxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0UG9zaXRpb246IGFjdGlvbi5zdGF0ZS5kZWZhdWx0UG9zaXRpb24sXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRHcm91cDogYWN0aW9uLnN0YXRlLmRlZmF1bHRHcm91cCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVmZmVjdHM6IFt7IGtpbmQ6IEVmZmVjdFR5cGUuUkVOREVSX0NPTlRFTlQsIGl0ZW1zOiBhY3Rpb24uc3RhdGUuaXRlbXMgfV0sXG4gICAgICAgICAgICB9O1xuICAgICAgICBjYXNlIEFjdGlvblR5cGUuU0VUX01JU1NJTkdfSURTOlxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBtb2RlbDogeyAuLi5tb2RlbCwgbWlzc2luZ0lkczogYWN0aW9uLm1pc3NpbmdJZHMgfSxcbiAgICAgICAgICAgICAgICBlZmZlY3RzOiBbXSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgQWN0aW9uVHlwZS5UT0dHTEVfU0VMRUNUOiB7XG4gICAgICAgICAgICBjb25zdCBuZXh0ID0gIW1vZGVsLnNlbGVjdGlvbkVuYWJsZWQ7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG1vZGVsOiB7IC4uLm1vZGVsLCBzZWxlY3Rpb25FbmFibGVkOiBuZXh0IH0sXG4gICAgICAgICAgICAgICAgZWZmZWN0czogW3sga2luZDogRWZmZWN0VHlwZS5UT0dHTEVfU0VMRUNUX09OX0NPTlRFTlQsIGVuYWJsZWQ6IG5leHQgfV0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgQWN0aW9uVHlwZS5DTEVBUl9BTEw6XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG1vZGVsOiB7IC4uLm1vZGVsLCBpdGVtczogW10gfSxcbiAgICAgICAgICAgICAgICBlZmZlY3RzOiBbeyBraW5kOiBFZmZlY3RUeXBlLkNMRUFSX0NPTlRFTlQgfSwgeyBraW5kOiBFZmZlY3RUeXBlLkNMRUFSX1NUQVRFIH1dLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSBBY3Rpb25UeXBlLkNPTlRFTlRfU0VMRUNURUQ6XG4gICAgICAgICAgICByZXR1cm4geyBtb2RlbCwgZWZmZWN0czogW10gfTtcbiAgICAgICAgY2FzZSBBY3Rpb25UeXBlLlRPR0dMRV9DQVBUVVJFX1BBTkVMOlxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBtb2RlbDoge1xuICAgICAgICAgICAgICAgICAgICAuLi5tb2RlbCxcbiAgICAgICAgICAgICAgICAgICAgY2FwdHVyZTogeyAuLi5tb2RlbC5jYXB0dXJlLCBwYW5lbEV4cGFuZGVkOiAhbW9kZWwuY2FwdHVyZS5wYW5lbEV4cGFuZGVkIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlZmZlY3RzOiBbXSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgQWN0aW9uVHlwZS5TRVRfQkFER0VfU0laRToge1xuICAgICAgICAgICAgY29uc3QgaXRlbXMgPSBtb2RlbC5pdGVtcy5tYXAoKGl0KSA9PiAoe1xuICAgICAgICAgICAgICAgIC4uLml0LFxuICAgICAgICAgICAgICAgIC4uLihtb2RlbC5zZWxlY3RJdGVtcy5pbmNsdWRlcyhpdC5pZCkgPyB7IHNpemU6IGFjdGlvbi5zaXplIH0gOiB7fSksXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG1vZGVsOiB7IC4uLm1vZGVsLCBkZWZhdWx0U2l6ZTogYWN0aW9uLnNpemUsIGl0ZW1zIH0sXG4gICAgICAgICAgICAgICAgZWZmZWN0czogW3sga2luZDogRWZmZWN0VHlwZS5QRVJTSVNUX1NUQVRFIH0sIHsga2luZDogRWZmZWN0VHlwZS5SRU5ERVJfQ09OVEVOVCwgaXRlbXMgfV0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgQWN0aW9uVHlwZS5TRVRfQkFER0VfQ09MT1I6IHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1zID0gbW9kZWwuaXRlbXMubWFwKChpdCkgPT4gKHtcbiAgICAgICAgICAgICAgICAuLi5pdCxcbiAgICAgICAgICAgICAgICAuLi4obW9kZWwuc2VsZWN0SXRlbXMuaW5jbHVkZXMoaXQuaWQpID8geyBjb2xvcjogYWN0aW9uLmNvbG9yIH0gOiB7fSksXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG1vZGVsOiB7IC4uLm1vZGVsLCBkZWZhdWx0Q29sb3I6IGFjdGlvbi5jb2xvciwgaXRlbXMgfSxcbiAgICAgICAgICAgICAgICBlZmZlY3RzOiBbeyBraW5kOiBFZmZlY3RUeXBlLlBFUlNJU1RfU1RBVEUgfSwgeyBraW5kOiBFZmZlY3RUeXBlLlJFTkRFUl9DT05URU5ULCBpdGVtcyB9XSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBBY3Rpb25UeXBlLlNFVF9CQURHRV9TSEFQRToge1xuICAgICAgICAgICAgY29uc3QgaXRlbXMgPSBtb2RlbC5pdGVtcy5tYXAoKGl0KSA9PiAoe1xuICAgICAgICAgICAgICAgIC4uLml0LFxuICAgICAgICAgICAgICAgIC4uLihtb2RlbC5zZWxlY3RJdGVtcy5pbmNsdWRlcyhpdC5pZCkgPyB7IHNoYXBlOiBhY3Rpb24uc2hhcGUgfSA6IHt9KSxcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbW9kZWw6IHsgLi4ubW9kZWwsIGRlZmF1bHRTaGFwZTogYWN0aW9uLnNoYXBlLCBpdGVtcyB9LFxuICAgICAgICAgICAgICAgIGVmZmVjdHM6IFt7IGtpbmQ6IEVmZmVjdFR5cGUuUEVSU0lTVF9TVEFURSB9LCB7IGtpbmQ6IEVmZmVjdFR5cGUuUkVOREVSX0NPTlRFTlQsIGl0ZW1zIH1dLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIEFjdGlvblR5cGUuQkFER0VfREVMRVRFOiB7XG4gICAgICAgICAgICBjb25zdCBpdGVtc01hcmtlZEZvclJlbGFiZWwgPSBtb2RlbC5pdGVtcy5maWx0ZXIoKGl0KSA9PiAhbW9kZWwuc2VsZWN0SXRlbXMuaW5jbHVkZXMoaXQuaWQpKTtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1zID0gbm9ybWFsaXplR3JvdXBMYWJlbHNBbmRDb3VudFVuZ3JvdXBlZChpdGVtc01hcmtlZEZvclJlbGFiZWwpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBtb2RlbDogeyAuLi5tb2RlbCwgaXRlbXMgfSxcbiAgICAgICAgICAgICAgICBlZmZlY3RzOiBbeyBraW5kOiBFZmZlY3RUeXBlLlBFUlNJU1RfU1RBVEUgfSwgeyBraW5kOiBFZmZlY3RUeXBlLlJFTkRFUl9DT05URU5ULCBpdGVtcyB9XSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBBY3Rpb25UeXBlLlNFVF9CQURHRV9QT1NJVElPTjoge1xuICAgICAgICAgICAgY29uc3QgaXRlbXMgPSBtb2RlbC5pdGVtcy5tYXAoKGl0KSA9PiAoe1xuICAgICAgICAgICAgICAgIC4uLml0LFxuICAgICAgICAgICAgICAgIC4uLihtb2RlbC5zZWxlY3RJdGVtcy5pbmNsdWRlcyhpdC5pZCkgPyB7IHBvc2l0aW9uOiBhY3Rpb24ucG9zaXRpb24gfSA6IHt9KSxcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbW9kZWw6IHsgLi4ubW9kZWwsIGRlZmF1bHRQb3NpdGlvbjogYWN0aW9uLnBvc2l0aW9uLCBpdGVtcyB9LFxuICAgICAgICAgICAgICAgIGVmZmVjdHM6IFt7IGtpbmQ6IEVmZmVjdFR5cGUuUEVSU0lTVF9TVEFURSB9LCB7IGtpbmQ6IEVmZmVjdFR5cGUuUkVOREVSX0NPTlRFTlQsIGl0ZW1zIH1dLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIEFjdGlvblR5cGUuU0VUX0dST1VQOiB7XG4gICAgICAgICAgICBjb25zdCBpdGVtc01hcmtlZEZvclJlbGFiZWwgPSB1cGRhdGVHcm91cEFuZERlZmVyUmVsYWJlbChtb2RlbC5pdGVtcywgbW9kZWwuc2VsZWN0SXRlbXMsIGFjdGlvbi5ncm91cCk7XG4gICAgICAgICAgICBjb25zdCBpdGVtcyA9IG5vcm1hbGl6ZUdyb3VwTGFiZWxzQW5kQ291bnRVbmdyb3VwZWQoaXRlbXNNYXJrZWRGb3JSZWxhYmVsKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbW9kZWw6IHsgLi4ubW9kZWwsIGRlZmF1bHRHcm91cDogYWN0aW9uLmdyb3VwLCBpdGVtcyB9LFxuICAgICAgICAgICAgICAgIGVmZmVjdHM6IFt7IGtpbmQ6IEVmZmVjdFR5cGUuUEVSU0lTVF9TVEFURSB9LCB7IGtpbmQ6IEVmZmVjdFR5cGUuUkVOREVSX0NPTlRFTlQsIGl0ZW1zIH1dLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIEFjdGlvblR5cGUuU0VUX0NBUFRVUkVfRk9STUFUOlxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBtb2RlbDogeyAuLi5tb2RlbCwgY2FwdHVyZTogeyAuLi5tb2RlbC5jYXB0dXJlLCBmb3JtYXQ6IGFjdGlvbi5mb3JtYXQgfSB9LFxuICAgICAgICAgICAgICAgIGVmZmVjdHM6IFtdLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSBBY3Rpb25UeXBlLlNFVF9DQVBUVVJFX0FSRUE6XG4gICAgICAgICAgICByZXR1cm4geyBtb2RlbDogeyAuLi5tb2RlbCwgY2FwdHVyZTogeyAuLi5tb2RlbC5jYXB0dXJlLCBhcmVhOiBhY3Rpb24uYXJlYSB9IH0sIGVmZmVjdHM6IFtdIH07XG4gICAgICAgIGNhc2UgQWN0aW9uVHlwZS5TRVRfQ0FQVFVSRV9RVUFMSVRZOlxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBtb2RlbDogeyAuLi5tb2RlbCwgY2FwdHVyZTogeyAuLi5tb2RlbC5jYXB0dXJlLCBxdWFsaXR5OiBhY3Rpb24ucXVhbGl0eSB9IH0sXG4gICAgICAgICAgICAgICAgZWZmZWN0czogW10sXG4gICAgICAgICAgICB9O1xuICAgICAgICBjYXNlIEFjdGlvblR5cGUuU0VUX0NBUFRVUkVfU0NBTEU6XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG1vZGVsOiB7IC4uLm1vZGVsLCBjYXB0dXJlOiB7IC4uLm1vZGVsLmNhcHR1cmUsIHNjYWxlOiBhY3Rpb24uc2NhbGUgfSB9LFxuICAgICAgICAgICAgICAgIGVmZmVjdHM6IFtdLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSBBY3Rpb25UeXBlLk1FQVNVUkVfQ09OVEVOVF9TSVpFOlxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBtb2RlbCxcbiAgICAgICAgICAgICAgICBlZmZlY3RzOiBbeyBraW5kOiBFZmZlY3RUeXBlLk1FQVNVUkVfQ09OVEVOVF9TSVpFIH1dLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSBBY3Rpb25UeXBlLkNBUFRVUkVfUkVRVUVTVEVEOiB7XG4gICAgICAgICAgICBpZiAobW9kZWwudGFiSWQgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IG1vZGVsLCBlZmZlY3RzOiBbeyBraW5kOiBFZmZlY3RUeXBlLk5PVElGWV9FUlJPUiwgZXJyb3I6ICdObyB0YWJJZCcgfV0gfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbW9kZWwsXG4gICAgICAgICAgICAgICAgZWZmZWN0czogW1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBraW5kOiBFZmZlY3RUeXBlLkNBUFRVUkUsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXlsb2FkOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiSWQ6IG1vZGVsLnRhYklkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdDogbW9kZWwuY2FwdHVyZS5mb3JtYXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJlYTogbW9kZWwuY2FwdHVyZS5hcmVhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1YWxpdHk6IG1vZGVsLmNhcHR1cmUucXVhbGl0eSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2FsZTogbW9kZWwuY2FwdHVyZS5zY2FsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50U2l6ZTogYWN0aW9uLmNvbnRlbnRTaXplLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIEFjdGlvblR5cGUuQ0FQVFVSRV9TVUNDRUVERUQ6XG4gICAgICAgICAgICByZXR1cm4geyBtb2RlbCwgZWZmZWN0czogW10gfTtcbiAgICAgICAgY2FzZSBBY3Rpb25UeXBlLkNBUFRVUkVfRkFJTEVEOlxuICAgICAgICAgICAgcmV0dXJuIHsgbW9kZWwsIGVmZmVjdHM6IFt7IGtpbmQ6IEVmZmVjdFR5cGUuTk9USUZZX0VSUk9SLCBlcnJvcjogYWN0aW9uLmVycm9yIH1dIH07XG4gICAgICAgIGNhc2UgQWN0aW9uVHlwZS5SRU9SREVSX0lURU1TOiB7XG4gICAgICAgICAgICBjb25zdCBpdGVtc01hcmtlZEZvclJlbGFiZWwgPSByZW9yZGVySXRlbUxhYmVsKG1vZGVsLml0ZW1zLCBhY3Rpb24uZnJvbUlkLCBhY3Rpb24uZnJvbUluZGV4LCBhY3Rpb24udG9JbmRleCk7XG4gICAgICAgICAgICBjb25zdCBpdGVtcyA9IG5vcm1hbGl6ZUdyb3VwTGFiZWxzQW5kQ291bnRVbmdyb3VwZWQoaXRlbXNNYXJrZWRGb3JSZWxhYmVsKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbW9kZWw6IHsgLi4ubW9kZWwsIGl0ZW1zIH0sXG4gICAgICAgICAgICAgICAgZWZmZWN0czogW3sga2luZDogRWZmZWN0VHlwZS5QRVJTSVNUX1NUQVRFIH0sIHsga2luZDogRWZmZWN0VHlwZS5SRU5ERVJfQ09OVEVOVCwgaXRlbXMgfV0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgQWN0aW9uVHlwZS5JVEVNX1NFTEVDVElPTl9DSEFOR0VEOiB7XG4gICAgICAgICAgICBpZiAoJ2lkJyBpbiBhY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAvLyBTZWxlY3QvZGVzZWxlY3QgYSBzaW5nbGUgaXRlbVxuICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdEl0ZW1zID0gYXBwbHlJdGVtU2VsZWN0aW9uQ2hhbmdlZEJ5SWQoYWN0aW9uLmlkLCBhY3Rpb24uaXNDaGVjaywgbW9kZWwuc2VsZWN0SXRlbXMpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIG1vZGVsOiB7IC4uLm1vZGVsLCBzZWxlY3RJdGVtcyB9LFxuICAgICAgICAgICAgICAgICAgICBlZmZlY3RzOiBbXSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoJ2dyb3VwJyBpbiBhY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAvLyBTZWxlY3QvZGVzZWxlY3QgYSBncm91cFxuICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdEl0ZW1zID0gYXBwbHlJdGVtU2VsZWN0aW9uQ2hhbmdlZEZvckdyb3VwKGFjdGlvbi5ncm91cCwgYWN0aW9uLmlzQ2hlY2ssIG1vZGVsLnNlbGVjdEl0ZW1zLCBtb2RlbC5pdGVtcyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgbW9kZWw6IHsgLi4ubW9kZWwsIHNlbGVjdEl0ZW1zIH0sXG4gICAgICAgICAgICAgICAgICAgIGVmZmVjdHM6IFtdLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBTZWxlY3QgYWxsL0Rlc2VsZWN0IGFsbFxuICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdEl0ZW1zID0gYXBwbHlJdGVtU2VsZWN0aW9uQ2hhbmdlZEZvckFsbChhY3Rpb24uYWxsQ2hlY2ssIG1vZGVsLml0ZW1zKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBtb2RlbDogeyAuLi5tb2RlbCwgc2VsZWN0SXRlbXMgfSxcbiAgICAgICAgICAgICAgICAgICAgZWZmZWN0czogW10sXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXNlIEFjdGlvblR5cGUuSVRFTV9IT1ZFUl9JTjpcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbW9kZWwsXG4gICAgICAgICAgICAgICAgZWZmZWN0czogW3sga2luZDogRWZmZWN0VHlwZS5IT1ZFUiwgaWQ6IGFjdGlvbi5pZCB9XSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgQWN0aW9uVHlwZS5JVEVNX0hPVkVSX09VVDpcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbW9kZWwsXG4gICAgICAgICAgICAgICAgZWZmZWN0czogW3sga2luZDogRWZmZWN0VHlwZS5IT1ZFUiwgaWQ6IG51bGwgfV0sXG4gICAgICAgICAgICB9O1xuICAgICAgICBjYXNlIEFjdGlvblR5cGUuVVBEQVRFX0lURU1fQ09NTUVOVDoge1xuICAgICAgICAgICAgY29uc3QgaXRlbXMgPSBtb2RlbC5pdGVtcy5tYXAoKGl0KSA9PiAoe1xuICAgICAgICAgICAgICAgIC4uLml0LFxuICAgICAgICAgICAgICAgIC4uLihpdC5pZCA9PT0gYWN0aW9uLmlkID8geyBjb21tZW50OiBhY3Rpb24uY29tbWVudCB9IDoge30pLFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBtb2RlbDogeyAuLi5tb2RlbCwgaXRlbXMgfSxcbiAgICAgICAgICAgICAgICBlZmZlY3RzOiBbeyBraW5kOiBFZmZlY3RUeXBlLlBFUlNJU1RfU1RBVEUgfSwgeyBraW5kOiBFZmZlY3RUeXBlLlJFTkRFUl9DT05URU5ULCBpdGVtcyB9XSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBBY3Rpb25UeXBlLlBPUlRfRElTQ09OTkVDVEVEOlxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBtb2RlbDogeyAuLi5tb2RlbCwgc3RhdHVzOiBTVEFUVVMuRElTQ09OTkVDVEVELCBzZWxlY3Rpb25FbmFibGVkOiBmYWxzZSB9LFxuICAgICAgICAgICAgICAgIGVmZmVjdHM6IFt7IGtpbmQ6IEVmZmVjdFR5cGUuVE9HR0xFX1NFTEVDVF9PTl9DT05URU5ULCBlbmFibGVkOiBmYWxzZSB9XSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgQWN0aW9uVHlwZS5TRVRfVEhFTUU6XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG1vZGVsOiB7IC4uLm1vZGVsLCB0aGVtZTogYWN0aW9uLnRoZW1lIH0sXG4gICAgICAgICAgICAgICAgZWZmZWN0czogW10sXG4gICAgICAgICAgICB9O1xuICAgICAgICBjYXNlIEFjdGlvblR5cGUuVVBEQVRFX1RIRU1FOlxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBtb2RlbDogeyAuLi5tb2RlbCwgdGhlbWU6IGFjdGlvbi50aGVtZSB9LFxuICAgICAgICAgICAgICAgIGVmZmVjdHM6IFt7IGtpbmQ6IEVmZmVjdFR5cGUuVVBEQVRFX1RIRU1FLCB0aGVtZTogYWN0aW9uLnRoZW1lIH1dLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSBBY3Rpb25UeXBlLlNUT1JFX1JFTE9BRF9SRVFVRVNURUQ6XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG1vZGVsLFxuICAgICAgICAgICAgICAgIGVmZmVjdHM6IFt7IGtpbmQ6IEVmZmVjdFR5cGUuUkVBRF9TQ1JFRU5fU1RBVEVfU1RPUkUgfV0sXG4gICAgICAgICAgICB9O1xuICAgICAgICBjYXNlIEFjdGlvblR5cGUuU1RPUkVfUkVMT0FEX1NVQ0NFRURFRDpcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbW9kZWw6IHsgLi4ubW9kZWwsIHBhZ2VLZXlzOiBhY3Rpb24ucGFnZUtleXMgfSxcbiAgICAgICAgICAgICAgICBlZmZlY3RzOiBbXSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgQWN0aW9uVHlwZS5SRU1PVkVfU0NSRUVOX1NUQVRFX0JZX1BBR0U6XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG1vZGVsLFxuICAgICAgICAgICAgICAgIGVmZmVjdHM6IFtcbiAgICAgICAgICAgICAgICAgICAgeyBraW5kOiBFZmZlY3RUeXBlLlJFTU9WRV9TQ1JFRU5fU1RBVEVfU1RPUkVfQllfUEFHRV9LRVksIHBhZ2VLZXk6IGFjdGlvbi5wYWdlS2V5IH0sXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4geyBtb2RlbCwgZWZmZWN0czogW10gfTtcbiAgICB9XG59XG4vKipcbiAqIFJlbGFiZWwgaXRlbXMgYXMgaWYgdGhlIGl0ZW0gd2l0aCBgZnJvbUlkYCB3YXMgbW92ZWQgdG8gdGhlIHBvc2l0aW9uXG4gKiB3aG9zZSBsYWJlbCBlcXVhbHMgYGl0ZW1zW3RvSW5kZXhdLmxhYmVsYC4gTGFiZWxzIG9mIHRoZSBpdGVtcyBpbiBiZXR3ZWVuXG4gKiBhcmUgc2hpZnRlZCBieSDCsTEgdG8ga2VlcCBsYWJlbHMgdW5pcXVlIGFuZCBjb250aWd1b3VzIChpZiB0aGV5IHdlcmUpLlxuICpcbiAqIEBwYXJhbSBpdGVtcyAgIC0gU291cmNlIGl0ZW1zIChub3QgbXV0YXRlZCkuXG4gKiBAcGFyYW0gZnJvbUlkICAtIElEIG9mIHRoZSBpdGVtIHRvIG1vdmUuXG4gKiBAcGFyYW0gZnJvbUluZGV4ICAtIFRoZSBjdXJyZW50IGluZGV4IG9mIHRoZSBpdGVtIHRvIGJlIG1vdmVkLlxuICogQHBhcmFtIHRvSW5kZXggLSBUYXJnZXQgaW5kZXggaW4gYGl0ZW1zYCB3aG9zZSBsYWJlbCBiZWNvbWVzIHRoZSBuZXcgbGFiZWwuXG4gKiBAcmV0dXJucyBBIG5ldyBhcnJheSB3aXRoIHVwZGF0ZWQgbGFiZWxzLlxuICogQHRocm93cyBSYW5nZUVycm9yIGlmIGB0b0luZGV4YCBpcyBvdXQgb2YgYm91bmRzIG9yIEVycm9yIGlmIGBmcm9tSWRgIG5vdCBmb3VuZC5cbiAqL1xuZnVuY3Rpb24gcmVvcmRlckl0ZW1MYWJlbChpdGVtcywgZnJvbUlkLCBmcm9tSW5kZXgsIHRvSW5kZXgpIHtcbiAgICBpZiAodG9JbmRleCA8IDAgfHwgdG9JbmRleCA+PSBpdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoYHRvSW5kZXggb3V0IG9mIHJhbmdlOiAke3RvSW5kZXh9YCk7XG4gICAgfVxuICAgIGNvbnN0IGZyb21JZHggPSBpdGVtcy5maW5kSW5kZXgoKGkpID0+IGkuaWQgPT09IGZyb21JZCk7XG4gICAgaWYgKGZyb21JZHggPT09IC0xKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgSXRlbSBub3QgZm91bmQgZm9yIGlkPSR7ZnJvbUlkfWApO1xuICAgIH1cbiAgICBpZiAodG9JbmRleCA8IDAgfHwgdG9JbmRleCA+PSBpdGVtcy5maWx0ZXIoKGl0KSA9PiBpdC5ncm91cCA9PT0gaXRlbXNbZnJvbUlkeF0uZ3JvdXApLmxlbmd0aCkge1xuICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihgdG9JbmRleCBvdXQgb2YgcmFuZ2U6ICR7dG9JbmRleH1gKTtcbiAgICB9XG4gICAgY29uc3QgT0ZGU0VUX0FGVEVSID0gMS4xO1xuICAgIGNvbnN0IE9GRlNFVF9CRUZPUkUgPSAwLjE7XG4gICAgY29uc3Qgb2Zmc2V0ID0gZnJvbUluZGV4IDwgdG9JbmRleCA/IE9GRlNFVF9BRlRFUiA6IE9GRlNFVF9CRUZPUkU7XG4gICAgY29uc3QgbGFiZWwgPSB0b0luZGV4ICsgb2Zmc2V0O1xuICAgIHJldHVybiBpdGVtcy5tYXAoKGl0KSA9PiAoaXQuaWQgPT09IGZyb21JZCA/IHsgLi4uaXQsIGxhYmVsIH0gOiBpdCkpO1xufVxuLyoqXG4gKiBCdW1wcyB0aGUgbGFiZWwgb2Ygc2VsZWN0ZWQgaXRlbXMgdGhhdCBhbHJlYWR5IGJlbG9uZyB0byB0aGUgdHJpbW1lZCB0YXJnZXQgZ3JvdXAsIHdoaWxlIGRlZmVycmluZyBsYWJlbCBub3JtYWxpemF0aW9uLlxuICpcbiAqIE5vdGVzXG4gKiAtIFRoZSBmdW5jdGlvbiBvbmx5IHRvdWNoZXMgaXRlbXMgd2hvc2UgYGlkYCBpcyBpbiBgc2VsZWN0SXRlbXNgIGFuZCB3aG9zZSBjdXJyZW50IGBncm91cGAgbWF0Y2hlcyBgbmV4dEdyb3VwUmF3YCAoYWZ0ZXIgdHJpbW1pbmcpLlxuICogLSBMYWJlbHMgYXJlIHJlYXNzaWduZWQgdG8gbGFyZ2UgZGVzY2VuZGluZyBudW1iZXJzIHNvIHRoYXQgYHJlbGFiZWxDb25zZWN1dGl2ZVBlckdyb3VwKClgIGNhbiBsYXRlciBjb21wYWN0IHRoZW0uXG4gKlxuICogQHBhcmFtIGl0ZW1zIC0gRnVsbCBsaXN0IG9mIHNjcmVlbiBpdGVtcy5cbiAqIEBwYXJhbSBzZWxlY3RJdGVtcyAtIElEcyBvZiB0aGUgaXRlbXMgdGhhdCBzaG91bGQgcmVjZWl2ZSBhIHRlbXBvcmFyeSBsYWJlbCBidW1wLlxuICogQHBhcmFtIG5leHRHcm91cFJhdyAtIFRhcmdldCBncm91cCBuYW1lOyB0cmltbWVkIGJlZm9yZSBjb21wYXJpc29uLlxuICogQHJldHVybnMgQSBuZXcgYXJyYXkgd2hlcmUgdGhlIG1hdGNoaW5nIGl0ZW1zIGdhaW4gYSB0ZW1wb3JhcnkgaGlnaC1wcmlvcml0eSBsYWJlbDsgb3RoZXIgaXRlbXMgYXJlIHVudG91Y2hlZC5cbiAqL1xuZnVuY3Rpb24gdXBkYXRlR3JvdXBBbmREZWZlclJlbGFiZWwoaXRlbXMsIHNlbGVjdEl0ZW1zLCBuZXh0R3JvdXBSYXcpIHtcbiAgICBjb25zdCBub3JtYWxpemUgPSAoZykgPT4gKGcgPz8gJycpLnRyaW0oKTtcbiAgICBjb25zdCBuZXh0R3JvdXAgPSBub3JtYWxpemUobmV4dEdyb3VwUmF3KTtcbiAgICBsZXQgdXBkYXRlSXRlbUNudCA9IDA7XG4gICAgcmV0dXJuIGl0ZW1zXG4gICAgICAgIC5zb3J0KChhLCBiKSA9PiBiLmlkIC0gYS5pZClcbiAgICAgICAgLm1hcCgoaXRlbSkgPT4ge1xuICAgICAgICBpZiAoc2VsZWN0SXRlbXMuaW5jbHVkZXMoaXRlbS5pZCkgJiYgaXRlbS5ncm91cCAhPT0gbmV4dEdyb3VwKSB7XG4gICAgICAgICAgICBjb25zdCBsYWJlbCA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSIC0gdXBkYXRlSXRlbUNudCsrO1xuICAgICAgICAgICAgcmV0dXJuIHsgLi4uaXRlbSwgZ3JvdXA6IG5leHRHcm91cCwgbGFiZWwgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaXRlbTtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIGFwcGx5SXRlbVNlbGVjdGlvbkNoYW5nZWRCeUlkKGlkLCBpc0NoZWNrLCBzZWxlY3RJdGVtcykge1xuICAgIGlmIChpc0NoZWNrKSB7XG4gICAgICAgIGlmICghc2VsZWN0SXRlbXMuaW5jbHVkZXMoaWQpKSB7XG4gICAgICAgICAgICByZXR1cm4gWy4uLnNlbGVjdEl0ZW1zLCBpZF07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHNlbGVjdEl0ZW1zLmZpbHRlcigoaXRlbSkgPT4gaXRlbSAhPT0gaWQpO1xufVxuZnVuY3Rpb24gYXBwbHlJdGVtU2VsZWN0aW9uQ2hhbmdlZEZvckdyb3VwKGdyb3VwLCBpc0NoZWNrLCBzZWxlY3RJdGVtcywgaXRlbXMpIHtcbiAgICBjb25zdCBnID0gZ3JvdXAudHJpbSgpO1xuICAgIGNvbnN0IGdyb3VwSWRzID0gaXRlbXNcbiAgICAgICAgLmZpbHRlcigoaXQpID0+IChpdC5ncm91cCA/PyBVTkdST1VQRURfVkFMVUUpLnRyaW0oKSA9PT0gZylcbiAgICAgICAgLm1hcCgoaXQpID0+IGl0LmlkKTtcbiAgICBpZiAoZ3JvdXBJZHMubGVuZ3RoID09PSAwKVxuICAgICAgICByZXR1cm4gc2VsZWN0SXRlbXM7XG4gICAgaWYgKGlzQ2hlY2spIHtcbiAgICAgICAgY29uc3Qgc2V0ID0gbmV3IFNldChzZWxlY3RJdGVtcyk7XG4gICAgICAgIGZvciAoY29uc3QgaWQgb2YgZ3JvdXBJZHMpXG4gICAgICAgICAgICBzZXQuYWRkKGlkKTtcbiAgICAgICAgcmV0dXJuIFsuLi5zZXRdO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgZ3JvdXBTZXQgPSBuZXcgU2V0KGdyb3VwSWRzKTtcbiAgICAgICAgcmV0dXJuIHNlbGVjdEl0ZW1zLmZpbHRlcigoaWQpID0+ICFncm91cFNldC5oYXMoaWQpKTtcbiAgICB9XG59XG5mdW5jdGlvbiBhcHBseUl0ZW1TZWxlY3Rpb25DaGFuZ2VkRm9yQWxsKGFsbENoZWNrLCBpdGVtcykge1xuICAgIGlmIChhbGxDaGVjaykge1xuICAgICAgICByZXR1cm4gaXRlbXMubWFwKChpdCkgPT4gaXQuaWQpO1xuICAgIH1cbiAgICByZXR1cm4gW107XG59XG4iLCJpbXBvcnQgeyBNU0dfVFlQRSB9IGZyb20gJ0Bjb21tb24vbWVzc2FnZXMnO1xuaW1wb3J0IHsgcGFnZUtleSB9IGZyb20gJ0Bjb21tb24vdXJsJztcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBY3RpdmVUYWIoKSB7XG4gICAgY29uc3QgdGFicyA9IGF3YWl0IGNocm9tZS50YWJzLnF1ZXJ5KHsgYWN0aXZlOiB0cnVlLCBjdXJyZW50V2luZG93OiB0cnVlIH0pO1xuICAgIHJldHVybiB0YWJzWzBdO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyQWN0aXZlVGFiQnJvYWRjYXN0KCkge1xuICAgIC8vIFRhYiBzd2l0Y2hpbmdcbiAgICBjb25zdCBvbkFjdGl2YXRlZCA9IGFzeW5jICh7IHRhYklkLCB3aW5kb3dJZCB9KSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBbdGFiXSA9IGF3YWl0IGNocm9tZS50YWJzLnF1ZXJ5KHsgYWN0aXZlOiB0cnVlLCB3aW5kb3dJZCB9KTtcbiAgICAgICAgICAgIGNvbnN0IHVybCA9IHRhYj8udXJsO1xuICAgICAgICAgICAgY29uc3Qga2V5ID0gdXJsID8gcGFnZUtleSh1cmwpIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgYXdhaXQgY2hyb21lLnJ1bnRpbWUuc2VuZE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgIHR5cGU6IE1TR19UWVBFLkFDVElWRV9UQUJfQ0hBTkdFRCxcbiAgICAgICAgICAgICAgICBwYXlsb2FkOiB7IHRhYklkLCB3aW5kb3dJZCwgdXJsLCBwYWdlS2V5OiBrZXkgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgIC8qIG5vLW9wICovXG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8vIFJlbG9hZC90cmFuc2l0aW9uIGRldGVjdGlvbiB3aXRoaW4gdGhlIHNhbWUgdGFiXG4gICAgY29uc3Qgb25VcGRhdGVkID0gYXN5bmMgKHRhYklkLCBpbmZvLCB0YWIpID0+IHtcbiAgICAgICAgaWYgKCF0YWI/LmFjdGl2ZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKGluZm8uc3RhdHVzID09PSAnbG9hZGluZycgfHwgdHlwZW9mIGluZm8udXJsID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCB1cmwgPSB0YWIudXJsO1xuICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IHVybCA/IHBhZ2VLZXkodXJsKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBhd2FpdCBjaHJvbWUucnVudGltZS5zZW5kTWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IE1TR19UWVBFLkFDVElWRV9UQUJfQ0hBTkdFRCxcbiAgICAgICAgICAgICAgICAgICAgcGF5bG9hZDogeyB0YWJJZCwgd2luZG93SWQ6IHRhYi53aW5kb3dJZCwgdXJsLCBwYWdlS2V5OiBrZXkgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgICAgICAvKiBuby1vcCAqL1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBjaHJvbWUudGFicy5vbkFjdGl2YXRlZC5hZGRMaXN0ZW5lcihvbkFjdGl2YXRlZCk7XG4gICAgY2hyb21lLnRhYnMub25VcGRhdGVkLmFkZExpc3RlbmVyKG9uVXBkYXRlZCk7XG59XG4iLCJpbXBvcnQgeyBDSEFOTkVMIH0gZnJvbSAnQGNvbW1vbi9jb25zdGFudHMnO1xuaW1wb3J0IHsgUGFuZWxBcGkgfSBmcm9tICcuL2FwaSc7XG5pbXBvcnQgeyBQb3J0UnBjIH0gZnJvbSAnLi9wb3J0X3JwYyc7XG4vKipcbiAqIEluamVjdHMgdGhlIGNvbnRlbnQgc2NyaXB0IGludG8gdGhlIHRhYiBpZiBuZWVkZWQsIGFuZFxuICogaW5pdGlhbGl6ZXMgdGhlIFBvcnQgY29ubmVjdGlvbiBhbmQgUlBDIGZvciBQYW5lbCDihpQgQ29udGVudC5cbiAqXG4gKiBAcGFyYW0gdGFiSWQgLSBUYXJnZXQgdGFiIGlkXG4gKiBAcmV0dXJucyBBIGNvbm5lY3Rpb24gb2JqZWN0IGJ1bmRsaW5nIEFQSSwgUG9ydCwgYW5kIFJQQ1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29ubmVjdFRvVGFiKHRhYklkKSB7XG4gICAgYXdhaXQgY2hyb21lLnNjcmlwdGluZ1xuICAgICAgICAuZXhlY3V0ZVNjcmlwdCh7XG4gICAgICAgIHRhcmdldDogeyB0YWJJZCB9LFxuICAgICAgICBmaWxlczogWydjb250ZW50L21haW4uanMnXSxcbiAgICB9KVxuICAgICAgICAuY2F0Y2goKCkgPT4ge1xuICAgICAgICAvKiBJZ25vcmUgaWYgYWxyZWFkeSBpbmplY3RlZCAqL1xuICAgIH0pO1xuICAgIGNvbnN0IHBvcnQgPSBjaHJvbWUudGFicy5jb25uZWN0KHRhYklkLCB7IG5hbWU6IENIQU5ORUwuUEFORUxfQ09OVEVOVCB9KTtcbiAgICBjb25zdCBycGMgPSBuZXcgUG9ydFJwYyhwb3J0KTtcbiAgICBjb25zdCBhcGkgPSBuZXcgUGFuZWxBcGkocnBjKTtcbiAgICBjb25zdCBsaXN0ZW5lcnMgPSBbXTtcbiAgICBwb3J0Lm9uRGlzY29ubmVjdC5hZGRMaXN0ZW5lcigoKSA9PiBsaXN0ZW5lcnMuZm9yRWFjaCgoZm4pID0+IGZuKCkpKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBhcGksXG4gICAgICAgIHBvcnQsXG4gICAgICAgIHJwYyxcbiAgICAgICAgb25EaXNjb25uZWN0OiAoY2IpID0+IGxpc3RlbmVycy5wdXNoKGNiKSxcbiAgICAgICAgZGlzcG9zZTogKCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBwb3J0LmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgICAgICAvKiBuby1vcCAqL1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgIH07XG59XG4iLCJleHBvcnQgY29uc3QgSUNPTlMgPSB7XG4gICAgY2FyZXREb3duOiB7XG4gICAgICAgIGQ6ICdNNS4yMyA3LjIxYS43NS43NSAwIDAxMS4wNi4wMkwxMCAxMC45MzlsMy43MS0zLjcxYS43NS43NSAwIDExMS4wNiAxLjA2MkwxMC41MyAxMi41M2EuNzUuNzUgMCAwMS0xLjA2IDBMNS4yMyA4LjI3YS43NS43NSAwIDAxLjAyLTEuMDZ6JyxcbiAgICAgICAgdmlld0JveDogJzAgMCAyMCAyMCcsXG4gICAgfSxcbiAgICBjYXJldERvd25GaWxsOiB7XG4gICAgICAgIGQ6ICdNNy4yNDcgMTEuMTQgMi40NTEgNS42NThDMS44ODUgNS4wMTMgMi4zNDUgNCAzLjIwNCA0aDkuNTkyYTEgMSAwIDAgMSAuNzUzIDEuNjU5bC00Ljc5NiA1LjQ4YTEgMSAwIDAgMS0xLjUwNiAweicsXG4gICAgICAgIHZpZXdCb3g6ICcwIDAgMTYgMTYnLFxuICAgIH0sXG4gICAgY2FyZXRSaWdodDoge1xuICAgICAgICBkOiAnTTcuMjkzIDE0LjcwN2ExIDEgMCAwMS0xLjQxNC0xLjQxNEwxMC4xNzIgOSA1Ljg3OSA0LjcwN2ExIDEgMCAwMTEuNDE0LTEuNDE0bDUgNWExIDEgMCAwMTAgMS40MTRsLTUgNXonLFxuICAgICAgICB2aWV3Qm94OiAnMCAwIDIwIDIwJyxcbiAgICB9LFxuICAgIGNhcmV0UmlnaHRGaWxsOiB7XG4gICAgICAgIGQ6ICdtMTIuMTQgOC43NTMtNS40ODIgNC43OTZjLS42NDYuNTY2LTEuNjU4LjEwNi0xLjY1OC0uNzUzVjMuMjA0YTEgMSAwIDAgMSAxLjY1OS0uNzUzbDUuNDggNC43OTZhMSAxIDAgMCAxIDAgMS41MDZ6JyxcbiAgICAgICAgdmlld0JveDogJzAgMCAxNiAxNicsXG4gICAgfSxcbiAgICB3YXJuOiB7XG4gICAgICAgIGQ6ICdNOS4wNDkgMi45MjdhMS41IDEuNSAwIDAxMi45MDIgMGw2LjQxIDExLjk0QTEuNSAxLjUgMCAwMTE3LjAxIDE3SDIuOTlhMS41IDEuNSAwIDAxLTEuMzUxLTIuMTMzbDYuNDEtMTEuOTR6TTExIDEzYTEgMSAwIDEwLTIgMCAxIDEgMCAwMDIgMHptLTEtMmExIDEgMCAwMDEtMVY3YTEgMSAwIDEwLTIgMHYzYTEgMSAwIDAwMSAxeicsXG4gICAgICAgIHZpZXdCb3g6ICcwIDAgMjAgMjAnLFxuICAgIH0sXG4gICAgY29tbWVudDoge1xuICAgICAgICBkOiAnTTAgMmEyIDIgMCAwIDEgMi0yaDEyYTIgMiAwIDAgMSAyIDJ2OGEyIDIgMCAwIDEtMiAySDQuNDE0YTEgMSAwIDAgMC0uNzA3LjI5M0wuODU0IDE1LjE0NkEuNS41IDAgMCAxIDAgMTQuNzkzem01IDRhMSAxIDAgMSAwLTIgMCAxIDEgMCAwIDAgMiAwbTQgMGExIDEgMCAxIDAtMiAwIDEgMSAwIDAgMCAyIDBtMyAxYTEgMSAwIDEgMCAwLTIgMSAxIDAgMCAwIDAgMicsXG4gICAgICAgIHZpZXdCb3g6ICcwIDAgMTYgMTYnLFxuICAgIH0sXG4gICAgcmVtb3ZlOiB7XG4gICAgICAgIGQ6ICdNNyAzYTEgMSAwIDAgMSAxLTFoNGExIDEgMCAwIDEgMSAxdjFoM2ExIDEgMCAxIDEgMCAyaC0xbC0xIDEwYTIgMiAwIDAgMS0yIDJIOGEyIDIgMCAwIDEtMi0yTDUgNkg0YTEgMSAwIDEgMSAwLTJoM1YzWm0xIDNhMSAxIDAgMCAwLTEgMXY4YTEgMSAwIDEgMCAyIDBWN2ExIDEgMCAwIDAtMS0xWm00IDBhMSAxIDAgMCAwLTEgMXY4YTEgMSAwIDEgMCAyIDBWN2ExIDEgMCAwIDAtMS0xWicsXG4gICAgICAgIHZpZXdCb3g6ICcwIDAgMjAgMjAnLFxuICAgIH0sXG59O1xuZXhwb3J0IGZ1bmN0aW9uIGdldEljb24obmFtZSkge1xuICAgIGNvbnN0IHsgZCwgdmlld0JveCA9ICcwIDAgMjAgMjAnIH0gPSBJQ09OU1tuYW1lXTtcbiAgICByZXR1cm4geyBkLCB2aWV3Qm94IH07XG59XG4iLCJpbXBvcnQgaTE4biBmcm9tICdAY29tbW9uL2kxOG4nO1xuaW1wb3J0IHsgZ2V0SWNvbiB9IGZyb20gJ0Bjb21tb24vaWNvbnMnO1xuaW1wb3J0IHsgaXNJdGVtQ29sb3IsIGlzSXRlbVBvc2l0aW9uLCBpc0l0ZW1TaGFwZSwgVU5HUk9VUEVELCBVTkdST1VQRURfVkFMVUUsIH0gZnJvbSAnQGNvbW1vbi90eXBlcyc7XG5pbXBvcnQgeyBnZXRTdGF0dXNNZXNzYWdlLCBTVEFUVVMsIFNUQVRVU19MQUJFTF9TVFlMRSB9IGZyb20gJ0BwYW5lbC92aWV3L3N0YXR1cyc7XG5pbXBvcnQgeyBVSUV2ZW50VHlwZSB9IGZyb20gJy4uL3R5cGVzL3VpX2V2ZW50X3R5cGVzJztcbmZ1bmN0aW9uIGJ5TGFiZWxUaGVuSWQoYSwgYikge1xuICAgIGlmIChhLmxhYmVsICE9PSBiLmxhYmVsKVxuICAgICAgICByZXR1cm4gYS5sYWJlbCAtIGIubGFiZWw7XG4gICAgcmV0dXJuIGEuaWQgLSBiLmlkO1xufVxuZXhwb3J0IGNsYXNzIFBhbmVsVmlldyB7XG4gICAgZG9jO1xuICAgIGxpc3RlbmVycyA9IHt9O1xuICAgIGVscztcbiAgICBORVdfR1JPVVAgPSAnX19uZXdncm91cF9fJztcbiAgICBIT1ZFUl9PVVRfREVMQVkgPSAxMDAwO1xuICAgIGRyYWdFbCA9IG51bGw7XG4gICAgZHJhZ1N0YXJ0UGFyZW50ID0gbnVsbDtcbiAgICBkcmFnU3RhcnRJbmRleCA9IC0xO1xuICAgIGhvdmVyT3V0VGltZXIgPSBudWxsO1xuICAgIGNvbGxhcHNlZEdyb3VwcyA9IG5ldyBTZXQoKTtcbiAgICBjb25zdHJ1Y3Rvcihkb2MpIHtcbiAgICAgICAgdGhpcy5kb2MgPSBkb2M7XG4gICAgICAgIGkxOG4ubG9jYWxpemUoZG9jKTtcbiAgICAgICAgdGhpcy5lbHMgPSB7XG4gICAgICAgICAgICBzdGF0dXM6IHRoaXMuJCgnI3N0YXR1cycpLFxuICAgICAgICAgICAgdG9nZ2xlQnRuOiB0aGlzLiQoJyN0b2dnbGUtc2VsZWN0JyksXG4gICAgICAgICAgICB0b2dnbGVJY29uOiB0aGlzLiQoJyN0b2dnbGUtc2VsZWN0LWljb24nKSxcbiAgICAgICAgICAgIHRvZ2dsZUxhYmVsOiB0aGlzLiQoJyN0b2dnbGUtc2VsZWN0LWxhYmVsJyksXG4gICAgICAgICAgICBjbGVhckJ0bjogdGhpcy4kKCcjY2xlYXInKSxcbiAgICAgICAgICAgIGNhcHR1cmVCdG46IHRoaXMuJCgnI2NhcHR1cmUnKSxcbiAgICAgICAgICAgIGxpc3Q6IHRoaXMuJCgnI3NlbGVjdC1saXN0JyksXG4gICAgICAgICAgICBlbXB0eTogdGhpcy4kKCcjc2VsZWN0LWVtcHR5JyksXG4gICAgICAgICAgICBjb3VudDogdGhpcy4kKCcjc2VsZWN0LWNvdW50JyksXG4gICAgICAgICAgICBjYXB0dXJlT3B0aW9uc1RvZ2dsZTogdGhpcy4kKCcjY2FwdHVyZS1vcHRpb25zLXRvZ2dsZScpLFxuICAgICAgICAgICAgY2FwdHVyZU9wdGlvbnNQYW5lbDogdGhpcy4kKCcjY2FwdHVyZS1vcHRpb25zJyksXG4gICAgICAgICAgICBjYXB0dXJlRm10UmFkaW9zOiB0aGlzLiRhbGwoJ2lucHV0W25hbWU9XCJjYXB0dXJlLWZvcm1hdFwiXScpLFxuICAgICAgICAgICAgY2FwdHVyZUFyZWFSYWRpb3M6IHRoaXMuJGFsbCgnaW5wdXRbbmFtZT1cImNhcHR1cmUtYXJlYVwiXScpLFxuICAgICAgICAgICAganBlZ09ubHlFbHM6IHRoaXMuJGFsbCgnLmpwZWctb25seScpLFxuICAgICAgICAgICAganBlZ1F1YWxpdHlSYW5nZTogdGhpcy4kKCcjanBlZy1xdWFsaXR5LXJhbmdlJyksXG4gICAgICAgICAgICBqcGVnUXVhbGl0eU51bWJlcjogdGhpcy4kKCcjanBlZy1xdWFsaXR5LW51bWJlcicpLFxuICAgICAgICAgICAgY2FwdHVyZVNjYWxlUmFuZ2U6IHRoaXMuJCgnI2NhcHR1cmUtc2NhbGUtcmFuZ2UnKSxcbiAgICAgICAgICAgIGNhcHR1cmVTY2FsZU51bWJlcjogdGhpcy4kKCcjY2FwdHVyZS1zY2FsZS1udW1iZXInKSxcbiAgICAgICAgICAgIGJhZGdlU2l6ZVJhbmdlOiB0aGlzLiQoJyNiYWRnZS1zaXplLXJhbmdlJyksXG4gICAgICAgICAgICBiYWRnZVNpemVOdW1iZXI6IHRoaXMuJCgnI2JhZGdlLXNpemUtbnVtYmVyJyksXG4gICAgICAgICAgICBiYWRnZUNvbG9yQnV0dG9uczogdGhpcy4kYWxsKCcjYmFkZ2UtY29sb3ItcG9wIGJ1dHRvbicpLFxuICAgICAgICAgICAgYmFkZ2VDb2xvckxhYmVsOiB0aGlzLiQoJyNiYWRnZS1jb2xvci1sYWJlbCcpLFxuICAgICAgICAgICAgYmFkZ2VDb2xvckRvdDogdGhpcy4kKCcjYmFkZ2UtY29sb3ItZG90JyksXG4gICAgICAgICAgICBiYWRnZVNoYXBlU2VsZWN0OiB0aGlzLiQoJyNiYWRnZS1zaGFwZS1zZWxlY3QnKSxcbiAgICAgICAgICAgIGJhZGdlRGVsZXRlQnV0dG9uOiB0aGlzLiQoJyNiYWRnZS1kZWxldGUtYnV0dG9uJyksXG4gICAgICAgICAgICBiYWRnZVBvc2l0aW9uQnV0dG9uczogdGhpcy4kYWxsKCcjYmFkZ2UtcG9zaXRpb24tcG9wIGJ1dHRvbicpLFxuICAgICAgICAgICAgYmFkZ2VQb3NpdGlvbkxhYmVsOiB0aGlzLiQoJyNiYWRnZS1wb3NpdGlvbi1sYWJlbCcpLFxuICAgICAgICAgICAgYmFkZ2VHcm91cFNlbGVjdDogdGhpcy4kKCcjYmFkZ2UtZ3JvdXAtc2VsZWN0JyksXG4gICAgICAgICAgICBncm91cE5hbWVNb2RhbDogdGhpcy4kKCcjZ3JvdXAtbmFtZS1tb2RhbCcpLFxuICAgICAgICAgICAgZ3JvdXBOYW1lSW5wdXQ6IHRoaXMuJCgnI2dyb3VwLW5hbWUtaW5wdXQnKSxcbiAgICAgICAgICAgIGdyb3VwTmFtZUNhbmNlbEJ0bjogdGhpcy4kKCcjZ3JvdXAtbmFtZS1jYW5jZWwtYnRuJyksXG4gICAgICAgICAgICBncm91cE5hbWVDcmVhdGVsQnRuOiB0aGlzLiQoJyNncm91cC1uYW1lLWNyZWF0ZS1idG4nKSxcbiAgICAgICAgICAgIGl0ZW1Db21tZW50TW9kYWw6IHRoaXMuJCgnI2l0ZW0tY29tbWVudC1tb2RhbCcpLFxuICAgICAgICAgICAgaXRlbUNvbW1lbnRJbnB1dDogdGhpcy4kKCcjaXRlbS1jb21tZW50LWlucHV0JyksXG4gICAgICAgICAgICBpdGVtQ29tbWVudElkSW5wdXQ6IHRoaXMuJCgnI2l0ZW0tY29tbWVudC1pZC1pbnB1dCcpLFxuICAgICAgICAgICAgaXRlbUNvbW1lbnRDYW5jZWxCdG46IHRoaXMuJCgnI2l0ZW0tY29tbWVudC1jYW5jZWwtYnRuJyksXG4gICAgICAgICAgICBpdGVtQ29tbWVudEFwcGx5QnRuOiB0aGlzLiQoJyNpdGVtLWNvbW1lbnQtYXBwbHktYnRuJyksXG4gICAgICAgICAgICBzZWxlY3RJdGVtQWxsQ2hlY2tib3g6IHRoaXMuJCgnaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdW25hbWU9XCJpdGVtLXNlbGVjdFwiXVt2YWx1ZT1cImFsbFwiXScpLFxuICAgICAgICAgICAgc2V0dGluZ01vZGFsOiB0aGlzLiQoJyNzZXR0aW5nLW1vZGFsJyksXG4gICAgICAgICAgICBzZXR0aW5nQnV0dG9uOiB0aGlzLiQoJyNzZXR0aW5nLWJ1dHRvbicpLFxuICAgICAgICAgICAgc2V0dGluZ0Nsb3NlQnV0dG9uOiB0aGlzLiQoJyNzZXR0aW5nLWNsb3NlLWJ0bicpLFxuICAgICAgICAgICAgdGhlbWVMaWdodEJ0bjogdGhpcy4kKCcjdGhlbWUtbGlnaHQtYnRuJyksXG4gICAgICAgICAgICB0aGVtZURhcmtCdG46IHRoaXMuJCgnI3RoZW1lLWRhcmstYnRuJyksXG4gICAgICAgICAgICB0aGVtZURldmljZUJ0bjogdGhpcy4kKCcjdGhlbWUtZGV2aWNlLWJ0bicpLFxuICAgICAgICAgICAgc3RvcmVDb3VudDogdGhpcy4kKCcjc3RvcmUtY291bnQnKSxcbiAgICAgICAgICAgIHN0b3JlTGlzdDogdGhpcy4kKCcjc3RvcmUtbGlzdCcpLFxuICAgICAgICAgICAgc3RvcmVFbXB0eTogdGhpcy4kKCcjc3RvcmUtZW1wdHknKSxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5lbHMudG9nZ2xlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5lbWl0KFVJRXZlbnRUeXBlLlRPR0dMRV9TRUxFQ1QsIHVuZGVmaW5lZCkpO1xuICAgICAgICB0aGlzLmVscy5jbGVhckJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuZW1pdChVSUV2ZW50VHlwZS5DTEVBUiwgdW5kZWZpbmVkKSk7XG4gICAgICAgIHRoaXMuZWxzLmNhcHR1cmVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmVtaXQoVUlFdmVudFR5cGUuQ0FQVFVSRSwgdW5kZWZpbmVkKSk7XG4gICAgICAgIC8vID09PSBDYXB0dXJlIG9wdGlvbnMgPT09XG4gICAgICAgIHRoaXMuZWxzLmNhcHR1cmVPcHRpb25zVG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5lbWl0KFVJRXZlbnRUeXBlLlRPR0dMRV9DQVBUVVJFX1BBTkVMLCB1bmRlZmluZWQpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5lbHMuY2FwdHVyZUZtdFJhZGlvcy5mb3JFYWNoKChyKSA9PiByLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUXVhbGl0eVZpc2liaWxpdHkoKTtcbiAgICAgICAgICAgIHRoaXMuZW1pdChVSUV2ZW50VHlwZS5DQVBUVVJFX0ZPUk1BVF9DSEFOR0UsIHsgZm9ybWF0OiB0aGlzLmdldFNlbGVjdGVkQ2FwdHVyZUZvcm1hdCgpIH0pO1xuICAgICAgICB9KSk7XG4gICAgICAgIHRoaXMuZWxzLmNhcHR1cmVBcmVhUmFkaW9zLmZvckVhY2goKHIpID0+IHIuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5lbWl0KFVJRXZlbnRUeXBlLkNBUFRVUkVfQVJFQV9DSEFOR0UsIHsgYXJlYTogdGhpcy5nZXRTZWxlY3RlZENhcHR1cmVBcmVhKCkgfSk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgdGhpcy5iaW5kU3luYyh0aGlzLmVscy5qcGVnUXVhbGl0eVJhbmdlLCB0aGlzLmVscy5qcGVnUXVhbGl0eU51bWJlciwgKHYpID0+IHRoaXMuZW1pdChVSUV2ZW50VHlwZS5DQVBUVVJFX1FVQUxJVFlfQ0hBTkdFLCB7IHF1YWxpdHk6IHYgfSkpO1xuICAgICAgICB0aGlzLmJpbmRTeW5jKHRoaXMuZWxzLmNhcHR1cmVTY2FsZVJhbmdlLCB0aGlzLmVscy5jYXB0dXJlU2NhbGVOdW1iZXIsICh2KSA9PiB0aGlzLmVtaXQoVUlFdmVudFR5cGUuQ0FQVFVSRV9TQ0FMRV9DSEFOR0UsIHsgc2NhbGU6IHYgfSkpO1xuICAgICAgICAvLyA9PT0gQmFkZ2UgPT09XG4gICAgICAgIHRoaXMuYmluZFN5bmModGhpcy5lbHMuYmFkZ2VTaXplUmFuZ2UsIHRoaXMuZWxzLmJhZGdlU2l6ZU51bWJlcik7XG4gICAgICAgIGNvbnN0IGZpcmVTaXplID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdiA9IE51bWJlcih0aGlzLmVscy5iYWRnZVNpemVOdW1iZXIudmFsdWUpO1xuICAgICAgICAgICAgaWYgKE51bWJlci5pc0Zpbml0ZSh2KSlcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoVUlFdmVudFR5cGUuQkFER0VfU0laRV9DSEFOR0UsIHsgc2l6ZTogdiB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5lbHMuYmFkZ2VTaXplUmFuZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZmlyZVNpemUpO1xuICAgICAgICB0aGlzLmVscy5iYWRnZVNpemVOdW1iZXIuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZmlyZVNpemUpO1xuICAgICAgICB0aGlzLmVscy5iYWRnZUNvbG9yQnV0dG9ucy5mb3JFYWNoKChidG4pID0+IHtcbiAgICAgICAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByYXcgPSBidG4uZGF0YXNldC5jb2xvck5hbWUgPz8gJyc7XG4gICAgICAgICAgICAgICAgY29uc3QgY29sb3IgPSBpc0l0ZW1Db2xvcihyYXcpID8gcmF3IDogJ0JsdWUnO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdChVSUV2ZW50VHlwZS5CQURHRV9DT0xPUl9TRUxFQ1QsIHsgY29sb3IgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZWxzLmJhZGdlU2hhcGVTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdiA9IHRoaXMuZWxzLmJhZGdlU2hhcGVTZWxlY3QudmFsdWUgPz8gbnVsbDtcbiAgICAgICAgICAgIGNvbnN0IHNoYXBlID0gaXNJdGVtU2hhcGUodikgPyB2IDogJ2NpcmNsZSc7XG4gICAgICAgICAgICB0aGlzLmVtaXQoVUlFdmVudFR5cGUuQkFER0VfU0hBUEVfQ0hBTkdFLCB7IHNoYXBlIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5lbHMuYmFkZ2VEZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmVtaXQoVUlFdmVudFR5cGUuQkFER0VfREVMRVRFLCB1bmRlZmluZWQpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5lbHMuYmFkZ2VQb3NpdGlvbkJ1dHRvbnMuZm9yRWFjaCgoYnRuKSA9PiB7XG4gICAgICAgICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmF3ID0gYnRuLmRhdGFzZXQucG9zaXRpb25OYW1lID8/ICcnO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBvc2l0aW9uID0gaXNJdGVtUG9zaXRpb24ocmF3KSA/IHJhdyA6ICdsZWZ0LXRvcC1vdXRzaWRlJztcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoVUlFdmVudFR5cGUuQkFER0VfUE9TSVRJT05fU0VMRUNULCB7IHBvc2l0aW9uIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmVscy5iYWRnZUdyb3VwU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5lbHMuYmFkZ2VHcm91cFNlbGVjdC52YWx1ZSA/PyBVTkdST1VQRUQ7XG4gICAgICAgICAgICBjb25zdCBncm91cCA9IHZhbHVlID09PSBVTkdST1VQRUQgPyBVTkdST1VQRURfVkFMVUUgOiB2YWx1ZTtcbiAgICAgICAgICAgIGlmIChncm91cCA9PT0gdGhpcy5ORVdfR1JPVVApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVscy5ncm91cE5hbWVNb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZW1pdChVSUV2ZW50VHlwZS5TRVRfR1JPVVAsIHsgZ3JvdXAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmVscy5ncm91cE5hbWVDYW5jZWxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmVscy5ncm91cE5hbWVNb2RhbC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZWxzLmdyb3VwTmFtZUNyZWF0ZWxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMuZWxzLmdyb3VwTmFtZUlucHV0LnZhbHVlID8/IFVOR1JPVVBFRDtcbiAgICAgICAgICAgIGNvbnN0IGdyb3VwID0gdmFsdWUgPT09IFVOR1JPVVBFRCB8fCB2YWx1ZSA9PT0gdGhpcy5ORVdfR1JPVVAgPyBVTkdST1VQRURfVkFMVUUgOiB2YWx1ZTtcbiAgICAgICAgICAgIHRoaXMuZW1pdChVSUV2ZW50VHlwZS5TRVRfR1JPVVAsIHsgZ3JvdXAgfSk7XG4gICAgICAgICAgICB0aGlzLmVscy5ncm91cE5hbWVNb2RhbC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgICAgIHRoaXMuZWxzLmdyb3VwTmFtZUlucHV0LnZhbHVlID0gJyc7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmVscy5pdGVtQ29tbWVudENhbmNlbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZWxzLml0ZW1Db21tZW50TW9kYWwuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmVscy5pdGVtQ29tbWVudEFwcGx5QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY29tbWVudCA9IHRoaXMuZWxzLml0ZW1Db21tZW50SW5wdXQudmFsdWU7XG4gICAgICAgICAgICBjb25zdCBpZCA9IE51bWJlcih0aGlzLmVscy5pdGVtQ29tbWVudElkSW5wdXQudmFsdWUpO1xuICAgICAgICAgICAgdGhpcy5lbWl0KFVJRXZlbnRUeXBlLklURU1fQ09NTUVOVF9BUFBMWSwgeyBpZCwgY29tbWVudCB9KTtcbiAgICAgICAgICAgIHRoaXMuZWxzLml0ZW1Db21tZW50TW9kYWwuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmVscy5zZXR0aW5nQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5lbHMuc2V0dGluZ01vZGFsLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgICAgICAgICAgdGhpcy5lbWl0KFVJRXZlbnRUeXBlLlNFVFRJTkdfTU9EQUxfU0hPVywgdW5kZWZpbmVkKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZWxzLnNldHRpbmdDbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZWxzLnNldHRpbmdNb2RhbC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZWxzLnRoZW1lTGlnaHRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmFwcGx5VGhlbWUoJ2xpZ2h0Jyk7XG4gICAgICAgICAgICB0aGlzLmVtaXQoVUlFdmVudFR5cGUuVVBEQVRFX1RIRU1FLCB7IHRoZW1lOiAnbGlnaHQnIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5lbHMudGhlbWVEYXJrQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5hcHBseVRoZW1lKCdkYXJrJyk7XG4gICAgICAgICAgICB0aGlzLmVtaXQoVUlFdmVudFR5cGUuVVBEQVRFX1RIRU1FLCB7IHRoZW1lOiAnZGFyaycgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmVscy50aGVtZURldmljZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuYXBwbHlUaGVtZSgnZGV2aWNlJyk7XG4gICAgICAgICAgICB0aGlzLmVtaXQoVUlFdmVudFR5cGUuVVBEQVRFX1RIRU1FLCB7IHRoZW1lOiAnZGV2aWNlJyB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudXBkYXRlUXVhbGl0eVZpc2liaWxpdHkoKTtcbiAgICAgICAgdGhpcy5lbHMuc2VsZWN0SXRlbUFsbENoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzZWxlY3RlZCA9IGUudGFyZ2V0LmNoZWNrZWQ7XG4gICAgICAgICAgICB0aGlzLmVtaXQoVUlFdmVudFR5cGUuSVRFTV9TRUxFQ1RJT05fQ0hBTkdFRCwgeyBhbGxDaGVjazogc2VsZWN0ZWQgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmVscy5saXN0LmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJlbnRlcicsICgpID0+IHRoaXMuY2FuY2VsSG92ZXJPdXQoKSk7XG4gICAgICAgIHRoaXMuZWxzLmxpc3QuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcmxlYXZlJywgKCkgPT4gdGhpcy5zY2hlZHVsZUhvdmVyT3V0KCkpO1xuICAgICAgICBkb2MuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcmxlYXZlJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jYW5jZWxIb3Zlck91dCgpO1xuICAgICAgICAgICAgdGhpcy5lbWl0KFVJRXZlbnRUeXBlLklURU1fSE9WRVJfT1VULCB1bmRlZmluZWQpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgb24odHlwZSwgaGFuZGxlcikge1xuICAgICAgICBjb25zdCBhcnIgPSAodGhpcy5saXN0ZW5lcnNbdHlwZV0gPz89IFtdKTtcbiAgICAgICAgYXJyLnB1c2goaGFuZGxlcik7XG4gICAgfVxuICAgIGVtaXQodHlwZSwgZSkge1xuICAgICAgICBjb25zdCBhcnIgPSB0aGlzLmxpc3RlbmVyc1t0eXBlXTtcbiAgICAgICAgYXJyPy5mb3JFYWNoKChoKSA9PiBoKGUpKTtcbiAgICB9XG4gICAgcmVuZGVyKG1vZGVsKSB7XG4gICAgICAgIHRoaXMucmVuZGVyU3RhdHVzKG1vZGVsLnN0YXR1cyk7XG4gICAgICAgIHRoaXMucmVuZGVyVG9nZ2xlKG1vZGVsLnNlbGVjdGlvbkVuYWJsZWQpO1xuICAgICAgICB0aGlzLnJlbmRlckxpc3QobW9kZWwuaXRlbXMsIG1vZGVsLnNlbGVjdEl0ZW1zLCBtb2RlbC5taXNzaW5nSWRzKTtcbiAgICAgICAgdGhpcy5zZWxlY3RSYWRpb0J5VmFsdWUodGhpcy5lbHMuY2FwdHVyZUZtdFJhZGlvcywgbW9kZWwuY2FwdHVyZS5mb3JtYXQpO1xuICAgICAgICB0aGlzLnNlbGVjdFJhZGlvQnlWYWx1ZSh0aGlzLmVscy5jYXB0dXJlQXJlYVJhZGlvcywgbW9kZWwuY2FwdHVyZS5hcmVhKTtcbiAgICAgICAgdGhpcy5lbHMuanBlZ1F1YWxpdHlOdW1iZXIudmFsdWUgPSBTdHJpbmcobW9kZWwuY2FwdHVyZS5xdWFsaXR5KTtcbiAgICAgICAgdGhpcy5lbHMuanBlZ1F1YWxpdHlSYW5nZS52YWx1ZSA9IFN0cmluZyhtb2RlbC5jYXB0dXJlLnF1YWxpdHkpO1xuICAgICAgICB0aGlzLmVscy5jYXB0dXJlU2NhbGVOdW1iZXIudmFsdWUgPSBTdHJpbmcobW9kZWwuY2FwdHVyZS5zY2FsZSk7XG4gICAgICAgIHRoaXMuZWxzLmNhcHR1cmVTY2FsZVJhbmdlLnZhbHVlID0gU3RyaW5nKG1vZGVsLmNhcHR1cmUuc2NhbGUpO1xuICAgICAgICB0aGlzLnVwZGF0ZVF1YWxpdHlWaXNpYmlsaXR5KG1vZGVsLmNhcHR1cmUuZm9ybWF0KTtcbiAgICAgICAgdGhpcy5hcHBseUNhcHR1cmVPcHRpb25zVG9nZ2xlVUkobW9kZWwuY2FwdHVyZS5wYW5lbEV4cGFuZGVkKTtcbiAgICAgICAgdGhpcy5lbHMuYmFkZ2VTaXplTnVtYmVyLnZhbHVlID0gU3RyaW5nKG1vZGVsLmRlZmF1bHRTaXplKTtcbiAgICAgICAgdGhpcy5lbHMuYmFkZ2VTaXplUmFuZ2UudmFsdWUgPSBTdHJpbmcobW9kZWwuZGVmYXVsdFNpemUpO1xuICAgICAgICB0aGlzLmFwcGx5QmFkZ2VDb2xvclVJKG1vZGVsLmRlZmF1bHRDb2xvcik7XG4gICAgICAgIHRoaXMuZWxzLmJhZGdlU2hhcGVTZWxlY3QudmFsdWUgPSBtb2RlbC5kZWZhdWx0U2hhcGU7XG4gICAgICAgIHRoaXMuYXBwbHlCYWRnZVBvc2l0b25VSShtb2RlbC5kZWZhdWx0UG9zaXRpb24pO1xuICAgICAgICB0aGlzLmFwcGx5QmFkZ2VHcm91cFNlbGVjdFVJKHRoaXMuZ2V0RXhpc3RpbmdHcm91cHMobW9kZWwuaXRlbXMpLCBtb2RlbC5kZWZhdWx0R3JvdXApO1xuICAgICAgICB0aGlzLmFwcGx5VGhlbWUobW9kZWwudGhlbWUpO1xuICAgICAgICB0aGlzLmFwcGx5U3RvcmUobW9kZWwucGFnZUtleXMpO1xuICAgIH1cbiAgICByZW5kZXJTdGF0dXMoa2V5KSB7XG4gICAgICAgIGNvbnN0IHN0eWxlID0gU1RBVFVTX0xBQkVMX1NUWUxFW2tleV07XG4gICAgICAgIGNvbnN0IGVsID0gdGhpcy5lbHMuc3RhdHVzO1xuICAgICAgICBlbC5jbGFzc05hbWUgPSAnJztcbiAgICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnY29ubmVjdC1zdGF0dXMnLCAuLi5zdHlsZS5ib2R5KTtcbiAgICAgICAgY29uc3QgZG90ID0gdGhpcy5kb2MuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICBkb3QuY2xhc3NMaXN0LmFkZCgnY29ubmVjdC1zdGF0dXMtZG90JywgLi4uc3R5bGUuZG90KTtcbiAgICAgICAgY29uc3QgdGV4dCA9IHRoaXMuZG9jLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgdGV4dC50ZXh0Q29udGVudCA9IGdldFN0YXR1c01lc3NhZ2Uoa2V5KTtcbiAgICAgICAgZWwucmVwbGFjZUNoaWxkcmVuKGRvdCwgdGV4dCk7XG4gICAgICAgIHRoaXMuZGlzYWJsZUZvcm1Db250cm9scyhrZXkgIT09IFNUQVRVUy5DT05ORUNURUQpO1xuICAgIH1cbiAgICByZW5kZXJUb2dnbGUoZW5hYmxlZCkge1xuICAgICAgICBjb25zdCBpY29uID0gdGhpcy5lbHMudG9nZ2xlSWNvbjtcbiAgICAgICAgaWNvbi5jbGFzc05hbWUgPSAnJztcbiAgICAgICAgaWNvbi5jbGFzc0xpc3QuYWRkKCdzZWxlY3QtdG9nZ2xlLWljb24nLCBlbmFibGVkID8gJ2JnLWluZGlnby01MDAnIDogJ2JnLXNsYXRlLTMwMCcpO1xuICAgICAgICB0aGlzLmVscy50b2dnbGVMYWJlbC50ZXh0Q29udGVudCA9IGkxOG4uZ2V0KGVuYWJsZWQgPyAndG9nZ2xlX29uJyA6ICd0b2dnbGVfb2ZmJyk7XG4gICAgfVxuICAgIHJlbmRlckxpc3QoaXRlbXMsIHNlbGVjdEl0ZW1zLCBtaXNzaW5nSWRzKSB7XG4gICAgICAgIHRoaXMuZWxzLmNvdW50LnRleHRDb250ZW50ID0gU3RyaW5nKGl0ZW1zLmxlbmd0aCk7XG4gICAgICAgIGNvbnN0IGFsbENoZWNrZWQgPSBpdGVtcy5sZW5ndGggPT09IDAgPyBmYWxzZSA6IGl0ZW1zLmV2ZXJ5KChpdCkgPT4gc2VsZWN0SXRlbXMuaW5jbHVkZXMoaXQuaWQpKTtcbiAgICAgICAgdGhpcy5lbHMuc2VsZWN0SXRlbUFsbENoZWNrYm94LmNoZWNrZWQgPSBhbGxDaGVja2VkO1xuICAgICAgICBpZiAoIWl0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5lbHMuZW1wdHkuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICAgICAgICB0aGlzLmVscy5saXN0LnJlcGxhY2VDaGlsZHJlbigpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZWxzLmVtcHR5LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgICBjb25zdCBncm91cHMgPSB0aGlzLmdyb3VwQnlHcm91cChpdGVtcyk7XG4gICAgICAgIGNvbnN0IGdyb3VwS2V5cyA9IEFycmF5LmZyb20oZ3JvdXBzLmtleXMoKSkuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgaWYgKGEgPT09IFVOR1JPVVBFRClcbiAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICBpZiAoYiA9PT0gVU5HUk9VUEVEKVxuICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgcmV0dXJuIGEubG9jYWxlQ29tcGFyZShiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGZyYWcgPSB0aGlzLmRvYy5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgICAgIGZvciAoY29uc3QgZ0tleSBvZiBncm91cEtleXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHNlY3Rpb24gPSB0aGlzLnJlbmRlckdyb3VwU2VjdGlvbihnS2V5LCBncm91cHMuZ2V0KGdLZXkpLCBzZWxlY3RJdGVtcywgbWlzc2luZ0lkcyk7XG4gICAgICAgICAgICBmcmFnLmFwcGVuZENoaWxkKHNlY3Rpb24pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZWxzLmxpc3QucmVwbGFjZUNoaWxkcmVuKGZyYWcpO1xuICAgIH1cbiAgICByZW5kZXJHcm91cFNlY3Rpb24oZ0tleSwgZ0l0ZW1zLCBzZWxlY3RJdGVtcywgbWlzc2luZ0lkcykge1xuICAgICAgICBjb25zdCBpc0NvbGxhcHNlZCA9IHRoaXMuY29sbGFwc2VkR3JvdXBzLmhhcyhnS2V5KTtcbiAgICAgICAgY29uc3Qgc2VjdGlvbiA9IHRoaXMuZWwoJ3NlY3Rpb24nLCAnc2VsZWN0LWl0ZW0tc2VjdGlvbicpO1xuICAgICAgICAvLyBoZWFkZXJcbiAgICAgICAgY29uc3QgaGVhZGVyID0gdGhpcy5lbCgnZGl2JywgJ3NlbGVjdC1pdGVtLWhlYWRlcicpO1xuICAgICAgICAvLyBjaGVja2JveFxuICAgICAgICBjb25zdCBjaGVja2JveFdyYXAgPSB0aGlzLmVsKCdkaXYnLCAnc3Bzay1jaGVja3dyYXAnKTtcbiAgICAgICAgY29uc3QgY2hlY2tib3ggPSB0aGlzLmVsKCdpbnB1dCcsICdzcHNrLWNoZWNrYm94IHNwc2stY2hlY2tib3gtLW5vcm1hbCcpO1xuICAgICAgICBjaGVja2JveC50eXBlID0gJ2NoZWNrYm94JztcbiAgICAgICAgY2hlY2tib3gubmFtZSA9ICdpdGVtLXNlbGVjdCc7XG4gICAgICAgIGNoZWNrYm94LnZhbHVlID0gZ0tleSA9PT0gVU5HUk9VUEVEID8gaTE4bi5nZXQoJ2dyb3VwX3VuZ3JvdXBlZCcpIDogZ0tleTtcbiAgICAgICAgY2hlY2tib3guY2hlY2tlZCA9IGdJdGVtcy5ldmVyeSgoaXQpID0+IHNlbGVjdEl0ZW1zLmluY2x1ZGVzKGl0LmlkKSk7XG4gICAgICAgIGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzZWxlY3RlZCA9IGUudGFyZ2V0LmNoZWNrZWQ7XG4gICAgICAgICAgICB0aGlzLmVtaXQoVUlFdmVudFR5cGUuSVRFTV9TRUxFQ1RJT05fQ0hBTkdFRCwge1xuICAgICAgICAgICAgICAgIGdyb3VwOiBnS2V5ID09PSBVTkdST1VQRUQgPyBVTkdST1VQRURfVkFMVUUgOiBnS2V5LFxuICAgICAgICAgICAgICAgIGlzQ2hlY2s6IHNlbGVjdGVkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBjaGVja2JveFdyYXAuYXBwZW5kKGNoZWNrYm94KTtcbiAgICAgICAgY29uc3QgdGl0bGUgPSB0aGlzLmVsKCdzcGFuJywgJ3NlbGVjdC1pdGVtLWdoLXRpdGxlJywgZ0tleSA9PT0gVU5HUk9VUEVEID8gaTE4bi5nZXQoJ2dyb3VwX3VuZ3JvdXBlZCcpIDogZ0tleSk7XG4gICAgICAgIGNvbnN0IGxlZnQgPSB0aGlzLmVsKCdkaXYnLCAnc2VsZWN0LWl0ZW0tZ2gtbGVmdCcpO1xuICAgICAgICBsZWZ0LmFwcGVuZChjaGVja2JveFdyYXAsIHRpdGxlKTtcbiAgICAgICAgY29uc3QgY291bnQgPSB0aGlzLmVsKCdzcGFuJywgJ3NlbGVjdC1pdGVtLWdoLWNvdW50JywgU3RyaW5nKGdJdGVtcy5sZW5ndGgpKTtcbiAgICAgICAgY29uc3QgdG9nZ2xlQnRuID0gdGhpcy5lbCgnYnV0dG9uJywgJ3NlbGVjdC1pdGVtLWdoLXRvZ2dsZScpO1xuICAgICAgICB0b2dnbGVCdG4udHlwZSA9ICdidXR0b24nO1xuICAgICAgICB0b2dnbGVCdG4uc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgU3RyaW5nKCFpc0NvbGxhcHNlZCkpO1xuICAgICAgICBjb25zdCB7IGQsIHZpZXdCb3ggfSA9IGlzQ29sbGFwc2VkID8gZ2V0SWNvbignY2FyZXRSaWdodCcpIDogZ2V0SWNvbignY2FyZXREb3duJyk7XG4gICAgICAgIGNvbnN0IHRvZ2dsZUljb24gPSB0aGlzLmNyZWF0ZVN2Z0ljb24oZCwgeyBjbGFzc05hbWU6ICdpY29uLXNtJywgdmlld0JveCB9KTtcbiAgICAgICAgY29uc3QgdG9nZ2xlUGF0aCA9IHRvZ2dsZUljb24ucXVlcnlTZWxlY3RvcigncGF0aCcpO1xuICAgICAgICB0b2dnbGVCdG4uYXBwZW5kKHRvZ2dsZUljb24pO1xuICAgICAgICBoZWFkZXIuYXBwZW5kKGxlZnQsIGNvdW50LCB0b2dnbGVCdG4pO1xuICAgICAgICAvLyB1bFxuICAgICAgICBjb25zdCB1bCA9IHRoaXMuZWwoJ3VsJywgJ3NlbGVjdC1pdGVtLWxpc3QnKTtcbiAgICAgICAgaWYgKGlzQ29sbGFwc2VkKVxuICAgICAgICAgICAgdWwuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgIHRoaXMuYXR0YWNoVWxEbkRIYW5kbGVycyh1bCk7XG4gICAgICAgIGZvciAoY29uc3QgaXQgb2YgZ0l0ZW1zLnNvcnQoYnlMYWJlbFRoZW5JZCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdENoZWNrZWQgPSBzZWxlY3RJdGVtcy5pbmNsdWRlcyhpdC5pZCk7XG4gICAgICAgICAgICB1bC5hcHBlbmRDaGlsZCh0aGlzLnJlbmRlckl0ZW0oaXQsIHNlbGVjdENoZWNrZWQsIG1pc3NpbmdJZHMpKTtcbiAgICAgICAgfVxuICAgICAgICB0b2dnbGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50bHlDb2xsYXBzZWQgPSB0aGlzLmNvbGxhcHNlZEdyb3Vwcy5oYXMoZ0tleSk7XG4gICAgICAgICAgICBpZiAoY3VycmVudGx5Q29sbGFwc2VkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb2xsYXBzZWRHcm91cHMuZGVsZXRlKGdLZXkpO1xuICAgICAgICAgICAgICAgIHVsLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgICAgICAgICAgICAgIHRvZ2dsZVBhdGguc2V0QXR0cmlidXRlKCdkJywgZ2V0SWNvbignY2FyZXREb3duJykuZCk7XG4gICAgICAgICAgICAgICAgdG9nZ2xlQnRuLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsICd0cnVlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbGxhcHNlZEdyb3Vwcy5hZGQoZ0tleSk7XG4gICAgICAgICAgICAgICAgdWwuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgICAgICAgICAgdG9nZ2xlUGF0aC5zZXRBdHRyaWJ1dGUoJ2QnLCBnZXRJY29uKCdjYXJldFJpZ2h0JykuZCk7XG4gICAgICAgICAgICAgICAgdG9nZ2xlQnRuLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsICdmYWxzZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgc2VjdGlvbi5hcHBlbmQoaGVhZGVyLCB1bCk7XG4gICAgICAgIHJldHVybiBzZWN0aW9uO1xuICAgIH1cbiAgICByZW5kZXJJdGVtKGl0LCBzZWxlY3RDaGVja2VkLCBtaXNzaW5nSWRzKSB7XG4gICAgICAgIGNvbnN0IGlzTWlzc2luZyA9IG1pc3NpbmdJZHMuaW5jbHVkZXMoaXQuaWQpO1xuICAgICAgICBjb25zdCBsaUJhc2UgPSAnc2VsZWN0LWl0ZW0nO1xuICAgICAgICBjb25zdCBsaSA9IHRoaXMuZWwoJ2xpJywgaXNNaXNzaW5nID8gYGdyb3VwICR7bGlCYXNlfSBzZWxlY3QtaXRlbS0td2FybmAgOiBsaUJhc2UpO1xuICAgICAgICBsaS5kYXRhc2V0LmlkID0gU3RyaW5nKGl0LmlkKTtcbiAgICAgICAgbGkuZHJhZ2dhYmxlID0gdHJ1ZTtcbiAgICAgICAgLy8gT25seSBzb3J0aW5nIHdpdGhpbiB0aGUgc2FtZSBVTCBpcyBhbGxvd2VkXG4gICAgICAgIGxpLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdzdGFydCcsIChlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRyYWdFbCA9IGxpO1xuICAgICAgICAgICAgdGhpcy5kcmFnU3RhcnRQYXJlbnQgPSBsaS5wYXJlbnRFbGVtZW50O1xuICAgICAgICAgICAgdGhpcy5kcmFnU3RhcnRJbmRleCA9IEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwobGkucGFyZW50RWxlbWVudD8uY2hpbGRyZW4gPz8gW10sIGxpKTtcbiAgICAgICAgICAgIGlmIChlLmRhdGFUcmFuc2ZlcilcbiAgICAgICAgICAgICAgICBlLmRhdGFUcmFuc2Zlci5lZmZlY3RBbGxvd2VkID0gJ21vdmUnO1xuICAgICAgICAgICAgbGkuY2xhc3NMaXN0LmFkZCgnb3BhY2l0eS02MCcpO1xuICAgICAgICB9KTtcbiAgICAgICAgbGkuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2VuZCcsICgpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5kcmFnRWwpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgY29uc3QgcGFyZW50ID0gdGhpcy5kcmFnRWwucGFyZW50RWxlbWVudDtcbiAgICAgICAgICAgIGNvbnN0IGVuZEluZGV4ID0gcGFyZW50ID8gQXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbChwYXJlbnQuY2hpbGRyZW4sIHRoaXMuZHJhZ0VsKSA6IC0xO1xuICAgICAgICAgICAgdGhpcy5kcmFnRWwuY2xhc3NMaXN0LnJlbW92ZSgnb3BhY2l0eS02MCcpO1xuICAgICAgICAgICAgY29uc3QgZnJvbUlkID0gdGhpcy5kcmFnRWwuZGF0YXNldC5pZCA/PyAnJztcbiAgICAgICAgICAgIHRoaXMuZHJhZ0VsID0gbnVsbDtcbiAgICAgICAgICAgIGlmIChmcm9tSWQgJiYgdGhpcy5kcmFnU3RhcnRJbmRleCA+PSAwICYmIGVuZEluZGV4ID49IDAgJiYgZW5kSW5kZXggIT09IHRoaXMuZHJhZ1N0YXJ0SW5kZXgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoVUlFdmVudFR5cGUuUkVPUkRFUl9JVEVNUywge1xuICAgICAgICAgICAgICAgICAgICBmcm9tSWQ6IE51bWJlcihmcm9tSWQpLFxuICAgICAgICAgICAgICAgICAgICBmcm9tSW5kZXg6IHRoaXMuZHJhZ1N0YXJ0SW5kZXgsXG4gICAgICAgICAgICAgICAgICAgIHRvSW5kZXg6IGVuZEluZGV4LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5kcmFnU3RhcnRJbmRleCA9IC0xO1xuICAgICAgICAgICAgdGhpcy5kcmFnU3RhcnRQYXJlbnQgPSBudWxsO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gY2hlY2tib3hcbiAgICAgICAgY29uc3QgY2hlY2tib3hXcmFwID0gdGhpcy5lbCgnZGl2JywgJ3Nwc2stY2hlY2t3cmFwJyk7XG4gICAgICAgIGNvbnN0IGNoZWNrYm94U3R5bGUgPSBpc01pc3NpbmdcbiAgICAgICAgICAgID8gJ3Nwc2stY2hlY2tib3ggc3Bzay1jaGVja2JveC0td2FybidcbiAgICAgICAgICAgIDogJ3Nwc2stY2hlY2tib3ggc3Bzay1jaGVja2JveC0tbm9ybWFsJztcbiAgICAgICAgY29uc3QgY2hlY2tib3ggPSB0aGlzLmVsKCdpbnB1dCcsIGNoZWNrYm94U3R5bGUpO1xuICAgICAgICBjaGVja2JveC50eXBlID0gJ2NoZWNrYm94JztcbiAgICAgICAgY2hlY2tib3gubmFtZSA9ICdpdGVtLXNlbGVjdCc7XG4gICAgICAgIGNoZWNrYm94LnZhbHVlID0gU3RyaW5nKGl0LmlkKTtcbiAgICAgICAgY2hlY2tib3guY2hlY2tlZCA9IHNlbGVjdENoZWNrZWQ7XG4gICAgICAgIGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzZWxlY3RlZCA9IGUudGFyZ2V0LmNoZWNrZWQ7XG4gICAgICAgICAgICB0aGlzLmVtaXQoVUlFdmVudFR5cGUuSVRFTV9TRUxFQ1RJT05fQ0hBTkdFRCwgeyBpZDogaXQuaWQsIGlzQ2hlY2s6IHNlbGVjdGVkIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgY2hlY2tib3hXcmFwLmFwcGVuZChjaGVja2JveCk7XG4gICAgICAgIC8vIGJhZGdlXG4gICAgICAgIGNvbnN0IGJhZGdlU3R5bGUgPSBpc01pc3NpbmcgPyAnc3Bzay1iYWRnZSBzcHNrLWJhZGdlLS13YXJuJyA6ICdzcHNrLWJhZGdlIHNwc2stYmFkZ2UtLW5vcm0nO1xuICAgICAgICBjb25zdCBiYWRnZSA9IHRoaXMuZWwoJ3NwYW4nLCBiYWRnZVN0eWxlLCBTdHJpbmcoaXQubGFiZWwpKTtcbiAgICAgICAgLy8gbWFpbiAobWlzc2luZ0ljb24sIGFuY2hvcilcbiAgICAgICAgY29uc3QgbWFpbiA9IHRoaXMuZWwoJ2RpdicsICdtaW4tdy0wIGZsZXgtMScpO1xuICAgICAgICBtYWluLmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJlbnRlcicsICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmRyYWdTdGFydFBhcmVudCB8fCBpc01pc3NpbmcpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy5jYW5jZWxIb3Zlck91dCgpO1xuICAgICAgICAgICAgdGhpcy5lbWl0KFVJRXZlbnRUeXBlLklURU1fSE9WRVJfSU4sIHsgaWQ6IGl0LmlkIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGlzTWlzc2luZykge1xuICAgICAgICAgICAgY29uc3QgY2hpcCA9IHRoaXMuZWwoJ3NwYW4nLCAnY2hpcC13YXJuJyk7XG4gICAgICAgICAgICBjb25zdCB7IGQsIHZpZXdCb3ggfSA9IGdldEljb24oJ3dhcm4nKTtcbiAgICAgICAgICAgIGNvbnN0IGljb24gPSB0aGlzLmNyZWF0ZVN2Z0ljb24oZCwge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2gtMy41IHctMy41JyxcbiAgICAgICAgICAgICAgICB2aWV3Qm94LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBsYWJlbCA9IHRoaXMuZWwoJ3NwYW4nLCB1bmRlZmluZWQsIGkxOG4uZ2V0KCdtaXNzaW5nX2l0ZW0nKSk7XG4gICAgICAgICAgICBjaGlwLmFwcGVuZChpY29uLCBsYWJlbCk7XG4gICAgICAgICAgICBtYWluLmFwcGVuZChjaGlwKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhbmNob3IgPSB0aGlzLmVsKCdkaXYnLCAnYW5jaG9yJywgaXQuYW5jaG9yLnZhbHVlKTtcbiAgICAgICAgbWFpbi5hcHBlbmQoYW5jaG9yKTtcbiAgICAgICAgY29uc3QgY29tbWVudEJ0biA9IHRoaXMuZ2VuZXJhdGVDb21tZW50QnRuKGl0KTtcbiAgICAgICAgbGkuYXBwZW5kKGNoZWNrYm94V3JhcCwgYmFkZ2UsIG1haW4sIGNvbW1lbnRCdG4pO1xuICAgICAgICByZXR1cm4gbGk7XG4gICAgfVxuICAgIGdlbmVyYXRlQ29tbWVudEJ0bihpdCkge1xuICAgICAgICBjb25zdCBidG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgYnRuLmNsYXNzTmFtZSA9ICdidG4taWNvbic7XG4gICAgICAgIGNvbnN0IHsgZCwgdmlld0JveCB9ID0gZ2V0SWNvbignY29tbWVudCcpO1xuICAgICAgICBjb25zdCBpY29uID0gdGhpcy5jcmVhdGVTdmdJY29uKGQsIHtcbiAgICAgICAgICAgIGNsYXNzTmFtZTogJ2gtMy41IHctMy41JyxcbiAgICAgICAgICAgIHZpZXdCb3gsXG4gICAgICAgIH0pO1xuICAgICAgICBidG4uYXBwZW5kQ2hpbGQoaWNvbik7XG4gICAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZWxzLml0ZW1Db21tZW50TW9kYWwuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICAgICAgICB0aGlzLmVscy5pdGVtQ29tbWVudElucHV0LnZhbHVlID0gaXQuY29tbWVudCA/PyAnJztcbiAgICAgICAgICAgIHRoaXMuZWxzLml0ZW1Db21tZW50SWRJbnB1dC52YWx1ZSA9IFN0cmluZyhpdC5pZCk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gYnRuO1xuICAgIH1cbiAgICBzY2hlZHVsZUhvdmVyT3V0KCkge1xuICAgICAgICBpZiAodGhpcy5ob3Zlck91dFRpbWVyKVxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuaG92ZXJPdXRUaW1lcik7XG4gICAgICAgIGlmICh0aGlzLmRyYWdTdGFydFBhcmVudClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy5ob3Zlck91dFRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmhvdmVyT3V0VGltZXIgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5lbWl0KFVJRXZlbnRUeXBlLklURU1fSE9WRVJfT1VULCB1bmRlZmluZWQpO1xuICAgICAgICB9LCB0aGlzLkhPVkVSX09VVF9ERUxBWSk7XG4gICAgfVxuICAgIGNhbmNlbEhvdmVyT3V0KCkge1xuICAgICAgICBpZiAoIXRoaXMuaG92ZXJPdXRUaW1lcilcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuaG92ZXJPdXRUaW1lcik7XG4gICAgICAgIHRoaXMuaG92ZXJPdXRUaW1lciA9IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVMIEQmRCBIYW5kbGVyXG4gICAgICogT25seSBzb3J0aW5nIHdpdGhpbiB0aGUgc2FtZSBVTCBpcyBhbGxvd2VkXG4gICAgICogQHBhcmFtIHVsXG4gICAgICovXG4gICAgYXR0YWNoVWxEbkRIYW5kbGVycyh1bCkge1xuICAgICAgICB1bC5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIChlKSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZHJhZ0VsKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGlmICh0aGlzLmRyYWdTdGFydFBhcmVudCAmJiB1bCAhPT0gdGhpcy5kcmFnU3RhcnRQYXJlbnQpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0TGkgPSBlLnRhcmdldD8uY2xvc2VzdCgnbGknKTtcbiAgICAgICAgICAgIGlmICh0YXJnZXRMaSAmJiB0YXJnZXRMaSAhPT0gdGhpcy5kcmFnRWwpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWN0ID0gdGFyZ2V0TGkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNBZnRlciA9IGUuY2xpZW50WSAtIHJlY3QudG9wID4gcmVjdC5oZWlnaHQgLyAyO1xuICAgICAgICAgICAgICAgIHVsLmluc2VydEJlZm9yZSh0aGlzLmRyYWdFbCwgaXNBZnRlciA/IHRhcmdldExpLm5leHRTaWJsaW5nIDogdGFyZ2V0TGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIXRhcmdldExpKSB7XG4gICAgICAgICAgICAgICAgdWwuYXBwZW5kQ2hpbGQodGhpcy5kcmFnRWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdWwuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIChlKSA9PiBlLnByZXZlbnREZWZhdWx0KCkpO1xuICAgIH1cbiAgICBnZXRFeGlzdGluZ0dyb3VwcyhpdGVtcykge1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbShuZXcgU2V0KGl0ZW1zLm1hcCgoaSkgPT4gKGkuZ3JvdXAgPz8gJycpLnRyaW0oKSkuZmlsdGVyKChnKSA9PiBnLmxlbmd0aCA+IDApKSkuc29ydCgoYSwgYikgPT4gYS5sb2NhbGVDb21wYXJlKGIpKTtcbiAgICB9XG4gICAgZ3JvdXBCeUdyb3VwKGl0ZW1zKSB7XG4gICAgICAgIGNvbnN0IG0gPSBuZXcgTWFwKCk7XG4gICAgICAgIGZvciAoY29uc3QgaXQgb2YgaXRlbXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGtleSA9IChpdC5ncm91cCA/PyBVTkdST1VQRURfVkFMVUUpLnRyaW0oKSB8fCBVTkdST1VQRUQ7XG4gICAgICAgICAgICBpZiAoIW0uaGFzKGtleSkpXG4gICAgICAgICAgICAgICAgbS5zZXQoa2V5LCBbXSk7XG4gICAgICAgICAgICBtLmdldChrZXkpLnB1c2goaXQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtO1xuICAgIH1cbiAgICBnZXRTZWxlY3RlZENhcHR1cmVGb3JtYXQoKSB7XG4gICAgICAgIGNvbnN0IHZhbCA9IHRoaXMuZG9jLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9XCJjYXB0dXJlLWZvcm1hdFwiXTpjaGVja2VkJyk/LnZhbHVlO1xuICAgICAgICByZXR1cm4gdmFsID09PSAnanBlZycgPyAnanBlZycgOiAncG5nJztcbiAgICB9XG4gICAgZ2V0U2VsZWN0ZWRDYXB0dXJlQXJlYSgpIHtcbiAgICAgICAgY29uc3QgdmFsID0gdGhpcy5kb2MucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT1cImNhcHR1cmUtYXJlYVwiXTpjaGVja2VkJyk/LnZhbHVlO1xuICAgICAgICByZXR1cm4gdmFsID09PSAndmlld3BvcnQnID8gJ3ZpZXdwb3J0JyA6ICdmdWxsJztcbiAgICB9XG4gICAgdXBkYXRlUXVhbGl0eVZpc2liaWxpdHkoZm9ybWF0KSB7XG4gICAgICAgIGNvbnN0IGYgPSBmb3JtYXQgPz8gdGhpcy5nZXRTZWxlY3RlZENhcHR1cmVGb3JtYXQoKTtcbiAgICAgICAgY29uc3QgaXNKcGVnID0gZiA9PT0gJ2pwZWcnO1xuICAgICAgICB0aGlzLmVscy5qcGVnT25seUVscy5mb3JFYWNoKChlbCkgPT4gZWwuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZGVuJywgIWlzSnBlZykpO1xuICAgICAgICB0aGlzLmVscy5qcGVnUXVhbGl0eVJhbmdlLmRpc2FibGVkID0gIWlzSnBlZztcbiAgICAgICAgdGhpcy5lbHMuanBlZ1F1YWxpdHlOdW1iZXIuZGlzYWJsZWQgPSAhaXNKcGVnO1xuICAgIH1cbiAgICBzZWxlY3RSYWRpb0J5VmFsdWUocmFkaW9zLCB2YWx1ZSkge1xuICAgICAgICByYWRpb3MuZm9yRWFjaCgocikgPT4gKHIuY2hlY2tlZCA9IHIudmFsdWUgPT09IHZhbHVlKSk7XG4gICAgfVxuICAgIGJpbmRTeW5jKHJhbmdlRWwsIG51bWJlckVsLCBvblZhbHVlKSB7XG4gICAgICAgIGNvbnN0IHJlYWROdW0gPSAocywgZmFsbGJhY2spID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHYgPSBzICE9IG51bGwgJiYgcyAhPT0gJycgPyBOdW1iZXIocykgOiBOYU47XG4gICAgICAgICAgICByZXR1cm4gTnVtYmVyLmlzRmluaXRlKHYpID8gdiA6IGZhbGxiYWNrO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBjbGFtcCA9ICh2LCBtaW4sIG1heCkgPT4gTWF0aC5taW4oTWF0aC5tYXgodiwgbWluKSwgbWF4KTtcbiAgICAgICAgY29uc3Qgc3luYyA9IChyYXdTdHIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG1pbiA9IHJlYWROdW0obnVtYmVyRWwubWluIHx8IHJhbmdlRWwubWluLCBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFkpO1xuICAgICAgICAgICAgY29uc3QgbWF4ID0gcmVhZE51bShudW1iZXJFbC5tYXggfHwgcmFuZ2VFbC5tYXgsIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSk7XG4gICAgICAgICAgICBjb25zdCBzdGVwID0gcmVhZE51bShudW1iZXJFbC5zdGVwIHx8IHJhbmdlRWwuc3RlcCwgMSk7XG4gICAgICAgICAgICBjb25zdCByYXcgPSBOdW1iZXIocmF3U3RyKTtcbiAgICAgICAgICAgIGNvbnN0IGNsYW1wZWQgPSBjbGFtcChOdW1iZXIuaXNGaW5pdGUocmF3KSA/IHJhdyA6IDAsIG1pbiwgbWF4KTtcbiAgICAgICAgICAgIGNvbnN0IHJvdW5kZWQgPSBNYXRoLnJvdW5kKGNsYW1wZWQgLyBzdGVwKSAqIHN0ZXA7XG4gICAgICAgICAgICBjb25zdCBmaXhlZCA9IE51bWJlcihyb3VuZGVkLnRvRml4ZWQoNikpO1xuICAgICAgICAgICAgbnVtYmVyRWwudmFsdWUgPSBTdHJpbmcoZml4ZWQpO1xuICAgICAgICAgICAgcmFuZ2VFbC52YWx1ZSA9IFN0cmluZyhmaXhlZCk7XG4gICAgICAgICAgICBvblZhbHVlPy4oZml4ZWQpO1xuICAgICAgICB9O1xuICAgICAgICByYW5nZUVsLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4gc3luYyhyYW5nZUVsLnZhbHVlKSk7XG4gICAgICAgIG51bWJlckVsLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4gc3luYyhudW1iZXJFbC52YWx1ZSkpO1xuICAgIH1cbiAgICBkaXNhYmxlRm9ybUNvbnRyb2xzKGlzRGlzYWJsZWQpIHtcbiAgICAgICAgdGhpcy5kb2MucXVlcnlTZWxlY3RvckFsbCgnYnV0dG9uLCBzZWxlY3QsIGlucHV0LCB0ZXh0YXJlYScpLmZvckVhY2goKGVsKSA9PiB7XG4gICAgICAgICAgICBpZiAoZWwuaGFzQXR0cmlidXRlKCdkYXRhLWlnbm9yZS1kaXNhYmxlJykpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKCdkaXNhYmxlZCcgaW4gZWwpIHtcbiAgICAgICAgICAgICAgICBlbC5kaXNhYmxlZCA9IGlzRGlzYWJsZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhcHBseUNhcHR1cmVPcHRpb25zVG9nZ2xlVUkoZXhwYW5kZWQpIHtcbiAgICAgICAgdGhpcy5lbHMuY2FwdHVyZU9wdGlvbnNUb2dnbGUuc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgU3RyaW5nKGV4cGFuZGVkKSk7XG4gICAgICAgIGNvbnN0IHsgZCwgdmlld0JveCB9ID0gZXhwYW5kZWQgPyBnZXRJY29uKCdjYXJldERvd25GaWxsJykgOiBnZXRJY29uKCdjYXJldFJpZ2h0RmlsbCcpO1xuICAgICAgICB0aGlzLmVscy5jYXB0dXJlT3B0aW9uc1RvZ2dsZS5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgdGhpcy5lbHMuY2FwdHVyZU9wdGlvbnNUb2dnbGUuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVTdmdJY29uKGQsIHsgdmlld0JveCwgY2xhc3NOYW1lOiAnaC00IHctNCcgfSkpO1xuICAgICAgICB0aGlzLmVscy5jYXB0dXJlT3B0aW9uc1BhbmVsLmNsYXNzTGlzdC50b2dnbGUoJ2hpZGRlbicsICFleHBhbmRlZCk7XG4gICAgfVxuICAgIGdldEJhZGdlQ29sb3JTdHlsZU5hbWUoY29sb3IpIHtcbiAgICAgICAgY29uc3QgY29sb3JOYW1lID0gY29sb3IgPT09ICdHcmF5JyA/ICdzbGF0ZScgOiBjb2xvcjtcbiAgICAgICAgcmV0dXJuIGBiZy0ke2NvbG9yTmFtZS50b0xvd2VyQ2FzZSgpfS01MDBgO1xuICAgIH1cbiAgICBhcHBseUJhZGdlQ29sb3JVSShjb2xvcikge1xuICAgICAgICB0aGlzLmVscy5iYWRnZUNvbG9yQnV0dG9ucy5mb3JFYWNoKChidXR0b24pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkID0gYnV0dG9uLmRhdGFzZXQuY29sb3JOYW1lID09PSBjb2xvcjtcbiAgICAgICAgICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnLCBzZWxlY3RlZCA/ICd0cnVlJyA6ICdmYWxzZScpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5lbHMuYmFkZ2VDb2xvckxhYmVsLnRleHRDb250ZW50ID0gY29sb3I7XG4gICAgICAgIHRoaXMuZWxzLmJhZGdlQ29sb3JEb3QuY2xhc3NOYW1lID0gJ2lubGluZS1ibG9jayB3LTQgaC00IHJvdW5kZWQtZnVsbCc7XG4gICAgICAgIHRoaXMuZWxzLmJhZGdlQ29sb3JEb3QuY2xhc3NMaXN0LmFkZCh0aGlzLmdldEJhZGdlQ29sb3JTdHlsZU5hbWUoY29sb3IpKTtcbiAgICB9XG4gICAgYXBwbHlCYWRnZVBvc2l0b25VSShwb3NpdGlvbikge1xuICAgICAgICB0aGlzLmVscy5iYWRnZVBvc2l0aW9uQnV0dG9ucy5mb3JFYWNoKChidXR0b24pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkID0gYnV0dG9uLmRhdGFzZXQucG9zaXRpb25OYW1lID09PSBwb3NpdGlvbjtcbiAgICAgICAgICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2RhdGEtc2VsZWN0ZWQnLCBzZWxlY3RlZCA/ICd0cnVlJyA6ICdmYWxzZScpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5lbHMuYmFkZ2VQb3NpdGlvbkxhYmVsLnRleHRDb250ZW50ID0gcG9zaXRpb24ucmVwbGFjZUFsbCgnLScsICcgJyk7XG4gICAgfVxuICAgIGFwcGx5QmFkZ2VHcm91cFNlbGVjdFVJKGV4aXN0aW5nR3JvdXBzLCBkZWZhdXRHcm91cCkge1xuICAgICAgICB0aGlzLmVscy5iYWRnZUdyb3VwU2VsZWN0LmlubmVySFRNTCA9ICcnO1xuICAgICAgICB0aGlzLmVscy5iYWRnZUdyb3VwU2VsZWN0LmFwcGVuZCh0aGlzLm1ha2VPcHQoVU5HUk9VUEVELCBpMThuLmdldCgnZ3JvdXBfdW5ncm91cGVkJyksIGRlZmF1dEdyb3VwID09PSBVTkdST1VQRUQpKTtcbiAgICAgICAgZm9yIChjb25zdCBncm91cCBvZiBleGlzdGluZ0dyb3Vwcykge1xuICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplID0gKGcpID0+IChnID8/ICcnKS50cmltKCk7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IG5vcm1hbGl6ZShncm91cCk7XG4gICAgICAgICAgICB0aGlzLmVscy5iYWRnZUdyb3VwU2VsZWN0LmFwcGVuZCh0aGlzLm1ha2VPcHQodmFsdWUsIGdyb3VwLCBkZWZhdXRHcm91cCA9PT0gZ3JvdXApKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjcmVhdGVPcHQgPSB0aGlzLm1ha2VPcHQodGhpcy5ORVdfR1JPVVAsIGkxOG4uZ2V0KCdjb21tb25fY3JlYXRlJykpO1xuICAgICAgICB0aGlzLmVscy5iYWRnZUdyb3VwU2VsZWN0LmFwcGVuZChjcmVhdGVPcHQpO1xuICAgIH1cbiAgICBhcHBseVRoZW1lKHRoZW1lKSB7XG4gICAgICAgIGNvbnN0IHJvb3QgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IGlzRGFyayA9IHRoZW1lID09PSAnZGV2aWNlJ1xuICAgICAgICAgICAgPyB3aW5kb3cubWF0Y2hNZWRpYSgnKHByZWZlcnMtY29sb3Itc2NoZW1lOiBkYXJrKScpLm1hdGNoZXNcbiAgICAgICAgICAgIDogdGhlbWUgPT09ICdkYXJrJztcbiAgICAgICAgaWYgKGlzRGFyaykge1xuICAgICAgICAgICAgcm9vdC5jbGFzc0xpc3QuYWRkKCdkYXJrJyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByb290LmNsYXNzTGlzdC5yZW1vdmUoJ2RhcmsnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVscy50aGVtZUxpZ2h0QnRuLnNldEF0dHJpYnV0ZSgnZGF0YS1hY3RpdmUnLCBTdHJpbmcodGhlbWUgPT09ICdsaWdodCcpKTtcbiAgICAgICAgdGhpcy5lbHMudGhlbWVEYXJrQnRuLnNldEF0dHJpYnV0ZSgnZGF0YS1hY3RpdmUnLCBTdHJpbmcodGhlbWUgPT09ICdkYXJrJykpO1xuICAgICAgICB0aGlzLmVscy50aGVtZURldmljZUJ0bi5zZXRBdHRyaWJ1dGUoJ2RhdGEtYWN0aXZlJywgU3RyaW5nKHRoZW1lID09PSAnZGV2aWNlJykpO1xuICAgIH1cbiAgICBhcHBseVN0b3JlKHBhZ2VLZXlzKSB7XG4gICAgICAgIHRoaXMuZWxzLnN0b3JlQ291bnQudGV4dENvbnRlbnQgPSBTdHJpbmcocGFnZUtleXMubGVuZ3RoKTtcbiAgICAgICAgdGhpcy5lbHMuc3RvcmVMaXN0LmlubmVySFRNTCA9ICcnO1xuICAgICAgICBpZiAocGFnZUtleXMubGVuZ3RoIDw9IDApIHtcbiAgICAgICAgICAgIHRoaXMuZWxzLnN0b3JlTGlzdC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgICAgIHRoaXMuZWxzLnN0b3JlRW1wdHkuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBwYWdlS2V5IG9mIHBhZ2VLZXlzKSB7XG4gICAgICAgICAgICBjb25zdCBsaUVsZW0gPSB0aGlzLmVsKCdsaScsICdzZWxlY3QtaXRlbScpO1xuICAgICAgICAgICAgY29uc3QgYVdyYXBFbGVtID0gdGhpcy5lbCgnZGl2JywgJ21pbi13LTAgZmxleC0xJyk7XG4gICAgICAgICAgICBjb25zdCBhRWxlbSA9IHRoaXMuZWwoJ2EnLCAnYW5jaG9yIHdoaXRlc3BhY2Utbm9ybWFsIGJyZWFrLXdvcmRzJywgcGFnZUtleSk7XG4gICAgICAgICAgICBhRWxlbS5ocmVmID0gcGFnZUtleTtcbiAgICAgICAgICAgIGFFbGVtLnRhcmdldCA9ICdfYmxhbmsnO1xuICAgICAgICAgICAgYVdyYXBFbGVtLmFwcGVuZENoaWxkKGFFbGVtKTtcbiAgICAgICAgICAgIGNvbnN0IGJ0bkVsZW0gPSB0aGlzLmVsKCdidXR0b24nLCAnYnRuLWljb24gYnRuLWljb24tLWRhbmdlcicpO1xuICAgICAgICAgICAgYnRuRWxlbS5zZXRBdHRyaWJ1dGUoJ2RhdGEtaWdub3JlLWRpc2FibGUnLCAndHJ1ZScpO1xuICAgICAgICAgICAgY29uc3QgeyBkLCB2aWV3Qm94IH0gPSBnZXRJY29uKCdyZW1vdmUnKTtcbiAgICAgICAgICAgIGNvbnN0IHJlbW92ZUljb24gPSB0aGlzLmNyZWF0ZVN2Z0ljb24oZCwgeyBjbGFzc05hbWU6ICdpY29uLXNtJywgdmlld0JveCB9KTtcbiAgICAgICAgICAgIGJ0bkVsZW0uYXBwZW5kQ2hpbGQocmVtb3ZlSWNvbik7XG4gICAgICAgICAgICBsaUVsZW0uYXBwZW5kQ2hpbGQoYVdyYXBFbGVtKTtcbiAgICAgICAgICAgIGxpRWxlbS5hcHBlbmRDaGlsZChidG5FbGVtKTtcbiAgICAgICAgICAgIHRoaXMuZWxzLnN0b3JlTGlzdC5hcHBlbmRDaGlsZChsaUVsZW0pO1xuICAgICAgICAgICAgYnRuRWxlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoVUlFdmVudFR5cGUuUkVNT1ZFX1BBR0VfQ0xJQ0ssIHsgcGFnZUtleSB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZWxzLnN0b3JlTGlzdC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICAgICAgdGhpcy5lbHMuc3RvcmVFbXB0eS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICB9XG4gICAgJChzZWxlY3Rvcikge1xuICAgICAgICBjb25zdCBlbCA9IHRoaXMuZG9jLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICAgICAgICBpZiAoIWVsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBbUGFuZWxWaWV3XSBNaXNzaW5nIGVsZW1lbnQ6ICR7c2VsZWN0b3J9YCk7XG4gICAgICAgIHJldHVybiBlbDtcbiAgICB9XG4gICAgJGFsbChzZWxlY3Rvcikge1xuICAgICAgICByZXR1cm4gdGhpcy5kb2MucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XG4gICAgfVxuICAgIGVsKHRhZywgY2xhc3NOYW1lLCB0ZXh0KSB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSB0aGlzLmRvYy5jcmVhdGVFbGVtZW50KHRhZyk7XG4gICAgICAgIGlmIChjbGFzc05hbWUpXG4gICAgICAgICAgICBub2RlLmNsYXNzTmFtZSA9IGNsYXNzTmFtZTtcbiAgICAgICAgaWYgKHRleHQgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIG5vZGUudGV4dENvbnRlbnQgPSB0ZXh0O1xuICAgICAgICByZXR1cm4gbm9kZTtcbiAgICB9XG4gICAgbWFrZU9wdCh2YWx1ZSwgbGFiZWwsIHNlbGVjdGVkID0gZmFsc2UpIHtcbiAgICAgICAgY29uc3QgbyA9IHRoaXMuZG9jLmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xuICAgICAgICBvLnZhbHVlID0gdmFsdWU7XG4gICAgICAgIG8udGV4dENvbnRlbnQgPSBsYWJlbDtcbiAgICAgICAgaWYgKHNlbGVjdGVkKVxuICAgICAgICAgICAgby5zZWxlY3RlZCA9IHRydWU7XG4gICAgICAgIHJldHVybiBvO1xuICAgIH1cbiAgICBjcmVhdGVTdmdJY29uKGQsIG9wdHMgPSB7fSkge1xuICAgICAgICBjb25zdCBTVkdfTlMgPSAnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnO1xuICAgICAgICBjb25zdCBzdmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoU1ZHX05TLCAnc3ZnJyk7XG4gICAgICAgIHN2Zy5zZXRBdHRyaWJ1dGUoJ3ZpZXdCb3gnLCBvcHRzLnZpZXdCb3ggPz8gJzAgMCAyMCAyMCcpO1xuICAgICAgICBzdmcuc2V0QXR0cmlidXRlKCdjbGFzcycsIG9wdHMuY2xhc3NOYW1lID8/ICdoLTMuNSB3LTMuNScpO1xuICAgICAgICBzdmcuc2V0QXR0cmlidXRlKCdmaWxsJywgJ2N1cnJlbnRDb2xvcicpO1xuICAgICAgICBzdmcuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICd0cnVlJyk7XG4gICAgICAgIGlmIChvcHRzLmF0dHJzKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhvcHRzLmF0dHJzKSlcbiAgICAgICAgICAgICAgICBzdmcuc2V0QXR0cmlidXRlKGssIHYpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhdGhFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhTVkdfTlMsICdwYXRoJyk7XG4gICAgICAgIHBhdGhFbC5zZXRBdHRyaWJ1dGUoJ2QnLCBkKTtcbiAgICAgICAgc3ZnLmFwcGVuZENoaWxkKHBhdGhFbCk7XG4gICAgICAgIHJldHVybiBzdmc7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgUGFuZWxDb250cm9sbGVyIH0gZnJvbSAnQHBhbmVsL2NvbnRyb2xsZXIvcGFuZWxfY29udHJvbGxlcic7XG5pbXBvcnQgeyBQYW5lbFZpZXcgfSBmcm9tICcuLi92aWV3L3BhbmVsX3ZpZXcnO1xuLyoqXG4gKiBPcmNoZXN0cmF0ZXMgVUkgaW5pdGlhbGl6YXRpb24gYW5kIGNvbm5lY3Rpb24gbGlmZWN5Y2xlLlxuICogLSBBcHBseSBpMThuXG4gKiAtIERldGVjdCBhbmQgY29ubmVjdCB0byB0aGUgYWN0aXZlIHRhYlxuICogLSBSZXN0b3JlIHN0YXRlIGFuZCBwZXJmb3JtIGluaXRpYWwgcmVuZGVyXG4gKiAtIEJpbmQgVUkgZXZlbnRzXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHN0YXJ0KCkge1xuICAgIGNvbnN0IHZpZXcgPSBuZXcgUGFuZWxWaWV3KGRvY3VtZW50KTtcbiAgICBjb25zdCBjb250cm9sbGVyID0gbmV3IFBhbmVsQ29udHJvbGxlcih2aWV3KTtcbiAgICBhd2FpdCBjb250cm9sbGVyLnN0YXJ0KCk7XG59XG4oZnVuY3Rpb24gaW5pdCgpIHtcbiAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2NvbXBsZXRlJyB8fCBkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnaW50ZXJhY3RpdmUnKSB7XG4gICAgICAgIHZvaWQgc3RhcnQoKS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdQYW5lbCBib290c3RyYXAgZmFpbGVkOicsIGVycik7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHZvaWQgc3RhcnQoKS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdQYW5lbCBib290c3RyYXAgZmFpbGVkOicsIGVycik7XG4gICAgICAgIH0pLCB7XG4gICAgICAgICAgICBvbmNlOiB0cnVlLFxuICAgICAgICB9KTtcbiAgICB9XG59KSgpO1xuIl0sIm5hbWVzIjpbImlzUmVzdHJpY3RlZCIsInJhdyIsInN0YXJ0c1dpdGgiLCJ1cmwiLCJVUkwiLCJTZXQiLCJoYXMiLCJwcm90b2NvbCIsImhvc3RuYW1lIiwiSVRFTV9DT0xPUlMiLCJJVEVNX1NIQVBFIiwiSVRFTV9QT1NJVElPTl9WQUxVRVMiLCJVTkdST1VQRUQiLCJVTkdST1VQRURfVkFMVUUiLCJpbml0aWFsTW9kZWwiLCJzdGF0dXMiLCJ0YWJJZCIsInBhZ2VLZXkiLCJwYWdlS2V5cyIsInRoZW1lIiwic2VsZWN0aW9uRW5hYmxlZCIsIml0ZW1zIiwiZGVmYXVsdFNpemUiLCJkZWZhdWx0Q29sb3IiLCJkZWZhdWx0U2hhcGUiLCJkZWZhdWx0UG9zaXRpb24iLCJkZWZhdWx0R3JvdXAiLCJjYXB0dXJlIiwiZm9ybWF0IiwiYXJlYSIsInF1YWxpdHkiLCJzY2FsZSIsInBhbmVsRXhwYW5kZWQiLCJzZWxlY3RJdGVtcyIsIm1pc3NpbmdJZHMiLCJzY3JlZW5TdGF0ZVRhYmxlIiwicm9vdEtleSIsImRlZmF1bHRPZiIsIktFWSIsImFzeW5jIiwicmVhZEFsbCIsImNocm9tZSIsInN0b3JhZ2UiLCJsb2NhbCIsImdldCIsIndyaXRlQWxsIiwibWFwIiwic2V0Iiwia2V5IiwiZm91bmQiLCJ1bmRlZmluZWQiLCJ2YWx1ZSIsInJlbW92ZSIsImNsZWFyIiwiY3JlYXRlTWFwVGFibGUiLCJuZXh0SWQiLCJ0aGVtZVRhYmxlIiwidmFsIiwiY3JlYXRlU2luZ2xldG9uIiwibm9ybWFsaXplR3JvdXBMYWJlbHNBbmRDb3VudFVuZ3JvdXBlZCIsImJ1Y2tldHMiLCJNYXAiLCJmb3JFYWNoIiwiaXRlbSIsImluZGV4IiwiZ3JvdXAiLCJ0cmltIiwicHVzaCIsIm91dCIsInNsaWNlIiwiYnVja2V0Iiwic29ydCIsImEiLCJiIiwibGFiZWwiLCJpZCIsImkiLCJkZXNpcmVkIiwic3VicyIsImkxOG4iLCJnZXRNZXNzYWdlIiwibG9jYWxpemUiLCJyb290IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZWwiLCJnZXRBdHRyaWJ1dGUiLCJ0ZXh0Q29udGVudCIsInNwZWMiLCJwYWlyIiwic3BsaXQiLCJhdHRyIiwicyIsInNldEF0dHJpYnV0ZSIsIlNUQVRVUyIsIlNUQVRVU19NU0dfS0VZIiwiUkVTVFJJQ1RFRCIsIkNPTk5FQ1RJTkciLCJDT05ORUNURUQiLCJESVNDT05ORUNURUQiLCJTVEFUVVNfTEFCRUxfU1RZTEUiLCJib2R5IiwiZG90IiwiQWN0aW9uVHlwZSIsIkVmZmVjdFR5cGUiLCJDSEFOTkVMIiwiUGFuZWxBcGkiLCJycGMiLCJjb25zdHJ1Y3RvciIsInRoaXMiLCJzZW5kIiwicmVxIiwiY3J5cHRvIiwicmFuZG9tVVVJRCIsImV4cGVjdFJlcGx5IiwicmVuZGVyIiwidHlwZSIsInBheWxvYWQiLCJ0b2dnbGVTZWxlY3QiLCJlbmFibGVkIiwiaG92ZXIiLCJtZWFzdXJlU2l6ZSIsInBpbmciLCJQb3J0UnBjIiwicG9ydCIsInBlbmRpbmciLCJhbGl2ZSIsIm9uTWVzc2FnZSIsImFkZExpc3RlbmVyIiwibXNnIiwiaXNSZXNwb25zZSIsImRlbGV0ZSIsIm9uRGlzY29ubmVjdCIsInJlYXNvbiIsInJ1bnRpbWUiLCJsYXN0RXJyb3IiLCJtZXNzYWdlIiwicmVzb2x2ZSIsIm9rIiwiZXJyb3IiLCJpc0FsaXZlIiwidGltZW91dE1zIiwiUHJvbWlzZSIsInRpbWVyIiwic2V0VGltZW91dCIsInJlcyIsImNsZWFyVGltZW91dCIsInBvc3RNZXNzYWdlIiwiT1dORUQiLCJ0YXJnZXQiLCJtZXRob2QiLCJwYXJhbXMiLCJyZWplY3QiLCJkZWJ1Z2dlciIsInNlbmRDb21tYW5kIiwicmVzdWx0IiwiZXJyIiwiRXJyb3IiLCJTdHJpbmciLCJvcHRzIiwidGFiIiwidGFicyIsImNvbnNvbGUiLCJ3YXJuIiwiZm10Iiwic2V0dGxlTXMiLCJkaWRBdHRhY2giLCJ1c2VkT3ZlcnJpZGUiLCJhdHRhY2giLCJhZGQiLCJpbmNsdWRlcyIsImF0dGFjaE93bmVkIiwiYnJpbmdUb0Zyb250IiwiZ2VvbSIsImNvbnRlbnRTaXplIiwieCIsInkiLCJ3aWR0aCIsImhlaWdodCIsInYiLCJjc3NWaXN1YWxWaWV3cG9ydCIsIk1hdGgiLCJtYXgiLCJmbG9vciIsInBhZ2VYIiwicGFnZVkiLCJjZWlsIiwiY2xpZW50V2lkdGgiLCJjbGllbnRIZWlnaHQiLCJnZXRWaWV3cG9ydENzc1JlY3QiLCJ1c2VPdmVycmlkZSIsImNsaXAiLCJjYXB0dXJlQmV5b25kVmlld3BvcnQiLCJzaG91bGRTY3JvbGxUb3AiLCJtZXRyaWNzIiwiZGV2aWNlU2NhbGVGYWN0b3IiLCJtb2JpbGUiLCJzY3JlZW5XaWR0aCIsInNjcmVlbkhlaWdodCIsInBvc2l0aW9uWCIsInBvc2l0aW9uWSIsInJlc29sdmVHZW9tZXRyeSIsImV4cHJlc3Npb24iLCJyIiwiY2FwUGFyYW1zIiwiZnJvbVN1cmZhY2UiLCJtaW4iLCJyb3VuZCIsImRhdGEiLCJmaWxlbmFtZSIsImJhc2UiLCJ0aXRsZSIsImhvc3QiLCJyZXBsYWNlIiwibGVuZ3RoIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwibWFrZUZpbGVuYW1lIiwiZG93bmxvYWRzIiwiZG93bmxvYWQiLCJzYXZlQXMiLCJkZXRhY2giLCJkZXRhY2hPd25lZCIsIlVJRXZlbnRUeXBlIiwib25EZXRhY2giLCJkZWJ1Z2dlZSIsIlBhbmVsQ29udHJvbGxlciIsInZpZXciLCJtb2RlbCIsInN0cnVjdHVyZWRDbG9uZSIsImNvbm4iLCJjdXJyZW50V2luZG93SWQiLCJzdGF0aWMiLCJSRU5ERVJfQ09OVEVOVCIsIlRPR0dMRV9TRUxFQ1RfT05fQ09OVEVOVCIsIkNMRUFSX0NPTlRFTlQiLCJIT1ZFUiIsInN0YXJ0IiwiZGlzcGF0Y2giLCJJTklUIiwiZW5zdXJlQ29ubmVjdGlvbkFsaXZlIiwiZm9yY2VSZWNvbm5lY3QiLCJyZWdpc3RlclZpZXdIYW5kbGVycyIsInciLCJ3aW5kb3dzIiwiZ2V0Q3VycmVudCIsInNlbmRlcldpbmRvd0lkIiwid2luZG93SWQiLCJvbiIsIlRPR0dMRV9TRUxFQ1QiLCJDTEVBUiIsIkNMRUFSX0FMTCIsIkNBUFRVUkUiLCJNRUFTVVJFX0NPTlRFTlRfU0laRSIsIkJBREdFX1NJWkVfQ0hBTkdFIiwic2l6ZSIsIlNFVF9CQURHRV9TSVpFIiwiQkFER0VfQ09MT1JfU0VMRUNUIiwiY29sb3IiLCJTRVRfQkFER0VfQ09MT1IiLCJCQURHRV9TSEFQRV9DSEFOR0UiLCJzaGFwZSIsIlNFVF9CQURHRV9TSEFQRSIsIkJBREdFX0RFTEVURSIsIkJBREdFX1BPU0lUSU9OX1NFTEVDVCIsInBvc2l0aW9uIiwiU0VUX0JBREdFX1BPU0lUSU9OIiwiVE9HR0xFX0NBUFRVUkVfUEFORUwiLCJDQVBUVVJFX0ZPUk1BVF9DSEFOR0UiLCJTRVRfQ0FQVFVSRV9GT1JNQVQiLCJDQVBUVVJFX0FSRUFfQ0hBTkdFIiwiU0VUX0NBUFRVUkVfQVJFQSIsIkNBUFRVUkVfUVVBTElUWV9DSEFOR0UiLCJTRVRfQ0FQVFVSRV9RVUFMSVRZIiwiQ0FQVFVSRV9TQ0FMRV9DSEFOR0UiLCJTRVRfQ0FQVFVSRV9TQ0FMRSIsIlJFT1JERVJfSVRFTVMiLCJmcm9tSWQiLCJmcm9tSW5kZXgiLCJ0b0luZGV4IiwiU0VUX0dST1VQIiwiSVRFTV9TRUxFQ1RJT05fQ0hBTkdFRCIsIklURU1fSE9WRVJfSU4iLCJJVEVNX0hPVkVSX09VVCIsIklURU1fQ09NTUVOVF9BUFBMWSIsImNvbW1lbnQiLCJVUERBVEVfSVRFTV9DT01NRU5UIiwiVVBEQVRFX1RIRU1FIiwiU0VUVElOR19NT0RBTF9TSE9XIiwiU1RPUkVfUkVMT0FEX1JFUVVFU1RFRCIsIlJFTU9WRV9QQUdFX0NMSUNLIiwiUkVNT1ZFX1NDUkVFTl9TVEFURV9CWV9QQUdFIiwiYWN0aW9uIiwibmV4dCIsImVmZmVjdHMiLCJraW5kIiwiU0VUX1RIRU1FIiwiU0VUX1NUQVRVUyIsIlJFU1RPUkVfU1RBVEUiLCJzdGF0ZSIsIlNFVF9NSVNTSU5HX0lEUyIsIkNMRUFSX1NUQVRFIiwiQ09OVEVOVF9TRUxFQ1RFRCIsIml0IiwiUEVSU0lTVF9TVEFURSIsImZpbHRlciIsIml0ZW1zTWFya2VkRm9yUmVsYWJlbCIsIm5leHRHcm91cFJhdyIsIm5leHRHcm91cCIsInVwZGF0ZUl0ZW1DbnQiLCJOdW1iZXIiLCJNQVhfU0FGRV9JTlRFR0VSIiwidXBkYXRlR3JvdXBBbmREZWZlclJlbGFiZWwiLCJDQVBUVVJFX1JFUVVFU1RFRCIsIk5PVElGWV9FUlJPUiIsIkNBUFRVUkVfU1VDQ0VFREVEIiwiQ0FQVFVSRV9GQUlMRUQiLCJSYW5nZUVycm9yIiwiZnJvbUlkeCIsImZpbmRJbmRleCIsInJlb3JkZXJJdGVtTGFiZWwiLCJpc0NoZWNrIiwiYXBwbHlJdGVtU2VsZWN0aW9uQ2hhbmdlZEJ5SWQiLCJnIiwiZ3JvdXBJZHMiLCJncm91cFNldCIsImFwcGx5SXRlbVNlbGVjdGlvbkNoYW5nZWRGb3JHcm91cCIsImFsbENoZWNrIiwiUE9SVF9ESVNDT05ORUNURUQiLCJSRUFEX1NDUkVFTl9TVEFURV9TVE9SRSIsIlNUT1JFX1JFTE9BRF9TVUNDRUVERUQiLCJSRU1PVkVfU0NSRUVOX1NUQVRFX1NUT1JFX0JZX1BBR0VfS0VZIiwidXBkYXRlIiwiZXhlY0VmZmVjdHMiLCJjYXRjaCIsInNvbWUiLCJmeCIsIlJFUVVJUkVTX0NPTk4iLCJjb250ZXh0Q2hhbmdlZCIsImFwaSIsInByZXYiLCJzY3JlZW5TdGF0ZXMiLCJPYmplY3QiLCJrZXlzIiwic3QiLCJlIiwicHJldktleSIsInF1ZXJ5IiwiYWN0aXZlIiwiY3VycmVudFdpbmRvdyIsImdldEFjdGl2ZVRhYiIsIm5ld0tleSIsImluY2x1ZGVIYXNoIiwidSIsIm9yaWdpbiIsInBhdGhuYW1lIiwic2VhcmNoIiwiaGFzaCIsImRpc2Nvbm5lY3QiLCJzY3JpcHRpbmciLCJleGVjdXRlU2NyaXB0IiwiZmlsZXMiLCJjb25uZWN0IiwibmFtZSIsImxpc3RlbmVycyIsImZuIiwiY2IiLCJkaXNwb3NlIiwiY29ubmVjdFRvVGFiIiwiYW5jaG9ycyIsInVuaXEiLCJBcnJheSIsImZyb20iLCJmaW5kIiwiQm9vbGVhbiIsInJlbW92ZWRJZHMiLCJ0b0FkZCIsImFuY2hvciIsInBhdGNoIiwiYWRkZWQiLCJ0b1JlbW92ZSIsIkluZmluaXR5IiwiYXBwbHlQYXRjaCIsImhhbmRsZVNlbGVjdGVkIiwiSUNPTlMiLCJjYXJldERvd24iLCJkIiwidmlld0JveCIsImNhcmV0RG93bkZpbGwiLCJjYXJldFJpZ2h0IiwiY2FyZXRSaWdodEZpbGwiLCJnZXRJY29uIiwiYnlMYWJlbFRoZW5JZCIsIlBhbmVsVmlldyIsImRvYyIsImVscyIsIk5FV19HUk9VUCIsIkhPVkVSX09VVF9ERUxBWSIsImRyYWdFbCIsImRyYWdTdGFydFBhcmVudCIsImRyYWdTdGFydEluZGV4IiwiaG92ZXJPdXRUaW1lciIsImNvbGxhcHNlZEdyb3VwcyIsIiQiLCJ0b2dnbGVCdG4iLCJ0b2dnbGVJY29uIiwidG9nZ2xlTGFiZWwiLCJjbGVhckJ0biIsImNhcHR1cmVCdG4iLCJsaXN0IiwiZW1wdHkiLCJjb3VudCIsImNhcHR1cmVPcHRpb25zVG9nZ2xlIiwiY2FwdHVyZU9wdGlvbnNQYW5lbCIsImNhcHR1cmVGbXRSYWRpb3MiLCIkYWxsIiwiY2FwdHVyZUFyZWFSYWRpb3MiLCJqcGVnT25seUVscyIsImpwZWdRdWFsaXR5UmFuZ2UiLCJqcGVnUXVhbGl0eU51bWJlciIsImNhcHR1cmVTY2FsZVJhbmdlIiwiY2FwdHVyZVNjYWxlTnVtYmVyIiwiYmFkZ2VTaXplUmFuZ2UiLCJiYWRnZVNpemVOdW1iZXIiLCJiYWRnZUNvbG9yQnV0dG9ucyIsImJhZGdlQ29sb3JMYWJlbCIsImJhZGdlQ29sb3JEb3QiLCJiYWRnZVNoYXBlU2VsZWN0IiwiYmFkZ2VEZWxldGVCdXR0b24iLCJiYWRnZVBvc2l0aW9uQnV0dG9ucyIsImJhZGdlUG9zaXRpb25MYWJlbCIsImJhZGdlR3JvdXBTZWxlY3QiLCJncm91cE5hbWVNb2RhbCIsImdyb3VwTmFtZUlucHV0IiwiZ3JvdXBOYW1lQ2FuY2VsQnRuIiwiZ3JvdXBOYW1lQ3JlYXRlbEJ0biIsIml0ZW1Db21tZW50TW9kYWwiLCJpdGVtQ29tbWVudElucHV0IiwiaXRlbUNvbW1lbnRJZElucHV0IiwiaXRlbUNvbW1lbnRDYW5jZWxCdG4iLCJpdGVtQ29tbWVudEFwcGx5QnRuIiwic2VsZWN0SXRlbUFsbENoZWNrYm94Iiwic2V0dGluZ01vZGFsIiwic2V0dGluZ0J1dHRvbiIsInNldHRpbmdDbG9zZUJ1dHRvbiIsInRoZW1lTGlnaHRCdG4iLCJ0aGVtZURhcmtCdG4iLCJ0aGVtZURldmljZUJ0biIsInN0b3JlQ291bnQiLCJzdG9yZUxpc3QiLCJzdG9yZUVtcHR5IiwiYWRkRXZlbnRMaXN0ZW5lciIsImVtaXQiLCJ1cGRhdGVRdWFsaXR5VmlzaWJpbGl0eSIsImdldFNlbGVjdGVkQ2FwdHVyZUZvcm1hdCIsImdldFNlbGVjdGVkQ2FwdHVyZUFyZWEiLCJiaW5kU3luYyIsImZpcmVTaXplIiwiaXNGaW5pdGUiLCJidG4iLCJkYXRhc2V0IiwiY29sb3JOYW1lIiwiaXNJdGVtU2hhcGUiLCJwb3NpdGlvbk5hbWUiLCJjbGFzc0xpc3QiLCJhcHBseVRoZW1lIiwic2VsZWN0ZWQiLCJjaGVja2VkIiwiY2FuY2VsSG92ZXJPdXQiLCJzY2hlZHVsZUhvdmVyT3V0IiwiaGFuZGxlciIsImFyciIsImgiLCJyZW5kZXJTdGF0dXMiLCJyZW5kZXJUb2dnbGUiLCJyZW5kZXJMaXN0Iiwic2VsZWN0UmFkaW9CeVZhbHVlIiwiYXBwbHlDYXB0dXJlT3B0aW9uc1RvZ2dsZVVJIiwiYXBwbHlCYWRnZUNvbG9yVUkiLCJhcHBseUJhZGdlUG9zaXRvblVJIiwiYXBwbHlCYWRnZUdyb3VwU2VsZWN0VUkiLCJnZXRFeGlzdGluZ0dyb3VwcyIsImFwcGx5U3RvcmUiLCJzdHlsZSIsImNsYXNzTmFtZSIsImNyZWF0ZUVsZW1lbnQiLCJ0ZXh0IiwibXNnS2V5IiwiZ2V0U3RhdHVzTWVzc2FnZSIsInJlcGxhY2VDaGlsZHJlbiIsImRpc2FibGVGb3JtQ29udHJvbHMiLCJpY29uIiwiYWxsQ2hlY2tlZCIsImV2ZXJ5IiwiZ3JvdXBzIiwiZ3JvdXBCeUdyb3VwIiwiZ3JvdXBLZXlzIiwibG9jYWxlQ29tcGFyZSIsImZyYWciLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50IiwiZ0tleSIsInNlY3Rpb24iLCJyZW5kZXJHcm91cFNlY3Rpb24iLCJhcHBlbmRDaGlsZCIsImdJdGVtcyIsImlzQ29sbGFwc2VkIiwiaGVhZGVyIiwiY2hlY2tib3hXcmFwIiwiY2hlY2tib3giLCJhcHBlbmQiLCJsZWZ0IiwiY3JlYXRlU3ZnSWNvbiIsInRvZ2dsZVBhdGgiLCJxdWVyeVNlbGVjdG9yIiwidWwiLCJhdHRhY2hVbERuREhhbmRsZXJzIiwic2VsZWN0Q2hlY2tlZCIsInJlbmRlckl0ZW0iLCJpc01pc3NpbmciLCJsaUJhc2UiLCJsaSIsImRyYWdnYWJsZSIsInBhcmVudEVsZW1lbnQiLCJwcm90b3R5cGUiLCJpbmRleE9mIiwiY2FsbCIsImNoaWxkcmVuIiwiZGF0YVRyYW5zZmVyIiwiZWZmZWN0QWxsb3dlZCIsInBhcmVudCIsImVuZEluZGV4IiwiY2hlY2tib3hTdHlsZSIsImJhZGdlU3R5bGUiLCJiYWRnZSIsIm1haW4iLCJjaGlwIiwiY29tbWVudEJ0biIsImdlbmVyYXRlQ29tbWVudEJ0biIsInByZXZlbnREZWZhdWx0IiwidGFyZ2V0TGkiLCJjbG9zZXN0IiwicmVjdCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImlzQWZ0ZXIiLCJjbGllbnRZIiwidG9wIiwiaW5zZXJ0QmVmb3JlIiwibmV4dFNpYmxpbmciLCJtIiwiaXNKcGVnIiwidG9nZ2xlIiwiZGlzYWJsZWQiLCJyYWRpb3MiLCJyYW5nZUVsIiwibnVtYmVyRWwiLCJvblZhbHVlIiwicmVhZE51bSIsImZhbGxiYWNrIiwiTmFOIiwic3luYyIsInJhd1N0ciIsIk5FR0FUSVZFX0lORklOSVRZIiwiUE9TSVRJVkVfSU5GSU5JVFkiLCJzdGVwIiwiY2xhbXBlZCIsImNsYW1wIiwicm91bmRlZCIsImZpeGVkIiwidG9GaXhlZCIsImlzRGlzYWJsZWQiLCJoYXNBdHRyaWJ1dGUiLCJleHBhbmRlZCIsImlubmVySFRNTCIsImdldEJhZGdlQ29sb3JTdHlsZU5hbWUiLCJ0b0xvd2VyQ2FzZSIsImJ1dHRvbiIsInJlcGxhY2VBbGwiLCJleGlzdGluZ0dyb3VwcyIsImRlZmF1dEdyb3VwIiwibWFrZU9wdCIsIm5vcm1hbGl6ZSIsImNyZWF0ZU9wdCIsImRvY3VtZW50RWxlbWVudCIsIndpbmRvdyIsIm1hdGNoTWVkaWEiLCJtYXRjaGVzIiwibGlFbGVtIiwiYVdyYXBFbGVtIiwiYUVsZW0iLCJocmVmIiwiYnRuRWxlbSIsInJlbW92ZUljb24iLCJzZWxlY3RvciIsInRhZyIsIm5vZGUiLCJvIiwiU1ZHX05TIiwic3ZnIiwiY3JlYXRlRWxlbWVudE5TIiwiYXR0cnMiLCJrIiwiZW50cmllcyIsInBhdGhFbCIsImNvbnRyb2xsZXIiLCJyZWFkeVN0YXRlIiwib25jZSJdLCJzb3VyY2VSb290IjoiIn0=