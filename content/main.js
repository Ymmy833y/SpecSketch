(()=>{"use strict";const e="spsk:panel-content:v1",t="PING",n="TOGGLE_SELECT",o="RENDER",s="CLEAR",i="SELECTED",r=new Set(["role","name","aria-label","rel","href"]);function l(e,t){let n=r.has(e);n||=e.startsWith("data-")&&h(e);let o=h(t)&&t.length<100;return o||=t.startsWith("#")&&h(t.slice(1)),n&&o}function a(e){return h(e)}function c(e){return h(e)}function u(e){return!0}function d(e,t){if(e.nodeType!==Node.ELEMENT_NODE)throw new Error("Can't generate CSS selector for non-element node type.");if("html"===e.tagName.toLowerCase())return"html";const n={root:document.body,idName:a,className:c,tagName:u,attr:l,timeoutMs:1e3,seedMinLength:3,optimizedMinLength:2,maxNumberOfPathChecks:1/0},o=new Date,s={...n,...t},i=function(e,t){return e.nodeType===Node.DOCUMENT_NODE?e:e===t.root?e.ownerDocument:e}(s.root,n);let r,d=0;for(const t of function*(e,t,n){const o=[];let s=[],i=e,r=0;for(;i&&i!==n;){const e=f(i,t);for(const t of e)t.level=r;if(o.push(e),i=i.parentElement,r++,s.push(...b(o)),r>=t.seedMinLength){s.sort(v);for(const e of s)yield e;s=[]}}s.sort(v);for(const e of s)yield e}(e,s,i)){if((new Date).getTime()-o.getTime()>s.timeoutMs||d>=s.maxNumberOfPathChecks){const t=g(e,i);if(!t)throw new Error(`Timeout: Can't find a unique selector after ${s.timeoutMs}ms`);return m(t)}if(d++,C(t,i)){r=t;break}}if(!r)throw new Error("Selector was not found.");const h=[...x(r,e,s,i,o)];return h.sort(v),h.length>0?m(h[0]):m(r)}function h(e){if(/^[a-z\-]{3,}$/i.test(e)){const t=e.split(/-|[A-Z]/);for(const e of t){if(e.length<=2)return!1;if(/[^aeiou]{4,}/i.test(e))return!1}return!0}return!1}function f(e,t){const n=[],o=e.getAttribute("id");o&&t.idName(o)&&n.push({name:"#"+CSS.escape(o),penalty:0});for(let o=0;o<e.classList.length;o++){const s=e.classList[o];t.className(s)&&n.push({name:"."+CSS.escape(s),penalty:1})}for(let o=0;o<e.attributes.length;o++){const s=e.attributes[o];t.attr(s.name,s.value)&&n.push({name:`[${CSS.escape(s.name)}="${CSS.escape(s.value)}"]`,penalty:2})}const s=e.tagName.toLowerCase();if(t.tagName(s)){n.push({name:s,penalty:5});const t=y(e,s);void 0!==t&&n.push({name:w(s,t),penalty:10})}const i=y(e);return void 0!==i&&n.push({name:E(s,i),penalty:50}),n}function m(e){let t=e[0],n=t.name;for(let o=1;o<e.length;o++){const s=e[o].level||0;n=t.level===s-1?`${e[o].name} > ${n}`:`${e[o].name} ${n}`,t=e[o]}return n}function p(e){return e.map(e=>e.penalty).reduce((e,t)=>e+t,0)}function v(e,t){return p(e)-p(t)}function y(e,t){const n=e.parentNode;if(!n)return;let o=n.firstChild;if(!o)return;let s=0;for(;o&&(o.nodeType!==Node.ELEMENT_NODE||void 0!==t&&o.tagName.toLowerCase()!==t||s++,o!==e);)o=o.nextSibling;return s}function g(e,t){let n=0,o=e;const s=[];for(;o&&o!==t;){const e=o.tagName.toLowerCase(),t=y(o,e);if(void 0===t)return;s.push({name:w(e,t),penalty:NaN,level:n}),o=o.parentElement,n++}if(C(s,t))return s}function E(e,t){return"html"===e?"html":`${e}:nth-child(${t})`}function w(e,t){return"html"===e?"html":`${e}:nth-of-type(${t})`}function*b(e,t=[]){if(e.length>0)for(let n of e[0])yield*b(e.slice(1,e.length),t.concat(n));else yield t}function C(e,t){const n=m(e);switch(t.querySelectorAll(n).length){case 0:throw new Error(`Can't select any node with this selector: ${n}`);case 1:return!0;default:return!1}}function*x(e,t,n,o,s){if(e.length>2&&e.length>n.optimizedMinLength)for(let i=1;i<e.length-1;i++){if((new Date).getTime()-s.getTime()>n.timeoutMs)return;const r=[...e];r.splice(i,1),C(r,o)&&o.querySelector(m(r))===t&&(yield r,yield*x(r,t,n,o,s))}}let L=null,N=null;const k=new Map;let S=!1;async function $(){if(N)return;const e=document.createElement("div");e.id="spsk-root",(document.documentElement||document.body).appendChild(e),L=e.attachShadow({mode:"open"});const t=document.createElement("link");t.rel="stylesheet",t.href=chrome.runtime.getURL("styles/overlay.css"),L.appendChild(t),N=document.createElement("div"),N.className="spsk-overlay",L.appendChild(N);const n=()=>{S||(S=!0,requestAnimationFrame(()=>{S=!1,D()}))};window.addEventListener("scroll",n,{passive:!0}),window.addEventListener("resize",n,{passive:!0}),window.visualViewport&&(window.visualViewport.addEventListener("scroll",n,{passive:!0}),window.visualViewport.addEventListener("resize",n,{passive:!0}))}async function M(){N&&(N.innerHTML="",k.clear())}function T(e){try{return document.querySelector(e)}catch{return null}}function D(){for(const[e,t]of k.entries()){let e=t.elRef?.deref()??null;if(!e){const n=t.boxEl.dataset.css;if(!n)continue;e=T(n),t.elRef=e?new WeakRef(e):null,t.missing=!e}if(!e){t.boxEl.style.display="none";continue}t.boxEl.style.display="";const n=e.getBoundingClientRect();t.boxEl.style.left=`${n.left}px`,t.boxEl.style.top=`${n.top}px`,t.boxEl.style.width=`${n.width}px`,t.boxEl.style.height=`${n.height}px`}}const O=new class{enabled=!1;onPick;onClick=e=>this.handleClick(e);onMouseOver=e=>this.highlight(e);hoverBox=null;constructor(e){this.onPick=e}setEnabled(e){e!==this.enabled&&(this.enabled=e,e?(document.addEventListener("click",this.onClick,!0),document.addEventListener("mouseover",this.onMouseOver,!0)):(document.removeEventListener("click",this.onClick,!0),document.removeEventListener("mouseover",this.onMouseOver,!0),this.removeHover()))}handleClick(e){if(!this.enabled)return;e.preventDefault(),e.stopPropagation();const t=e.target;t&&1===t.nodeType&&this.onPick(t)}highlight(e){if(!this.enabled)return;const t=e.target;if(!t||1!==t.nodeType)return;const n=t.getBoundingClientRect();this.ensureHover();const o=this.hoverBox;o.style.left=`${n.left+window.scrollX}px`,o.style.top=`${n.top+window.scrollY}px`,o.style.width=`${n.width}px`,o.style.height=`${n.height}px`}ensureHover(){this.hoverBox||(this.hoverBox=document.createElement("div"),Object.assign(this.hoverBox.style,{position:"absolute",outline:"2px dashed #00a",pointerEvents:"none",zIndex:"2147483647"}),document.body.appendChild(this.hoverBox))}removeHover(){this.hoverBox?.remove(),this.hoverBox=null}}(function(e){const t=function(e){return{kind:"css",value:d(e,{timeoutMs:500}),version:1}}(e);B?.postMessage({type:i,payload:{anchors:[t]},id:crypto.randomUUID()})});let B=null;chrome.runtime.onConnect.addListener(async i=>{(function(t){return function(e,t){return e.name===t}(t,e)})(i)&&(B=i,await $(),i.onMessage.addListener(async e=>{if(e?.type)switch(e.type){case t:i.postMessage({id:e.id,ok:!0});break;case n:O.setEnabled(!!e.payload?.enabled);break;case o:{const t=e.payload.items;await async function(e){if(N||await $(),!N)return;const t=new Set(e.map(e=>e.id));for(const[e,n]of k.entries())t.has(e)||(n.boxEl.remove(),k.delete(e));for(const t of e){let e=k.get(t.id);if(!e){const n=document.createElement("div");n.className="spsk-box";const o=document.createElement("div");o.className="spsk-badge",n.appendChild(o),N.appendChild(n),e={boxEl:n,badgeEl:o,elRef:null,missing:!1},k.set(t.id,e)}e.badgeEl.textContent=String(t.label)}requestAnimationFrame(D)}(t),function(e){for(const t of e){const e=k.get(t.id);e&&(e.boxEl.dataset.css=t.anchor.value)}}(t);break}case s:await M()}}),i.onDisconnect.addListener(()=>{O.setEnabled(!1),M()}))})})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RyxLQUNUd0IsRUFBRUssTUFBTXdDLFNBQ1I1RSxFQUFRa0csT0FBTzNGLElBSXZCLElBQUssTUFBTTRGLEtBQU1ILEVBQU8sQ0FDcEIsSUFBSWpFLEVBQUkvQixFQUFRb0csSUFBSUQsRUFBRzVGLElBQ3ZCLElBQUt3QixFQUFHLENBQ0osTUFBTW9DLEVBQU1oSixTQUFTbUYsY0FBYyxPQUNuQzZELEVBQUk1SixVQUFZLFdBQ2hCLE1BQU04TCxFQUFRbEwsU0FBU21GLGNBQWMsT0FDckMrRixFQUFNOUwsVUFBWSxhQUNsQjRKLEVBQUkxRCxZQUFZNEYsR0FDaEJ0RyxFQUFPVSxZQUFZMEQsR0FDbkJwQyxFQUFJLENBQUVLLE1BQU8rQixFQUFLbUMsUUFBU0QsRUFBT25FLE1BQU8sS0FBTUssU0FBUyxHQUN4RHZDLEVBQVF1RyxJQUFJSixFQUFHNUYsR0FBSXdCLEVBQ3ZCLENBQ0FBLEVBQUV1RSxRQUFRRSxZQUFjQyxPQUFPTixFQUFHTyxNQUN0QyxDQUNBdkYsc0JBQXNCQyxFQUMxQixDQ2hEc0J1RixDQUFZWCxHRG1IM0IsU0FBNEJBLEdBQy9CLElBQUssTUFBTUcsS0FBTUgsRUFBTyxDQUNwQixNQUFNakUsRUFBSS9CLEVBQVFvRyxJQUFJRCxFQUFHNUYsSUFDcEJ3QixJQUVMQSxFQUFFSyxNQUFNQyxRQUFRNUMsSUFBTTBHLEVBQUd0QixPQUFPL0ssTUFFcEMsQ0FDSixDQzFIZ0I4TSxDQUFtQlosR0FDbkIsS0FDSixDQUNBLEtBQUt2TSxRQUNLZ0ksT0FRbEJpRSxFQUFFbUIsYUFBYXBCLFlBQVksS0FDdkJ6QyxFQUFVVyxZQUFXLEdBQ3JCbEMsUSIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2NvbW1vbi9jb25zdGFudHMudHMiLCJ3ZWJwYWNrOi8vLy4vY29tbW9uL21lc3NhZ2VzLnRzIiwid2VicGFjazovLy8uLi9ub2RlX21vZHVsZXMvQG1lZHYvZmluZGVyL2ZpbmRlci5qcyIsIndlYnBhY2s6Ly8vLi9ydW50aW1lL2NvbnRlbnQvb3ZlcmxheS50cyIsIndlYnBhY2s6Ly8vLi9ydW50aW1lL2NvbnRlbnQvbWFpbi50cyIsIndlYnBhY2s6Ly8vLi9ydW50aW1lL2NvbnRlbnQvc2VsZWN0b3IudHMiLCJ3ZWJwYWNrOi8vLy4vcnVudGltZS9jb250ZW50L2FuY2hvci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgUFJPVE9DT0xfVkVSU0lPTiA9IDE7XG5leHBvcnQgY29uc3QgQ0hBTk5FTCA9IHtcbiAgICBQQU5FTF9DT05URU5UOiBgc3BzazpwYW5lbC1jb250ZW50OnYke1BST1RPQ09MX1ZFUlNJT059YCxcbn07XG4vKipcbiAqIENoZWNrcyB3aGV0aGVyIHRoZSBnaXZlbiBQb3J0Lm5hbWUgbWF0Y2hlcyB0aGUgc3BlY2lmaWVkIGNoYW5uZWwuXG4gKiBVc2UgdGhpcyB0byBzYWZlbHkgZGlzdGluZ3Vpc2ggY29ubmVjdGlvbiB0eXBlcyBiZXR3ZWVuIFBhbmVsIGFuZCBDb250ZW50LlxuICpcbiAqIEBwYXJhbSBwb3J0IC0gQSBjb25uZWN0ZWQgcnVudGltZS5Qb3J0XG4gKiBAcGFyYW0gbmFtZSAtIFRhcmdldCBjaGFubmVsIG5hbWUgdG8gY29tcGFyZVxuICogQHJldHVybnMgVHJ1ZSBpZiB0aGUgcG9ydCBiZWxvbmdzIHRvIHRoZSBjaGFubmVsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0NoYW5uZWwocG9ydCwgbmFtZSkge1xuICAgIHJldHVybiBwb3J0Lm5hbWUgPT09IG5hbWU7XG59XG4vKipcbiAqIERldGVybWluZXMgd2hldGhlciB0aGUgcG9ydCBpcyB1c2VkIGZvciBQYW5lbCDihpQgQ29udGVudCBjb21tdW5pY2F0aW9uLlxuICogQSBjb252ZW5pZW5jZSB3cmFwcGVyIGZvciBDSEFOTkVMLlBBTkVMX0NPTlRFTlQuXG4gKlxuICogQHBhcmFtIHBvcnQgLSBBIGNvbm5lY3RlZCBydW50aW1lLlBvcnRcbiAqIEByZXR1cm5zIFRydWUgaWYgdGhlIHBvcnQgaXMgdGhlIFBhbmVs4oCTQ29udGVudCBjaGFubmVsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1BhbmVsQ29udGVudFBvcnQocG9ydCkge1xuICAgIHJldHVybiBpc0NoYW5uZWwocG9ydCwgQ0hBTk5FTC5QQU5FTF9DT05URU5UKTtcbn1cbiIsImNvbnN0IFAyQyA9IHtcbiAgICBQSU5HOiAnUElORycsXG4gICAgVE9HR0xFX1NFTEVDVDogJ1RPR0dMRV9TRUxFQ1QnLFxuICAgIFJFTkRFUjogJ1JFTkRFUicsXG4gICAgQ0xFQVI6ICdDTEVBUicsXG4gICAgR0VUX1NUQVRFOiAnR0VUX1NUQVRFJyxcbn07XG5jb25zdCBDMlAgPSB7XG4gICAgU0VMRUNURUQ6ICdTRUxFQ1RFRCcsXG59O1xuZXhwb3J0IGNvbnN0IE1TR19UWVBFID0geyAuLi5QMkMsIC4uLkMyUCB9O1xuZXhwb3J0IGZ1bmN0aW9uIGlzUmVzcG9uc2UobXNnKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBtc2cgPT09ICdvYmplY3QnICYmIG1zZyAhPT0gbnVsbCAmJiAnaWQnIGluIG1zZyAmJiAnb2snIGluIG1zZztcbn1cbiIsIi8vIExpY2Vuc2U6IE1JVFxuLy8gQXV0aG9yOiBBbnRvbiBNZWR2ZWRldiA8YW50b25AbWVkdi5pbz5cbi8vIFNvdXJjZTogaHR0cHM6Ly9naXRodWIuY29tL2FudG9ubWVkdi9maW5kZXJcbmNvbnN0IGFjY2VwdGVkQXR0ck5hbWVzID0gbmV3IFNldChbJ3JvbGUnLCAnbmFtZScsICdhcmlhLWxhYmVsJywgJ3JlbCcsICdocmVmJ10pO1xuLyoqIENoZWNrIGlmIGF0dHJpYnV0ZSBuYW1lIGFuZCB2YWx1ZSBhcmUgd29yZC1saWtlLiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGF0dHIobmFtZSwgdmFsdWUpIHtcbiAgICBsZXQgbmFtZUlzT2sgPSBhY2NlcHRlZEF0dHJOYW1lcy5oYXMobmFtZSk7XG4gICAgbmFtZUlzT2sgfHw9IG5hbWUuc3RhcnRzV2l0aCgnZGF0YS0nKSAmJiB3b3JkTGlrZShuYW1lKTtcbiAgICBsZXQgdmFsdWVJc09rID0gd29yZExpa2UodmFsdWUpICYmIHZhbHVlLmxlbmd0aCA8IDEwMDtcbiAgICB2YWx1ZUlzT2sgfHw9IHZhbHVlLnN0YXJ0c1dpdGgoJyMnKSAmJiB3b3JkTGlrZSh2YWx1ZS5zbGljZSgxKSk7XG4gICAgcmV0dXJuIG5hbWVJc09rICYmIHZhbHVlSXNPaztcbn1cbi8qKiBDaGVjayBpZiBpZCBuYW1lIGlzIHdvcmQtbGlrZS4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpZE5hbWUobmFtZSkge1xuICAgIHJldHVybiB3b3JkTGlrZShuYW1lKTtcbn1cbi8qKiBDaGVjayBpZiBjbGFzcyBuYW1lIGlzIHdvcmQtbGlrZS4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbGFzc05hbWUobmFtZSkge1xuICAgIHJldHVybiB3b3JkTGlrZShuYW1lKTtcbn1cbi8qKiBDaGVjayBpZiB0YWcgbmFtZSBpcyB3b3JkLWxpa2UuICovXG5leHBvcnQgZnVuY3Rpb24gdGFnTmFtZShuYW1lKSB7XG4gICAgcmV0dXJuIHRydWU7XG59XG4vKiogRmluZHMgdW5pcXVlIENTUyBzZWxlY3RvcnMgZm9yIHRoZSBnaXZlbiBlbGVtZW50LiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbmRlcihpbnB1dCwgb3B0aW9ucykge1xuICAgIGlmIChpbnB1dC5ub2RlVHlwZSAhPT0gTm9kZS5FTEVNRU5UX05PREUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW4ndCBnZW5lcmF0ZSBDU1Mgc2VsZWN0b3IgZm9yIG5vbi1lbGVtZW50IG5vZGUgdHlwZS5gKTtcbiAgICB9XG4gICAgaWYgKGlucHV0LnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2h0bWwnKSB7XG4gICAgICAgIHJldHVybiAnaHRtbCc7XG4gICAgfVxuICAgIGNvbnN0IGRlZmF1bHRzID0ge1xuICAgICAgICByb290OiBkb2N1bWVudC5ib2R5LFxuICAgICAgICBpZE5hbWU6IGlkTmFtZSxcbiAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWUsXG4gICAgICAgIHRhZ05hbWU6IHRhZ05hbWUsXG4gICAgICAgIGF0dHI6IGF0dHIsXG4gICAgICAgIHRpbWVvdXRNczogMTAwMCxcbiAgICAgICAgc2VlZE1pbkxlbmd0aDogMyxcbiAgICAgICAgb3B0aW1pemVkTWluTGVuZ3RoOiAyLFxuICAgICAgICBtYXhOdW1iZXJPZlBhdGhDaGVja3M6IEluZmluaXR5LFxuICAgIH07XG4gICAgY29uc3Qgc3RhcnRUaW1lID0gbmV3IERhdGUoKTtcbiAgICBjb25zdCBjb25maWcgPSB7IC4uLmRlZmF1bHRzLCAuLi5vcHRpb25zIH07XG4gICAgY29uc3Qgcm9vdERvY3VtZW50ID0gZmluZFJvb3REb2N1bWVudChjb25maWcucm9vdCwgZGVmYXVsdHMpO1xuICAgIGxldCBmb3VuZFBhdGg7XG4gICAgbGV0IGNvdW50ID0gMDtcbiAgICBmb3IgKGNvbnN0IGNhbmRpZGF0ZSBvZiBzZWFyY2goaW5wdXQsIGNvbmZpZywgcm9vdERvY3VtZW50KSkge1xuICAgICAgICBjb25zdCBlbGFwc2VkVGltZU1zID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgLSBzdGFydFRpbWUuZ2V0VGltZSgpO1xuICAgICAgICBpZiAoZWxhcHNlZFRpbWVNcyA+IGNvbmZpZy50aW1lb3V0TXMgfHxcbiAgICAgICAgICAgIGNvdW50ID49IGNvbmZpZy5tYXhOdW1iZXJPZlBhdGhDaGVja3MpIHtcbiAgICAgICAgICAgIGNvbnN0IGZQYXRoID0gZmFsbGJhY2soaW5wdXQsIHJvb3REb2N1bWVudCk7XG4gICAgICAgICAgICBpZiAoIWZQYXRoKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUaW1lb3V0OiBDYW4ndCBmaW5kIGEgdW5pcXVlIHNlbGVjdG9yIGFmdGVyICR7Y29uZmlnLnRpbWVvdXRNc31tc2ApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHNlbGVjdG9yKGZQYXRoKTtcbiAgICAgICAgfVxuICAgICAgICBjb3VudCsrO1xuICAgICAgICBpZiAodW5pcXVlKGNhbmRpZGF0ZSwgcm9vdERvY3VtZW50KSkge1xuICAgICAgICAgICAgZm91bmRQYXRoID0gY2FuZGlkYXRlO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFmb3VuZFBhdGgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBTZWxlY3RvciB3YXMgbm90IGZvdW5kLmApO1xuICAgIH1cbiAgICBjb25zdCBvcHRpbWl6ZWQgPSBbXG4gICAgICAgIC4uLm9wdGltaXplKGZvdW5kUGF0aCwgaW5wdXQsIGNvbmZpZywgcm9vdERvY3VtZW50LCBzdGFydFRpbWUpLFxuICAgIF07XG4gICAgb3B0aW1pemVkLnNvcnQoYnlQZW5hbHR5KTtcbiAgICBpZiAob3B0aW1pemVkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmV0dXJuIHNlbGVjdG9yKG9wdGltaXplZFswXSk7XG4gICAgfVxuICAgIHJldHVybiBzZWxlY3Rvcihmb3VuZFBhdGgpO1xufVxuZnVuY3Rpb24qIHNlYXJjaChpbnB1dCwgY29uZmlnLCByb290RG9jdW1lbnQpIHtcbiAgICBjb25zdCBzdGFjayA9IFtdO1xuICAgIGxldCBwYXRocyA9IFtdO1xuICAgIGxldCBjdXJyZW50ID0gaW5wdXQ7XG4gICAgbGV0IGkgPSAwO1xuICAgIHdoaWxlIChjdXJyZW50ICYmIGN1cnJlbnQgIT09IHJvb3REb2N1bWVudCkge1xuICAgICAgICBjb25zdCBsZXZlbCA9IHRpZShjdXJyZW50LCBjb25maWcpO1xuICAgICAgICBmb3IgKGNvbnN0IG5vZGUgb2YgbGV2ZWwpIHtcbiAgICAgICAgICAgIG5vZGUubGV2ZWwgPSBpO1xuICAgICAgICB9XG4gICAgICAgIHN0YWNrLnB1c2gobGV2ZWwpO1xuICAgICAgICBjdXJyZW50ID0gY3VycmVudC5wYXJlbnRFbGVtZW50O1xuICAgICAgICBpKys7XG4gICAgICAgIHBhdGhzLnB1c2goLi4uY29tYmluYXRpb25zKHN0YWNrKSk7XG4gICAgICAgIGlmIChpID49IGNvbmZpZy5zZWVkTWluTGVuZ3RoKSB7XG4gICAgICAgICAgICBwYXRocy5zb3J0KGJ5UGVuYWx0eSk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGNhbmRpZGF0ZSBvZiBwYXRocykge1xuICAgICAgICAgICAgICAgIHlpZWxkIGNhbmRpZGF0ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhdGhzID0gW107XG4gICAgICAgIH1cbiAgICB9XG4gICAgcGF0aHMuc29ydChieVBlbmFsdHkpO1xuICAgIGZvciAoY29uc3QgY2FuZGlkYXRlIG9mIHBhdGhzKSB7XG4gICAgICAgIHlpZWxkIGNhbmRpZGF0ZTtcbiAgICB9XG59XG5mdW5jdGlvbiB3b3JkTGlrZShuYW1lKSB7XG4gICAgaWYgKC9eW2EtelxcLV17Myx9JC9pLnRlc3QobmFtZSkpIHtcbiAgICAgICAgY29uc3Qgd29yZHMgPSBuYW1lLnNwbGl0KC8tfFtBLVpdLyk7XG4gICAgICAgIGZvciAoY29uc3Qgd29yZCBvZiB3b3Jkcykge1xuICAgICAgICAgICAgaWYgKHdvcmQubGVuZ3RoIDw9IDIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoL1teYWVpb3VdezQsfS9pLnRlc3Qod29yZCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIHRpZShlbGVtZW50LCBjb25maWcpIHtcbiAgICBjb25zdCBsZXZlbCA9IFtdO1xuICAgIGNvbnN0IGVsZW1lbnRJZCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdpZCcpO1xuICAgIGlmIChlbGVtZW50SWQgJiYgY29uZmlnLmlkTmFtZShlbGVtZW50SWQpKSB7XG4gICAgICAgIGxldmVsLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogJyMnICsgQ1NTLmVzY2FwZShlbGVtZW50SWQpLFxuICAgICAgICAgICAgcGVuYWx0eTogMCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZWxlbWVudC5jbGFzc0xpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgbmFtZSA9IGVsZW1lbnQuY2xhc3NMaXN0W2ldO1xuICAgICAgICBpZiAoY29uZmlnLmNsYXNzTmFtZShuYW1lKSkge1xuICAgICAgICAgICAgbGV2ZWwucHVzaCh7XG4gICAgICAgICAgICAgICAgbmFtZTogJy4nICsgQ1NTLmVzY2FwZShuYW1lKSxcbiAgICAgICAgICAgICAgICBwZW5hbHR5OiAxLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbGVtZW50LmF0dHJpYnV0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgYXR0ciA9IGVsZW1lbnQuYXR0cmlidXRlc1tpXTtcbiAgICAgICAgaWYgKGNvbmZpZy5hdHRyKGF0dHIubmFtZSwgYXR0ci52YWx1ZSkpIHtcbiAgICAgICAgICAgIGxldmVsLnB1c2goe1xuICAgICAgICAgICAgICAgIG5hbWU6IGBbJHtDU1MuZXNjYXBlKGF0dHIubmFtZSl9PVwiJHtDU1MuZXNjYXBlKGF0dHIudmFsdWUpfVwiXWAsXG4gICAgICAgICAgICAgICAgcGVuYWx0eTogMixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHRhZ05hbWUgPSBlbGVtZW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcbiAgICBpZiAoY29uZmlnLnRhZ05hbWUodGFnTmFtZSkpIHtcbiAgICAgICAgbGV2ZWwucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiB0YWdOYW1lLFxuICAgICAgICAgICAgcGVuYWx0eTogNSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gaW5kZXhPZihlbGVtZW50LCB0YWdOYW1lKTtcbiAgICAgICAgaWYgKGluZGV4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxldmVsLnB1c2goe1xuICAgICAgICAgICAgICAgIG5hbWU6IG50aE9mVHlwZSh0YWdOYW1lLCBpbmRleCksXG4gICAgICAgICAgICAgICAgcGVuYWx0eTogMTAsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBudGggPSBpbmRleE9mKGVsZW1lbnQpO1xuICAgIGlmIChudGggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBsZXZlbC5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6IG50aENoaWxkKHRhZ05hbWUsIG50aCksXG4gICAgICAgICAgICBwZW5hbHR5OiA1MCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBsZXZlbDtcbn1cbmZ1bmN0aW9uIHNlbGVjdG9yKHBhdGgpIHtcbiAgICBsZXQgbm9kZSA9IHBhdGhbMF07XG4gICAgbGV0IHF1ZXJ5ID0gbm9kZS5uYW1lO1xuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgcGF0aC5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBsZXZlbCA9IHBhdGhbaV0ubGV2ZWwgfHwgMDtcbiAgICAgICAgaWYgKG5vZGUubGV2ZWwgPT09IGxldmVsIC0gMSkge1xuICAgICAgICAgICAgcXVlcnkgPSBgJHtwYXRoW2ldLm5hbWV9ID4gJHtxdWVyeX1gO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcXVlcnkgPSBgJHtwYXRoW2ldLm5hbWV9ICR7cXVlcnl9YDtcbiAgICAgICAgfVxuICAgICAgICBub2RlID0gcGF0aFtpXTtcbiAgICB9XG4gICAgcmV0dXJuIHF1ZXJ5O1xufVxuZnVuY3Rpb24gcGVuYWx0eShwYXRoKSB7XG4gICAgcmV0dXJuIHBhdGgubWFwKChub2RlKSA9PiBub2RlLnBlbmFsdHkpLnJlZHVjZSgoYWNjLCBpKSA9PiBhY2MgKyBpLCAwKTtcbn1cbmZ1bmN0aW9uIGJ5UGVuYWx0eShhLCBiKSB7XG4gICAgcmV0dXJuIHBlbmFsdHkoYSkgLSBwZW5hbHR5KGIpO1xufVxuZnVuY3Rpb24gaW5kZXhPZihpbnB1dCwgdGFnTmFtZSkge1xuICAgIGNvbnN0IHBhcmVudCA9IGlucHV0LnBhcmVudE5vZGU7XG4gICAgaWYgKCFwYXJlbnQpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgbGV0IGNoaWxkID0gcGFyZW50LmZpcnN0Q2hpbGQ7XG4gICAgaWYgKCFjaGlsZCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBsZXQgaSA9IDA7XG4gICAgd2hpbGUgKGNoaWxkKSB7XG4gICAgICAgIGlmIChjaGlsZC5ub2RlVHlwZSA9PT0gTm9kZS5FTEVNRU5UX05PREUgJiZcbiAgICAgICAgICAgICh0YWdOYW1lID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgICAgICBjaGlsZC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09IHRhZ05hbWUpKSB7XG4gICAgICAgICAgICBpKys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNoaWxkID09PSBpbnB1dCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2hpbGQgPSBjaGlsZC5uZXh0U2libGluZztcbiAgICB9XG4gICAgcmV0dXJuIGk7XG59XG5mdW5jdGlvbiBmYWxsYmFjayhpbnB1dCwgcm9vdERvY3VtZW50KSB7XG4gICAgbGV0IGkgPSAwO1xuICAgIGxldCBjdXJyZW50ID0gaW5wdXQ7XG4gICAgY29uc3QgcGF0aCA9IFtdO1xuICAgIHdoaWxlIChjdXJyZW50ICYmIGN1cnJlbnQgIT09IHJvb3REb2N1bWVudCkge1xuICAgICAgICBjb25zdCB0YWdOYW1lID0gY3VycmVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gaW5kZXhPZihjdXJyZW50LCB0YWdOYW1lKTtcbiAgICAgICAgaWYgKGluZGV4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBwYXRoLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogbnRoT2ZUeXBlKHRhZ05hbWUsIGluZGV4KSxcbiAgICAgICAgICAgIHBlbmFsdHk6IE5hTixcbiAgICAgICAgICAgIGxldmVsOiBpLFxuICAgICAgICB9KTtcbiAgICAgICAgY3VycmVudCA9IGN1cnJlbnQucGFyZW50RWxlbWVudDtcbiAgICAgICAgaSsrO1xuICAgIH1cbiAgICBpZiAodW5pcXVlKHBhdGgsIHJvb3REb2N1bWVudCkpIHtcbiAgICAgICAgcmV0dXJuIHBhdGg7XG4gICAgfVxufVxuZnVuY3Rpb24gbnRoQ2hpbGQodGFnTmFtZSwgaW5kZXgpIHtcbiAgICBpZiAodGFnTmFtZSA9PT0gJ2h0bWwnKSB7XG4gICAgICAgIHJldHVybiAnaHRtbCc7XG4gICAgfVxuICAgIHJldHVybiBgJHt0YWdOYW1lfTpudGgtY2hpbGQoJHtpbmRleH0pYDtcbn1cbmZ1bmN0aW9uIG50aE9mVHlwZSh0YWdOYW1lLCBpbmRleCkge1xuICAgIGlmICh0YWdOYW1lID09PSAnaHRtbCcpIHtcbiAgICAgICAgcmV0dXJuICdodG1sJztcbiAgICB9XG4gICAgcmV0dXJuIGAke3RhZ05hbWV9Om50aC1vZi10eXBlKCR7aW5kZXh9KWA7XG59XG5mdW5jdGlvbiogY29tYmluYXRpb25zKHN0YWNrLCBwYXRoID0gW10pIHtcbiAgICBpZiAoc3RhY2subGVuZ3RoID4gMCkge1xuICAgICAgICBmb3IgKGxldCBub2RlIG9mIHN0YWNrWzBdKSB7XG4gICAgICAgICAgICB5aWVsZCogY29tYmluYXRpb25zKHN0YWNrLnNsaWNlKDEsIHN0YWNrLmxlbmd0aCksIHBhdGguY29uY2F0KG5vZGUpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgeWllbGQgcGF0aDtcbiAgICB9XG59XG5mdW5jdGlvbiBmaW5kUm9vdERvY3VtZW50KHJvb3ROb2RlLCBkZWZhdWx0cykge1xuICAgIGlmIChyb290Tm9kZS5ub2RlVHlwZSA9PT0gTm9kZS5ET0NVTUVOVF9OT0RFKSB7XG4gICAgICAgIHJldHVybiByb290Tm9kZTtcbiAgICB9XG4gICAgaWYgKHJvb3ROb2RlID09PSBkZWZhdWx0cy5yb290KSB7XG4gICAgICAgIHJldHVybiByb290Tm9kZS5vd25lckRvY3VtZW50O1xuICAgIH1cbiAgICByZXR1cm4gcm9vdE5vZGU7XG59XG5mdW5jdGlvbiB1bmlxdWUocGF0aCwgcm9vdERvY3VtZW50KSB7XG4gICAgY29uc3QgY3NzID0gc2VsZWN0b3IocGF0aCk7XG4gICAgc3dpdGNoIChyb290RG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjc3MpLmxlbmd0aCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbid0IHNlbGVjdCBhbnkgbm9kZSB3aXRoIHRoaXMgc2VsZWN0b3I6ICR7Y3NzfWApO1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5mdW5jdGlvbiogb3B0aW1pemUocGF0aCwgaW5wdXQsIGNvbmZpZywgcm9vdERvY3VtZW50LCBzdGFydFRpbWUpIHtcbiAgICBpZiAocGF0aC5sZW5ndGggPiAyICYmIHBhdGgubGVuZ3RoID4gY29uZmlnLm9wdGltaXplZE1pbkxlbmd0aCkge1xuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHBhdGgubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBlbGFwc2VkVGltZU1zID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgLSBzdGFydFRpbWUuZ2V0VGltZSgpO1xuICAgICAgICAgICAgaWYgKGVsYXBzZWRUaW1lTXMgPiBjb25maWcudGltZW91dE1zKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbmV3UGF0aCA9IFsuLi5wYXRoXTtcbiAgICAgICAgICAgIG5ld1BhdGguc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgaWYgKHVuaXF1ZShuZXdQYXRoLCByb290RG9jdW1lbnQpICYmXG4gICAgICAgICAgICAgICAgcm9vdERvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IobmV3UGF0aCkpID09PSBpbnB1dCkge1xuICAgICAgICAgICAgICAgIHlpZWxkIG5ld1BhdGg7XG4gICAgICAgICAgICAgICAgeWllbGQqIG9wdGltaXplKG5ld1BhdGgsIGlucHV0LCBjb25maWcsIHJvb3REb2N1bWVudCwgc3RhcnRUaW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImxldCBzaGFkb3dSb290ID0gbnVsbDtcbmxldCByb290RWwgPSBudWxsO1xuY29uc3QgdHJhY2tlZCA9IG5ldyBNYXAoKTtcbmxldCByYWZQZW5kaW5nID0gZmFsc2U7XG4vKipcbiAqIE1vdW50cyB0aGUgb24tcGFnZSBvdmVybGF5IChTaGFkb3cgRE9NKSB0aGF0IGRyYXdzIHNlbGVjdGlvbiBib3hlcy5cbiAqIEFsc28gc2V0cyB1cCBzY3JvbGwvcmVzaXplIGxpc3RlbmVycyB0byByZXNjaGVkdWxlIHBvc2l0aW9uIHVwZGF0ZXMuXG4gKlxuICogQHJlbWFya3MgSWRlbXBvdGVudDogcmVwZWF0ZWQgY2FsbHMgd29uJ3QgbW91bnQgdHdpY2UuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBtb3VudE92ZXJsYXkoKSB7XG4gICAgaWYgKHJvb3RFbClcbiAgICAgICAgcmV0dXJuO1xuICAgIGNvbnN0IGhvc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBob3N0LmlkID0gJ3Nwc2stcm9vdCc7XG4gICAgKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCB8fCBkb2N1bWVudC5ib2R5KS5hcHBlbmRDaGlsZChob3N0KTtcbiAgICBzaGFkb3dSb290ID0gaG9zdC5hdHRhY2hTaGFkb3coeyBtb2RlOiAnb3BlbicgfSk7XG4gICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpbmsnKTtcbiAgICBsaW5rLnJlbCA9ICdzdHlsZXNoZWV0JztcbiAgICBsaW5rLmhyZWYgPSBjaHJvbWUucnVudGltZS5nZXRVUkwoJ3N0eWxlcy9vdmVybGF5LmNzcycpO1xuICAgIHNoYWRvd1Jvb3QuYXBwZW5kQ2hpbGQobGluayk7XG4gICAgcm9vdEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgcm9vdEVsLmNsYXNzTmFtZSA9ICdzcHNrLW92ZXJsYXknO1xuICAgIHNoYWRvd1Jvb3QuYXBwZW5kQ2hpbGQocm9vdEVsKTtcbiAgICAvLyBSZWRyYXcgdHJpZ2dlclxuICAgIGNvbnN0IHNjaGVkdWxlID0gKCkgPT4ge1xuICAgICAgICBpZiAocmFmUGVuZGluZylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgcmFmUGVuZGluZyA9IHRydWU7XG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgICByYWZQZW5kaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB1cGRhdGVQb3NpdGlvbnMoKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgc2NoZWR1bGUsIHsgcGFzc2l2ZTogdHJ1ZSB9KTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgc2NoZWR1bGUsIHsgcGFzc2l2ZTogdHJ1ZSB9KTtcbiAgICBpZiAod2luZG93LnZpc3VhbFZpZXdwb3J0KSB7XG4gICAgICAgIHdpbmRvdy52aXN1YWxWaWV3cG9ydC5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBzY2hlZHVsZSwgeyBwYXNzaXZlOiB0cnVlIH0pO1xuICAgICAgICB3aW5kb3cudmlzdWFsVmlld3BvcnQuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgc2NoZWR1bGUsIHsgcGFzc2l2ZTogdHJ1ZSB9KTtcbiAgICB9XG59XG4vKipcbiAqIFJlbmRlcnMgdGhlIGdpdmVuIGl0ZW1zIGludG8gdGhlIG92ZXJsYXkuXG4gKiBBcHBsaWVzIGFkZC91cGRhdGUvcmVtb3ZlIGJ5IGRpZmZpbmcgYWdhaW5zdCBjdXJyZW50IHN0YXRlLlxuICpcbiAqIEBwYXJhbSBpdGVtcyAtIEFycmF5IG9mIFNjcmVlbkl0ZW0gdG8gZGlzcGxheVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVuZGVySXRlbXMoaXRlbXMpIHtcbiAgICBpZiAoIXJvb3RFbClcbiAgICAgICAgYXdhaXQgbW91bnRPdmVybGF5KCk7XG4gICAgaWYgKCFyb290RWwpXG4gICAgICAgIHJldHVybjtcbiAgICAvLyBEaWZmOiByZW1vdmUgZGlzYXBwZWFyZWQgaXRlbXNcbiAgICBjb25zdCBpZHMgPSBuZXcgU2V0KGl0ZW1zLm1hcChpID0+IGkuaWQpKTtcbiAgICBmb3IgKGNvbnN0IFtpZCwgdF0gb2YgdHJhY2tlZC5lbnRyaWVzKCkpIHtcbiAgICAgICAgaWYgKCFpZHMuaGFzKGlkKSkge1xuICAgICAgICAgICAgdC5ib3hFbC5yZW1vdmUoKTtcbiAgICAgICAgICAgIHRyYWNrZWQuZGVsZXRlKGlkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBhZGQvdXBkYXRlXG4gICAgZm9yIChjb25zdCBpdCBvZiBpdGVtcykge1xuICAgICAgICBsZXQgdCA9IHRyYWNrZWQuZ2V0KGl0LmlkKTtcbiAgICAgICAgaWYgKCF0KSB7XG4gICAgICAgICAgICBjb25zdCBib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIGJveC5jbGFzc05hbWUgPSAnc3Bzay1ib3gnO1xuICAgICAgICAgICAgY29uc3QgYmFkZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIGJhZGdlLmNsYXNzTmFtZSA9ICdzcHNrLWJhZGdlJztcbiAgICAgICAgICAgIGJveC5hcHBlbmRDaGlsZChiYWRnZSk7XG4gICAgICAgICAgICByb290RWwuYXBwZW5kQ2hpbGQoYm94KTtcbiAgICAgICAgICAgIHQgPSB7IGJveEVsOiBib3gsIGJhZGdlRWw6IGJhZGdlLCBlbFJlZjogbnVsbCwgbWlzc2luZzogZmFsc2UgfTtcbiAgICAgICAgICAgIHRyYWNrZWQuc2V0KGl0LmlkLCB0KTtcbiAgICAgICAgfVxuICAgICAgICB0LmJhZGdlRWwudGV4dENvbnRlbnQgPSBTdHJpbmcoaXQubGFiZWwpO1xuICAgIH1cbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodXBkYXRlUG9zaXRpb25zKTtcbn1cbi8qKlxuICogQ2xlYXJzIHRoZSBvdmVybGF5IGFuZCBpdHMgaW50ZXJuYWwgdHJhY2tpbmcgc3RhdGUuXG4gKiBSZW1vdmVzIERPTSBub2RlcyBhbmQgcmVzZXRzIHRoZSBtYXAuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjbGVhck92ZXJsYXkoKSB7XG4gICAgaWYgKCFyb290RWwpXG4gICAgICAgIHJldHVybjtcbiAgICByb290RWwuaW5uZXJIVE1MID0gJyc7XG4gICAgdHJhY2tlZC5jbGVhcigpO1xufVxuLyoqXG4gKiBSZXNvbHZlcyBhbiBlbGVtZW50IGJ5IENTUyBzZWxlY3RvciB1c2luZyBxdWVyeVNlbGVjdG9yLlxuICpcbiAqIEBwYXJhbSBjc3NTZWxlY3RvciAtIENTUyBzZWxlY3RvciB0byBxdWVyeVxuICogQHJldHVybnMgVGhlIGZpcnN0IG1hdGNoaW5nIGVsZW1lbnQgb3IgbnVsbFxuICovXG5mdW5jdGlvbiByZXNvbHZlRWxlbWVudChjc3NTZWxlY3Rvcikge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNzc1NlbGVjdG9yKTtcbiAgICB9XG4gICAgY2F0Y2gge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG4vKipcbiAqIFVwZGF0ZXMgcG9zaXRpb25zIGFuZCBzaXplcyBvZiBhbGwgdHJhY2tlZCBib3hlcyB0byBtYXRjaCB0aGUgbGF0ZXN0IGxheW91dC5cbiAqIEhpZGVzIGJveGVzIHRlbXBvcmFyaWx5IHdoZW4gdGhlaXIgdGFyZ2V0IGVsZW1lbnRzIGFyZSBub3QgZm91bmQuXG4gKlxuICogQHJlbWFya3MgSW50ZW5kZWQgdG8gYmUgY2FsbGVkIGZyb20gcmVxdWVzdEFuaW1hdGlvbkZyYW1lLlxuICovXG5mdW5jdGlvbiB1cGRhdGVQb3NpdGlvbnMoKSB7XG4gICAgZm9yIChjb25zdCBbXywgdF0gb2YgdHJhY2tlZC5lbnRyaWVzKCkpIHtcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGV4aXN0aW5nIHJlZmVyZW5jZSBpcyBzdGlsbCBhbGl2ZVxuICAgICAgICBsZXQgZWwgPSB0LmVsUmVmPy5kZXJlZigpID8/IG51bGw7XG4gICAgICAgIGlmICghZWwpIHtcbiAgICAgICAgICAgIC8vIFRoZSBhbmNob3IgYWx3YXlzIGNvbWVzIGZyb20gUGFuZWwg4oaSIENvbnRlbnQgZHVyaW5nIFJFTkRFUixcbiAgICAgICAgICAgIC8vIHNvIHN0b3JlIHRoZSBDU1Mgc2VsZWN0b3IgaW4gYm94RWwuZGF0YXNldC5jc3NcbiAgICAgICAgICAgIGNvbnN0IGNzcyA9IHQuYm94RWwuZGF0YXNldC5jc3M7XG4gICAgICAgICAgICBpZiAoIWNzcylcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIGVsID0gcmVzb2x2ZUVsZW1lbnQoY3NzKTtcbiAgICAgICAgICAgIHQuZWxSZWYgPSBlbCA/IG5ldyBXZWFrUmVmKGVsKSA6IG51bGw7XG4gICAgICAgICAgICB0Lm1pc3NpbmcgPSAhZWw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFlbCkge1xuICAgICAgICAgICAgLy8gTG9zdDogaGlkZSB0aGUgYm94IChhZGp1c3Qgc3R5bGVzIGhlcmUgaWYgeW91IHdhbnQgYSBmYWludCBwbGFjZWhvbGRlcilcbiAgICAgICAgICAgIHQuYm94RWwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdC5ib3hFbC5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgciA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAvLyBUaGUgb3ZlcmxheSBpcyBmaXhlZC1wb3NpdGlvbmVkLCBzbyBhcHBseSB2aWV3cG9ydCBjb29yZGluYXRlcyBhcy1pc1xuICAgICAgICB0LmJveEVsLnN0eWxlLmxlZnQgPSBgJHtyLmxlZnR9cHhgO1xuICAgICAgICB0LmJveEVsLnN0eWxlLnRvcCA9IGAke3IudG9wfXB4YDtcbiAgICAgICAgdC5ib3hFbC5zdHlsZS53aWR0aCA9IGAke3Iud2lkdGh9cHhgO1xuICAgICAgICB0LmJveEVsLnN0eWxlLmhlaWdodCA9IGAke3IuaGVpZ2h0fXB4YDtcbiAgICB9XG59XG4vKipcbiAqIEFzc29jaWF0ZXMgQ1NTIHNlbGVjdG9ycyAoZnJvbSBSRU5ERVIpIHdpdGggdHJhY2tlZCBib3hlcy5cbiAqIEFjdHVhbCBlbGVtZW50IHJlc29sdXRpb24gaXMgaGFuZGxlZCBpbiBgdXBkYXRlUG9zaXRpb25zYC5cbiAqXG4gKiBAcGFyYW0gaXRlbXMgLSBJdGVtcyBjb250YWluaW5nIGlkIGFuZCBhbmNob3JcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJpbmRDc3NTZWxlY3Rvck1hcChpdGVtcykge1xuICAgIGZvciAoY29uc3QgaXQgb2YgaXRlbXMpIHtcbiAgICAgICAgY29uc3QgdCA9IHRyYWNrZWQuZ2V0KGl0LmlkKTtcbiAgICAgICAgaWYgKCF0KVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIHQuYm94RWwuZGF0YXNldC5jc3MgPSBpdC5hbmNob3IudmFsdWU7XG4gICAgICAgIC8vIEVsZW1lbnQgcmVzb2x1dGlvbiBpcyBoYW5kbGVkIGluIHVwZGF0ZVBvc2l0aW9uc1xuICAgIH1cbn1cbiIsImltcG9ydCB7IGlzUGFuZWxDb250ZW50UG9ydCB9IGZyb20gJ0Bjb21tb24vY29uc3RhbnRzJztcbmltcG9ydCB7IE1TR19UWVBFIH0gZnJvbSAnQGNvbW1vbi9tZXNzYWdlcyc7XG5pbXBvcnQgeyBidWlsZENzc0FuY2hvciB9IGZyb20gJy4vYW5jaG9yJztcbmltcG9ydCB7IGJpbmRDc3NTZWxlY3Rvck1hcCwgY2xlYXJPdmVybGF5LCBtb3VudE92ZXJsYXksIHJlbmRlckl0ZW1zIH0gZnJvbSAnLi9vdmVybGF5JztcbmltcG9ydCB7IFNlbGVjdG9yIH0gZnJvbSAnLi9zZWxlY3Rvcic7XG5jb25zdCBzZWxlY3Rpb24gPSBuZXcgU2VsZWN0b3Iob25QaWNrKTtcbmxldCBwb3J0ID0gbnVsbDtcbi8vIEFjY2VwdHMgY29ubmVjdGlvbnMgZnJvbSB0aGUgUGFuZWwuIE9uY2UgY29ubmVjdGVkLCBpbml0aWFsaXplcyB0aGUgb3ZlcmxheSxcbi8vIHN1YnNjcmliZXMgdG8gbWVzc2FnZXMsIGFuZCBzZXRzIHVwIGNsZWFudXAgb24gZGlzY29ubmVjdC5cbmNocm9tZS5ydW50aW1lLm9uQ29ubmVjdC5hZGRMaXN0ZW5lcihhc3luYyAocCkgPT4ge1xuICAgIGlmICghaXNQYW5lbENvbnRlbnRQb3J0KHApKVxuICAgICAgICByZXR1cm47XG4gICAgcG9ydCA9IHA7XG4gICAgYXdhaXQgbW91bnRPdmVybGF5KCk7XG4gICAgLy8gSGFuZGxlcyBtZXNzYWdlcyBmcm9tIFBhbmVsIOKGkiBDb250ZW50LlxuICAgIC8vIFByb2Nlc3NlcyBSUENzIHN1Y2ggYXMgdG9nZ2xpbmcgc2VsZWN0aW9uLCByZW5kZXJpbmcsIGFuZCBjbGVhcmluZy5cbiAgICBwLm9uTWVzc2FnZS5hZGRMaXN0ZW5lcihhc3luYyAobXNnKSA9PiB7XG4gICAgICAgIGlmICghbXNnPy50eXBlKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBzd2l0Y2ggKG1zZy50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIE1TR19UWVBFLlBJTkc6XG4gICAgICAgICAgICAgICAgcC5wb3N0TWVzc2FnZSh7IGlkOiBtc2cuaWQsIG9rOiB0cnVlIH0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBNU0dfVFlQRS5UT0dHTEVfU0VMRUNUOlxuICAgICAgICAgICAgICAgIHNlbGVjdGlvbi5zZXRFbmFibGVkKCEhbXNnLnBheWxvYWQ/LmVuYWJsZWQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBNU0dfVFlQRS5SRU5ERVI6IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtcyA9IG1zZy5wYXlsb2FkLml0ZW1zO1xuICAgICAgICAgICAgICAgIGF3YWl0IHJlbmRlckl0ZW1zKGl0ZW1zKTtcbiAgICAgICAgICAgICAgICBiaW5kQ3NzU2VsZWN0b3JNYXAoaXRlbXMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBNU0dfVFlQRS5DTEVBUjpcbiAgICAgICAgICAgICAgICBhd2FpdCBjbGVhck92ZXJsYXkoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgTVNHX1RZUEUuR0VUX1NUQVRFOlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgLy8gQ2xlYW5zIHVwIG9uIHBvcnQgZGlzY29ubmVjdGlvbi5cbiAgICAvLyBEaXNhYmxlcyBzZWxlY3Rpb24gYW5kIGNsZWFycyB0aGUgb3ZlcmxheS5cbiAgICBwLm9uRGlzY29ubmVjdC5hZGRMaXN0ZW5lcigoKSA9PiB7XG4gICAgICAgIHNlbGVjdGlvbi5zZXRFbmFibGVkKGZhbHNlKTtcbiAgICAgICAgY2xlYXJPdmVybGF5KCk7XG4gICAgfSk7XG59KTtcbi8qKlxuICogQ2FsbGVkIHdoZW4gYW4gZWxlbWVudCBpcyBwaWNrZWQuXG4gKiBCdWlsZHMgYW4gYW5jaG9yIGFuZCBub3RpZmllcyB0aGUgUGFuZWwuXG4gKlxuICogQHBhcmFtIGVsIC0gRWxlbWVudCBjb25maXJtZWQgYnkgY2xpY2tcbiAqL1xuZnVuY3Rpb24gb25QaWNrKGVsKSB7XG4gICAgY29uc3QgYW5jaG9yID0gYnVpbGRDc3NBbmNob3IoZWwpO1xuICAgIHBvcnQ/LnBvc3RNZXNzYWdlKHtcbiAgICAgICAgdHlwZTogTVNHX1RZUEUuU0VMRUNURUQsXG4gICAgICAgIHBheWxvYWQ6IHsgYW5jaG9yczogW2FuY2hvcl0gfSxcbiAgICAgICAgaWQ6IGNyeXB0by5yYW5kb21VVUlEKCksXG4gICAgfSk7XG59XG4iLCIvKipcbiAqIEEgc2ltcGxlIGVsZW1lbnQgc2VsZWN0b3IgdGhhdCBoaWdobGlnaHRzIGVsZW1lbnRzIG9uIG1vdXNlb3ZlclxuICogYW5kIGNvbmZpcm1zIHNlbGVjdGlvbiBvbiBjbGljay5cbiAqXG4gKiBAcmVtYXJrc1xuICogLSBSZWdpc3RlcnMgY2FwdHVyZS1waGFzZSBsaXN0ZW5lcnMgd2hlbiBlbmFibGVkLlxuICogLSBUaGUgaGlnaGxpZ2h0IGJveCBpcyBhYnNvbHV0ZWx5IHBvc2l0aW9uZWQgb24gYGRvY3VtZW50LmJvZHlgLlxuICovXG5leHBvcnQgY2xhc3MgU2VsZWN0b3Ige1xuICAgIGVuYWJsZWQgPSBmYWxzZTtcbiAgICBvblBpY2s7XG4gICAgb25DbGljayA9IChldikgPT4gdGhpcy5oYW5kbGVDbGljayhldik7XG4gICAgb25Nb3VzZU92ZXIgPSAoZXYpID0+IHRoaXMuaGlnaGxpZ2h0KGV2KTtcbiAgICBob3ZlckJveCA9IG51bGw7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHNlbGVjdG9yIHdpdGggYSBjYWxsYmFjayBpbnZva2VkIG9uIHNlbGVjdGlvbiBjb25maXJtYXRpb24uXG4gICAgICogQHBhcmFtIG9uUGljayAtIEludm9rZWQgd2hlbiBhIGNsaWNrIGNvbmZpcm1zIGFuIGVsZW1lbnRcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihvblBpY2spIHtcbiAgICAgICAgdGhpcy5vblBpY2sgPSBvblBpY2s7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVuYWJsZXMgb3IgZGlzYWJsZXMgdGhlIHNlbGVjdG9yLlxuICAgICAqIFN0YXJ0cy9zdG9wcyBldmVudCBzdWJzY3JpcHRpb25zIGFuZCByZW1vdmVzIHRoZSBoaWdobGlnaHQgb24gZGlzYWJsZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBlbmFibGVkIC0gVHJ1ZSB0byBlbmFibGU7IGZhbHNlIHRvIGRpc2FibGVcbiAgICAgKi9cbiAgICBzZXRFbmFibGVkKGVuYWJsZWQpIHtcbiAgICAgICAgaWYgKGVuYWJsZWQgPT09IHRoaXMuZW5hYmxlZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy5lbmFibGVkID0gZW5hYmxlZDtcbiAgICAgICAgaWYgKGVuYWJsZWQpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vbkNsaWNrLCB0cnVlKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsIHRoaXMub25Nb3VzZU92ZXIsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uQ2xpY2ssIHRydWUpO1xuICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgdGhpcy5vbk1vdXNlT3ZlciwgdHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUhvdmVyKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xpY2sgaGFuZGxlciB0aGF0IHByZXZlbnRzIGRlZmF1bHQgYmVoYXZpb3IgYW5kIGZvcndhcmRzIHRoZSBlbGVtZW50IHRvIGBvblBpY2tgLlxuICAgICAqXG4gICAgICogQHBhcmFtIGV2IC0gQ2xpY2sgZXZlbnRcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBoYW5kbGVDbGljayhldikge1xuICAgICAgICBpZiAoIXRoaXMuZW5hYmxlZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIGNvbnN0IGVsID0gZXYudGFyZ2V0O1xuICAgICAgICBpZiAoIWVsIHx8IGVsLm5vZGVUeXBlICE9PSAxKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLm9uUGljayhlbCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1vdXNlb3ZlciBoYW5kbGVyIHRoYXQgcmVwb3NpdGlvbnMgdGhlIGhpZ2hsaWdodCBib3ggdG8gdGhlIGhvdmVyZWQgZWxlbWVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBldiAtIE1vdXNlb3ZlciBldmVudFxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGhpZ2hsaWdodChldikge1xuICAgICAgICBpZiAoIXRoaXMuZW5hYmxlZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgZWwgPSBldi50YXJnZXQ7XG4gICAgICAgIGlmICghZWwgfHwgZWwubm9kZVR5cGUgIT09IDEpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IHJlY3QgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgdGhpcy5lbnN1cmVIb3ZlcigpO1xuICAgICAgICBjb25zdCBib3ggPSB0aGlzLmhvdmVyQm94O1xuICAgICAgICBib3guc3R5bGUubGVmdCA9IGAke3JlY3QubGVmdCArIHdpbmRvdy5zY3JvbGxYfXB4YDtcbiAgICAgICAgYm94LnN0eWxlLnRvcCA9IGAke3JlY3QudG9wICsgd2luZG93LnNjcm9sbFl9cHhgO1xuICAgICAgICBib3guc3R5bGUud2lkdGggPSBgJHtyZWN0LndpZHRofXB4YDtcbiAgICAgICAgYm94LnN0eWxlLmhlaWdodCA9IGAke3JlY3QuaGVpZ2h0fXB4YDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTGF6aWx5IGNyZWF0ZXMgdGhlIGhpZ2hsaWdodCBib3ggd2hlbiBuZWVkZWQuXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgZW5zdXJlSG92ZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLmhvdmVyQm94KVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLmhvdmVyQm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5ob3ZlckJveC5zdHlsZSwge1xuICAgICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICAgICAgICBvdXRsaW5lOiAnMnB4IGRhc2hlZCAjMDBhJyxcbiAgICAgICAgICAgIHBvaW50ZXJFdmVudHM6ICdub25lJyxcbiAgICAgICAgICAgIHpJbmRleDogJzIxNDc0ODM2NDcnXG4gICAgICAgIH0pO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuaG92ZXJCb3gpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRoZSBoaWdobGlnaHQgYm94IGZyb20gdGhlIERPTS5cbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICByZW1vdmVIb3ZlcigpIHtcbiAgICAgICAgdGhpcy5ob3ZlckJveD8ucmVtb3ZlKCk7XG4gICAgICAgIHRoaXMuaG92ZXJCb3ggPSBudWxsO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IGZpbmRlciB9IGZyb20gJ0BtZWR2L2ZpbmRlcic7XG4vKipcbiAqIEdlbmVyYXRlcyBhIHJlLWxvY2F0YWJsZSBDU1Mgc2VsZWN0b3IgKGFuY2hvcikgZm9yIHRoZSBnaXZlbiBlbGVtZW50LlxuICogVXNlcyBAbWVkdi9maW5kZXIgdG8gaW5mZXIgYSBzdGFibGUgc2VsZWN0b3IuXG4gKlxuICogQHBhcmFtIGVsIC0gVGFyZ2V0IERPTSBlbGVtZW50XG4gKiBAcmV0dXJucyBHZW5lcmF0ZWQgQ1NTIGFuY2hvclxuICogQHJlbWFya3MgU2VsZWN0b3IgZ2VuZXJhdGlvbiBpcyB0aW1lLWxpbWl0ZWQgdmlhIGB0aW1lb3V0TXNgLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYnVpbGRDc3NBbmNob3IoZWwpIHtcbiAgICBjb25zdCB2YWx1ZSA9IGZpbmRlcihlbCwge1xuICAgICAgICB0aW1lb3V0TXM6IDUwMCxcbiAgICB9KTtcbiAgICByZXR1cm4geyBraW5kOiAnY3NzJywgdmFsdWUsIHZlcnNpb246IDEgfTtcbn1cbiJdLCJuYW1lcyI6WyJDSEFOTkVMIiwiTVNHX1RZUEUiLCJhY2NlcHRlZEF0dHJOYW1lcyIsIlNldCIsImF0dHIiLCJuYW1lIiwidmFsdWUiLCJuYW1lSXNPayIsImhhcyIsInN0YXJ0c1dpdGgiLCJ3b3JkTGlrZSIsInZhbHVlSXNPayIsImxlbmd0aCIsInNsaWNlIiwiaWROYW1lIiwiY2xhc3NOYW1lIiwidGFnTmFtZSIsImZpbmRlciIsImlucHV0Iiwib3B0aW9ucyIsIm5vZGVUeXBlIiwiTm9kZSIsIkVMRU1FTlRfTk9ERSIsIkVycm9yIiwidG9Mb3dlckNhc2UiLCJkZWZhdWx0cyIsInJvb3QiLCJkb2N1bWVudCIsImJvZHkiLCJ0aW1lb3V0TXMiLCJzZWVkTWluTGVuZ3RoIiwib3B0aW1pemVkTWluTGVuZ3RoIiwibWF4TnVtYmVyT2ZQYXRoQ2hlY2tzIiwiSW5maW5pdHkiLCJzdGFydFRpbWUiLCJEYXRlIiwiY29uZmlnIiwicm9vdERvY3VtZW50Iiwicm9vdE5vZGUiLCJET0NVTUVOVF9OT0RFIiwib3duZXJEb2N1bWVudCIsImZpbmRSb290RG9jdW1lbnQiLCJmb3VuZFBhdGgiLCJjb3VudCIsImNhbmRpZGF0ZSIsInN0YWNrIiwicGF0aHMiLCJjdXJyZW50IiwiaSIsImxldmVsIiwidGllIiwibm9kZSIsInB1c2giLCJwYXJlbnRFbGVtZW50IiwiY29tYmluYXRpb25zIiwic29ydCIsImJ5UGVuYWx0eSIsInNlYXJjaCIsImdldFRpbWUiLCJmUGF0aCIsImZhbGxiYWNrIiwic2VsZWN0b3IiLCJ1bmlxdWUiLCJvcHRpbWl6ZWQiLCJvcHRpbWl6ZSIsInRlc3QiLCJ3b3JkcyIsInNwbGl0Iiwid29yZCIsImVsZW1lbnQiLCJlbGVtZW50SWQiLCJnZXRBdHRyaWJ1dGUiLCJDU1MiLCJlc2NhcGUiLCJwZW5hbHR5IiwiY2xhc3NMaXN0IiwiYXR0cmlidXRlcyIsImluZGV4IiwiaW5kZXhPZiIsInVuZGVmaW5lZCIsIm50aE9mVHlwZSIsIm50aCIsIm50aENoaWxkIiwicGF0aCIsInF1ZXJ5IiwibWFwIiwicmVkdWNlIiwiYWNjIiwiYSIsImIiLCJwYXJlbnQiLCJwYXJlbnROb2RlIiwiY2hpbGQiLCJmaXJzdENoaWxkIiwibmV4dFNpYmxpbmciLCJOYU4iLCJjb25jYXQiLCJjc3MiLCJxdWVyeVNlbGVjdG9yQWxsIiwibmV3UGF0aCIsInNwbGljZSIsInF1ZXJ5U2VsZWN0b3IiLCJzaGFkb3dSb290Iiwicm9vdEVsIiwidHJhY2tlZCIsIk1hcCIsInJhZlBlbmRpbmciLCJhc3luYyIsIm1vdW50T3ZlcmxheSIsImhvc3QiLCJjcmVhdGVFbGVtZW50IiwiaWQiLCJkb2N1bWVudEVsZW1lbnQiLCJhcHBlbmRDaGlsZCIsImF0dGFjaFNoYWRvdyIsIm1vZGUiLCJsaW5rIiwicmVsIiwiaHJlZiIsImNocm9tZSIsInJ1bnRpbWUiLCJnZXRVUkwiLCJzY2hlZHVsZSIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsInVwZGF0ZVBvc2l0aW9ucyIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJwYXNzaXZlIiwidmlzdWFsVmlld3BvcnQiLCJjbGVhck92ZXJsYXkiLCJpbm5lckhUTUwiLCJjbGVhciIsInJlc29sdmVFbGVtZW50IiwiY3NzU2VsZWN0b3IiLCJfIiwidCIsImVudHJpZXMiLCJlbCIsImVsUmVmIiwiZGVyZWYiLCJib3hFbCIsImRhdGFzZXQiLCJXZWFrUmVmIiwibWlzc2luZyIsInN0eWxlIiwiZGlzcGxheSIsInIiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJsZWZ0IiwidG9wIiwid2lkdGgiLCJoZWlnaHQiLCJzZWxlY3Rpb24iLCJlbmFibGVkIiwib25QaWNrIiwib25DbGljayIsImV2IiwidGhpcyIsImhhbmRsZUNsaWNrIiwib25Nb3VzZU92ZXIiLCJoaWdobGlnaHQiLCJob3ZlckJveCIsImNvbnN0cnVjdG9yIiwic2V0RW5hYmxlZCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJyZW1vdmVIb3ZlciIsInByZXZlbnREZWZhdWx0Iiwic3RvcFByb3BhZ2F0aW9uIiwidGFyZ2V0IiwicmVjdCIsImVuc3VyZUhvdmVyIiwiYm94Iiwic2Nyb2xsWCIsInNjcm9sbFkiLCJPYmplY3QiLCJhc3NpZ24iLCJwb3NpdGlvbiIsIm91dGxpbmUiLCJwb2ludGVyRXZlbnRzIiwiekluZGV4IiwicmVtb3ZlIiwiYW5jaG9yIiwia2luZCIsInZlcnNpb24iLCJidWlsZENzc0FuY2hvciIsInBvcnQiLCJwb3N0TWVzc2FnZSIsInR5cGUiLCJwYXlsb2FkIiwiYW5jaG9ycyIsImNyeXB0byIsInJhbmRvbVVVSUQiLCJvbkNvbm5lY3QiLCJhZGRMaXN0ZW5lciIsInAiLCJpc0NoYW5uZWwiLCJpc1BhbmVsQ29udGVudFBvcnQiLCJvbk1lc3NhZ2UiLCJtc2ciLCJvayIsIml0ZW1zIiwiaWRzIiwiZGVsZXRlIiwiaXQiLCJnZXQiLCJiYWRnZSIsImJhZGdlRWwiLCJzZXQiLCJ0ZXh0Q29udGVudCIsIlN0cmluZyIsImxhYmVsIiwicmVuZGVySXRlbXMiLCJiaW5kQ3NzU2VsZWN0b3JNYXAiLCJvbkRpc2Nvbm5lY3QiXSwic291cmNlUm9vdCI6IiJ9