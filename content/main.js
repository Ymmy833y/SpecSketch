(()=>{"use strict";const e="spsk:panel-content:v1",t="PING",n="TOGGLE_SELECT",o="RENDER",s="CLEAR",i="HOVER",r="MEASURE_SIZE",l="SELECTED",a="MISSING_IDS",c="CONTENT_SIZE_RESULT",d=new Set(["role","name","aria-label","rel","href"]);function u(e,t){let n=d.has(e);n||=e.startsWith("data-")&&g(e);let o=g(t)&&t.length<100;return o||=t.startsWith("#")&&g(t.slice(1)),n&&o}function h(e){return g(e)}function m(e){return g(e)}function p(e){return!0}function f(e,t){if(e.nodeType!==Node.ELEMENT_NODE)throw new Error("Can't generate CSS selector for non-element node type.");if("html"===e.tagName.toLowerCase())return"html";const n={root:document.body,idName:h,className:m,tagName:p,attr:u,timeoutMs:1e3,seedMinLength:3,optimizedMinLength:2,maxNumberOfPathChecks:1/0},o=new Date,s={...n,...t},i=function(e,t){return e.nodeType===Node.DOCUMENT_NODE?e:e===t.root?e.ownerDocument:e}(s.root,n);let r,l=0;for(const t of function*(e,t,n){const o=[];let s=[],i=e,r=0;for(;i&&i!==n;){const e=E(i,t);for(const t of e)t.level=r;if(o.push(e),i=i.parentElement,r++,s.push(...L(o)),r>=t.seedMinLength){s.sort(v);for(const e of s)yield e;s=[]}}s.sort(v);for(const e of s)yield e}(e,s,i)){if((new Date).getTime()-o.getTime()>s.timeoutMs||l>=s.maxNumberOfPathChecks){const t=N(e,i);if(!t)throw new Error(`Timeout: Can't find a unique selector after ${s.timeoutMs}ms`);return b(t)}if(l++,k(t,i)){r=t;break}}if(!r)throw new Error("Selector was not found.");const a=[...S(r,e,s,i,o)];return a.sort(v),a.length>0?b(a[0]):b(r)}function g(e){if(/^[a-z\-]{3,}$/i.test(e)){const t=e.split(/-|[A-Z]/);for(const e of t){if(e.length<=2)return!1;if(/[^aeiou]{4,}/i.test(e))return!1}return!0}return!1}function E(e,t){const n=[],o=e.getAttribute("id");o&&t.idName(o)&&n.push({name:"#"+CSS.escape(o),penalty:0});for(let o=0;o<e.classList.length;o++){const s=e.classList[o];t.className(s)&&n.push({name:"."+CSS.escape(s),penalty:1})}for(let o=0;o<e.attributes.length;o++){const s=e.attributes[o];t.attr(s.name,s.value)&&n.push({name:`[${CSS.escape(s.name)}="${CSS.escape(s.value)}"]`,penalty:2})}const s=e.tagName.toLowerCase();if(t.tagName(s)){n.push({name:s,penalty:5});const t=w(e,s);void 0!==t&&n.push({name:C(s,t),penalty:10})}const i=w(e);return void 0!==i&&n.push({name:x(s,i),penalty:50}),n}function b(e){let t=e[0],n=t.name;for(let o=1;o<e.length;o++){const s=e[o].level||0;n=t.level===s-1?`${e[o].name} > ${n}`:`${e[o].name} ${n}`,t=e[o]}return n}function y(e){return e.map(e=>e.penalty).reduce((e,t)=>e+t,0)}function v(e,t){return y(e)-y(t)}function w(e,t){const n=e.parentNode;if(!n)return;let o=n.firstChild;if(!o)return;let s=0;for(;o&&(o.nodeType!==Node.ELEMENT_NODE||void 0!==t&&o.tagName.toLowerCase()!==t||s++,o!==e);)o=o.nextSibling;return s}function N(e,t){let n=0,o=e;const s=[];for(;o&&o!==t;){const e=o.tagName.toLowerCase(),t=w(o,e);if(void 0===t)return;s.push({name:C(e,t),penalty:NaN,level:n}),o=o.parentElement,n++}if(k(s,t))return s}function x(e,t){return"html"===e?"html":`${e}:nth-child(${t})`}function C(e,t){return"html"===e?"html":`${e}:nth-of-type(${t})`}function*L(e,t=[]){if(e.length>0)for(let n of e[0])yield*L(e.slice(1,e.length),t.concat(n));else yield t}function k(e,t){const n=b(e);switch(t.querySelectorAll(n).length){case 0:throw new Error(`Can't select any node with this selector: ${n}`);case 1:return!0;default:return!1}}function*S(e,t,n,o,s){if(e.length>2&&e.length>n.optimizedMinLength)for(let i=1;i<e.length-1;i++){if((new Date).getTime()-s.getTime()>n.timeoutMs)return;const r=[...e];r.splice(i,1),k(r,o)&&o.querySelector(b(r))===t&&(yield r,yield*S(r,t,n,o,s))}}function T(e){return e instanceof HTMLElement}let M=null,I=null;const $=new Map;let D=!1,H=null,P=!1;async function A(){if(I&&M)return;let e=document.getElementById("spsk-root");e||(e=document.createElement("div"),e.id="spsk-root",(document.documentElement||document.body).appendChild(e)),M=e.shadowRoot??e.attachShadow({mode:"open"});const t=chrome.runtime.getURL("styles/overlay.css");let n=M.querySelector(`link[rel="stylesheet"][href="${t}"]`);if(n||(n=document.createElement("link"),n.rel="stylesheet",n.href=t,M.appendChild(n)),I=M.querySelector("div.spsk-overlay"),I||(I=document.createElement("div"),I.className="spsk-overlay",M.appendChild(I)),!P){const e=()=>{D||(D=!0,requestAnimationFrame(()=>{D=!1,F()}))};window.addEventListener("scroll",e,{passive:!0}),window.addEventListener("resize",e,{passive:!0}),window.visualViewport&&(window.visualViewport.addEventListener("scroll",e,{passive:!0}),window.visualViewport.addEventListener("resize",e,{passive:!0})),P=!0}}function O(e){const t=$.get(e.id);if(t)return t;const n=document.createElement("div"),o=document.createElement("div"),s=document.createElement("div");s.className="spsk-comment",n.append(o,s);const i={anchor:e.anchor,boxEl:n,badgeEl:o,commentEl:s,elRef:null,missing:!0};return $.set(e.id,i),I.appendChild(n),i}const R=(e,t)=>{const n=`${t.size}px`,o=t.color.toLowerCase();e.anchor=t.anchor,e.boxEl.className=`spsk-box spsk-box--${o}`,e.boxEl.style.setProperty("--spsk-border-w",t.size/4+"px"),e.boxEl.classList.toggle("badge-hidden","None"===t.labelFormat),e.boxEl.classList.toggle("box-hidden",!1===t.visible),e.badgeEl.className=`spsk-badge spsk-badge--${t.shape} spsk-badge--${o} spsk-badge--${t.position}`,e.badgeEl.style.fontSize=n,e.badgeEl.textContent=function(e,t="Numbers"){if(e<0)throw new Error("label must be >= 0");switch(t){case"UpperAlpha":return _(e).toUpperCase();case"LowerAlpha":return _(e).toLowerCase();case"None":return null;default:return String(e)}}(t.label,t.labelFormat),t.comment?(e.commentEl.textContent=t.comment,e.commentEl.style.display="inline",e.commentEl.style.fontSize=n):(e.commentEl.textContent="",e.commentEl.style.display="none")};async function W(){I&&(I.innerHTML="",$.clear())}function B(e){try{return document.querySelector(e)}catch{return null}}function F(){for(const[e,t]of $.entries()){const e=B(t.anchor.value);if(t.elRef=e?new WeakRef(e):null,!e){t.boxEl.style.display="none",t.missing=!0;continue}t.boxEl.style.display="",t.missing=!1;const n=e.getBoundingClientRect();t.boxEl.style.left=`${n.left}px`,t.boxEl.style.top=`${n.top}px`,t.boxEl.style.width=`${n.width}px`,t.boxEl.style.height=`${n.height}px`}}function _(e){let t=e-1,n="";for(;t>=0;){const e=t%26;n=String.fromCharCode(65+e)+n,t=Math.floor(t/26)-1}return n}const z=new class{enabled=!1;onPick;onClick=e=>this.handleClick(e);onPointerDown=e=>this.handlePointerDown(e);onMouseOver=e=>this.highlight(e);hoverBox=null;cleanupTemp;lastHoverEl;constructor(e){this.onPick=e}setEnabled(e){e!==this.enabled&&(this.enabled=e,e?(document.addEventListener("click",this.onClick,!0),document.addEventListener("pointerdown",this.onPointerDown,!0),document.addEventListener("mouseover",this.onMouseOver,!0)):(document.removeEventListener("click",this.onClick,!0),document.removeEventListener("pointerdown",this.onPointerDown,!0),document.removeEventListener("mouseover",this.onMouseOver,!0),this.cleanupTemp?.(),this.lastHoverEl=null,this.removeHover()))}handleClick(e){this.enabled&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation?.())}handlePointerDown(e){if(!this.enabled)return;if(0!==e.button||!e.isPrimary)return;e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation?.();const t=e.target;t&&1===t.nodeType&&(this.onPick(t),this.cleanupTemp?.())}highlight(e){if(!this.enabled)return;const t=e.target;if(!t||1!==t.nodeType)return;const n=t.getBoundingClientRect();this.ensureHover();const o=this.hoverBox;o.style.left=`${n.left+window.scrollX}px`,o.style.top=`${n.top+window.scrollY}px`,o.style.width=`${n.width}px`,o.style.height=`${n.height}px`,this.lastHoverEl!==t&&(this.cleanupTemp?.(),this.cleanupTemp=this.tempEnableIfDisabled(t),this.lastHoverEl=t)}tempEnableIfDisabled(e){const t=e;if(!("disabled"in t))return()=>{};if(!t.disabled)return()=>{};const n={disabled:t.disabled,aria:t.getAttribute("aria-disabled"),pe:t.style.pointerEvents};return t.disabled=!1,t.setAttribute("aria-disabled","true"),t.style.pointerEvents="auto",()=>{t.disabled=n.disabled,null===n.aria?t.removeAttribute("aria-disabled"):t.setAttribute("aria-disabled",n.aria),t.style.pointerEvents=n.pe}}ensureHover(){this.hoverBox||(this.hoverBox=document.createElement("div"),Object.assign(this.hoverBox.style,{position:"absolute",outline:"3px dashed rgba(99, 102, 241, 1)",background:"rgba(99, 102, 241, 0.3)",pointerEvents:"none",zIndex:"2147483647"}),document.body.appendChild(this.hoverBox))}removeHover(){this.hoverBox?.remove(),this.hoverBox=null}}(function(e){const t=function(e){return{kind:"css",value:f(e,{timeoutMs:500}),version:1}}(e);U?.postMessage({type:l,payload:{anchors:[t]},id:crypto.randomUUID()})});let U=null;chrome.runtime.onConnect.addListener(async l=>{(function(t){return function(e,t){return e.name===t}(t,e)})(l)&&(U=l,await A(),l.onMessage.addListener(async e=>{if(e?.type)switch(e.type){case t:l.postMessage({id:e.id,ok:!0});break;case n:z.setEnabled(!!e.payload?.enabled);break;case o:{const t=e.payload.items;await async function(e){if(I||await A(),!I)return;const t=new Set(e.map(e=>e.id));for(const[e,n]of $.entries())t.has(e)||(n.boxEl.remove(),$.delete(e));for(const t of e){const e=O(t);R(e,t)}await new Promise(e=>{requestAnimationFrame(()=>{F(),e()})})}(t),function(){const e=Array.from($.entries()).filter(([,e])=>e.missing).map(([e])=>e);U?.postMessage({type:a,payload:{missingIds:e},id:crypto.randomUUID()})}();break}case s:await W();break;case i:await async function(e){if(e===H)return;const t=H;H=e,null!=t&&$.get(t)?.boxEl.classList.remove("is-hovered"),null!=e&&$.get(e)?.boxEl.classList.add("is-hovered")}(e.payload.id);break;case r:{const e=function(){const e=document.documentElement,t=document.body??null,n=document.scrollingElement??null,o=Math.max(e.scrollWidth,e.offsetWidth,e.clientWidth,t?.scrollWidth??0,t?.offsetWidth??0,t?.clientWidth??0,n?.scrollWidth??0,n?.offsetWidth??0,n?.clientWidth??0),s=Math.max(e.scrollHeight,e.offsetHeight,e.clientHeight,t?.scrollHeight??0,t?.offsetHeight??0,t?.clientHeight??0,n?.scrollHeight??0,n?.offsetHeight??0,n?.clientHeight??0);let i=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY,a=Number.NEGATIVE_INFINITY,c=0,d=0;const u=(window.visualViewport?.pageLeft??window.scrollX)||0,h=(window.visualViewport?.pageTop??window.scrollY)||0,m=Array.from(document.querySelectorAll("*")).filter(T);for(const e of m){e.scrollWidth>c&&(c=e.scrollWidth),e.scrollHeight>d&&(d=e.scrollHeight);const t=e.getBoundingClientRect(),n=t.left+u,o=t.right+u,s=t.top+h,m=t.bottom+h;n<i&&(i=n),s<r&&(r=s),o>l&&(l=o),m>a&&(a=m)}isFinite(i)||(i=0),isFinite(r)||(r=0),isFinite(l)||(l=o),isFinite(a)||(a=s);const p=Math.max(0,Math.ceil(l-i)),f=Math.max(0,Math.ceil(a-r));return{width:Math.max(o,c,p),height:Math.max(s,d,f)}}();l.postMessage({type:c,payload:e})}}}),l.onDisconnect.addListener(()=>{z.setEnabled(!1),W()}))})})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LENFbkRnQ0MsR0FDaEJyRCxFQUFFUixZQUFZLENBQUVDLEtBQU05TyxFQUE4QitPLFdBQ3hELEtBS1JNLEVBQUVzRCxhQUFhdkQsWUFBWSxLQUN2QnZELEVBQVVlLFlBQVcsR0FDckJuQyxRIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vY29tbW9uL2NvbnN0YW50cy50cyIsIndlYnBhY2s6Ly8vLi9jb21tb24vbWVzc2FnZXMudHMiLCJ3ZWJwYWNrOi8vLy4uL25vZGVfbW9kdWxlcy9AbWVkdi9maW5kZXIvZmluZGVyLmpzIiwid2VicGFjazovLy8uL3J1bnRpbWUvY29udGVudC9tZWFzdXJlLnRzIiwid2VicGFjazovLy8uL3J1bnRpbWUvY29udGVudC9vdmVybGF5LnRzIiwid2VicGFjazovLy8uL3J1bnRpbWUvY29udGVudC9tYWluLnRzIiwid2VicGFjazovLy8uL3J1bnRpbWUvY29udGVudC9zZWxlY3Rvci50cyIsIndlYnBhY2s6Ly8vLi9ydW50aW1lL2NvbnRlbnQvYW5jaG9yLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBQUk9UT0NPTF9WRVJTSU9OID0gMTtcbmV4cG9ydCBjb25zdCBDSEFOTkVMID0ge1xuICAgIFBBTkVMX0NPTlRFTlQ6IGBzcHNrOnBhbmVsLWNvbnRlbnQ6diR7UFJPVE9DT0xfVkVSU0lPTn1gLFxufTtcbi8qKlxuICogQ2hlY2tzIHdoZXRoZXIgdGhlIGdpdmVuIFBvcnQubmFtZSBtYXRjaGVzIHRoZSBzcGVjaWZpZWQgY2hhbm5lbC5cbiAqIFVzZSB0aGlzIHRvIHNhZmVseSBkaXN0aW5ndWlzaCBjb25uZWN0aW9uIHR5cGVzIGJldHdlZW4gUGFuZWwgYW5kIENvbnRlbnQuXG4gKlxuICogQHBhcmFtIHBvcnQgLSBBIGNvbm5lY3RlZCBydW50aW1lLlBvcnRcbiAqIEBwYXJhbSBuYW1lIC0gVGFyZ2V0IGNoYW5uZWwgbmFtZSB0byBjb21wYXJlXG4gKiBAcmV0dXJucyBUcnVlIGlmIHRoZSBwb3J0IGJlbG9uZ3MgdG8gdGhlIGNoYW5uZWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQ2hhbm5lbChwb3J0LCBuYW1lKSB7XG4gICAgcmV0dXJuIHBvcnQubmFtZSA9PT0gbmFtZTtcbn1cbi8qKlxuICogRGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBwb3J0IGlzIHVzZWQgZm9yIFBhbmVsIOKGlCBDb250ZW50IGNvbW11bmljYXRpb24uXG4gKiBBIGNvbnZlbmllbmNlIHdyYXBwZXIgZm9yIENIQU5ORUwuUEFORUxfQ09OVEVOVC5cbiAqXG4gKiBAcGFyYW0gcG9ydCAtIEEgY29ubmVjdGVkIHJ1bnRpbWUuUG9ydFxuICogQHJldHVybnMgVHJ1ZSBpZiB0aGUgcG9ydCBpcyB0aGUgUGFuZWzigJNDb250ZW50IGNoYW5uZWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzUGFuZWxDb250ZW50UG9ydChwb3J0KSB7XG4gICAgcmV0dXJuIGlzQ2hhbm5lbChwb3J0LCBDSEFOTkVMLlBBTkVMX0NPTlRFTlQpO1xufVxuIiwiY29uc3QgUDJDID0ge1xuICAgIFBJTkc6ICdQSU5HJyxcbiAgICBUT0dHTEVfU0VMRUNUOiAnVE9HR0xFX1NFTEVDVCcsXG4gICAgUkVOREVSOiAnUkVOREVSJyxcbiAgICBDTEVBUjogJ0NMRUFSJyxcbiAgICBIT1ZFUjogJ0hPVkVSJyxcbiAgICBNRUFTVVJFX1NJWkU6ICdNRUFTVVJFX1NJWkUnLFxufTtcbmNvbnN0IEMyUCA9IHtcbiAgICBTRUxFQ1RFRDogJ1NFTEVDVEVEJyxcbiAgICBNSVNTSU5HX0lEUzogJ01JU1NJTkdfSURTJyxcbiAgICBDT05URU5UX1NJWkVfUkVTVUxUOiAnQ09OVEVOVF9TSVpFX1JFU1VMVCcsXG59O1xuY29uc3QgQjJQID0ge1xuICAgIEFDVElWRV9UQUJfQ0hBTkdFRDogJ0FDVElWRV9UQUJfQ0hBTkdFRCcsXG59O1xuZXhwb3J0IGNvbnN0IE1TR19UWVBFID0geyAuLi5QMkMsIC4uLkMyUCwgLi4uQjJQIH07XG5leHBvcnQgZnVuY3Rpb24gaXNSZXNwb25zZShtc2cpIHtcbiAgICByZXR1cm4gdHlwZW9mIG1zZyA9PT0gJ29iamVjdCcgJiYgbXNnICE9PSBudWxsICYmICdpZCcgaW4gbXNnICYmICdvaycgaW4gbXNnO1xufVxuIiwiLy8gTGljZW5zZTogTUlUXG4vLyBBdXRob3I6IEFudG9uIE1lZHZlZGV2IDxhbnRvbkBtZWR2LmlvPlxuLy8gU291cmNlOiBodHRwczovL2dpdGh1Yi5jb20vYW50b25tZWR2L2ZpbmRlclxuY29uc3QgYWNjZXB0ZWRBdHRyTmFtZXMgPSBuZXcgU2V0KFsncm9sZScsICduYW1lJywgJ2FyaWEtbGFiZWwnLCAncmVsJywgJ2hyZWYnXSk7XG4vKiogQ2hlY2sgaWYgYXR0cmlidXRlIG5hbWUgYW5kIHZhbHVlIGFyZSB3b3JkLWxpa2UuICovXG5leHBvcnQgZnVuY3Rpb24gYXR0cihuYW1lLCB2YWx1ZSkge1xuICAgIGxldCBuYW1lSXNPayA9IGFjY2VwdGVkQXR0ck5hbWVzLmhhcyhuYW1lKTtcbiAgICBuYW1lSXNPayB8fD0gbmFtZS5zdGFydHNXaXRoKCdkYXRhLScpICYmIHdvcmRMaWtlKG5hbWUpO1xuICAgIGxldCB2YWx1ZUlzT2sgPSB3b3JkTGlrZSh2YWx1ZSkgJiYgdmFsdWUubGVuZ3RoIDwgMTAwO1xuICAgIHZhbHVlSXNPayB8fD0gdmFsdWUuc3RhcnRzV2l0aCgnIycpICYmIHdvcmRMaWtlKHZhbHVlLnNsaWNlKDEpKTtcbiAgICByZXR1cm4gbmFtZUlzT2sgJiYgdmFsdWVJc09rO1xufVxuLyoqIENoZWNrIGlmIGlkIG5hbWUgaXMgd29yZC1saWtlLiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlkTmFtZShuYW1lKSB7XG4gICAgcmV0dXJuIHdvcmRMaWtlKG5hbWUpO1xufVxuLyoqIENoZWNrIGlmIGNsYXNzIG5hbWUgaXMgd29yZC1saWtlLiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsYXNzTmFtZShuYW1lKSB7XG4gICAgcmV0dXJuIHdvcmRMaWtlKG5hbWUpO1xufVxuLyoqIENoZWNrIGlmIHRhZyBuYW1lIGlzIHdvcmQtbGlrZS4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0YWdOYW1lKG5hbWUpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbn1cbi8qKiBGaW5kcyB1bmlxdWUgQ1NTIHNlbGVjdG9ycyBmb3IgdGhlIGdpdmVuIGVsZW1lbnQuICovXG5leHBvcnQgZnVuY3Rpb24gZmluZGVyKGlucHV0LCBvcHRpb25zKSB7XG4gICAgaWYgKGlucHV0Lm5vZGVUeXBlICE9PSBOb2RlLkVMRU1FTlRfTk9ERSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbid0IGdlbmVyYXRlIENTUyBzZWxlY3RvciBmb3Igbm9uLWVsZW1lbnQgbm9kZSB0eXBlLmApO1xuICAgIH1cbiAgICBpZiAoaW5wdXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnaHRtbCcpIHtcbiAgICAgICAgcmV0dXJuICdodG1sJztcbiAgICB9XG4gICAgY29uc3QgZGVmYXVsdHMgPSB7XG4gICAgICAgIHJvb3Q6IGRvY3VtZW50LmJvZHksXG4gICAgICAgIGlkTmFtZTogaWROYW1lLFxuICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSxcbiAgICAgICAgdGFnTmFtZTogdGFnTmFtZSxcbiAgICAgICAgYXR0cjogYXR0cixcbiAgICAgICAgdGltZW91dE1zOiAxMDAwLFxuICAgICAgICBzZWVkTWluTGVuZ3RoOiAzLFxuICAgICAgICBvcHRpbWl6ZWRNaW5MZW5ndGg6IDIsXG4gICAgICAgIG1heE51bWJlck9mUGF0aENoZWNrczogSW5maW5pdHksXG4gICAgfTtcbiAgICBjb25zdCBzdGFydFRpbWUgPSBuZXcgRGF0ZSgpO1xuICAgIGNvbnN0IGNvbmZpZyA9IHsgLi4uZGVmYXVsdHMsIC4uLm9wdGlvbnMgfTtcbiAgICBjb25zdCByb290RG9jdW1lbnQgPSBmaW5kUm9vdERvY3VtZW50KGNvbmZpZy5yb290LCBkZWZhdWx0cyk7XG4gICAgbGV0IGZvdW5kUGF0aDtcbiAgICBsZXQgY291bnQgPSAwO1xuICAgIGZvciAoY29uc3QgY2FuZGlkYXRlIG9mIHNlYXJjaChpbnB1dCwgY29uZmlnLCByb290RG9jdW1lbnQpKSB7XG4gICAgICAgIGNvbnN0IGVsYXBzZWRUaW1lTXMgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIHN0YXJ0VGltZS5nZXRUaW1lKCk7XG4gICAgICAgIGlmIChlbGFwc2VkVGltZU1zID4gY29uZmlnLnRpbWVvdXRNcyB8fFxuICAgICAgICAgICAgY291bnQgPj0gY29uZmlnLm1heE51bWJlck9mUGF0aENoZWNrcykge1xuICAgICAgICAgICAgY29uc3QgZlBhdGggPSBmYWxsYmFjayhpbnB1dCwgcm9vdERvY3VtZW50KTtcbiAgICAgICAgICAgIGlmICghZlBhdGgpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFRpbWVvdXQ6IENhbid0IGZpbmQgYSB1bmlxdWUgc2VsZWN0b3IgYWZ0ZXIgJHtjb25maWcudGltZW91dE1zfW1zYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc2VsZWN0b3IoZlBhdGgpO1xuICAgICAgICB9XG4gICAgICAgIGNvdW50Kys7XG4gICAgICAgIGlmICh1bmlxdWUoY2FuZGlkYXRlLCByb290RG9jdW1lbnQpKSB7XG4gICAgICAgICAgICBmb3VuZFBhdGggPSBjYW5kaWRhdGU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoIWZvdW5kUGF0aCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFNlbGVjdG9yIHdhcyBub3QgZm91bmQuYCk7XG4gICAgfVxuICAgIGNvbnN0IG9wdGltaXplZCA9IFtcbiAgICAgICAgLi4ub3B0aW1pemUoZm91bmRQYXRoLCBpbnB1dCwgY29uZmlnLCByb290RG9jdW1lbnQsIHN0YXJ0VGltZSksXG4gICAgXTtcbiAgICBvcHRpbWl6ZWQuc29ydChieVBlbmFsdHkpO1xuICAgIGlmIChvcHRpbWl6ZWQubGVuZ3RoID4gMCkge1xuICAgICAgICByZXR1cm4gc2VsZWN0b3Iob3B0aW1pemVkWzBdKTtcbiAgICB9XG4gICAgcmV0dXJuIHNlbGVjdG9yKGZvdW5kUGF0aCk7XG59XG5mdW5jdGlvbiogc2VhcmNoKGlucHV0LCBjb25maWcsIHJvb3REb2N1bWVudCkge1xuICAgIGNvbnN0IHN0YWNrID0gW107XG4gICAgbGV0IHBhdGhzID0gW107XG4gICAgbGV0IGN1cnJlbnQgPSBpbnB1dDtcbiAgICBsZXQgaSA9IDA7XG4gICAgd2hpbGUgKGN1cnJlbnQgJiYgY3VycmVudCAhPT0gcm9vdERvY3VtZW50KSB7XG4gICAgICAgIGNvbnN0IGxldmVsID0gdGllKGN1cnJlbnQsIGNvbmZpZyk7XG4gICAgICAgIGZvciAoY29uc3Qgbm9kZSBvZiBsZXZlbCkge1xuICAgICAgICAgICAgbm9kZS5sZXZlbCA9IGk7XG4gICAgICAgIH1cbiAgICAgICAgc3RhY2sucHVzaChsZXZlbCk7XG4gICAgICAgIGN1cnJlbnQgPSBjdXJyZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgIGkrKztcbiAgICAgICAgcGF0aHMucHVzaCguLi5jb21iaW5hdGlvbnMoc3RhY2spKTtcbiAgICAgICAgaWYgKGkgPj0gY29uZmlnLnNlZWRNaW5MZW5ndGgpIHtcbiAgICAgICAgICAgIHBhdGhzLnNvcnQoYnlQZW5hbHR5KTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgY2FuZGlkYXRlIG9mIHBhdGhzKSB7XG4gICAgICAgICAgICAgICAgeWllbGQgY2FuZGlkYXRlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGF0aHMgPSBbXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwYXRocy5zb3J0KGJ5UGVuYWx0eSk7XG4gICAgZm9yIChjb25zdCBjYW5kaWRhdGUgb2YgcGF0aHMpIHtcbiAgICAgICAgeWllbGQgY2FuZGlkYXRlO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHdvcmRMaWtlKG5hbWUpIHtcbiAgICBpZiAoL15bYS16XFwtXXszLH0kL2kudGVzdChuYW1lKSkge1xuICAgICAgICBjb25zdCB3b3JkcyA9IG5hbWUuc3BsaXQoLy18W0EtWl0vKTtcbiAgICAgICAgZm9yIChjb25zdCB3b3JkIG9mIHdvcmRzKSB7XG4gICAgICAgICAgICBpZiAod29yZC5sZW5ndGggPD0gMikge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgvW15hZWlvdV17NCx9L2kudGVzdCh3b3JkKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gdGllKGVsZW1lbnQsIGNvbmZpZykge1xuICAgIGNvbnN0IGxldmVsID0gW107XG4gICAgY29uc3QgZWxlbWVudElkID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2lkJyk7XG4gICAgaWYgKGVsZW1lbnRJZCAmJiBjb25maWcuaWROYW1lKGVsZW1lbnRJZCkpIHtcbiAgICAgICAgbGV2ZWwucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiAnIycgKyBDU1MuZXNjYXBlKGVsZW1lbnRJZCksXG4gICAgICAgICAgICBwZW5hbHR5OiAwLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbGVtZW50LmNsYXNzTGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBuYW1lID0gZWxlbWVudC5jbGFzc0xpc3RbaV07XG4gICAgICAgIGlmIChjb25maWcuY2xhc3NOYW1lKG5hbWUpKSB7XG4gICAgICAgICAgICBsZXZlbC5wdXNoKHtcbiAgICAgICAgICAgICAgICBuYW1lOiAnLicgKyBDU1MuZXNjYXBlKG5hbWUpLFxuICAgICAgICAgICAgICAgIHBlbmFsdHk6IDEsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVsZW1lbnQuYXR0cmlidXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBhdHRyID0gZWxlbWVudC5hdHRyaWJ1dGVzW2ldO1xuICAgICAgICBpZiAoY29uZmlnLmF0dHIoYXR0ci5uYW1lLCBhdHRyLnZhbHVlKSkge1xuICAgICAgICAgICAgbGV2ZWwucHVzaCh7XG4gICAgICAgICAgICAgICAgbmFtZTogYFske0NTUy5lc2NhcGUoYXR0ci5uYW1lKX09XCIke0NTUy5lc2NhcGUoYXR0ci52YWx1ZSl9XCJdYCxcbiAgICAgICAgICAgICAgICBwZW5hbHR5OiAyLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgdGFnTmFtZSA9IGVsZW1lbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgIGlmIChjb25maWcudGFnTmFtZSh0YWdOYW1lKSkge1xuICAgICAgICBsZXZlbC5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6IHRhZ05hbWUsXG4gICAgICAgICAgICBwZW5hbHR5OiA1LFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgaW5kZXggPSBpbmRleE9mKGVsZW1lbnQsIHRhZ05hbWUpO1xuICAgICAgICBpZiAoaW5kZXggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbGV2ZWwucHVzaCh7XG4gICAgICAgICAgICAgICAgbmFtZTogbnRoT2ZUeXBlKHRhZ05hbWUsIGluZGV4KSxcbiAgICAgICAgICAgICAgICBwZW5hbHR5OiAxMCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IG50aCA9IGluZGV4T2YoZWxlbWVudCk7XG4gICAgaWYgKG50aCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGxldmVsLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogbnRoQ2hpbGQodGFnTmFtZSwgbnRoKSxcbiAgICAgICAgICAgIHBlbmFsdHk6IDUwLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGxldmVsO1xufVxuZnVuY3Rpb24gc2VsZWN0b3IocGF0aCkge1xuICAgIGxldCBub2RlID0gcGF0aFswXTtcbiAgICBsZXQgcXVlcnkgPSBub2RlLm5hbWU7XG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCBwYXRoLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGxldmVsID0gcGF0aFtpXS5sZXZlbCB8fCAwO1xuICAgICAgICBpZiAobm9kZS5sZXZlbCA9PT0gbGV2ZWwgLSAxKSB7XG4gICAgICAgICAgICBxdWVyeSA9IGAke3BhdGhbaV0ubmFtZX0gPiAke3F1ZXJ5fWA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBxdWVyeSA9IGAke3BhdGhbaV0ubmFtZX0gJHtxdWVyeX1gO1xuICAgICAgICB9XG4gICAgICAgIG5vZGUgPSBwYXRoW2ldO1xuICAgIH1cbiAgICByZXR1cm4gcXVlcnk7XG59XG5mdW5jdGlvbiBwZW5hbHR5KHBhdGgpIHtcbiAgICByZXR1cm4gcGF0aC5tYXAoKG5vZGUpID0+IG5vZGUucGVuYWx0eSkucmVkdWNlKChhY2MsIGkpID0+IGFjYyArIGksIDApO1xufVxuZnVuY3Rpb24gYnlQZW5hbHR5KGEsIGIpIHtcbiAgICByZXR1cm4gcGVuYWx0eShhKSAtIHBlbmFsdHkoYik7XG59XG5mdW5jdGlvbiBpbmRleE9mKGlucHV0LCB0YWdOYW1lKSB7XG4gICAgY29uc3QgcGFyZW50ID0gaW5wdXQucGFyZW50Tm9kZTtcbiAgICBpZiAoIXBhcmVudCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBsZXQgY2hpbGQgPSBwYXJlbnQuZmlyc3RDaGlsZDtcbiAgICBpZiAoIWNoaWxkKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGxldCBpID0gMDtcbiAgICB3aGlsZSAoY2hpbGQpIHtcbiAgICAgICAgaWYgKGNoaWxkLm5vZGVUeXBlID09PSBOb2RlLkVMRU1FTlRfTk9ERSAmJlxuICAgICAgICAgICAgKHRhZ05hbWUgPT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgICAgIGNoaWxkLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gdGFnTmFtZSkpIHtcbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2hpbGQgPT09IGlucHV0KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjaGlsZCA9IGNoaWxkLm5leHRTaWJsaW5nO1xuICAgIH1cbiAgICByZXR1cm4gaTtcbn1cbmZ1bmN0aW9uIGZhbGxiYWNrKGlucHV0LCByb290RG9jdW1lbnQpIHtcbiAgICBsZXQgaSA9IDA7XG4gICAgbGV0IGN1cnJlbnQgPSBpbnB1dDtcbiAgICBjb25zdCBwYXRoID0gW107XG4gICAgd2hpbGUgKGN1cnJlbnQgJiYgY3VycmVudCAhPT0gcm9vdERvY3VtZW50KSB7XG4gICAgICAgIGNvbnN0IHRhZ05hbWUgPSBjdXJyZW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgY29uc3QgaW5kZXggPSBpbmRleE9mKGN1cnJlbnQsIHRhZ05hbWUpO1xuICAgICAgICBpZiAoaW5kZXggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHBhdGgucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBudGhPZlR5cGUodGFnTmFtZSwgaW5kZXgpLFxuICAgICAgICAgICAgcGVuYWx0eTogTmFOLFxuICAgICAgICAgICAgbGV2ZWw6IGksXG4gICAgICAgIH0pO1xuICAgICAgICBjdXJyZW50ID0gY3VycmVudC5wYXJlbnRFbGVtZW50O1xuICAgICAgICBpKys7XG4gICAgfVxuICAgIGlmICh1bmlxdWUocGF0aCwgcm9vdERvY3VtZW50KSkge1xuICAgICAgICByZXR1cm4gcGF0aDtcbiAgICB9XG59XG5mdW5jdGlvbiBudGhDaGlsZCh0YWdOYW1lLCBpbmRleCkge1xuICAgIGlmICh0YWdOYW1lID09PSAnaHRtbCcpIHtcbiAgICAgICAgcmV0dXJuICdodG1sJztcbiAgICB9XG4gICAgcmV0dXJuIGAke3RhZ05hbWV9Om50aC1jaGlsZCgke2luZGV4fSlgO1xufVxuZnVuY3Rpb24gbnRoT2ZUeXBlKHRhZ05hbWUsIGluZGV4KSB7XG4gICAgaWYgKHRhZ05hbWUgPT09ICdodG1sJykge1xuICAgICAgICByZXR1cm4gJ2h0bWwnO1xuICAgIH1cbiAgICByZXR1cm4gYCR7dGFnTmFtZX06bnRoLW9mLXR5cGUoJHtpbmRleH0pYDtcbn1cbmZ1bmN0aW9uKiBjb21iaW5hdGlvbnMoc3RhY2ssIHBhdGggPSBbXSkge1xuICAgIGlmIChzdGFjay5sZW5ndGggPiAwKSB7XG4gICAgICAgIGZvciAobGV0IG5vZGUgb2Ygc3RhY2tbMF0pIHtcbiAgICAgICAgICAgIHlpZWxkKiBjb21iaW5hdGlvbnMoc3RhY2suc2xpY2UoMSwgc3RhY2subGVuZ3RoKSwgcGF0aC5jb25jYXQobm9kZSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB5aWVsZCBwYXRoO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGZpbmRSb290RG9jdW1lbnQocm9vdE5vZGUsIGRlZmF1bHRzKSB7XG4gICAgaWYgKHJvb3ROb2RlLm5vZGVUeXBlID09PSBOb2RlLkRPQ1VNRU5UX05PREUpIHtcbiAgICAgICAgcmV0dXJuIHJvb3ROb2RlO1xuICAgIH1cbiAgICBpZiAocm9vdE5vZGUgPT09IGRlZmF1bHRzLnJvb3QpIHtcbiAgICAgICAgcmV0dXJuIHJvb3ROb2RlLm93bmVyRG9jdW1lbnQ7XG4gICAgfVxuICAgIHJldHVybiByb290Tm9kZTtcbn1cbmZ1bmN0aW9uIHVuaXF1ZShwYXRoLCByb290RG9jdW1lbnQpIHtcbiAgICBjb25zdCBjc3MgPSBzZWxlY3RvcihwYXRoKTtcbiAgICBzd2l0Y2ggKHJvb3REb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNzcykubGVuZ3RoKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2FuJ3Qgc2VsZWN0IGFueSBub2RlIHdpdGggdGhpcyBzZWxlY3RvcjogJHtjc3N9YCk7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cbmZ1bmN0aW9uKiBvcHRpbWl6ZShwYXRoLCBpbnB1dCwgY29uZmlnLCByb290RG9jdW1lbnQsIHN0YXJ0VGltZSkge1xuICAgIGlmIChwYXRoLmxlbmd0aCA+IDIgJiYgcGF0aC5sZW5ndGggPiBjb25maWcub3B0aW1pemVkTWluTGVuZ3RoKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgcGF0aC5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGVsYXBzZWRUaW1lTXMgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIHN0YXJ0VGltZS5nZXRUaW1lKCk7XG4gICAgICAgICAgICBpZiAoZWxhcHNlZFRpbWVNcyA+IGNvbmZpZy50aW1lb3V0TXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBuZXdQYXRoID0gWy4uLnBhdGhdO1xuICAgICAgICAgICAgbmV3UGF0aC5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICBpZiAodW5pcXVlKG5ld1BhdGgsIHJvb3REb2N1bWVudCkgJiZcbiAgICAgICAgICAgICAgICByb290RG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcihuZXdQYXRoKSkgPT09IGlucHV0KSB7XG4gICAgICAgICAgICAgICAgeWllbGQgbmV3UGF0aDtcbiAgICAgICAgICAgICAgICB5aWVsZCogb3B0aW1pemUobmV3UGF0aCwgaW5wdXQsIGNvbmZpZywgcm9vdERvY3VtZW50LCBzdGFydFRpbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuIiwiLyoqXG4gKiBAc3VtbWFyeSBUeXBlIGd1YXJkIHRvIGVuc3VyZSB0aGUgcHJvdmlkZWQgZWxlbWVudCBpcyBhbiBIVE1MRWxlbWVudC5cbiAqIEBwYXJhbSBlbCBUaGUgZWxlbWVudCB0byBjaGVjay5cbiAqIEByZXR1cm5zIFRydWUgaWYgdGhlIGVsZW1lbnQgaXMgYW4gSFRNTEVsZW1lbnQ7IG90aGVyd2lzZSwgZmFsc2UuXG4gKi9cbmZ1bmN0aW9uIGlzSFRNTEVsZW1lbnQoZWwpIHtcbiAgICByZXR1cm4gZWwgaW5zdGFuY2VvZiBIVE1MRWxlbWVudDtcbn1cbi8qKlxuICogQHN1bW1hcnkgR2V0cyB0aGUgaG9yaXpvbnRhbCBwYWdlIG9mZnNldCBpbiBDU1MgcGl4ZWxzLCBwcmVmZXJyaW5nIHZpc3VhbFZpZXdwb3J0IHdoZW4gYXZhaWxhYmxlLlxuICogQHJldHVybnMgVGhlIGhvcml6b250YWwgcGFnZSBvZmZzZXQgKENTUyBwaXhlbHMpLlxuICovXG5mdW5jdGlvbiBwYWdlT2Zmc2V0WCgpIHtcbiAgICAvLyBQcmVmZXIgdmlzdWFsVmlld3BvcnQgZm9yIHBpbmNoLXpvb20gc2NlbmFyaW9zOyBvZnRlbiBlcXVhbHMgd2luZG93LnNjcm9sbFggb24gZGVza3RvcC5cbiAgICByZXR1cm4gKHdpbmRvdy52aXN1YWxWaWV3cG9ydD8ucGFnZUxlZnQgPz8gd2luZG93LnNjcm9sbFgpIHx8IDA7XG59XG4vKipcbiAqIEBzdW1tYXJ5IEdldHMgdGhlIHZlcnRpY2FsIHBhZ2Ugb2Zmc2V0IGluIENTUyBwaXhlbHMsIHByZWZlcnJpbmcgdmlzdWFsVmlld3BvcnQgd2hlbiBhdmFpbGFibGUuXG4gKiBAcmV0dXJucyBUaGUgdmVydGljYWwgcGFnZSBvZmZzZXQgKENTUyBwaXhlbHMpLlxuICovXG5mdW5jdGlvbiBwYWdlT2Zmc2V0WSgpIHtcbiAgICAvLyBQcmVmZXIgdmlzdWFsVmlld3BvcnQgZm9yIHBpbmNoLXpvb20gc2NlbmFyaW9zOyBvZnRlbiBlcXVhbHMgd2luZG93LnNjcm9sbFkgb24gZGVza3RvcC5cbiAgICByZXR1cm4gKHdpbmRvdy52aXN1YWxWaWV3cG9ydD8ucGFnZVRvcCA/PyB3aW5kb3cuc2Nyb2xsWSkgfHwgMDtcbn1cbi8qKlxuICogQHN1bW1hcnkgTWVhc3VyZXMgdGhlIG1heGltdW0gcmVuZGVyZWQgY29udGVudCBhcmVhIG9mIHRoZSBwYWdlIGluIENTUyBwaXhlbHMsIGNvbnNpZGVyaW5nXG4gKiBzY3JvbGwgY29udGFpbmVycyAoZS5nLiwgb3ZlcmZsb3dlZCA8bWFpbj4pLCBmaXhlZC9hYnNvbHV0ZS90cmFuc2Zvcm0gbGF5b3V0cywgYW5kIG5lZ2F0aXZlIG92ZXJmbG93LlxuICogQWxzbyByZXR1cm5zIHJvdWdoIHNlbGVjdG9ycyBmb3IgdGhlIGVsZW1lbnRzIGNvbnRyaWJ1dGluZyB0byB3aWR0aC9oZWlnaHQuXG4gKiBAcmV0dXJucyBBIENvbnRlbnRTaXplIG9iamVjdCBjb250YWluaW5nIHdpZHRoLCBoZWlnaHQsIGFuZCBzZWxlY3RvciBoaW50cyAod2lkZXN0QnksIHRhbGxlc3RCeSkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtZWFzdXJlQ29udGVudFNpemUoKSB7XG4gICAgY29uc3QgZG9jRWwgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG4gICAgY29uc3QgYm9keSA9IGRvY3VtZW50LmJvZHkgPz8gbnVsbDtcbiAgICBjb25zdCBzZSA9IGRvY3VtZW50LnNjcm9sbGluZ0VsZW1lbnQgPz8gbnVsbDtcbiAgICAvLyBCYXNlbGluZSBzaXplcyBmcm9tIGRvY3VtZW50L2JvZHkvc2Nyb2xsaW5nRWxlbWVudCAoc2l6ZSBtZXRyaWNzIG9ubHkpLlxuICAgIGNvbnN0IGJhc2VXID0gTWF0aC5tYXgoZG9jRWwuc2Nyb2xsV2lkdGgsIGRvY0VsLm9mZnNldFdpZHRoLCBkb2NFbC5jbGllbnRXaWR0aCwgYm9keT8uc2Nyb2xsV2lkdGggPz8gMCwgYm9keT8ub2Zmc2V0V2lkdGggPz8gMCwgYm9keT8uY2xpZW50V2lkdGggPz8gMCwgc2U/LnNjcm9sbFdpZHRoID8/IDAsIHNlPy5vZmZzZXRXaWR0aCA/PyAwLCBzZT8uY2xpZW50V2lkdGggPz8gMCk7XG4gICAgY29uc3QgYmFzZUggPSBNYXRoLm1heChkb2NFbC5zY3JvbGxIZWlnaHQsIGRvY0VsLm9mZnNldEhlaWdodCwgZG9jRWwuY2xpZW50SGVpZ2h0LCBib2R5Py5zY3JvbGxIZWlnaHQgPz8gMCwgYm9keT8ub2Zmc2V0SGVpZ2h0ID8/IDAsIGJvZHk/LmNsaWVudEhlaWdodCA/PyAwLCBzZT8uc2Nyb2xsSGVpZ2h0ID8/IDAsIHNlPy5vZmZzZXRIZWlnaHQgPz8gMCwgc2U/LmNsaWVudEhlaWdodCA/PyAwKTtcbiAgICAvLyBBZ2dyZWdhdGUgZWxlbWVudCBwb3NpdGlvbnMgKHZpc3VhbCBib3VuZGluZyBib3gpIGFuZCBzaXplcyAoc2Nyb2xsIHRvdGFscykgc2VwYXJhdGVseS5cbiAgICBsZXQgbWluTGVmdCA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTtcbiAgICBsZXQgbWluVG9wID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZO1xuICAgIGxldCBtYXhSaWdodCA9IE51bWJlci5ORUdBVElWRV9JTkZJTklUWTtcbiAgICBsZXQgbWF4Qm90dG9tID0gTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZO1xuICAgIGxldCBtYXhTY3JvbGxXID0gMDtcbiAgICBsZXQgbWF4U2Nyb2xsSCA9IDA7XG4gICAgY29uc3Qgb2ZmWCA9IHBhZ2VPZmZzZXRYKCk7XG4gICAgY29uc3Qgb2ZmWSA9IHBhZ2VPZmZzZXRZKCk7XG4gICAgY29uc3QgZWxlbWVudHMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyonKSkuZmlsdGVyKGlzSFRNTEVsZW1lbnQpO1xuICAgIGZvciAoY29uc3QgZWwgb2YgZWxlbWVudHMpIHtcbiAgICAgICAgLy8gU2l6ZSBtZXRyaWNzICh0b3RhbCBzY3JvbGxhYmxlIHNpemUgb2YgY29udGFpbmVycykuXG4gICAgICAgIGlmIChlbC5zY3JvbGxXaWR0aCA+IG1heFNjcm9sbFcpIHtcbiAgICAgICAgICAgIG1heFNjcm9sbFcgPSBlbC5zY3JvbGxXaWR0aDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZWwuc2Nyb2xsSGVpZ2h0ID4gbWF4U2Nyb2xsSCkge1xuICAgICAgICAgICAgbWF4U2Nyb2xsSCA9IGVsLnNjcm9sbEhlaWdodDtcbiAgICAgICAgfVxuICAgICAgICAvLyBQb3NpdGlvbiBtZXRyaWNzICh2aXN1YWwgYm91bmRzKSBub3JtYWxpemVkIHRvIHBhZ2UgY29vcmRpbmF0ZXMuXG4gICAgICAgIGNvbnN0IHIgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgY29uc3QgbGVmdCA9IHIubGVmdCArIG9mZlg7XG4gICAgICAgIGNvbnN0IHJpZ2h0ID0gci5yaWdodCArIG9mZlg7XG4gICAgICAgIGNvbnN0IHRvcCA9IHIudG9wICsgb2ZmWTtcbiAgICAgICAgY29uc3QgYm90dG9tID0gci5ib3R0b20gKyBvZmZZO1xuICAgICAgICBpZiAobGVmdCA8IG1pbkxlZnQpXG4gICAgICAgICAgICBtaW5MZWZ0ID0gbGVmdDtcbiAgICAgICAgaWYgKHRvcCA8IG1pblRvcClcbiAgICAgICAgICAgIG1pblRvcCA9IHRvcDtcbiAgICAgICAgaWYgKHJpZ2h0ID4gbWF4UmlnaHQpIHtcbiAgICAgICAgICAgIG1heFJpZ2h0ID0gcmlnaHQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGJvdHRvbSA+IG1heEJvdHRvbSkge1xuICAgICAgICAgICAgbWF4Qm90dG9tID0gYm90dG9tO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIEd1YXJkcyBmb3IgcGFnZXMgd2l0aCBubyBlbGVtZW50cy5cbiAgICBpZiAoIWlzRmluaXRlKG1pbkxlZnQpKVxuICAgICAgICBtaW5MZWZ0ID0gMDtcbiAgICBpZiAoIWlzRmluaXRlKG1pblRvcCkpXG4gICAgICAgIG1pblRvcCA9IDA7XG4gICAgaWYgKCFpc0Zpbml0ZShtYXhSaWdodCkpXG4gICAgICAgIG1heFJpZ2h0ID0gYmFzZVc7XG4gICAgaWYgKCFpc0Zpbml0ZShtYXhCb3R0b20pKVxuICAgICAgICBtYXhCb3R0b20gPSBiYXNlSDtcbiAgICAvLyBWaXN1YWwgYm91bmRpbmctYm94IHNpemUgKHBvc2l0aW9uLWJhc2VkKS5cbiAgICBjb25zdCBiYm94V2lkdGggPSBNYXRoLm1heCgwLCBNYXRoLmNlaWwobWF4UmlnaHQgLSBtaW5MZWZ0KSk7XG4gICAgY29uc3QgYmJveEhlaWdodCA9IE1hdGgubWF4KDAsIE1hdGguY2VpbChtYXhCb3R0b20gLSBtaW5Ub3ApKTtcbiAgICAvLyBGaW5hbCBzaXplOiB0aGUgbWF4aW11bSBvZiBkb2N1bWVudCBiYXNlbGluZSwgc2Nyb2xsIHRvdGFscywgYW5kIHZpc3VhbCBib3VuZHMuXG4gICAgY29uc3Qgd2lkdGggPSBNYXRoLm1heChiYXNlVywgbWF4U2Nyb2xsVywgYmJveFdpZHRoKTtcbiAgICBjb25zdCBoZWlnaHQgPSBNYXRoLm1heChiYXNlSCwgbWF4U2Nyb2xsSCwgYmJveEhlaWdodCk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgd2lkdGgsXG4gICAgICAgIGhlaWdodCxcbiAgICB9O1xufVxuIiwibGV0IHNoYWRvd1Jvb3QgPSBudWxsO1xubGV0IHJvb3RFbCA9IG51bGw7XG5jb25zdCB0cmFja2VkID0gbmV3IE1hcCgpO1xubGV0IHJhZlBlbmRpbmcgPSBmYWxzZTtcbmxldCBob3ZlcmVkSWQgPSBudWxsO1xubGV0IGxpc3RlbmVyc0F0dGFjaGVkID0gZmFsc2U7XG4vKipcbiAqIE1vdW50cyB0aGUgb24tcGFnZSBvdmVybGF5IChTaGFkb3cgRE9NKSB0aGF0IGRyYXdzIHNlbGVjdGlvbiBib3hlcy5cbiAqIEFsc28gc2V0cyB1cCBzY3JvbGwvcmVzaXplIGxpc3RlbmVycyB0byByZXNjaGVkdWxlIHBvc2l0aW9uIHVwZGF0ZXMuXG4gKlxuICogQHJlbWFya3MgSWRlbXBvdGVudDogcmVwZWF0ZWQgY2FsbHMgd29uJ3QgbW91bnQgdHdpY2UuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBtb3VudE92ZXJsYXkoKSB7XG4gICAgaWYgKHJvb3RFbCAmJiBzaGFkb3dSb290KVxuICAgICAgICByZXR1cm47XG4gICAgbGV0IGhvc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3Bzay1yb290Jyk7XG4gICAgaWYgKCFob3N0KSB7XG4gICAgICAgIGhvc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgaG9zdC5pZCA9ICdzcHNrLXJvb3QnO1xuICAgICAgICAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50IHx8IGRvY3VtZW50LmJvZHkpLmFwcGVuZENoaWxkKGhvc3QpO1xuICAgIH1cbiAgICBzaGFkb3dSb290ID0gaG9zdC5zaGFkb3dSb290ID8/IGhvc3QuYXR0YWNoU2hhZG93KHsgbW9kZTogJ29wZW4nIH0pO1xuICAgIGNvbnN0IGNzc0hyZWYgPSBjaHJvbWUucnVudGltZS5nZXRVUkwoJ3N0eWxlcy9vdmVybGF5LmNzcycpO1xuICAgIGxldCBsaW5rID0gc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKGBsaW5rW3JlbD1cInN0eWxlc2hlZXRcIl1baHJlZj1cIiR7Y3NzSHJlZn1cIl1gKTtcbiAgICBpZiAoIWxpbmspIHtcbiAgICAgICAgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpbmsnKTtcbiAgICAgICAgbGluay5yZWwgPSAnc3R5bGVzaGVldCc7XG4gICAgICAgIGxpbmsuaHJlZiA9IGNzc0hyZWY7XG4gICAgICAgIHNoYWRvd1Jvb3QuYXBwZW5kQ2hpbGQobGluayk7XG4gICAgfVxuICAgIHJvb3RFbCA9IHNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcignZGl2LnNwc2stb3ZlcmxheScpO1xuICAgIGlmICghcm9vdEVsKSB7XG4gICAgICAgIHJvb3RFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICByb290RWwuY2xhc3NOYW1lID0gJ3Nwc2stb3ZlcmxheSc7XG4gICAgICAgIHNoYWRvd1Jvb3QuYXBwZW5kQ2hpbGQocm9vdEVsKTtcbiAgICB9XG4gICAgaWYgKCFsaXN0ZW5lcnNBdHRhY2hlZCkge1xuICAgICAgICBjb25zdCBzY2hlZHVsZSA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmIChyYWZQZW5kaW5nKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHJhZlBlbmRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICAgICAgICByYWZQZW5kaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdXBkYXRlUG9zaXRpb25zKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHNjaGVkdWxlLCB7IHBhc3NpdmU6IHRydWUgfSk7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBzY2hlZHVsZSwgeyBwYXNzaXZlOiB0cnVlIH0pO1xuICAgICAgICBpZiAod2luZG93LnZpc3VhbFZpZXdwb3J0KSB7XG4gICAgICAgICAgICB3aW5kb3cudmlzdWFsVmlld3BvcnQuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgc2NoZWR1bGUsIHsgcGFzc2l2ZTogdHJ1ZSB9KTtcbiAgICAgICAgICAgIHdpbmRvdy52aXN1YWxWaWV3cG9ydC5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBzY2hlZHVsZSwgeyBwYXNzaXZlOiB0cnVlIH0pO1xuICAgICAgICB9XG4gICAgICAgIGxpc3RlbmVyc0F0dGFjaGVkID0gdHJ1ZTtcbiAgICB9XG59XG4vKipcbiAqIFJlbmRlcnMgdGhlIGdpdmVuIGl0ZW1zIGludG8gdGhlIG92ZXJsYXkuXG4gKiBBcHBsaWVzIGFkZC91cGRhdGUvcmVtb3ZlIGJ5IGRpZmZpbmcgYWdhaW5zdCBjdXJyZW50IHN0YXRlLlxuICpcbiAqIEBwYXJhbSBpdGVtcyAtIEFycmF5IG9mIFNjcmVlbkl0ZW0gdG8gZGlzcGxheVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVuZGVySXRlbXMoaXRlbXMpIHtcbiAgICBpZiAoIXJvb3RFbClcbiAgICAgICAgYXdhaXQgbW91bnRPdmVybGF5KCk7XG4gICAgaWYgKCFyb290RWwpXG4gICAgICAgIHJldHVybjtcbiAgICAvLyBEaWZmOiByZW1vdmUgZGlzYXBwZWFyZWQgaXRlbXNcbiAgICBjb25zdCBpZHMgPSBuZXcgU2V0KGl0ZW1zLm1hcCgoaSkgPT4gaS5pZCkpO1xuICAgIGZvciAoY29uc3QgW2lkLCB0XSBvZiB0cmFja2VkLmVudHJpZXMoKSkge1xuICAgICAgICBpZiAoIWlkcy5oYXMoaWQpKSB7XG4gICAgICAgICAgICB0LmJveEVsLnJlbW92ZSgpO1xuICAgICAgICAgICAgdHJhY2tlZC5kZWxldGUoaWQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIGFkZC91cGRhdGVcbiAgICBmb3IgKGNvbnN0IGl0IG9mIGl0ZW1zKSB7XG4gICAgICAgIGNvbnN0IGVudHJ5ID0gZW5zdXJlVHJhY2tlZEVudHJ5KGl0KTtcbiAgICAgICAgYXBwbHlWaXN1YWxTdGF0ZShlbnRyeSwgaXQpO1xuICAgIH1cbiAgICBhd2FpdCB3YWl0Rm9yUG9zaXRpb25zQXBwbGllZCgpO1xufVxuLyoqXG4gKiBFbnN1cmVzIGEgYFRyYWNrZWRgIGVudHJ5IGV4aXN0cyBmb3IgdGhlIGdpdmVuIHNjcmVlbiBpdGVtLlxuICogSWYgcHJlc2VudCwgcmV0dXJucyB0aGUgZXhpc3Rpbmcgb25lOyBvdGhlcndpc2UgY3JlYXRlcyBET00gbm9kZXNcbiAqIChib3gsIGJhZGdlLCBjb21tZW50KSwgcmVnaXN0ZXJzIHRoZW0sIGFuZCBhcHBlbmRzIHRvIHRoZSBvdmVybGF5IHJvb3QuXG4gKlxuICogQHBhcmFtIGl0ZW0gLSBTb3VyY2Ugc2NyZWVuIGl0ZW0gdG8gZW5zdXJlIGlzIHRyYWNrZWQuXG4gKiBAcmV0dXJucyBUaGUgZXhpc3Rpbmcgb3IgbmV3bHkgY3JlYXRlZCBgVHJhY2tlZGAgZW50cnkgZm9yIHRoZSBpdGVtLlxuICovXG5mdW5jdGlvbiBlbnN1cmVUcmFja2VkRW50cnkoaXRlbSkge1xuICAgIGNvbnN0IGV4aXN0aW5nID0gdHJhY2tlZC5nZXQoaXRlbS5pZCk7XG4gICAgaWYgKGV4aXN0aW5nKSB7XG4gICAgICAgIHJldHVybiBleGlzdGluZztcbiAgICB9XG4gICAgY29uc3QgYm94RWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb25zdCBiYWRnZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY29uc3QgY29tbWVudEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY29tbWVudEVsLmNsYXNzTmFtZSA9ICdzcHNrLWNvbW1lbnQnO1xuICAgIGJveEVsLmFwcGVuZChiYWRnZUVsLCBjb21tZW50RWwpO1xuICAgIGNvbnN0IG5ld0VudHJ5ID0ge1xuICAgICAgICBhbmNob3I6IGl0ZW0uYW5jaG9yLFxuICAgICAgICBib3hFbCxcbiAgICAgICAgYmFkZ2VFbCxcbiAgICAgICAgY29tbWVudEVsLFxuICAgICAgICBlbFJlZjogbnVsbCxcbiAgICAgICAgbWlzc2luZzogdHJ1ZSxcbiAgICB9O1xuICAgIHRyYWNrZWQuc2V0KGl0ZW0uaWQsIG5ld0VudHJ5KTtcbiAgICByb290RWwuYXBwZW5kQ2hpbGQoYm94RWwpO1xuICAgIHJldHVybiBuZXdFbnRyeTtcbn1cbi8qKlxuICogQXBwbGllcyB2aXN1YWwgc3RhdGUgKGNsYXNzZXMsIGlubGluZSBzdHlsZXMsIHRleHQpIHRvIGEgdHJhY2tlZCBlbnRyeVxuICogYmFzZWQgb24gdGhlIHByb3ZpZGVkIHNjcmVlbiBpdGVtOiBzaXplLCBjb2xvciwgc2hhcGUsIHBvc2l0aW9uLCBhbmQgY29tbWVudC5cbiAqXG4gKiBAcGFyYW0gdHJhY2tlZCAtIFRoZSB0YXJnZXQgdHJhY2tlZCBlbnRyeSB3aG9zZSBET00gbm9kZXMgd2lsbCBiZSB1cGRhdGVkLlxuICogQHBhcmFtIGl0ZW0gLSBUaGUgc291cmNlIHNjcmVlbiBpdGVtIHdob3NlIHZpc3VhbCBwcm9wZXJ0aWVzIGFyZSBhcHBsaWVkLlxuICovXG5jb25zdCBhcHBseVZpc3VhbFN0YXRlID0gKHRyYWNrZWQsIGl0ZW0pID0+IHtcbiAgICBjb25zdCBzaXplUHggPSBgJHtpdGVtLnNpemV9cHhgO1xuICAgIGNvbnN0IGNvbG9yID0gaXRlbS5jb2xvci50b0xvd2VyQ2FzZSgpO1xuICAgIHRyYWNrZWQuYW5jaG9yID0gaXRlbS5hbmNob3I7XG4gICAgdHJhY2tlZC5ib3hFbC5jbGFzc05hbWUgPSBgc3Bzay1ib3ggc3Bzay1ib3gtLSR7Y29sb3J9YDtcbiAgICB0cmFja2VkLmJveEVsLnN0eWxlLnNldFByb3BlcnR5KCctLXNwc2stYm9yZGVyLXcnLCBgJHtpdGVtLnNpemUgLyA0fXB4YCk7XG4gICAgdHJhY2tlZC5ib3hFbC5jbGFzc0xpc3QudG9nZ2xlKCdiYWRnZS1oaWRkZW4nLCBpdGVtLmxhYmVsRm9ybWF0ID09PSAnTm9uZScpO1xuICAgIHRyYWNrZWQuYm94RWwuY2xhc3NMaXN0LnRvZ2dsZSgnYm94LWhpZGRlbicsIGl0ZW0udmlzaWJsZSA9PT0gZmFsc2UpO1xuICAgIHRyYWNrZWQuYmFkZ2VFbC5jbGFzc05hbWUgPSBgc3Bzay1iYWRnZSBzcHNrLWJhZGdlLS0ke2l0ZW0uc2hhcGV9IHNwc2stYmFkZ2UtLSR7Y29sb3J9IHNwc2stYmFkZ2UtLSR7aXRlbS5wb3NpdGlvbn1gO1xuICAgIHRyYWNrZWQuYmFkZ2VFbC5zdHlsZS5mb250U2l6ZSA9IHNpemVQeDtcbiAgICB0cmFja2VkLmJhZGdlRWwudGV4dENvbnRlbnQgPSBmb3JtYXRMYWJlbChpdGVtLmxhYmVsLCBpdGVtLmxhYmVsRm9ybWF0KTtcbiAgICBpZiAoaXRlbS5jb21tZW50KSB7XG4gICAgICAgIHRyYWNrZWQuY29tbWVudEVsLnRleHRDb250ZW50ID0gaXRlbS5jb21tZW50O1xuICAgICAgICB0cmFja2VkLmNvbW1lbnRFbC5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZSc7XG4gICAgICAgIHRyYWNrZWQuY29tbWVudEVsLnN0eWxlLmZvbnRTaXplID0gc2l6ZVB4O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdHJhY2tlZC5jb21tZW50RWwudGV4dENvbnRlbnQgPSAnJztcbiAgICAgICAgdHJhY2tlZC5jb21tZW50RWwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB9XG59O1xuLyoqXG4gKiBDbGVhcnMgdGhlIG92ZXJsYXkgYW5kIGl0cyBpbnRlcm5hbCB0cmFja2luZyBzdGF0ZS5cbiAqIFJlbW92ZXMgRE9NIG5vZGVzIGFuZCByZXNldHMgdGhlIG1hcC5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNsZWFyT3ZlcmxheSgpIHtcbiAgICBpZiAoIXJvb3RFbClcbiAgICAgICAgcmV0dXJuO1xuICAgIHJvb3RFbC5pbm5lckhUTUwgPSAnJztcbiAgICB0cmFja2VkLmNsZWFyKCk7XG59XG4vKipcbiAqIFN3aXRjaGVzIHRoZSBob3ZlciBoaWdobGlnaHQgdG8gdGhlIHNwZWNpZmllZCBvdmVybGF5LlxuICpcbiAqIEBwYXJhbSBpZCAtIE92ZXJsYXkgaWRlbnRpZmllciB0byBoaWdobGlnaHQsIG9yIGBudWxsYCB0byBjbGVhciB0aGUgaGlnaGxpZ2h0LlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaGlnaGxpZ2h0T3ZlcmxheShpZCkge1xuICAgIGlmIChpZCA9PT0gaG92ZXJlZElkKVxuICAgICAgICByZXR1cm47XG4gICAgY29uc3QgcHJldiA9IGhvdmVyZWRJZDtcbiAgICBob3ZlcmVkSWQgPSBpZDtcbiAgICBpZiAocHJldiAhPSBudWxsKSB7XG4gICAgICAgIHRyYWNrZWQuZ2V0KHByZXYpPy5ib3hFbC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1ob3ZlcmVkJyk7XG4gICAgfVxuICAgIGlmIChpZCAhPSBudWxsKSB7XG4gICAgICAgIHRyYWNrZWQuZ2V0KGlkKT8uYm94RWwuY2xhc3NMaXN0LmFkZCgnaXMtaG92ZXJlZCcpO1xuICAgIH1cbn1cbi8qKlxuICogUmV0dXJucyB0aGUgSURzIG9mIHRyYWNrZWQgaXRlbXMgd2hvc2UgdGFyZ2V0IGVsZW1lbnRzIGFyZSBjdXJyZW50bHkgbWlzc2luZy5cbiAqXG4gKiBAcmV0dXJucyBBcnJheSBvZiBpdGVtIElEcyB0aGF0IGFyZSBtYXJrZWQgYXMgbWlzc2luZy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldE1pc3NpbmdJZHMoKSB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odHJhY2tlZC5lbnRyaWVzKCkpXG4gICAgICAgIC5maWx0ZXIoKFssIHRdKSA9PiB0Lm1pc3NpbmcpXG4gICAgICAgIC5tYXAoKFtpZF0pID0+IGlkKTtcbn1cbi8qKlxuICogUmVzb2x2ZXMgYW4gZWxlbWVudCBieSBDU1Mgc2VsZWN0b3IgdXNpbmcgcXVlcnlTZWxlY3Rvci5cbiAqXG4gKiBAcGFyYW0gY3NzU2VsZWN0b3IgLSBDU1Mgc2VsZWN0b3IgdG8gcXVlcnlcbiAqIEByZXR1cm5zIFRoZSBmaXJzdCBtYXRjaGluZyBlbGVtZW50IG9yIG51bGxcbiAqL1xuZnVuY3Rpb24gcmVzb2x2ZUVsZW1lbnQoY3NzU2VsZWN0b3IpIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjc3NTZWxlY3Rvcik7XG4gICAgfVxuICAgIGNhdGNoIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuLyoqXG4gKiBXYWl0cyBmb3IgdGhlIG5leHQgYW5pbWF0aW9uIGZyYW1lIGFuZCBhcHBsaWVzIGEgc2luZ2xlIGxheW91dCB1cGRhdGUuXG4gKlxuICogQHJldHVybnMgVGhpcyBndWFyYW50ZWVzIG9yZGVyaW5nIG9mIHRoZSB1cGRhdGUsIG5vdCB0aGUgdmlzdWFsIHBhaW50IGl0c2VsZi5cbiAqL1xuZnVuY3Rpb24gd2FpdEZvclBvc2l0aW9uc0FwcGxpZWQoKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgICB1cGRhdGVQb3NpdGlvbnMoKTtcbiAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG4vKipcbiAqIFVwZGF0ZXMgcG9zaXRpb25zIGFuZCBzaXplcyBvZiBhbGwgdHJhY2tlZCBib3hlcyB0byBtYXRjaCB0aGUgbGF0ZXN0IGxheW91dC5cbiAqIEhpZGVzIGJveGVzIHRlbXBvcmFyaWx5IHdoZW4gdGhlaXIgdGFyZ2V0IGVsZW1lbnRzIGFyZSBub3QgZm91bmQuXG4gKlxuICogQHJlbWFya3MgSW50ZW5kZWQgdG8gYmUgY2FsbGVkIGZyb20gcmVxdWVzdEFuaW1hdGlvbkZyYW1lLlxuICovXG5mdW5jdGlvbiB1cGRhdGVQb3NpdGlvbnMoKSB7XG4gICAgZm9yIChjb25zdCBbXywgdF0gb2YgdHJhY2tlZC5lbnRyaWVzKCkpIHtcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGV4aXN0aW5nIHJlZmVyZW5jZSBpcyBzdGlsbCBhbGl2ZVxuICAgICAgICBjb25zdCBlbCA9IHJlc29sdmVFbGVtZW50KHQuYW5jaG9yLnZhbHVlKTtcbiAgICAgICAgdC5lbFJlZiA9IGVsID8gbmV3IFdlYWtSZWYoZWwpIDogbnVsbDtcbiAgICAgICAgaWYgKCFlbCkge1xuICAgICAgICAgICAgLy8gTG9zdDogaGlkZSB0aGUgYm94IChhZGp1c3Qgc3R5bGVzIGhlcmUgaWYgeW91IHdhbnQgYSBmYWludCBwbGFjZWhvbGRlcilcbiAgICAgICAgICAgIHQuYm94RWwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIHQubWlzc2luZyA9IHRydWU7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHQuYm94RWwuc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICAgICAgdC5taXNzaW5nID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgciA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAvLyBUaGUgb3ZlcmxheSBpcyBmaXhlZC1wb3NpdGlvbmVkLCBzbyBhcHBseSB2aWV3cG9ydCBjb29yZGluYXRlcyBhcy1pc1xuICAgICAgICB0LmJveEVsLnN0eWxlLmxlZnQgPSBgJHtyLmxlZnR9cHhgO1xuICAgICAgICB0LmJveEVsLnN0eWxlLnRvcCA9IGAke3IudG9wfXB4YDtcbiAgICAgICAgdC5ib3hFbC5zdHlsZS53aWR0aCA9IGAke3Iud2lkdGh9cHhgO1xuICAgICAgICB0LmJveEVsLnN0eWxlLmhlaWdodCA9IGAke3IuaGVpZ2h0fXB4YDtcbiAgICB9XG59XG4vKipcbiAqIEZvcm1hdHMgYSBsYWJlbCBhY2NvcmRpbmcgdG8gdGhlIGdpdmVuIGZvcm1hdCBvcHRpb24uXG4gKlxuICogQHBhcmFtIGxhYmVsIC0gQSBub24tbmVnYXRpdmUgaW50ZWdlciBsYWJlbCAoZS5nLiwgMSwgMi4uLikuXG4gKiBAcGFyYW0gZm10IC0gTGFiZWwgZm9ybWF0IHN0cmF0ZWd5OyBkZWZhdWx0cyB0byBgJ051bWJlcnMnYC5cbiAqIEByZXR1cm5zIFRoZSBmb3JtYXR0ZWQgbGFiZWwgc3RyaW5nLCBvciBgbnVsbGAgd2hlbiB0aGUgZm9ybWF0IGlzIGAnTm9uZSdgLlxuICovXG5mdW5jdGlvbiBmb3JtYXRMYWJlbChsYWJlbCwgZm10ID0gJ051bWJlcnMnKSB7XG4gICAgaWYgKGxhYmVsIDwgMClcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdsYWJlbCBtdXN0IGJlID49IDAnKTtcbiAgICBzd2l0Y2ggKGZtdCkge1xuICAgICAgICBjYXNlICdVcHBlckFscGhhJzpcbiAgICAgICAgICAgIHJldHVybiB0b0FscGhhKGxhYmVsKS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICBjYXNlICdMb3dlckFscGhhJzpcbiAgICAgICAgICAgIHJldHVybiB0b0FscGhhKGxhYmVsKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBjYXNlICdOb25lJzpcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBjYXNlICdOdW1iZXJzJzpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBTdHJpbmcobGFiZWwpO1xuICAgIH1cbn1cbi8qKlxuICogQ29udmVydHMgYSBwb3NpdGl2ZSAxLWJhc2VkIGxhYmVsIG51bWJlciBpbnRvIGFuIEV4Y2VsLXN0eWxlIGFscGhhYmV0aWMgY29kZS5cbiAqIEV4YW1wbGU6IDEg4oaSIEEsIDI2IOKGkiBaLCAyNyDihpIgQUEuXG4gKlxuICogQHBhcmFtIGxhYmVsIC0gQSBwb3NpdGl2ZSBpbnRlZ2VyIHdoZXJlIDEgbWFwcyB0byAnQScuXG4gKiBAcmV0dXJucyBUaGUgYWxwaGFiZXRpYyByZXByZXNlbnRhdGlvbiAoQSwgQiwgLi4uLCBaLCBBQSwgQUIsIC4uLikuXG4gKi9cbmZ1bmN0aW9uIHRvQWxwaGEobGFiZWwpIHtcbiAgICBsZXQgbiA9IGxhYmVsIC0gMTsgLy8gTm9ybWFsaXplIHRvIDAtYmFzZWRcbiAgICBsZXQgcyA9ICcnO1xuICAgIHdoaWxlIChuID49IDApIHtcbiAgICAgICAgY29uc3QgciA9IG4gJSAyNjsgLy8gUmFuZ2U6IDAuLjI1XG4gICAgICAgIHMgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDY1ICsgcikgKyBzOyAvLyAnQScgKyByXG4gICAgICAgIG4gPSBNYXRoLmZsb29yKG4gLyAyNikgLSAxOyAvLyBFeGNlbC1zdHlsZSBjYXJyeVxuICAgIH1cbiAgICByZXR1cm4gcztcbn1cbiIsImltcG9ydCB7IGlzUGFuZWxDb250ZW50UG9ydCB9IGZyb20gJ0Bjb21tb24vY29uc3RhbnRzJztcbmltcG9ydCB7IE1TR19UWVBFIH0gZnJvbSAnQGNvbW1vbi9tZXNzYWdlcyc7XG5pbXBvcnQgeyBidWlsZENzc0FuY2hvciB9IGZyb20gJy4vYW5jaG9yJztcbmltcG9ydCB7IG1lYXN1cmVDb250ZW50U2l6ZSB9IGZyb20gJy4vbWVhc3VyZSc7XG5pbXBvcnQgeyBjbGVhck92ZXJsYXksIGdldE1pc3NpbmdJZHMsIGhpZ2hsaWdodE92ZXJsYXksIG1vdW50T3ZlcmxheSwgcmVuZGVySXRlbXMsIH0gZnJvbSAnLi9vdmVybGF5JztcbmltcG9ydCB7IFNlbGVjdG9yIH0gZnJvbSAnLi9zZWxlY3Rvcic7XG5jb25zdCBzZWxlY3Rpb24gPSBuZXcgU2VsZWN0b3Iob25QaWNrKTtcbmxldCBwb3J0ID0gbnVsbDtcbi8vIEFjY2VwdHMgY29ubmVjdGlvbnMgZnJvbSB0aGUgUGFuZWwuIE9uY2UgY29ubmVjdGVkLCBpbml0aWFsaXplcyB0aGUgb3ZlcmxheSxcbi8vIHN1YnNjcmliZXMgdG8gbWVzc2FnZXMsIGFuZCBzZXRzIHVwIGNsZWFudXAgb24gZGlzY29ubmVjdC5cbmNocm9tZS5ydW50aW1lLm9uQ29ubmVjdC5hZGRMaXN0ZW5lcihhc3luYyAocCkgPT4ge1xuICAgIGlmICghaXNQYW5lbENvbnRlbnRQb3J0KHApKVxuICAgICAgICByZXR1cm47XG4gICAgcG9ydCA9IHA7XG4gICAgYXdhaXQgbW91bnRPdmVybGF5KCk7XG4gICAgLy8gSGFuZGxlcyBtZXNzYWdlcyBmcm9tIFBhbmVsIOKGkiBDb250ZW50LlxuICAgIC8vIFByb2Nlc3NlcyBSUENzIHN1Y2ggYXMgdG9nZ2xpbmcgc2VsZWN0aW9uLCByZW5kZXJpbmcsIGFuZCBjbGVhcmluZy5cbiAgICBwLm9uTWVzc2FnZS5hZGRMaXN0ZW5lcihhc3luYyAobXNnKSA9PiB7XG4gICAgICAgIGlmICghbXNnPy50eXBlKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBzd2l0Y2ggKG1zZy50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIE1TR19UWVBFLlBJTkc6XG4gICAgICAgICAgICAgICAgcC5wb3N0TWVzc2FnZSh7IGlkOiBtc2cuaWQsIG9rOiB0cnVlIH0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBNU0dfVFlQRS5UT0dHTEVfU0VMRUNUOlxuICAgICAgICAgICAgICAgIHNlbGVjdGlvbi5zZXRFbmFibGVkKCEhbXNnLnBheWxvYWQ/LmVuYWJsZWQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBNU0dfVFlQRS5SRU5ERVI6IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtcyA9IG1zZy5wYXlsb2FkLml0ZW1zO1xuICAgICAgICAgICAgICAgIGF3YWl0IHJlbmRlckl0ZW1zKGl0ZW1zKTtcbiAgICAgICAgICAgICAgICBwb3N0TWlzc2luZ0lkc0lmQW55KCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIE1TR19UWVBFLkNMRUFSOlxuICAgICAgICAgICAgICAgIGF3YWl0IGNsZWFyT3ZlcmxheSgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBNU0dfVFlQRS5IT1ZFUjpcbiAgICAgICAgICAgICAgICBhd2FpdCBoaWdobGlnaHRPdmVybGF5KG1zZy5wYXlsb2FkLmlkKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgTVNHX1RZUEUuTUVBU1VSRV9TSVpFOiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGF5bG9hZCA9IG1lYXN1cmVDb250ZW50U2l6ZSgpO1xuICAgICAgICAgICAgICAgIHAucG9zdE1lc3NhZ2UoeyB0eXBlOiBNU0dfVFlQRS5DT05URU5UX1NJWkVfUkVTVUxULCBwYXlsb2FkIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgLy8gQ2xlYW5zIHVwIG9uIHBvcnQgZGlzY29ubmVjdGlvbi5cbiAgICAvLyBEaXNhYmxlcyBzZWxlY3Rpb24gYW5kIGNsZWFycyB0aGUgb3ZlcmxheS5cbiAgICBwLm9uRGlzY29ubmVjdC5hZGRMaXN0ZW5lcigoKSA9PiB7XG4gICAgICAgIHNlbGVjdGlvbi5zZXRFbmFibGVkKGZhbHNlKTtcbiAgICAgICAgY2xlYXJPdmVybGF5KCk7XG4gICAgfSk7XG59KTtcbi8qKlxuICogQ2FsbGVkIHdoZW4gYW4gZWxlbWVudCBpcyBwaWNrZWQuXG4gKiBCdWlsZHMgYW4gYW5jaG9yIGFuZCBub3RpZmllcyB0aGUgUGFuZWwuXG4gKlxuICogQHBhcmFtIGVsIC0gRWxlbWVudCBjb25maXJtZWQgYnkgY2xpY2tcbiAqL1xuZnVuY3Rpb24gb25QaWNrKGVsKSB7XG4gICAgY29uc3QgYW5jaG9yID0gYnVpbGRDc3NBbmNob3IoZWwpO1xuICAgIHBvcnQ/LnBvc3RNZXNzYWdlKHtcbiAgICAgICAgdHlwZTogTVNHX1RZUEUuU0VMRUNURUQsXG4gICAgICAgIHBheWxvYWQ6IHsgYW5jaG9yczogW2FuY2hvcl0gfSxcbiAgICAgICAgaWQ6IGNyeXB0by5yYW5kb21VVUlEKCksXG4gICAgfSk7XG59XG4vKipcbiAqIFNlbmQgdG8gc2lkZSBwYW5lbCBvbmx5IGlmIE1pc3NpbmdJZHMgZXhpc3QuXG4gKi9cbmZ1bmN0aW9uIHBvc3RNaXNzaW5nSWRzSWZBbnkoKSB7XG4gICAgY29uc3QgbWlzc2luZ0lkcyA9IGdldE1pc3NpbmdJZHMoKTtcbiAgICBwb3J0Py5wb3N0TWVzc2FnZSh7XG4gICAgICAgIHR5cGU6IE1TR19UWVBFLk1JU1NJTkdfSURTLFxuICAgICAgICBwYXlsb2FkOiB7IG1pc3NpbmdJZHM6IG1pc3NpbmdJZHMgfSxcbiAgICAgICAgaWQ6IGNyeXB0by5yYW5kb21VVUlEKCksXG4gICAgfSk7XG59XG4iLCIvKipcbiAqIEEgc2ltcGxlIGVsZW1lbnQgc2VsZWN0b3IgdGhhdCBoaWdobGlnaHRzIGVsZW1lbnRzIG9uIG1vdXNlb3ZlclxuICogYW5kIGNvbmZpcm1zIHNlbGVjdGlvbiBvbiBjbGljay5cbiAqXG4gKiBAcmVtYXJrc1xuICogLSBSZWdpc3RlcnMgY2FwdHVyZS1waGFzZSBsaXN0ZW5lcnMgd2hlbiBlbmFibGVkLlxuICogLSBUaGUgaGlnaGxpZ2h0IGJveCBpcyBhYnNvbHV0ZWx5IHBvc2l0aW9uZWQgb24gYGRvY3VtZW50LmJvZHlgLlxuICovXG5leHBvcnQgY2xhc3MgU2VsZWN0b3Ige1xuICAgIGVuYWJsZWQgPSBmYWxzZTtcbiAgICBvblBpY2s7XG4gICAgb25DbGljayA9IChldikgPT4gdGhpcy5oYW5kbGVDbGljayhldik7XG4gICAgb25Qb2ludGVyRG93biA9IChldikgPT4gdGhpcy5oYW5kbGVQb2ludGVyRG93bihldik7XG4gICAgb25Nb3VzZU92ZXIgPSAoZXYpID0+IHRoaXMuaGlnaGxpZ2h0KGV2KTtcbiAgICBob3ZlckJveCA9IG51bGw7XG4gICAgY2xlYW51cFRlbXA7XG4gICAgbGFzdEhvdmVyRWw7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHNlbGVjdG9yIHdpdGggYSBjYWxsYmFjayBpbnZva2VkIG9uIHNlbGVjdGlvbiBjb25maXJtYXRpb24uXG4gICAgICogQHBhcmFtIG9uUGljayAtIEludm9rZWQgd2hlbiBhIGNsaWNrIGNvbmZpcm1zIGFuIGVsZW1lbnRcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihvblBpY2spIHtcbiAgICAgICAgdGhpcy5vblBpY2sgPSBvblBpY2s7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVuYWJsZXMgb3IgZGlzYWJsZXMgdGhlIHNlbGVjdG9yLlxuICAgICAqIFN0YXJ0cy9zdG9wcyBldmVudCBzdWJzY3JpcHRpb25zIGFuZCByZW1vdmVzIHRoZSBoaWdobGlnaHQgb24gZGlzYWJsZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBlbmFibGVkIC0gVHJ1ZSB0byBlbmFibGU7IGZhbHNlIHRvIGRpc2FibGVcbiAgICAgKi9cbiAgICBzZXRFbmFibGVkKGVuYWJsZWQpIHtcbiAgICAgICAgaWYgKGVuYWJsZWQgPT09IHRoaXMuZW5hYmxlZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy5lbmFibGVkID0gZW5hYmxlZDtcbiAgICAgICAgaWYgKGVuYWJsZWQpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vbkNsaWNrLCB0cnVlKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJkb3duJywgdGhpcy5vblBvaW50ZXJEb3duLCB0cnVlKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsIHRoaXMub25Nb3VzZU92ZXIsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uQ2xpY2ssIHRydWUpO1xuICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9pbnRlcmRvd24nLCB0aGlzLm9uUG9pbnRlckRvd24sIHRydWUpO1xuICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgdGhpcy5vbk1vdXNlT3ZlciwgdHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLmNsZWFudXBUZW1wPy4oKTtcbiAgICAgICAgICAgIHRoaXMubGFzdEhvdmVyRWwgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVIb3ZlcigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsaWNrIGhhbmRsZXIgdGhhdCBwcmV2ZW50cyBkZWZhdWx0IGJlaGF2aW9yLCBzdG9wcyBwcm9wYWdhdGlvbixcbiAgICAgKiBhbmQgZW5zdXJlcyBubyBmdXJ0aGVyIGxpc3RlbmVycyBhcmUgaW52b2tlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBldiAtIENsaWNrIGV2ZW50XG4gICAgICovXG4gICAgaGFuZGxlQ2xpY2soZXYpIHtcbiAgICAgICAgaWYgKCF0aGlzLmVuYWJsZWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICBldi5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24/LigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQb2ludGVyIGRvd24gaGFuZGxlciB0aGF0IHByZXZlbnRzIGRlZmF1bHQgYmVoYXZpb3IgYW5kIGZvcndhcmRzIHRoZSBlbGVtZW50IHRvIGBvblBpY2tgLlxuICAgICAqXG4gICAgICogQHBhcmFtIGV2IC0gUG9pbnRlciBldmVudFxuICAgICAqL1xuICAgIGhhbmRsZVBvaW50ZXJEb3duKGV2KSB7XG4gICAgICAgIGlmICghdGhpcy5lbmFibGVkKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAoZXYuYnV0dG9uICE9PSAwIHx8ICFldi5pc1ByaW1hcnkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICBldi5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24/LigpO1xuICAgICAgICBjb25zdCBlbCA9IGV2LnRhcmdldDtcbiAgICAgICAgaWYgKCFlbCB8fCBlbC5ub2RlVHlwZSAhPT0gMSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy5vblBpY2soZWwpO1xuICAgICAgICB0aGlzLmNsZWFudXBUZW1wPy4oKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTW91c2VvdmVyIGhhbmRsZXIgdGhhdCByZXBvc2l0aW9ucyB0aGUgaGlnaGxpZ2h0IGJveCB0byB0aGUgaG92ZXJlZCBlbGVtZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIGV2IC0gTW91c2VvdmVyIGV2ZW50XG4gICAgICovXG4gICAgaGlnaGxpZ2h0KGV2KSB7XG4gICAgICAgIGlmICghdGhpcy5lbmFibGVkKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBlbCA9IGV2LnRhcmdldDtcbiAgICAgICAgaWYgKCFlbCB8fCBlbC5ub2RlVHlwZSAhPT0gMSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgcmVjdCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICB0aGlzLmVuc3VyZUhvdmVyKCk7XG4gICAgICAgIGNvbnN0IGJveCA9IHRoaXMuaG92ZXJCb3g7XG4gICAgICAgIGJveC5zdHlsZS5sZWZ0ID0gYCR7cmVjdC5sZWZ0ICsgd2luZG93LnNjcm9sbFh9cHhgO1xuICAgICAgICBib3guc3R5bGUudG9wID0gYCR7cmVjdC50b3AgKyB3aW5kb3cuc2Nyb2xsWX1weGA7XG4gICAgICAgIGJveC5zdHlsZS53aWR0aCA9IGAke3JlY3Qud2lkdGh9cHhgO1xuICAgICAgICBib3guc3R5bGUuaGVpZ2h0ID0gYCR7cmVjdC5oZWlnaHR9cHhgO1xuICAgICAgICBpZiAodGhpcy5sYXN0SG92ZXJFbCAhPT0gZWwpIHtcbiAgICAgICAgICAgIHRoaXMuY2xlYW51cFRlbXA/LigpO1xuICAgICAgICAgICAgdGhpcy5jbGVhbnVwVGVtcCA9IHRoaXMudGVtcEVuYWJsZUlmRGlzYWJsZWQoZWwpO1xuICAgICAgICAgICAgdGhpcy5sYXN0SG92ZXJFbCA9IGVsO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRlbXBvcmFyaWx5IGVuYWJsZXMgYSBkaXNhYmxlZCBmb3JtIGNvbnRyb2wgKGA8YnV0dG9uPmAsIGA8aW5wdXQ+YCwgYDxzZWxlY3Q+YCwgYDx0ZXh0YXJlYT5gKVxuICAgICAqIHRvIGFsbG93IHBvaW50ZXIgYW5kIGNsaWNrIGV2ZW50cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBlbCAtIFRhcmdldCBlbGVtZW50OyBpZ25vcmVkIGlmIG5vdCBhIGRpc2FibGVkIGZvcm0gY29udHJvbC5cbiAgICAgKiBAcmV0dXJucyBBIGNsZWFudXAgY2FsbGJhY2sgdGhhdCByZXN0b3JlcyBpdHMgb3JpZ2luYWwgc3RhdGUgKG5vLW9wIGlmIHVuY2hhbmdlZCkuXG4gICAgICovXG4gICAgdGVtcEVuYWJsZUlmRGlzYWJsZWQoZWwpIHtcbiAgICAgICAgY29uc3QgY3RybCA9IGVsO1xuICAgICAgICBpZiAoISgnZGlzYWJsZWQnIGluIGN0cmwpKVxuICAgICAgICAgICAgcmV0dXJuICgpID0+IHsgfTtcbiAgICAgICAgaWYgKCFjdHJsLmRpc2FibGVkKVxuICAgICAgICAgICAgcmV0dXJuICgpID0+IHsgfTtcbiAgICAgICAgY29uc3QgcHJldiA9IHtcbiAgICAgICAgICAgIGRpc2FibGVkOiBjdHJsLmRpc2FibGVkLFxuICAgICAgICAgICAgYXJpYTogY3RybC5nZXRBdHRyaWJ1dGUoJ2FyaWEtZGlzYWJsZWQnKSxcbiAgICAgICAgICAgIHBlOiBjdHJsLnN0eWxlLnBvaW50ZXJFdmVudHMsXG4gICAgICAgIH07XG4gICAgICAgIC8vIFRlbXBvcmFyaWx5IGVuYWJsZWQgKHNlbWFudGljcyBtYWludGFpbmVkIGluIGFyaWEpXG4gICAgICAgIGN0cmwuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgY3RybC5zZXRBdHRyaWJ1dGUoJ2FyaWEtZGlzYWJsZWQnLCAndHJ1ZScpO1xuICAgICAgICBjdHJsLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnYXV0byc7XG4gICAgICAgIC8vIFJlc3RvcmF0aW9uIENsb3N1cmVcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIGN0cmwuZGlzYWJsZWQgPSBwcmV2LmRpc2FibGVkO1xuICAgICAgICAgICAgaWYgKHByZXYuYXJpYSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGN0cmwucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWRpc2FibGVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjdHJsLnNldEF0dHJpYnV0ZSgnYXJpYS1kaXNhYmxlZCcsIHByZXYuYXJpYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdHJsLnN0eWxlLnBvaW50ZXJFdmVudHMgPSBwcmV2LnBlO1xuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMYXppbHkgY3JlYXRlcyB0aGUgaGlnaGxpZ2h0IGJveCB3aGVuIG5lZWRlZC5cbiAgICAgKi9cbiAgICBlbnN1cmVIb3ZlcigpIHtcbiAgICAgICAgaWYgKHRoaXMuaG92ZXJCb3gpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMuaG92ZXJCb3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLmhvdmVyQm94LnN0eWxlLCB7XG4gICAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgICAgICAgIG91dGxpbmU6ICczcHggZGFzaGVkIHJnYmEoOTksIDEwMiwgMjQxLCAxKScsXG4gICAgICAgICAgICBiYWNrZ3JvdW5kOiAncmdiYSg5OSwgMTAyLCAyNDEsIDAuMyknLFxuICAgICAgICAgICAgcG9pbnRlckV2ZW50czogJ25vbmUnLFxuICAgICAgICAgICAgekluZGV4OiAnMjE0NzQ4MzY0NycsXG4gICAgICAgIH0pO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuaG92ZXJCb3gpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRoZSBoaWdobGlnaHQgYm94IGZyb20gdGhlIERPTS5cbiAgICAgKi9cbiAgICByZW1vdmVIb3ZlcigpIHtcbiAgICAgICAgdGhpcy5ob3ZlckJveD8ucmVtb3ZlKCk7XG4gICAgICAgIHRoaXMuaG92ZXJCb3ggPSBudWxsO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IGZpbmRlciB9IGZyb20gJ0BtZWR2L2ZpbmRlcic7XG4vKipcbiAqIEdlbmVyYXRlcyBhIHJlLWxvY2F0YWJsZSBDU1Mgc2VsZWN0b3IgKGFuY2hvcikgZm9yIHRoZSBnaXZlbiBlbGVtZW50LlxuICogVXNlcyBAbWVkdi9maW5kZXIgdG8gaW5mZXIgYSBzdGFibGUgc2VsZWN0b3IuXG4gKlxuICogQHBhcmFtIGVsIC0gVGFyZ2V0IERPTSBlbGVtZW50XG4gKiBAcmV0dXJucyBHZW5lcmF0ZWQgQ1NTIGFuY2hvclxuICogQHJlbWFya3MgU2VsZWN0b3IgZ2VuZXJhdGlvbiBpcyB0aW1lLWxpbWl0ZWQgdmlhIGB0aW1lb3V0TXNgLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYnVpbGRDc3NBbmNob3IoZWwpIHtcbiAgICBjb25zdCB2YWx1ZSA9IGZpbmRlcihlbCwge1xuICAgICAgICB0aW1lb3V0TXM6IDUwMCxcbiAgICB9KTtcbiAgICByZXR1cm4geyBraW5kOiAnY3NzJywgdmFsdWUsIHZlcnNpb246IDEgfTtcbn1cbiJdLCJuYW1lcyI6WyJDSEFOTkVMIiwiTVNHX1RZUEUiLCJhY2NlcHRlZEF0dHJOYW1lcyIsIlNldCIsImF0dHIiLCJuYW1lIiwidmFsdWUiLCJuYW1lSXNPayIsImhhcyIsInN0YXJ0c1dpdGgiLCJ3b3JkTGlrZSIsInZhbHVlSXNPayIsImxlbmd0aCIsInNsaWNlIiwiaWROYW1lIiwiY2xhc3NOYW1lIiwidGFnTmFtZSIsImZpbmRlciIsImlucHV0Iiwib3B0aW9ucyIsIm5vZGVUeXBlIiwiTm9kZSIsIkVMRU1FTlRfTk9ERSIsIkVycm9yIiwidG9Mb3dlckNhc2UiLCJkZWZhdWx0cyIsInJvb3QiLCJkb2N1bWVudCIsImJvZHkiLCJ0aW1lb3V0TXMiLCJzZWVkTWluTGVuZ3RoIiwib3B0aW1pemVkTWluTGVuZ3RoIiwibWF4TnVtYmVyT2ZQYXRoQ2hlY2tzIiwiSW5maW5pdHkiLCJzdGFydFRpbWUiLCJEYXRlIiwiY29uZmlnIiwicm9vdERvY3VtZW50Iiwicm9vdE5vZGUiLCJET0NVTUVOVF9OT0RFIiwib3duZXJEb2N1bWVudCIsImZpbmRSb290RG9jdW1lbnQiLCJmb3VuZFBhdGgiLCJjb3VudCIsImNhbmRpZGF0ZSIsInN0YWNrIiwicGF0aHMiLCJjdXJyZW50IiwiaSIsImxldmVsIiwidGllIiwibm9kZSIsInB1c2giLCJwYXJlbnRFbGVtZW50IiwiY29tYmluYXRpb25zIiwic29ydCIsImJ5UGVuYWx0eSIsInNlYXJjaCIsImdldFRpbWUiLCJmUGF0aCIsImZhbGxiYWNrIiwic2VsZWN0b3IiLCJ1bmlxdWUiLCJvcHRpbWl6ZWQiLCJvcHRpbWl6ZSIsInRlc3QiLCJ3b3JkcyIsInNwbGl0Iiwid29yZCIsImVsZW1lbnQiLCJlbGVtZW50SWQiLCJnZXRBdHRyaWJ1dGUiLCJDU1MiLCJlc2NhcGUiLCJwZW5hbHR5IiwiY2xhc3NMaXN0IiwiYXR0cmlidXRlcyIsImluZGV4IiwiaW5kZXhPZiIsInVuZGVmaW5lZCIsIm50aE9mVHlwZSIsIm50aCIsIm50aENoaWxkIiwicGF0aCIsInF1ZXJ5IiwibWFwIiwicmVkdWNlIiwiYWNjIiwiYSIsImIiLCJwYXJlbnQiLCJwYXJlbnROb2RlIiwiY2hpbGQiLCJmaXJzdENoaWxkIiwibmV4dFNpYmxpbmciLCJOYU4iLCJjb25jYXQiLCJjc3MiLCJxdWVyeVNlbGVjdG9yQWxsIiwibmV3UGF0aCIsInNwbGljZSIsInF1ZXJ5U2VsZWN0b3IiLCJpc0hUTUxFbGVtZW50IiwiZWwiLCJIVE1MRWxlbWVudCIsInNoYWRvd1Jvb3QiLCJyb290RWwiLCJ0cmFja2VkIiwiTWFwIiwicmFmUGVuZGluZyIsImhvdmVyZWRJZCIsImxpc3RlbmVyc0F0dGFjaGVkIiwiYXN5bmMiLCJtb3VudE92ZXJsYXkiLCJob3N0IiwiZ2V0RWxlbWVudEJ5SWQiLCJjcmVhdGVFbGVtZW50IiwiaWQiLCJkb2N1bWVudEVsZW1lbnQiLCJhcHBlbmRDaGlsZCIsImF0dGFjaFNoYWRvdyIsIm1vZGUiLCJjc3NIcmVmIiwiY2hyb21lIiwicnVudGltZSIsImdldFVSTCIsImxpbmsiLCJyZWwiLCJocmVmIiwic2NoZWR1bGUiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJ1cGRhdGVQb3NpdGlvbnMiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwicGFzc2l2ZSIsInZpc3VhbFZpZXdwb3J0IiwiZW5zdXJlVHJhY2tlZEVudHJ5IiwiaXRlbSIsImV4aXN0aW5nIiwiZ2V0IiwiYm94RWwiLCJiYWRnZUVsIiwiY29tbWVudEVsIiwiYXBwZW5kIiwibmV3RW50cnkiLCJhbmNob3IiLCJlbFJlZiIsIm1pc3NpbmciLCJzZXQiLCJhcHBseVZpc3VhbFN0YXRlIiwic2l6ZVB4Iiwic2l6ZSIsImNvbG9yIiwic3R5bGUiLCJzZXRQcm9wZXJ0eSIsInRvZ2dsZSIsImxhYmVsRm9ybWF0IiwidmlzaWJsZSIsInNoYXBlIiwicG9zaXRpb24iLCJmb250U2l6ZSIsInRleHRDb250ZW50IiwibGFiZWwiLCJmbXQiLCJ0b0FscGhhIiwidG9VcHBlckNhc2UiLCJTdHJpbmciLCJmb3JtYXRMYWJlbCIsImNvbW1lbnQiLCJkaXNwbGF5IiwiY2xlYXJPdmVybGF5IiwiaW5uZXJIVE1MIiwiY2xlYXIiLCJyZXNvbHZlRWxlbWVudCIsImNzc1NlbGVjdG9yIiwiXyIsInQiLCJlbnRyaWVzIiwiV2Vha1JlZiIsInIiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJsZWZ0IiwidG9wIiwid2lkdGgiLCJoZWlnaHQiLCJuIiwicyIsImZyb21DaGFyQ29kZSIsIk1hdGgiLCJmbG9vciIsInNlbGVjdGlvbiIsImVuYWJsZWQiLCJvblBpY2siLCJvbkNsaWNrIiwiZXYiLCJ0aGlzIiwiaGFuZGxlQ2xpY2siLCJvblBvaW50ZXJEb3duIiwiaGFuZGxlUG9pbnRlckRvd24iLCJvbk1vdXNlT3ZlciIsImhpZ2hsaWdodCIsImhvdmVyQm94IiwiY2xlYW51cFRlbXAiLCJsYXN0SG92ZXJFbCIsImNvbnN0cnVjdG9yIiwic2V0RW5hYmxlZCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJyZW1vdmVIb3ZlciIsInByZXZlbnREZWZhdWx0Iiwic3RvcFByb3BhZ2F0aW9uIiwic3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uIiwiYnV0dG9uIiwiaXNQcmltYXJ5IiwidGFyZ2V0IiwicmVjdCIsImVuc3VyZUhvdmVyIiwiYm94Iiwic2Nyb2xsWCIsInNjcm9sbFkiLCJ0ZW1wRW5hYmxlSWZEaXNhYmxlZCIsImN0cmwiLCJkaXNhYmxlZCIsInByZXYiLCJhcmlhIiwicGUiLCJwb2ludGVyRXZlbnRzIiwic2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwiT2JqZWN0IiwiYXNzaWduIiwib3V0bGluZSIsImJhY2tncm91bmQiLCJ6SW5kZXgiLCJyZW1vdmUiLCJraW5kIiwidmVyc2lvbiIsImJ1aWxkQ3NzQW5jaG9yIiwicG9ydCIsInBvc3RNZXNzYWdlIiwidHlwZSIsInBheWxvYWQiLCJhbmNob3JzIiwiY3J5cHRvIiwicmFuZG9tVVVJRCIsIm9uQ29ubmVjdCIsImFkZExpc3RlbmVyIiwicCIsImlzQ2hhbm5lbCIsImlzUGFuZWxDb250ZW50UG9ydCIsIm9uTWVzc2FnZSIsIm1zZyIsIm9rIiwiaXRlbXMiLCJpZHMiLCJkZWxldGUiLCJpdCIsImVudHJ5IiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZW5kZXJJdGVtcyIsIm1pc3NpbmdJZHMiLCJBcnJheSIsImZyb20iLCJmaWx0ZXIiLCJwb3N0TWlzc2luZ0lkc0lmQW55IiwiYWRkIiwiaGlnaGxpZ2h0T3ZlcmxheSIsImRvY0VsIiwic2UiLCJzY3JvbGxpbmdFbGVtZW50IiwiYmFzZVciLCJtYXgiLCJzY3JvbGxXaWR0aCIsIm9mZnNldFdpZHRoIiwiY2xpZW50V2lkdGgiLCJiYXNlSCIsInNjcm9sbEhlaWdodCIsIm9mZnNldEhlaWdodCIsImNsaWVudEhlaWdodCIsIm1pbkxlZnQiLCJOdW1iZXIiLCJQT1NJVElWRV9JTkZJTklUWSIsIm1pblRvcCIsIm1heFJpZ2h0IiwiTkVHQVRJVkVfSU5GSU5JVFkiLCJtYXhCb3R0b20iLCJtYXhTY3JvbGxXIiwibWF4U2Nyb2xsSCIsIm9mZlgiLCJwYWdlTGVmdCIsIm9mZlkiLCJwYWdlVG9wIiwiZWxlbWVudHMiLCJyaWdodCIsImJvdHRvbSIsImlzRmluaXRlIiwiYmJveFdpZHRoIiwiY2VpbCIsImJib3hIZWlnaHQiLCJtZWFzdXJlQ29udGVudFNpemUiLCJvbkRpc2Nvbm5lY3QiXSwic291cmNlUm9vdCI6IiJ9