(()=>{"use strict";const e="spsk:panel-content:v1",t="PING",n="TOGGLE_SELECT",o="RENDER",s="CLEAR",i="HOVER",r="MEASURE_SIZE",l="SELECTED",a="MISSING_IDS",c="CONTENT_SIZE_RESULT",d=new Set(["role","name","aria-label","rel","href"]);function u(e,t){let n=d.has(e);n||=e.startsWith("data-")&&g(e);let o=g(t)&&t.length<100;return o||=t.startsWith("#")&&g(t.slice(1)),n&&o}function h(e){return g(e)}function m(e){return g(e)}function p(e){return!0}function f(e,t){if(e.nodeType!==Node.ELEMENT_NODE)throw new Error("Can't generate CSS selector for non-element node type.");if("html"===e.tagName.toLowerCase())return"html";const n={root:document.body,idName:h,className:m,tagName:p,attr:u,timeoutMs:1e3,seedMinLength:3,optimizedMinLength:2,maxNumberOfPathChecks:1/0},o=new Date,s={...n,...t},i=function(e,t){return e.nodeType===Node.DOCUMENT_NODE?e:e===t.root?e.ownerDocument:e}(s.root,n);let r,l=0;for(const t of function*(e,t,n){const o=[];let s=[],i=e,r=0;for(;i&&i!==n;){const e=E(i,t);for(const t of e)t.level=r;if(o.push(e),i=i.parentElement,r++,s.push(...L(o)),r>=t.seedMinLength){s.sort(v);for(const e of s)yield e;s=[]}}s.sort(v);for(const e of s)yield e}(e,s,i)){if((new Date).getTime()-o.getTime()>s.timeoutMs||l>=s.maxNumberOfPathChecks){const t=N(e,i);if(!t)throw new Error(`Timeout: Can't find a unique selector after ${s.timeoutMs}ms`);return b(t)}if(l++,k(t,i)){r=t;break}}if(!r)throw new Error("Selector was not found.");const a=[...S(r,e,s,i,o)];return a.sort(v),a.length>0?b(a[0]):b(r)}function g(e){if(/^[a-z\-]{3,}$/i.test(e)){const t=e.split(/-|[A-Z]/);for(const e of t){if(e.length<=2)return!1;if(/[^aeiou]{4,}/i.test(e))return!1}return!0}return!1}function E(e,t){const n=[],o=e.getAttribute("id");o&&t.idName(o)&&n.push({name:"#"+CSS.escape(o),penalty:0});for(let o=0;o<e.classList.length;o++){const s=e.classList[o];t.className(s)&&n.push({name:"."+CSS.escape(s),penalty:1})}for(let o=0;o<e.attributes.length;o++){const s=e.attributes[o];t.attr(s.name,s.value)&&n.push({name:`[${CSS.escape(s.name)}="${CSS.escape(s.value)}"]`,penalty:2})}const s=e.tagName.toLowerCase();if(t.tagName(s)){n.push({name:s,penalty:5});const t=w(e,s);void 0!==t&&n.push({name:C(s,t),penalty:10})}const i=w(e);return void 0!==i&&n.push({name:x(s,i),penalty:50}),n}function b(e){let t=e[0],n=t.name;for(let o=1;o<e.length;o++){const s=e[o].level||0;n=t.level===s-1?`${e[o].name} > ${n}`:`${e[o].name} ${n}`,t=e[o]}return n}function y(e){return e.map(e=>e.penalty).reduce((e,t)=>e+t,0)}function v(e,t){return y(e)-y(t)}function w(e,t){const n=e.parentNode;if(!n)return;let o=n.firstChild;if(!o)return;let s=0;for(;o&&(o.nodeType!==Node.ELEMENT_NODE||void 0!==t&&o.tagName.toLowerCase()!==t||s++,o!==e);)o=o.nextSibling;return s}function N(e,t){let n=0,o=e;const s=[];for(;o&&o!==t;){const e=o.tagName.toLowerCase(),t=w(o,e);if(void 0===t)return;s.push({name:C(e,t),penalty:NaN,level:n}),o=o.parentElement,n++}if(k(s,t))return s}function x(e,t){return"html"===e?"html":`${e}:nth-child(${t})`}function C(e,t){return"html"===e?"html":`${e}:nth-of-type(${t})`}function*L(e,t=[]){if(e.length>0)for(let n of e[0])yield*L(e.slice(1,e.length),t.concat(n));else yield t}function k(e,t){const n=b(e);switch(t.querySelectorAll(n).length){case 0:throw new Error(`Can't select any node with this selector: ${n}`);case 1:return!0;default:return!1}}function*S(e,t,n,o,s){if(e.length>2&&e.length>n.optimizedMinLength)for(let i=1;i<e.length-1;i++){if((new Date).getTime()-s.getTime()>n.timeoutMs)return;const r=[...e];r.splice(i,1),k(r,o)&&o.querySelector(b(r))===t&&(yield r,yield*S(r,t,n,o,s))}}function T(e){return e instanceof HTMLElement}let M=null,I=null;const $=new Map;let D=!1,H=null,P=!1;async function A(){if(I&&M)return;let e=document.getElementById("spsk-root");e||(e=document.createElement("div"),e.id="spsk-root",(document.documentElement||document.body).appendChild(e)),M=e.shadowRoot??e.attachShadow({mode:"open"});const t=chrome.runtime.getURL("styles/overlay.css");let n=M.querySelector(`link[rel="stylesheet"][href="${t}"]`);if(n||(n=document.createElement("link"),n.rel="stylesheet",n.href=t,M.appendChild(n)),I=M.querySelector("div.spsk-overlay"),I||(I=document.createElement("div"),I.className="spsk-overlay",M.appendChild(I)),!P){const e=()=>{D||(D=!0,requestAnimationFrame(()=>{D=!1,F()}))};window.addEventListener("scroll",e,{passive:!0}),window.addEventListener("resize",e,{passive:!0}),window.visualViewport&&(window.visualViewport.addEventListener("scroll",e,{passive:!0}),window.visualViewport.addEventListener("resize",e,{passive:!0})),P=!0}}function O(e){const t=$.get(e.id);if(t)return t;const n=document.createElement("div"),o=document.createElement("div"),s=document.createElement("div");s.className="spsk-comment",n.append(o,s);const i={anchor:e.anchor,boxEl:n,badgeEl:o,commentEl:s,elRef:null,missing:!0};return $.set(e.id,i),I.appendChild(n),i}const R=(e,t)=>{const n=`${t.size}px`,o=t.color.toLowerCase();e.anchor=t.anchor,e.boxEl.className=`spsk-box spsk-box--${o}`,e.boxEl.style.setProperty("--spsk-border-w",t.size/4+"px"),e.boxEl.classList.toggle("badge-hidden","None"===t.labelFormat),e.badgeEl.className=`spsk-badge spsk-badge--${t.shape} spsk-badge--${o} spsk-badge--${t.position}`,e.badgeEl.style.fontSize=n,e.badgeEl.textContent=function(e,t="Numbers"){if(e<0)throw new Error("label must be >= 0");switch(t){case"UpperAlpha":return _(e).toUpperCase();case"LowerAlpha":return _(e).toLowerCase();case"None":return null;default:return String(e)}}(t.label,t.labelFormat),t.comment?(e.commentEl.textContent=t.comment,e.commentEl.style.display="inline",e.commentEl.style.fontSize=n):(e.commentEl.textContent="",e.commentEl.style.display="none")};async function W(){I&&(I.innerHTML="",$.clear())}function B(e){try{return document.querySelector(e)}catch{return null}}function F(){for(const[e,t]of $.entries()){const e=B(t.anchor.value);if(t.elRef=e?new WeakRef(e):null,!e){t.boxEl.style.display="none",t.missing=!0;continue}t.boxEl.style.display="",t.missing=!1;const n=e.getBoundingClientRect();t.boxEl.style.left=`${n.left}px`,t.boxEl.style.top=`${n.top}px`,t.boxEl.style.width=`${n.width}px`,t.boxEl.style.height=`${n.height}px`}}function _(e){let t=e-1,n="";for(;t>=0;){const e=t%26;n=String.fromCharCode(65+e)+n,t=Math.floor(t/26)-1}return n}const z=new class{enabled=!1;onPick;onClick=e=>this.handleClick(e);onPointerDown=e=>this.handlePointerDown(e);onMouseOver=e=>this.highlight(e);hoverBox=null;cleanupTemp;lastHoverEl;constructor(e){this.onPick=e}setEnabled(e){e!==this.enabled&&(this.enabled=e,e?(document.addEventListener("click",this.onClick,!0),document.addEventListener("pointerdown",this.onPointerDown,!0),document.addEventListener("mouseover",this.onMouseOver,!0)):(document.removeEventListener("click",this.onClick,!0),document.removeEventListener("pointerdown",this.onPointerDown,!0),document.removeEventListener("mouseover",this.onMouseOver,!0),this.cleanupTemp?.(),this.lastHoverEl=null,this.removeHover()))}handleClick(e){this.enabled&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation?.())}handlePointerDown(e){if(!this.enabled)return;if(0!==e.button||!e.isPrimary)return;e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation?.();const t=e.target;t&&1===t.nodeType&&(this.onPick(t),this.cleanupTemp?.())}highlight(e){if(!this.enabled)return;const t=e.target;if(!t||1!==t.nodeType)return;const n=t.getBoundingClientRect();this.ensureHover();const o=this.hoverBox;o.style.left=`${n.left+window.scrollX}px`,o.style.top=`${n.top+window.scrollY}px`,o.style.width=`${n.width}px`,o.style.height=`${n.height}px`,this.lastHoverEl!==t&&(this.cleanupTemp?.(),this.cleanupTemp=this.tempEnableIfDisabled(t),this.lastHoverEl=t)}tempEnableIfDisabled(e){const t=e;if(!("disabled"in t))return()=>{};if(!t.disabled)return()=>{};const n={disabled:t.disabled,aria:t.getAttribute("aria-disabled"),pe:t.style.pointerEvents};return t.disabled=!1,t.setAttribute("aria-disabled","true"),t.style.pointerEvents="auto",()=>{t.disabled=n.disabled,null===n.aria?t.removeAttribute("aria-disabled"):t.setAttribute("aria-disabled",n.aria),t.style.pointerEvents=n.pe}}ensureHover(){this.hoverBox||(this.hoverBox=document.createElement("div"),Object.assign(this.hoverBox.style,{position:"absolute",outline:"3px dashed rgba(99, 102, 241, 1)",background:"rgba(99, 102, 241, 0.3)",pointerEvents:"none",zIndex:"2147483647"}),document.body.appendChild(this.hoverBox))}removeHover(){this.hoverBox?.remove(),this.hoverBox=null}}(function(e){const t=function(e){return{kind:"css",value:f(e,{timeoutMs:500}),version:1}}(e);U?.postMessage({type:l,payload:{anchors:[t]},id:crypto.randomUUID()})});let U=null;chrome.runtime.onConnect.addListener(async l=>{(function(t){return function(e,t){return e.name===t}(t,e)})(l)&&(U=l,await A(),l.onMessage.addListener(async e=>{if(e?.type)switch(e.type){case t:l.postMessage({id:e.id,ok:!0});break;case n:z.setEnabled(!!e.payload?.enabled);break;case o:{const t=e.payload.items;await async function(e){if(I||await A(),!I)return;const t=new Set(e.map(e=>e.id));for(const[e,n]of $.entries())t.has(e)||(n.boxEl.remove(),$.delete(e));for(const t of e){const e=O(t);R(e,t)}await new Promise(e=>{requestAnimationFrame(()=>{F(),e()})})}(t),function(){const e=Array.from($.entries()).filter(([,e])=>e.missing).map(([e])=>e);U?.postMessage({type:a,payload:{missingIds:e},id:crypto.randomUUID()})}();break}case s:await W();break;case i:await async function(e){if(e===H)return;const t=H;H=e,null!=t&&$.get(t)?.boxEl.classList.remove("is-hovered"),null!=e&&$.get(e)?.boxEl.classList.add("is-hovered")}(e.payload.id);break;case r:{const e=function(){const e=document.documentElement,t=document.body??null,n=document.scrollingElement??null,o=Math.max(e.scrollWidth,e.offsetWidth,e.clientWidth,t?.scrollWidth??0,t?.offsetWidth??0,t?.clientWidth??0,n?.scrollWidth??0,n?.offsetWidth??0,n?.clientWidth??0),s=Math.max(e.scrollHeight,e.offsetHeight,e.clientHeight,t?.scrollHeight??0,t?.offsetHeight??0,t?.clientHeight??0,n?.scrollHeight??0,n?.offsetHeight??0,n?.clientHeight??0);let i=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY,a=Number.NEGATIVE_INFINITY,c=0,d=0;const u=(window.visualViewport?.pageLeft??window.scrollX)||0,h=(window.visualViewport?.pageTop??window.scrollY)||0,m=Array.from(document.querySelectorAll("*")).filter(T);for(const e of m){e.scrollWidth>c&&(c=e.scrollWidth),e.scrollHeight>d&&(d=e.scrollHeight);const t=e.getBoundingClientRect(),n=t.left+u,o=t.right+u,s=t.top+h,m=t.bottom+h;n<i&&(i=n),s<r&&(r=s),o>l&&(l=o),m>a&&(a=m)}isFinite(i)||(i=0),isFinite(r)||(r=0),isFinite(l)||(l=o),isFinite(a)||(a=s);const p=Math.max(0,Math.ceil(l-i)),f=Math.max(0,Math.ceil(a-r));return{width:Math.max(o,c,p),height:Math.max(s,d,f)}}();l.postMessage({type:c,payload:e})}}}),l.onDisconnect.addListener(()=>{z.setEnabled(!1),W()}))})})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TSxFQUFFc0QsYUFBYXZELFlBQVksS0FDdkJ2RCxFQUFVZSxZQUFXLEdBQ3JCbkMsUSIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2NvbW1vbi9jb25zdGFudHMudHMiLCJ3ZWJwYWNrOi8vLy4vY29tbW9uL21lc3NhZ2VzLnRzIiwid2VicGFjazovLy8uLi9ub2RlX21vZHVsZXMvQG1lZHYvZmluZGVyL2ZpbmRlci5qcyIsIndlYnBhY2s6Ly8vLi9ydW50aW1lL2NvbnRlbnQvbWVhc3VyZS50cyIsIndlYnBhY2s6Ly8vLi9ydW50aW1lL2NvbnRlbnQvb3ZlcmxheS50cyIsIndlYnBhY2s6Ly8vLi9ydW50aW1lL2NvbnRlbnQvbWFpbi50cyIsIndlYnBhY2s6Ly8vLi9ydW50aW1lL2NvbnRlbnQvc2VsZWN0b3IudHMiLCJ3ZWJwYWNrOi8vLy4vcnVudGltZS9jb250ZW50L2FuY2hvci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgUFJPVE9DT0xfVkVSU0lPTiA9IDE7XG5leHBvcnQgY29uc3QgQ0hBTk5FTCA9IHtcbiAgICBQQU5FTF9DT05URU5UOiBgc3BzazpwYW5lbC1jb250ZW50OnYke1BST1RPQ09MX1ZFUlNJT059YCxcbn07XG4vKipcbiAqIENoZWNrcyB3aGV0aGVyIHRoZSBnaXZlbiBQb3J0Lm5hbWUgbWF0Y2hlcyB0aGUgc3BlY2lmaWVkIGNoYW5uZWwuXG4gKiBVc2UgdGhpcyB0byBzYWZlbHkgZGlzdGluZ3Vpc2ggY29ubmVjdGlvbiB0eXBlcyBiZXR3ZWVuIFBhbmVsIGFuZCBDb250ZW50LlxuICpcbiAqIEBwYXJhbSBwb3J0IC0gQSBjb25uZWN0ZWQgcnVudGltZS5Qb3J0XG4gKiBAcGFyYW0gbmFtZSAtIFRhcmdldCBjaGFubmVsIG5hbWUgdG8gY29tcGFyZVxuICogQHJldHVybnMgVHJ1ZSBpZiB0aGUgcG9ydCBiZWxvbmdzIHRvIHRoZSBjaGFubmVsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0NoYW5uZWwocG9ydCwgbmFtZSkge1xuICAgIHJldHVybiBwb3J0Lm5hbWUgPT09IG5hbWU7XG59XG4vKipcbiAqIERldGVybWluZXMgd2hldGhlciB0aGUgcG9ydCBpcyB1c2VkIGZvciBQYW5lbCDihpQgQ29udGVudCBjb21tdW5pY2F0aW9uLlxuICogQSBjb252ZW5pZW5jZSB3cmFwcGVyIGZvciBDSEFOTkVMLlBBTkVMX0NPTlRFTlQuXG4gKlxuICogQHBhcmFtIHBvcnQgLSBBIGNvbm5lY3RlZCBydW50aW1lLlBvcnRcbiAqIEByZXR1cm5zIFRydWUgaWYgdGhlIHBvcnQgaXMgdGhlIFBhbmVs4oCTQ29udGVudCBjaGFubmVsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1BhbmVsQ29udGVudFBvcnQocG9ydCkge1xuICAgIHJldHVybiBpc0NoYW5uZWwocG9ydCwgQ0hBTk5FTC5QQU5FTF9DT05URU5UKTtcbn1cbiIsImNvbnN0IFAyQyA9IHtcbiAgICBQSU5HOiAnUElORycsXG4gICAgVE9HR0xFX1NFTEVDVDogJ1RPR0dMRV9TRUxFQ1QnLFxuICAgIFJFTkRFUjogJ1JFTkRFUicsXG4gICAgQ0xFQVI6ICdDTEVBUicsXG4gICAgSE9WRVI6ICdIT1ZFUicsXG4gICAgTUVBU1VSRV9TSVpFOiAnTUVBU1VSRV9TSVpFJyxcbn07XG5jb25zdCBDMlAgPSB7XG4gICAgU0VMRUNURUQ6ICdTRUxFQ1RFRCcsXG4gICAgTUlTU0lOR19JRFM6ICdNSVNTSU5HX0lEUycsXG4gICAgQ09OVEVOVF9TSVpFX1JFU1VMVDogJ0NPTlRFTlRfU0laRV9SRVNVTFQnLFxufTtcbmNvbnN0IEIyUCA9IHtcbiAgICBBQ1RJVkVfVEFCX0NIQU5HRUQ6ICdBQ1RJVkVfVEFCX0NIQU5HRUQnLFxufTtcbmV4cG9ydCBjb25zdCBNU0dfVFlQRSA9IHsgLi4uUDJDLCAuLi5DMlAsIC4uLkIyUCB9O1xuZXhwb3J0IGZ1bmN0aW9uIGlzUmVzcG9uc2UobXNnKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBtc2cgPT09ICdvYmplY3QnICYmIG1zZyAhPT0gbnVsbCAmJiAnaWQnIGluIG1zZyAmJiAnb2snIGluIG1zZztcbn1cbiIsIi8vIExpY2Vuc2U6IE1JVFxuLy8gQXV0aG9yOiBBbnRvbiBNZWR2ZWRldiA8YW50b25AbWVkdi5pbz5cbi8vIFNvdXJjZTogaHR0cHM6Ly9naXRodWIuY29tL2FudG9ubWVkdi9maW5kZXJcbmNvbnN0IGFjY2VwdGVkQXR0ck5hbWVzID0gbmV3IFNldChbJ3JvbGUnLCAnbmFtZScsICdhcmlhLWxhYmVsJywgJ3JlbCcsICdocmVmJ10pO1xuLyoqIENoZWNrIGlmIGF0dHJpYnV0ZSBuYW1lIGFuZCB2YWx1ZSBhcmUgd29yZC1saWtlLiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGF0dHIobmFtZSwgdmFsdWUpIHtcbiAgICBsZXQgbmFtZUlzT2sgPSBhY2NlcHRlZEF0dHJOYW1lcy5oYXMobmFtZSk7XG4gICAgbmFtZUlzT2sgfHw9IG5hbWUuc3RhcnRzV2l0aCgnZGF0YS0nKSAmJiB3b3JkTGlrZShuYW1lKTtcbiAgICBsZXQgdmFsdWVJc09rID0gd29yZExpa2UodmFsdWUpICYmIHZhbHVlLmxlbmd0aCA8IDEwMDtcbiAgICB2YWx1ZUlzT2sgfHw9IHZhbHVlLnN0YXJ0c1dpdGgoJyMnKSAmJiB3b3JkTGlrZSh2YWx1ZS5zbGljZSgxKSk7XG4gICAgcmV0dXJuIG5hbWVJc09rICYmIHZhbHVlSXNPaztcbn1cbi8qKiBDaGVjayBpZiBpZCBuYW1lIGlzIHdvcmQtbGlrZS4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpZE5hbWUobmFtZSkge1xuICAgIHJldHVybiB3b3JkTGlrZShuYW1lKTtcbn1cbi8qKiBDaGVjayBpZiBjbGFzcyBuYW1lIGlzIHdvcmQtbGlrZS4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbGFzc05hbWUobmFtZSkge1xuICAgIHJldHVybiB3b3JkTGlrZShuYW1lKTtcbn1cbi8qKiBDaGVjayBpZiB0YWcgbmFtZSBpcyB3b3JkLWxpa2UuICovXG5leHBvcnQgZnVuY3Rpb24gdGFnTmFtZShuYW1lKSB7XG4gICAgcmV0dXJuIHRydWU7XG59XG4vKiogRmluZHMgdW5pcXVlIENTUyBzZWxlY3RvcnMgZm9yIHRoZSBnaXZlbiBlbGVtZW50LiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbmRlcihpbnB1dCwgb3B0aW9ucykge1xuICAgIGlmIChpbnB1dC5ub2RlVHlwZSAhPT0gTm9kZS5FTEVNRU5UX05PREUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW4ndCBnZW5lcmF0ZSBDU1Mgc2VsZWN0b3IgZm9yIG5vbi1lbGVtZW50IG5vZGUgdHlwZS5gKTtcbiAgICB9XG4gICAgaWYgKGlucHV0LnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2h0bWwnKSB7XG4gICAgICAgIHJldHVybiAnaHRtbCc7XG4gICAgfVxuICAgIGNvbnN0IGRlZmF1bHRzID0ge1xuICAgICAgICByb290OiBkb2N1bWVudC5ib2R5LFxuICAgICAgICBpZE5hbWU6IGlkTmFtZSxcbiAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWUsXG4gICAgICAgIHRhZ05hbWU6IHRhZ05hbWUsXG4gICAgICAgIGF0dHI6IGF0dHIsXG4gICAgICAgIHRpbWVvdXRNczogMTAwMCxcbiAgICAgICAgc2VlZE1pbkxlbmd0aDogMyxcbiAgICAgICAgb3B0aW1pemVkTWluTGVuZ3RoOiAyLFxuICAgICAgICBtYXhOdW1iZXJPZlBhdGhDaGVja3M6IEluZmluaXR5LFxuICAgIH07XG4gICAgY29uc3Qgc3RhcnRUaW1lID0gbmV3IERhdGUoKTtcbiAgICBjb25zdCBjb25maWcgPSB7IC4uLmRlZmF1bHRzLCAuLi5vcHRpb25zIH07XG4gICAgY29uc3Qgcm9vdERvY3VtZW50ID0gZmluZFJvb3REb2N1bWVudChjb25maWcucm9vdCwgZGVmYXVsdHMpO1xuICAgIGxldCBmb3VuZFBhdGg7XG4gICAgbGV0IGNvdW50ID0gMDtcbiAgICBmb3IgKGNvbnN0IGNhbmRpZGF0ZSBvZiBzZWFyY2goaW5wdXQsIGNvbmZpZywgcm9vdERvY3VtZW50KSkge1xuICAgICAgICBjb25zdCBlbGFwc2VkVGltZU1zID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgLSBzdGFydFRpbWUuZ2V0VGltZSgpO1xuICAgICAgICBpZiAoZWxhcHNlZFRpbWVNcyA+IGNvbmZpZy50aW1lb3V0TXMgfHxcbiAgICAgICAgICAgIGNvdW50ID49IGNvbmZpZy5tYXhOdW1iZXJPZlBhdGhDaGVja3MpIHtcbiAgICAgICAgICAgIGNvbnN0IGZQYXRoID0gZmFsbGJhY2soaW5wdXQsIHJvb3REb2N1bWVudCk7XG4gICAgICAgICAgICBpZiAoIWZQYXRoKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUaW1lb3V0OiBDYW4ndCBmaW5kIGEgdW5pcXVlIHNlbGVjdG9yIGFmdGVyICR7Y29uZmlnLnRpbWVvdXRNc31tc2ApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHNlbGVjdG9yKGZQYXRoKTtcbiAgICAgICAgfVxuICAgICAgICBjb3VudCsrO1xuICAgICAgICBpZiAodW5pcXVlKGNhbmRpZGF0ZSwgcm9vdERvY3VtZW50KSkge1xuICAgICAgICAgICAgZm91bmRQYXRoID0gY2FuZGlkYXRlO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFmb3VuZFBhdGgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBTZWxlY3RvciB3YXMgbm90IGZvdW5kLmApO1xuICAgIH1cbiAgICBjb25zdCBvcHRpbWl6ZWQgPSBbXG4gICAgICAgIC4uLm9wdGltaXplKGZvdW5kUGF0aCwgaW5wdXQsIGNvbmZpZywgcm9vdERvY3VtZW50LCBzdGFydFRpbWUpLFxuICAgIF07XG4gICAgb3B0aW1pemVkLnNvcnQoYnlQZW5hbHR5KTtcbiAgICBpZiAob3B0aW1pemVkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmV0dXJuIHNlbGVjdG9yKG9wdGltaXplZFswXSk7XG4gICAgfVxuICAgIHJldHVybiBzZWxlY3Rvcihmb3VuZFBhdGgpO1xufVxuZnVuY3Rpb24qIHNlYXJjaChpbnB1dCwgY29uZmlnLCByb290RG9jdW1lbnQpIHtcbiAgICBjb25zdCBzdGFjayA9IFtdO1xuICAgIGxldCBwYXRocyA9IFtdO1xuICAgIGxldCBjdXJyZW50ID0gaW5wdXQ7XG4gICAgbGV0IGkgPSAwO1xuICAgIHdoaWxlIChjdXJyZW50ICYmIGN1cnJlbnQgIT09IHJvb3REb2N1bWVudCkge1xuICAgICAgICBjb25zdCBsZXZlbCA9IHRpZShjdXJyZW50LCBjb25maWcpO1xuICAgICAgICBmb3IgKGNvbnN0IG5vZGUgb2YgbGV2ZWwpIHtcbiAgICAgICAgICAgIG5vZGUubGV2ZWwgPSBpO1xuICAgICAgICB9XG4gICAgICAgIHN0YWNrLnB1c2gobGV2ZWwpO1xuICAgICAgICBjdXJyZW50ID0gY3VycmVudC5wYXJlbnRFbGVtZW50O1xuICAgICAgICBpKys7XG4gICAgICAgIHBhdGhzLnB1c2goLi4uY29tYmluYXRpb25zKHN0YWNrKSk7XG4gICAgICAgIGlmIChpID49IGNvbmZpZy5zZWVkTWluTGVuZ3RoKSB7XG4gICAgICAgICAgICBwYXRocy5zb3J0KGJ5UGVuYWx0eSk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGNhbmRpZGF0ZSBvZiBwYXRocykge1xuICAgICAgICAgICAgICAgIHlpZWxkIGNhbmRpZGF0ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhdGhzID0gW107XG4gICAgICAgIH1cbiAgICB9XG4gICAgcGF0aHMuc29ydChieVBlbmFsdHkpO1xuICAgIGZvciAoY29uc3QgY2FuZGlkYXRlIG9mIHBhdGhzKSB7XG4gICAgICAgIHlpZWxkIGNhbmRpZGF0ZTtcbiAgICB9XG59XG5mdW5jdGlvbiB3b3JkTGlrZShuYW1lKSB7XG4gICAgaWYgKC9eW2EtelxcLV17Myx9JC9pLnRlc3QobmFtZSkpIHtcbiAgICAgICAgY29uc3Qgd29yZHMgPSBuYW1lLnNwbGl0KC8tfFtBLVpdLyk7XG4gICAgICAgIGZvciAoY29uc3Qgd29yZCBvZiB3b3Jkcykge1xuICAgICAgICAgICAgaWYgKHdvcmQubGVuZ3RoIDw9IDIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoL1teYWVpb3VdezQsfS9pLnRlc3Qod29yZCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIHRpZShlbGVtZW50LCBjb25maWcpIHtcbiAgICBjb25zdCBsZXZlbCA9IFtdO1xuICAgIGNvbnN0IGVsZW1lbnRJZCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdpZCcpO1xuICAgIGlmIChlbGVtZW50SWQgJiYgY29uZmlnLmlkTmFtZShlbGVtZW50SWQpKSB7XG4gICAgICAgIGxldmVsLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogJyMnICsgQ1NTLmVzY2FwZShlbGVtZW50SWQpLFxuICAgICAgICAgICAgcGVuYWx0eTogMCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZWxlbWVudC5jbGFzc0xpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgbmFtZSA9IGVsZW1lbnQuY2xhc3NMaXN0W2ldO1xuICAgICAgICBpZiAoY29uZmlnLmNsYXNzTmFtZShuYW1lKSkge1xuICAgICAgICAgICAgbGV2ZWwucHVzaCh7XG4gICAgICAgICAgICAgICAgbmFtZTogJy4nICsgQ1NTLmVzY2FwZShuYW1lKSxcbiAgICAgICAgICAgICAgICBwZW5hbHR5OiAxLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbGVtZW50LmF0dHJpYnV0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgYXR0ciA9IGVsZW1lbnQuYXR0cmlidXRlc1tpXTtcbiAgICAgICAgaWYgKGNvbmZpZy5hdHRyKGF0dHIubmFtZSwgYXR0ci52YWx1ZSkpIHtcbiAgICAgICAgICAgIGxldmVsLnB1c2goe1xuICAgICAgICAgICAgICAgIG5hbWU6IGBbJHtDU1MuZXNjYXBlKGF0dHIubmFtZSl9PVwiJHtDU1MuZXNjYXBlKGF0dHIudmFsdWUpfVwiXWAsXG4gICAgICAgICAgICAgICAgcGVuYWx0eTogMixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHRhZ05hbWUgPSBlbGVtZW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcbiAgICBpZiAoY29uZmlnLnRhZ05hbWUodGFnTmFtZSkpIHtcbiAgICAgICAgbGV2ZWwucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiB0YWdOYW1lLFxuICAgICAgICAgICAgcGVuYWx0eTogNSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gaW5kZXhPZihlbGVtZW50LCB0YWdOYW1lKTtcbiAgICAgICAgaWYgKGluZGV4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxldmVsLnB1c2goe1xuICAgICAgICAgICAgICAgIG5hbWU6IG50aE9mVHlwZSh0YWdOYW1lLCBpbmRleCksXG4gICAgICAgICAgICAgICAgcGVuYWx0eTogMTAsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBudGggPSBpbmRleE9mKGVsZW1lbnQpO1xuICAgIGlmIChudGggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBsZXZlbC5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6IG50aENoaWxkKHRhZ05hbWUsIG50aCksXG4gICAgICAgICAgICBwZW5hbHR5OiA1MCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBsZXZlbDtcbn1cbmZ1bmN0aW9uIHNlbGVjdG9yKHBhdGgpIHtcbiAgICBsZXQgbm9kZSA9IHBhdGhbMF07XG4gICAgbGV0IHF1ZXJ5ID0gbm9kZS5uYW1lO1xuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgcGF0aC5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBsZXZlbCA9IHBhdGhbaV0ubGV2ZWwgfHwgMDtcbiAgICAgICAgaWYgKG5vZGUubGV2ZWwgPT09IGxldmVsIC0gMSkge1xuICAgICAgICAgICAgcXVlcnkgPSBgJHtwYXRoW2ldLm5hbWV9ID4gJHtxdWVyeX1gO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcXVlcnkgPSBgJHtwYXRoW2ldLm5hbWV9ICR7cXVlcnl9YDtcbiAgICAgICAgfVxuICAgICAgICBub2RlID0gcGF0aFtpXTtcbiAgICB9XG4gICAgcmV0dXJuIHF1ZXJ5O1xufVxuZnVuY3Rpb24gcGVuYWx0eShwYXRoKSB7XG4gICAgcmV0dXJuIHBhdGgubWFwKChub2RlKSA9PiBub2RlLnBlbmFsdHkpLnJlZHVjZSgoYWNjLCBpKSA9PiBhY2MgKyBpLCAwKTtcbn1cbmZ1bmN0aW9uIGJ5UGVuYWx0eShhLCBiKSB7XG4gICAgcmV0dXJuIHBlbmFsdHkoYSkgLSBwZW5hbHR5KGIpO1xufVxuZnVuY3Rpb24gaW5kZXhPZihpbnB1dCwgdGFnTmFtZSkge1xuICAgIGNvbnN0IHBhcmVudCA9IGlucHV0LnBhcmVudE5vZGU7XG4gICAgaWYgKCFwYXJlbnQpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgbGV0IGNoaWxkID0gcGFyZW50LmZpcnN0Q2hpbGQ7XG4gICAgaWYgKCFjaGlsZCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBsZXQgaSA9IDA7XG4gICAgd2hpbGUgKGNoaWxkKSB7XG4gICAgICAgIGlmIChjaGlsZC5ub2RlVHlwZSA9PT0gTm9kZS5FTEVNRU5UX05PREUgJiZcbiAgICAgICAgICAgICh0YWdOYW1lID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgICAgICBjaGlsZC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09IHRhZ05hbWUpKSB7XG4gICAgICAgICAgICBpKys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNoaWxkID09PSBpbnB1dCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2hpbGQgPSBjaGlsZC5uZXh0U2libGluZztcbiAgICB9XG4gICAgcmV0dXJuIGk7XG59XG5mdW5jdGlvbiBmYWxsYmFjayhpbnB1dCwgcm9vdERvY3VtZW50KSB7XG4gICAgbGV0IGkgPSAwO1xuICAgIGxldCBjdXJyZW50ID0gaW5wdXQ7XG4gICAgY29uc3QgcGF0aCA9IFtdO1xuICAgIHdoaWxlIChjdXJyZW50ICYmIGN1cnJlbnQgIT09IHJvb3REb2N1bWVudCkge1xuICAgICAgICBjb25zdCB0YWdOYW1lID0gY3VycmVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gaW5kZXhPZihjdXJyZW50LCB0YWdOYW1lKTtcbiAgICAgICAgaWYgKGluZGV4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBwYXRoLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogbnRoT2ZUeXBlKHRhZ05hbWUsIGluZGV4KSxcbiAgICAgICAgICAgIHBlbmFsdHk6IE5hTixcbiAgICAgICAgICAgIGxldmVsOiBpLFxuICAgICAgICB9KTtcbiAgICAgICAgY3VycmVudCA9IGN1cnJlbnQucGFyZW50RWxlbWVudDtcbiAgICAgICAgaSsrO1xuICAgIH1cbiAgICBpZiAodW5pcXVlKHBhdGgsIHJvb3REb2N1bWVudCkpIHtcbiAgICAgICAgcmV0dXJuIHBhdGg7XG4gICAgfVxufVxuZnVuY3Rpb24gbnRoQ2hpbGQodGFnTmFtZSwgaW5kZXgpIHtcbiAgICBpZiAodGFnTmFtZSA9PT0gJ2h0bWwnKSB7XG4gICAgICAgIHJldHVybiAnaHRtbCc7XG4gICAgfVxuICAgIHJldHVybiBgJHt0YWdOYW1lfTpudGgtY2hpbGQoJHtpbmRleH0pYDtcbn1cbmZ1bmN0aW9uIG50aE9mVHlwZSh0YWdOYW1lLCBpbmRleCkge1xuICAgIGlmICh0YWdOYW1lID09PSAnaHRtbCcpIHtcbiAgICAgICAgcmV0dXJuICdodG1sJztcbiAgICB9XG4gICAgcmV0dXJuIGAke3RhZ05hbWV9Om50aC1vZi10eXBlKCR7aW5kZXh9KWA7XG59XG5mdW5jdGlvbiogY29tYmluYXRpb25zKHN0YWNrLCBwYXRoID0gW10pIHtcbiAgICBpZiAoc3RhY2subGVuZ3RoID4gMCkge1xuICAgICAgICBmb3IgKGxldCBub2RlIG9mIHN0YWNrWzBdKSB7XG4gICAgICAgICAgICB5aWVsZCogY29tYmluYXRpb25zKHN0YWNrLnNsaWNlKDEsIHN0YWNrLmxlbmd0aCksIHBhdGguY29uY2F0KG5vZGUpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgeWllbGQgcGF0aDtcbiAgICB9XG59XG5mdW5jdGlvbiBmaW5kUm9vdERvY3VtZW50KHJvb3ROb2RlLCBkZWZhdWx0cykge1xuICAgIGlmIChyb290Tm9kZS5ub2RlVHlwZSA9PT0gTm9kZS5ET0NVTUVOVF9OT0RFKSB7XG4gICAgICAgIHJldHVybiByb290Tm9kZTtcbiAgICB9XG4gICAgaWYgKHJvb3ROb2RlID09PSBkZWZhdWx0cy5yb290KSB7XG4gICAgICAgIHJldHVybiByb290Tm9kZS5vd25lckRvY3VtZW50O1xuICAgIH1cbiAgICByZXR1cm4gcm9vdE5vZGU7XG59XG5mdW5jdGlvbiB1bmlxdWUocGF0aCwgcm9vdERvY3VtZW50KSB7XG4gICAgY29uc3QgY3NzID0gc2VsZWN0b3IocGF0aCk7XG4gICAgc3dpdGNoIChyb290RG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjc3MpLmxlbmd0aCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbid0IHNlbGVjdCBhbnkgbm9kZSB3aXRoIHRoaXMgc2VsZWN0b3I6ICR7Y3NzfWApO1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5mdW5jdGlvbiogb3B0aW1pemUocGF0aCwgaW5wdXQsIGNvbmZpZywgcm9vdERvY3VtZW50LCBzdGFydFRpbWUpIHtcbiAgICBpZiAocGF0aC5sZW5ndGggPiAyICYmIHBhdGgubGVuZ3RoID4gY29uZmlnLm9wdGltaXplZE1pbkxlbmd0aCkge1xuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHBhdGgubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBlbGFwc2VkVGltZU1zID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgLSBzdGFydFRpbWUuZ2V0VGltZSgpO1xuICAgICAgICAgICAgaWYgKGVsYXBzZWRUaW1lTXMgPiBjb25maWcudGltZW91dE1zKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbmV3UGF0aCA9IFsuLi5wYXRoXTtcbiAgICAgICAgICAgIG5ld1BhdGguc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgaWYgKHVuaXF1ZShuZXdQYXRoLCByb290RG9jdW1lbnQpICYmXG4gICAgICAgICAgICAgICAgcm9vdERvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IobmV3UGF0aCkpID09PSBpbnB1dCkge1xuICAgICAgICAgICAgICAgIHlpZWxkIG5ld1BhdGg7XG4gICAgICAgICAgICAgICAgeWllbGQqIG9wdGltaXplKG5ld1BhdGgsIGlucHV0LCBjb25maWcsIHJvb3REb2N1bWVudCwgc3RhcnRUaW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbiIsIi8qKlxuICogQHN1bW1hcnkgVHlwZSBndWFyZCB0byBlbnN1cmUgdGhlIHByb3ZpZGVkIGVsZW1lbnQgaXMgYW4gSFRNTEVsZW1lbnQuXG4gKiBAcGFyYW0gZWwgVGhlIGVsZW1lbnQgdG8gY2hlY2suXG4gKiBAcmV0dXJucyBUcnVlIGlmIHRoZSBlbGVtZW50IGlzIGFuIEhUTUxFbGVtZW50OyBvdGhlcndpc2UsIGZhbHNlLlxuICovXG5mdW5jdGlvbiBpc0hUTUxFbGVtZW50KGVsKSB7XG4gICAgcmV0dXJuIGVsIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQ7XG59XG4vKipcbiAqIEBzdW1tYXJ5IEdldHMgdGhlIGhvcml6b250YWwgcGFnZSBvZmZzZXQgaW4gQ1NTIHBpeGVscywgcHJlZmVycmluZyB2aXN1YWxWaWV3cG9ydCB3aGVuIGF2YWlsYWJsZS5cbiAqIEByZXR1cm5zIFRoZSBob3Jpem9udGFsIHBhZ2Ugb2Zmc2V0IChDU1MgcGl4ZWxzKS5cbiAqL1xuZnVuY3Rpb24gcGFnZU9mZnNldFgoKSB7XG4gICAgLy8gUHJlZmVyIHZpc3VhbFZpZXdwb3J0IGZvciBwaW5jaC16b29tIHNjZW5hcmlvczsgb2Z0ZW4gZXF1YWxzIHdpbmRvdy5zY3JvbGxYIG9uIGRlc2t0b3AuXG4gICAgcmV0dXJuICh3aW5kb3cudmlzdWFsVmlld3BvcnQ/LnBhZ2VMZWZ0ID8/IHdpbmRvdy5zY3JvbGxYKSB8fCAwO1xufVxuLyoqXG4gKiBAc3VtbWFyeSBHZXRzIHRoZSB2ZXJ0aWNhbCBwYWdlIG9mZnNldCBpbiBDU1MgcGl4ZWxzLCBwcmVmZXJyaW5nIHZpc3VhbFZpZXdwb3J0IHdoZW4gYXZhaWxhYmxlLlxuICogQHJldHVybnMgVGhlIHZlcnRpY2FsIHBhZ2Ugb2Zmc2V0IChDU1MgcGl4ZWxzKS5cbiAqL1xuZnVuY3Rpb24gcGFnZU9mZnNldFkoKSB7XG4gICAgLy8gUHJlZmVyIHZpc3VhbFZpZXdwb3J0IGZvciBwaW5jaC16b29tIHNjZW5hcmlvczsgb2Z0ZW4gZXF1YWxzIHdpbmRvdy5zY3JvbGxZIG9uIGRlc2t0b3AuXG4gICAgcmV0dXJuICh3aW5kb3cudmlzdWFsVmlld3BvcnQ/LnBhZ2VUb3AgPz8gd2luZG93LnNjcm9sbFkpIHx8IDA7XG59XG4vKipcbiAqIEBzdW1tYXJ5IE1lYXN1cmVzIHRoZSBtYXhpbXVtIHJlbmRlcmVkIGNvbnRlbnQgYXJlYSBvZiB0aGUgcGFnZSBpbiBDU1MgcGl4ZWxzLCBjb25zaWRlcmluZ1xuICogc2Nyb2xsIGNvbnRhaW5lcnMgKGUuZy4sIG92ZXJmbG93ZWQgPG1haW4+KSwgZml4ZWQvYWJzb2x1dGUvdHJhbnNmb3JtIGxheW91dHMsIGFuZCBuZWdhdGl2ZSBvdmVyZmxvdy5cbiAqIEFsc28gcmV0dXJucyByb3VnaCBzZWxlY3RvcnMgZm9yIHRoZSBlbGVtZW50cyBjb250cmlidXRpbmcgdG8gd2lkdGgvaGVpZ2h0LlxuICogQHJldHVybnMgQSBDb250ZW50U2l6ZSBvYmplY3QgY29udGFpbmluZyB3aWR0aCwgaGVpZ2h0LCBhbmQgc2VsZWN0b3IgaGludHMgKHdpZGVzdEJ5LCB0YWxsZXN0QnkpLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbWVhc3VyZUNvbnRlbnRTaXplKCkge1xuICAgIGNvbnN0IGRvY0VsID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuICAgIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5ib2R5ID8/IG51bGw7XG4gICAgY29uc3Qgc2UgPSBkb2N1bWVudC5zY3JvbGxpbmdFbGVtZW50ID8/IG51bGw7XG4gICAgLy8gQmFzZWxpbmUgc2l6ZXMgZnJvbSBkb2N1bWVudC9ib2R5L3Njcm9sbGluZ0VsZW1lbnQgKHNpemUgbWV0cmljcyBvbmx5KS5cbiAgICBjb25zdCBiYXNlVyA9IE1hdGgubWF4KGRvY0VsLnNjcm9sbFdpZHRoLCBkb2NFbC5vZmZzZXRXaWR0aCwgZG9jRWwuY2xpZW50V2lkdGgsIGJvZHk/LnNjcm9sbFdpZHRoID8/IDAsIGJvZHk/Lm9mZnNldFdpZHRoID8/IDAsIGJvZHk/LmNsaWVudFdpZHRoID8/IDAsIHNlPy5zY3JvbGxXaWR0aCA/PyAwLCBzZT8ub2Zmc2V0V2lkdGggPz8gMCwgc2U/LmNsaWVudFdpZHRoID8/IDApO1xuICAgIGNvbnN0IGJhc2VIID0gTWF0aC5tYXgoZG9jRWwuc2Nyb2xsSGVpZ2h0LCBkb2NFbC5vZmZzZXRIZWlnaHQsIGRvY0VsLmNsaWVudEhlaWdodCwgYm9keT8uc2Nyb2xsSGVpZ2h0ID8/IDAsIGJvZHk/Lm9mZnNldEhlaWdodCA/PyAwLCBib2R5Py5jbGllbnRIZWlnaHQgPz8gMCwgc2U/LnNjcm9sbEhlaWdodCA/PyAwLCBzZT8ub2Zmc2V0SGVpZ2h0ID8/IDAsIHNlPy5jbGllbnRIZWlnaHQgPz8gMCk7XG4gICAgLy8gQWdncmVnYXRlIGVsZW1lbnQgcG9zaXRpb25zICh2aXN1YWwgYm91bmRpbmcgYm94KSBhbmQgc2l6ZXMgKHNjcm9sbCB0b3RhbHMpIHNlcGFyYXRlbHkuXG4gICAgbGV0IG1pbkxlZnQgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7XG4gICAgbGV0IG1pblRvcCA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTtcbiAgICBsZXQgbWF4UmlnaHQgPSBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFk7XG4gICAgbGV0IG1heEJvdHRvbSA9IE51bWJlci5ORUdBVElWRV9JTkZJTklUWTtcbiAgICBsZXQgbWF4U2Nyb2xsVyA9IDA7XG4gICAgbGV0IG1heFNjcm9sbEggPSAwO1xuICAgIGNvbnN0IG9mZlggPSBwYWdlT2Zmc2V0WCgpO1xuICAgIGNvbnN0IG9mZlkgPSBwYWdlT2Zmc2V0WSgpO1xuICAgIGNvbnN0IGVsZW1lbnRzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcqJykpLmZpbHRlcihpc0hUTUxFbGVtZW50KTtcbiAgICBmb3IgKGNvbnN0IGVsIG9mIGVsZW1lbnRzKSB7XG4gICAgICAgIC8vIFNpemUgbWV0cmljcyAodG90YWwgc2Nyb2xsYWJsZSBzaXplIG9mIGNvbnRhaW5lcnMpLlxuICAgICAgICBpZiAoZWwuc2Nyb2xsV2lkdGggPiBtYXhTY3JvbGxXKSB7XG4gICAgICAgICAgICBtYXhTY3JvbGxXID0gZWwuc2Nyb2xsV2lkdGg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVsLnNjcm9sbEhlaWdodCA+IG1heFNjcm9sbEgpIHtcbiAgICAgICAgICAgIG1heFNjcm9sbEggPSBlbC5zY3JvbGxIZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUG9zaXRpb24gbWV0cmljcyAodmlzdWFsIGJvdW5kcykgbm9ybWFsaXplZCB0byBwYWdlIGNvb3JkaW5hdGVzLlxuICAgICAgICBjb25zdCByID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGNvbnN0IGxlZnQgPSByLmxlZnQgKyBvZmZYO1xuICAgICAgICBjb25zdCByaWdodCA9IHIucmlnaHQgKyBvZmZYO1xuICAgICAgICBjb25zdCB0b3AgPSByLnRvcCArIG9mZlk7XG4gICAgICAgIGNvbnN0IGJvdHRvbSA9IHIuYm90dG9tICsgb2ZmWTtcbiAgICAgICAgaWYgKGxlZnQgPCBtaW5MZWZ0KVxuICAgICAgICAgICAgbWluTGVmdCA9IGxlZnQ7XG4gICAgICAgIGlmICh0b3AgPCBtaW5Ub3ApXG4gICAgICAgICAgICBtaW5Ub3AgPSB0b3A7XG4gICAgICAgIGlmIChyaWdodCA+IG1heFJpZ2h0KSB7XG4gICAgICAgICAgICBtYXhSaWdodCA9IHJpZ2h0O1xuICAgICAgICB9XG4gICAgICAgIGlmIChib3R0b20gPiBtYXhCb3R0b20pIHtcbiAgICAgICAgICAgIG1heEJvdHRvbSA9IGJvdHRvbTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBHdWFyZHMgZm9yIHBhZ2VzIHdpdGggbm8gZWxlbWVudHMuXG4gICAgaWYgKCFpc0Zpbml0ZShtaW5MZWZ0KSlcbiAgICAgICAgbWluTGVmdCA9IDA7XG4gICAgaWYgKCFpc0Zpbml0ZShtaW5Ub3ApKVxuICAgICAgICBtaW5Ub3AgPSAwO1xuICAgIGlmICghaXNGaW5pdGUobWF4UmlnaHQpKVxuICAgICAgICBtYXhSaWdodCA9IGJhc2VXO1xuICAgIGlmICghaXNGaW5pdGUobWF4Qm90dG9tKSlcbiAgICAgICAgbWF4Qm90dG9tID0gYmFzZUg7XG4gICAgLy8gVmlzdWFsIGJvdW5kaW5nLWJveCBzaXplIChwb3NpdGlvbi1iYXNlZCkuXG4gICAgY29uc3QgYmJveFdpZHRoID0gTWF0aC5tYXgoMCwgTWF0aC5jZWlsKG1heFJpZ2h0IC0gbWluTGVmdCkpO1xuICAgIGNvbnN0IGJib3hIZWlnaHQgPSBNYXRoLm1heCgwLCBNYXRoLmNlaWwobWF4Qm90dG9tIC0gbWluVG9wKSk7XG4gICAgLy8gRmluYWwgc2l6ZTogdGhlIG1heGltdW0gb2YgZG9jdW1lbnQgYmFzZWxpbmUsIHNjcm9sbCB0b3RhbHMsIGFuZCB2aXN1YWwgYm91bmRzLlxuICAgIGNvbnN0IHdpZHRoID0gTWF0aC5tYXgoYmFzZVcsIG1heFNjcm9sbFcsIGJib3hXaWR0aCk7XG4gICAgY29uc3QgaGVpZ2h0ID0gTWF0aC5tYXgoYmFzZUgsIG1heFNjcm9sbEgsIGJib3hIZWlnaHQpO1xuICAgIHJldHVybiB7XG4gICAgICAgIHdpZHRoLFxuICAgICAgICBoZWlnaHQsXG4gICAgfTtcbn1cbiIsImxldCBzaGFkb3dSb290ID0gbnVsbDtcbmxldCByb290RWwgPSBudWxsO1xuY29uc3QgdHJhY2tlZCA9IG5ldyBNYXAoKTtcbmxldCByYWZQZW5kaW5nID0gZmFsc2U7XG5sZXQgaG92ZXJlZElkID0gbnVsbDtcbmxldCBsaXN0ZW5lcnNBdHRhY2hlZCA9IGZhbHNlO1xuLyoqXG4gKiBNb3VudHMgdGhlIG9uLXBhZ2Ugb3ZlcmxheSAoU2hhZG93IERPTSkgdGhhdCBkcmF3cyBzZWxlY3Rpb24gYm94ZXMuXG4gKiBBbHNvIHNldHMgdXAgc2Nyb2xsL3Jlc2l6ZSBsaXN0ZW5lcnMgdG8gcmVzY2hlZHVsZSBwb3NpdGlvbiB1cGRhdGVzLlxuICpcbiAqIEByZW1hcmtzIElkZW1wb3RlbnQ6IHJlcGVhdGVkIGNhbGxzIHdvbid0IG1vdW50IHR3aWNlLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbW91bnRPdmVybGF5KCkge1xuICAgIGlmIChyb290RWwgJiYgc2hhZG93Um9vdClcbiAgICAgICAgcmV0dXJuO1xuICAgIGxldCBob3N0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Nwc2stcm9vdCcpO1xuICAgIGlmICghaG9zdCkge1xuICAgICAgICBob3N0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGhvc3QuaWQgPSAnc3Bzay1yb290JztcbiAgICAgICAgKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCB8fCBkb2N1bWVudC5ib2R5KS5hcHBlbmRDaGlsZChob3N0KTtcbiAgICB9XG4gICAgc2hhZG93Um9vdCA9IGhvc3Quc2hhZG93Um9vdCA/PyBob3N0LmF0dGFjaFNoYWRvdyh7IG1vZGU6ICdvcGVuJyB9KTtcbiAgICBjb25zdCBjc3NIcmVmID0gY2hyb21lLnJ1bnRpbWUuZ2V0VVJMKCdzdHlsZXMvb3ZlcmxheS5jc3MnKTtcbiAgICBsZXQgbGluayA9IHNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcihgbGlua1tyZWw9XCJzdHlsZXNoZWV0XCJdW2hyZWY9XCIke2Nzc0hyZWZ9XCJdYCk7XG4gICAgaWYgKCFsaW5rKSB7XG4gICAgICAgIGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaW5rJyk7XG4gICAgICAgIGxpbmsucmVsID0gJ3N0eWxlc2hlZXQnO1xuICAgICAgICBsaW5rLmhyZWYgPSBjc3NIcmVmO1xuICAgICAgICBzaGFkb3dSb290LmFwcGVuZENoaWxkKGxpbmspO1xuICAgIH1cbiAgICByb290RWwgPSBzaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5zcHNrLW92ZXJsYXknKTtcbiAgICBpZiAoIXJvb3RFbCkge1xuICAgICAgICByb290RWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgcm9vdEVsLmNsYXNzTmFtZSA9ICdzcHNrLW92ZXJsYXknO1xuICAgICAgICBzaGFkb3dSb290LmFwcGVuZENoaWxkKHJvb3RFbCk7XG4gICAgfVxuICAgIGlmICghbGlzdGVuZXJzQXR0YWNoZWQpIHtcbiAgICAgICAgY29uc3Qgc2NoZWR1bGUgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAocmFmUGVuZGluZylcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICByYWZQZW5kaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmFmUGVuZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHVwZGF0ZVBvc2l0aW9ucygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBzY2hlZHVsZSwgeyBwYXNzaXZlOiB0cnVlIH0pO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgc2NoZWR1bGUsIHsgcGFzc2l2ZTogdHJ1ZSB9KTtcbiAgICAgICAgaWYgKHdpbmRvdy52aXN1YWxWaWV3cG9ydCkge1xuICAgICAgICAgICAgd2luZG93LnZpc3VhbFZpZXdwb3J0LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHNjaGVkdWxlLCB7IHBhc3NpdmU6IHRydWUgfSk7XG4gICAgICAgICAgICB3aW5kb3cudmlzdWFsVmlld3BvcnQuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgc2NoZWR1bGUsIHsgcGFzc2l2ZTogdHJ1ZSB9KTtcbiAgICAgICAgfVxuICAgICAgICBsaXN0ZW5lcnNBdHRhY2hlZCA9IHRydWU7XG4gICAgfVxufVxuLyoqXG4gKiBSZW5kZXJzIHRoZSBnaXZlbiBpdGVtcyBpbnRvIHRoZSBvdmVybGF5LlxuICogQXBwbGllcyBhZGQvdXBkYXRlL3JlbW92ZSBieSBkaWZmaW5nIGFnYWluc3QgY3VycmVudCBzdGF0ZS5cbiAqXG4gKiBAcGFyYW0gaXRlbXMgLSBBcnJheSBvZiBTY3JlZW5JdGVtIHRvIGRpc3BsYXlcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlbmRlckl0ZW1zKGl0ZW1zKSB7XG4gICAgaWYgKCFyb290RWwpXG4gICAgICAgIGF3YWl0IG1vdW50T3ZlcmxheSgpO1xuICAgIGlmICghcm9vdEVsKVxuICAgICAgICByZXR1cm47XG4gICAgLy8gRGlmZjogcmVtb3ZlIGRpc2FwcGVhcmVkIGl0ZW1zXG4gICAgY29uc3QgaWRzID0gbmV3IFNldChpdGVtcy5tYXAoKGkpID0+IGkuaWQpKTtcbiAgICBmb3IgKGNvbnN0IFtpZCwgdF0gb2YgdHJhY2tlZC5lbnRyaWVzKCkpIHtcbiAgICAgICAgaWYgKCFpZHMuaGFzKGlkKSkge1xuICAgICAgICAgICAgdC5ib3hFbC5yZW1vdmUoKTtcbiAgICAgICAgICAgIHRyYWNrZWQuZGVsZXRlKGlkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBhZGQvdXBkYXRlXG4gICAgZm9yIChjb25zdCBpdCBvZiBpdGVtcykge1xuICAgICAgICBjb25zdCBlbnRyeSA9IGVuc3VyZVRyYWNrZWRFbnRyeShpdCk7XG4gICAgICAgIGFwcGx5VmlzdWFsU3RhdGUoZW50cnksIGl0KTtcbiAgICB9XG4gICAgYXdhaXQgd2FpdEZvclBvc2l0aW9uc0FwcGxpZWQoKTtcbn1cbi8qKlxuICogRW5zdXJlcyBhIGBUcmFja2VkYCBlbnRyeSBleGlzdHMgZm9yIHRoZSBnaXZlbiBzY3JlZW4gaXRlbS5cbiAqIElmIHByZXNlbnQsIHJldHVybnMgdGhlIGV4aXN0aW5nIG9uZTsgb3RoZXJ3aXNlIGNyZWF0ZXMgRE9NIG5vZGVzXG4gKiAoYm94LCBiYWRnZSwgY29tbWVudCksIHJlZ2lzdGVycyB0aGVtLCBhbmQgYXBwZW5kcyB0byB0aGUgb3ZlcmxheSByb290LlxuICpcbiAqIEBwYXJhbSBpdGVtIC0gU291cmNlIHNjcmVlbiBpdGVtIHRvIGVuc3VyZSBpcyB0cmFja2VkLlxuICogQHJldHVybnMgVGhlIGV4aXN0aW5nIG9yIG5ld2x5IGNyZWF0ZWQgYFRyYWNrZWRgIGVudHJ5IGZvciB0aGUgaXRlbS5cbiAqL1xuZnVuY3Rpb24gZW5zdXJlVHJhY2tlZEVudHJ5KGl0ZW0pIHtcbiAgICBjb25zdCBleGlzdGluZyA9IHRyYWNrZWQuZ2V0KGl0ZW0uaWQpO1xuICAgIGlmIChleGlzdGluZykge1xuICAgICAgICByZXR1cm4gZXhpc3Rpbmc7XG4gICAgfVxuICAgIGNvbnN0IGJveEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY29uc3QgYmFkZ2VFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbnN0IGNvbW1lbnRFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbW1lbnRFbC5jbGFzc05hbWUgPSAnc3Bzay1jb21tZW50JztcbiAgICBib3hFbC5hcHBlbmQoYmFkZ2VFbCwgY29tbWVudEVsKTtcbiAgICBjb25zdCBuZXdFbnRyeSA9IHtcbiAgICAgICAgYW5jaG9yOiBpdGVtLmFuY2hvcixcbiAgICAgICAgYm94RWwsXG4gICAgICAgIGJhZGdlRWwsXG4gICAgICAgIGNvbW1lbnRFbCxcbiAgICAgICAgZWxSZWY6IG51bGwsXG4gICAgICAgIG1pc3Npbmc6IHRydWUsXG4gICAgfTtcbiAgICB0cmFja2VkLnNldChpdGVtLmlkLCBuZXdFbnRyeSk7XG4gICAgcm9vdEVsLmFwcGVuZENoaWxkKGJveEVsKTtcbiAgICByZXR1cm4gbmV3RW50cnk7XG59XG4vKipcbiAqIEFwcGxpZXMgdmlzdWFsIHN0YXRlIChjbGFzc2VzLCBpbmxpbmUgc3R5bGVzLCB0ZXh0KSB0byBhIHRyYWNrZWQgZW50cnlcbiAqIGJhc2VkIG9uIHRoZSBwcm92aWRlZCBzY3JlZW4gaXRlbTogc2l6ZSwgY29sb3IsIHNoYXBlLCBwb3NpdGlvbiwgYW5kIGNvbW1lbnQuXG4gKlxuICogQHBhcmFtIHRyYWNrZWQgLSBUaGUgdGFyZ2V0IHRyYWNrZWQgZW50cnkgd2hvc2UgRE9NIG5vZGVzIHdpbGwgYmUgdXBkYXRlZC5cbiAqIEBwYXJhbSBpdGVtIC0gVGhlIHNvdXJjZSBzY3JlZW4gaXRlbSB3aG9zZSB2aXN1YWwgcHJvcGVydGllcyBhcmUgYXBwbGllZC5cbiAqL1xuY29uc3QgYXBwbHlWaXN1YWxTdGF0ZSA9ICh0cmFja2VkLCBpdGVtKSA9PiB7XG4gICAgY29uc3Qgc2l6ZVB4ID0gYCR7aXRlbS5zaXplfXB4YDtcbiAgICBjb25zdCBjb2xvciA9IGl0ZW0uY29sb3IudG9Mb3dlckNhc2UoKTtcbiAgICB0cmFja2VkLmFuY2hvciA9IGl0ZW0uYW5jaG9yO1xuICAgIHRyYWNrZWQuYm94RWwuY2xhc3NOYW1lID0gYHNwc2stYm94IHNwc2stYm94LS0ke2NvbG9yfWA7XG4gICAgdHJhY2tlZC5ib3hFbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1zcHNrLWJvcmRlci13JywgYCR7aXRlbS5zaXplIC8gNH1weGApO1xuICAgIHRyYWNrZWQuYm94RWwuY2xhc3NMaXN0LnRvZ2dsZSgnYmFkZ2UtaGlkZGVuJywgaXRlbS5sYWJlbEZvcm1hdCA9PT0gJ05vbmUnKTtcbiAgICB0cmFja2VkLmJhZGdlRWwuY2xhc3NOYW1lID0gYHNwc2stYmFkZ2Ugc3Bzay1iYWRnZS0tJHtpdGVtLnNoYXBlfSBzcHNrLWJhZGdlLS0ke2NvbG9yfSBzcHNrLWJhZGdlLS0ke2l0ZW0ucG9zaXRpb259YDtcbiAgICB0cmFja2VkLmJhZGdlRWwuc3R5bGUuZm9udFNpemUgPSBzaXplUHg7XG4gICAgdHJhY2tlZC5iYWRnZUVsLnRleHRDb250ZW50ID0gZm9ybWF0TGFiZWwoaXRlbS5sYWJlbCwgaXRlbS5sYWJlbEZvcm1hdCk7XG4gICAgaWYgKGl0ZW0uY29tbWVudCkge1xuICAgICAgICB0cmFja2VkLmNvbW1lbnRFbC50ZXh0Q29udGVudCA9IGl0ZW0uY29tbWVudDtcbiAgICAgICAgdHJhY2tlZC5jb21tZW50RWwuc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUnO1xuICAgICAgICB0cmFja2VkLmNvbW1lbnRFbC5zdHlsZS5mb250U2l6ZSA9IHNpemVQeDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRyYWNrZWQuY29tbWVudEVsLnRleHRDb250ZW50ID0gJyc7XG4gICAgICAgIHRyYWNrZWQuY29tbWVudEVsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgfVxufTtcbi8qKlxuICogQ2xlYXJzIHRoZSBvdmVybGF5IGFuZCBpdHMgaW50ZXJuYWwgdHJhY2tpbmcgc3RhdGUuXG4gKiBSZW1vdmVzIERPTSBub2RlcyBhbmQgcmVzZXRzIHRoZSBtYXAuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjbGVhck92ZXJsYXkoKSB7XG4gICAgaWYgKCFyb290RWwpXG4gICAgICAgIHJldHVybjtcbiAgICByb290RWwuaW5uZXJIVE1MID0gJyc7XG4gICAgdHJhY2tlZC5jbGVhcigpO1xufVxuLyoqXG4gKiBTd2l0Y2hlcyB0aGUgaG92ZXIgaGlnaGxpZ2h0IHRvIHRoZSBzcGVjaWZpZWQgb3ZlcmxheS5cbiAqXG4gKiBAcGFyYW0gaWQgLSBPdmVybGF5IGlkZW50aWZpZXIgdG8gaGlnaGxpZ2h0LCBvciBgbnVsbGAgdG8gY2xlYXIgdGhlIGhpZ2hsaWdodC5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhpZ2hsaWdodE92ZXJsYXkoaWQpIHtcbiAgICBpZiAoaWQgPT09IGhvdmVyZWRJZClcbiAgICAgICAgcmV0dXJuO1xuICAgIGNvbnN0IHByZXYgPSBob3ZlcmVkSWQ7XG4gICAgaG92ZXJlZElkID0gaWQ7XG4gICAgaWYgKHByZXYgIT0gbnVsbCkge1xuICAgICAgICB0cmFja2VkLmdldChwcmV2KT8uYm94RWwuY2xhc3NMaXN0LnJlbW92ZSgnaXMtaG92ZXJlZCcpO1xuICAgIH1cbiAgICBpZiAoaWQgIT0gbnVsbCkge1xuICAgICAgICB0cmFja2VkLmdldChpZCk/LmJveEVsLmNsYXNzTGlzdC5hZGQoJ2lzLWhvdmVyZWQnKTtcbiAgICB9XG59XG4vKipcbiAqIFJldHVybnMgdGhlIElEcyBvZiB0cmFja2VkIGl0ZW1zIHdob3NlIHRhcmdldCBlbGVtZW50cyBhcmUgY3VycmVudGx5IG1pc3NpbmcuXG4gKlxuICogQHJldHVybnMgQXJyYXkgb2YgaXRlbSBJRHMgdGhhdCBhcmUgbWFya2VkIGFzIG1pc3NpbmcuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRNaXNzaW5nSWRzKCkge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRyYWNrZWQuZW50cmllcygpKVxuICAgICAgICAuZmlsdGVyKChbLCB0XSkgPT4gdC5taXNzaW5nKVxuICAgICAgICAubWFwKChbaWRdKSA9PiBpZCk7XG59XG4vKipcbiAqIFJlc29sdmVzIGFuIGVsZW1lbnQgYnkgQ1NTIHNlbGVjdG9yIHVzaW5nIHF1ZXJ5U2VsZWN0b3IuXG4gKlxuICogQHBhcmFtIGNzc1NlbGVjdG9yIC0gQ1NTIHNlbGVjdG9yIHRvIHF1ZXJ5XG4gKiBAcmV0dXJucyBUaGUgZmlyc3QgbWF0Y2hpbmcgZWxlbWVudCBvciBudWxsXG4gKi9cbmZ1bmN0aW9uIHJlc29sdmVFbGVtZW50KGNzc1NlbGVjdG9yKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY3NzU2VsZWN0b3IpO1xuICAgIH1cbiAgICBjYXRjaCB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cbi8qKlxuICogV2FpdHMgZm9yIHRoZSBuZXh0IGFuaW1hdGlvbiBmcmFtZSBhbmQgYXBwbGllcyBhIHNpbmdsZSBsYXlvdXQgdXBkYXRlLlxuICpcbiAqIEByZXR1cm5zIFRoaXMgZ3VhcmFudGVlcyBvcmRlcmluZyBvZiB0aGUgdXBkYXRlLCBub3QgdGhlIHZpc3VhbCBwYWludCBpdHNlbGYuXG4gKi9cbmZ1bmN0aW9uIHdhaXRGb3JQb3NpdGlvbnNBcHBsaWVkKCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgICAgdXBkYXRlUG9zaXRpb25zKCk7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuLyoqXG4gKiBVcGRhdGVzIHBvc2l0aW9ucyBhbmQgc2l6ZXMgb2YgYWxsIHRyYWNrZWQgYm94ZXMgdG8gbWF0Y2ggdGhlIGxhdGVzdCBsYXlvdXQuXG4gKiBIaWRlcyBib3hlcyB0ZW1wb3JhcmlseSB3aGVuIHRoZWlyIHRhcmdldCBlbGVtZW50cyBhcmUgbm90IGZvdW5kLlxuICpcbiAqIEByZW1hcmtzIEludGVuZGVkIHRvIGJlIGNhbGxlZCBmcm9tIHJlcXVlc3RBbmltYXRpb25GcmFtZS5cbiAqL1xuZnVuY3Rpb24gdXBkYXRlUG9zaXRpb25zKCkge1xuICAgIGZvciAoY29uc3QgW18sIHRdIG9mIHRyYWNrZWQuZW50cmllcygpKSB7XG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSBleGlzdGluZyByZWZlcmVuY2UgaXMgc3RpbGwgYWxpdmVcbiAgICAgICAgY29uc3QgZWwgPSByZXNvbHZlRWxlbWVudCh0LmFuY2hvci52YWx1ZSk7XG4gICAgICAgIHQuZWxSZWYgPSBlbCA/IG5ldyBXZWFrUmVmKGVsKSA6IG51bGw7XG4gICAgICAgIGlmICghZWwpIHtcbiAgICAgICAgICAgIC8vIExvc3Q6IGhpZGUgdGhlIGJveCAoYWRqdXN0IHN0eWxlcyBoZXJlIGlmIHlvdSB3YW50IGEgZmFpbnQgcGxhY2Vob2xkZXIpXG4gICAgICAgICAgICB0LmJveEVsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB0Lm1pc3NpbmcgPSB0cnVlO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0LmJveEVsLnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgICAgIHQubWlzc2luZyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHIgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgLy8gVGhlIG92ZXJsYXkgaXMgZml4ZWQtcG9zaXRpb25lZCwgc28gYXBwbHkgdmlld3BvcnQgY29vcmRpbmF0ZXMgYXMtaXNcbiAgICAgICAgdC5ib3hFbC5zdHlsZS5sZWZ0ID0gYCR7ci5sZWZ0fXB4YDtcbiAgICAgICAgdC5ib3hFbC5zdHlsZS50b3AgPSBgJHtyLnRvcH1weGA7XG4gICAgICAgIHQuYm94RWwuc3R5bGUud2lkdGggPSBgJHtyLndpZHRofXB4YDtcbiAgICAgICAgdC5ib3hFbC5zdHlsZS5oZWlnaHQgPSBgJHtyLmhlaWdodH1weGA7XG4gICAgfVxufVxuLyoqXG4gKiBGb3JtYXRzIGEgbGFiZWwgYWNjb3JkaW5nIHRvIHRoZSBnaXZlbiBmb3JtYXQgb3B0aW9uLlxuICpcbiAqIEBwYXJhbSBsYWJlbCAtIEEgbm9uLW5lZ2F0aXZlIGludGVnZXIgbGFiZWwgKGUuZy4sIDEsIDIuLi4pLlxuICogQHBhcmFtIGZtdCAtIExhYmVsIGZvcm1hdCBzdHJhdGVneTsgZGVmYXVsdHMgdG8gYCdOdW1iZXJzJ2AuXG4gKiBAcmV0dXJucyBUaGUgZm9ybWF0dGVkIGxhYmVsIHN0cmluZywgb3IgYG51bGxgIHdoZW4gdGhlIGZvcm1hdCBpcyBgJ05vbmUnYC5cbiAqL1xuZnVuY3Rpb24gZm9ybWF0TGFiZWwobGFiZWwsIGZtdCA9ICdOdW1iZXJzJykge1xuICAgIGlmIChsYWJlbCA8IDApXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignbGFiZWwgbXVzdCBiZSA+PSAwJyk7XG4gICAgc3dpdGNoIChmbXQpIHtcbiAgICAgICAgY2FzZSAnVXBwZXJBbHBoYSc6XG4gICAgICAgICAgICByZXR1cm4gdG9BbHBoYShsYWJlbCkudG9VcHBlckNhc2UoKTtcbiAgICAgICAgY2FzZSAnTG93ZXJBbHBoYSc6XG4gICAgICAgICAgICByZXR1cm4gdG9BbHBoYShsYWJlbCkudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgY2FzZSAnTm9uZSc6XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgY2FzZSAnTnVtYmVycyc6XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gU3RyaW5nKGxhYmVsKTtcbiAgICB9XG59XG4vKipcbiAqIENvbnZlcnRzIGEgcG9zaXRpdmUgMS1iYXNlZCBsYWJlbCBudW1iZXIgaW50byBhbiBFeGNlbC1zdHlsZSBhbHBoYWJldGljIGNvZGUuXG4gKiBFeGFtcGxlOiAxIOKGkiBBLCAyNiDihpIgWiwgMjcg4oaSIEFBLlxuICpcbiAqIEBwYXJhbSBsYWJlbCAtIEEgcG9zaXRpdmUgaW50ZWdlciB3aGVyZSAxIG1hcHMgdG8gJ0EnLlxuICogQHJldHVybnMgVGhlIGFscGhhYmV0aWMgcmVwcmVzZW50YXRpb24gKEEsIEIsIC4uLiwgWiwgQUEsIEFCLCAuLi4pLlxuICovXG5mdW5jdGlvbiB0b0FscGhhKGxhYmVsKSB7XG4gICAgbGV0IG4gPSBsYWJlbCAtIDE7IC8vIE5vcm1hbGl6ZSB0byAwLWJhc2VkXG4gICAgbGV0IHMgPSAnJztcbiAgICB3aGlsZSAobiA+PSAwKSB7XG4gICAgICAgIGNvbnN0IHIgPSBuICUgMjY7IC8vIFJhbmdlOiAwLi4yNVxuICAgICAgICBzID0gU3RyaW5nLmZyb21DaGFyQ29kZSg2NSArIHIpICsgczsgLy8gJ0EnICsgclxuICAgICAgICBuID0gTWF0aC5mbG9vcihuIC8gMjYpIC0gMTsgLy8gRXhjZWwtc3R5bGUgY2FycnlcbiAgICB9XG4gICAgcmV0dXJuIHM7XG59XG4iLCJpbXBvcnQgeyBpc1BhbmVsQ29udGVudFBvcnQgfSBmcm9tICdAY29tbW9uL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBNU0dfVFlQRSB9IGZyb20gJ0Bjb21tb24vbWVzc2FnZXMnO1xuaW1wb3J0IHsgYnVpbGRDc3NBbmNob3IgfSBmcm9tICcuL2FuY2hvcic7XG5pbXBvcnQgeyBtZWFzdXJlQ29udGVudFNpemUgfSBmcm9tICcuL21lYXN1cmUnO1xuaW1wb3J0IHsgY2xlYXJPdmVybGF5LCBnZXRNaXNzaW5nSWRzLCBoaWdobGlnaHRPdmVybGF5LCBtb3VudE92ZXJsYXksIHJlbmRlckl0ZW1zLCB9IGZyb20gJy4vb3ZlcmxheSc7XG5pbXBvcnQgeyBTZWxlY3RvciB9IGZyb20gJy4vc2VsZWN0b3InO1xuY29uc3Qgc2VsZWN0aW9uID0gbmV3IFNlbGVjdG9yKG9uUGljayk7XG5sZXQgcG9ydCA9IG51bGw7XG4vLyBBY2NlcHRzIGNvbm5lY3Rpb25zIGZyb20gdGhlIFBhbmVsLiBPbmNlIGNvbm5lY3RlZCwgaW5pdGlhbGl6ZXMgdGhlIG92ZXJsYXksXG4vLyBzdWJzY3JpYmVzIHRvIG1lc3NhZ2VzLCBhbmQgc2V0cyB1cCBjbGVhbnVwIG9uIGRpc2Nvbm5lY3QuXG5jaHJvbWUucnVudGltZS5vbkNvbm5lY3QuYWRkTGlzdGVuZXIoYXN5bmMgKHApID0+IHtcbiAgICBpZiAoIWlzUGFuZWxDb250ZW50UG9ydChwKSlcbiAgICAgICAgcmV0dXJuO1xuICAgIHBvcnQgPSBwO1xuICAgIGF3YWl0IG1vdW50T3ZlcmxheSgpO1xuICAgIC8vIEhhbmRsZXMgbWVzc2FnZXMgZnJvbSBQYW5lbCDihpIgQ29udGVudC5cbiAgICAvLyBQcm9jZXNzZXMgUlBDcyBzdWNoIGFzIHRvZ2dsaW5nIHNlbGVjdGlvbiwgcmVuZGVyaW5nLCBhbmQgY2xlYXJpbmcuXG4gICAgcC5vbk1lc3NhZ2UuYWRkTGlzdGVuZXIoYXN5bmMgKG1zZykgPT4ge1xuICAgICAgICBpZiAoIW1zZz8udHlwZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgc3dpdGNoIChtc2cudHlwZSkge1xuICAgICAgICAgICAgY2FzZSBNU0dfVFlQRS5QSU5HOlxuICAgICAgICAgICAgICAgIHAucG9zdE1lc3NhZ2UoeyBpZDogbXNnLmlkLCBvazogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgTVNHX1RZUEUuVE9HR0xFX1NFTEVDVDpcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb24uc2V0RW5hYmxlZCghIW1zZy5wYXlsb2FkPy5lbmFibGVkKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgTVNHX1RZUEUuUkVOREVSOiB7XG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbXMgPSBtc2cucGF5bG9hZC5pdGVtcztcbiAgICAgICAgICAgICAgICBhd2FpdCByZW5kZXJJdGVtcyhpdGVtcyk7XG4gICAgICAgICAgICAgICAgcG9zdE1pc3NpbmdJZHNJZkFueSgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBNU0dfVFlQRS5DTEVBUjpcbiAgICAgICAgICAgICAgICBhd2FpdCBjbGVhck92ZXJsYXkoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgTVNHX1RZUEUuSE9WRVI6XG4gICAgICAgICAgICAgICAgYXdhaXQgaGlnaGxpZ2h0T3ZlcmxheShtc2cucGF5bG9hZC5pZCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIE1TR19UWVBFLk1FQVNVUkVfU0laRToge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBheWxvYWQgPSBtZWFzdXJlQ29udGVudFNpemUoKTtcbiAgICAgICAgICAgICAgICBwLnBvc3RNZXNzYWdlKHsgdHlwZTogTVNHX1RZUEUuQ09OVEVOVF9TSVpFX1JFU1VMVCwgcGF5bG9hZCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIC8vIENsZWFucyB1cCBvbiBwb3J0IGRpc2Nvbm5lY3Rpb24uXG4gICAgLy8gRGlzYWJsZXMgc2VsZWN0aW9uIGFuZCBjbGVhcnMgdGhlIG92ZXJsYXkuXG4gICAgcC5vbkRpc2Nvbm5lY3QuYWRkTGlzdGVuZXIoKCkgPT4ge1xuICAgICAgICBzZWxlY3Rpb24uc2V0RW5hYmxlZChmYWxzZSk7XG4gICAgICAgIGNsZWFyT3ZlcmxheSgpO1xuICAgIH0pO1xufSk7XG4vKipcbiAqIENhbGxlZCB3aGVuIGFuIGVsZW1lbnQgaXMgcGlja2VkLlxuICogQnVpbGRzIGFuIGFuY2hvciBhbmQgbm90aWZpZXMgdGhlIFBhbmVsLlxuICpcbiAqIEBwYXJhbSBlbCAtIEVsZW1lbnQgY29uZmlybWVkIGJ5IGNsaWNrXG4gKi9cbmZ1bmN0aW9uIG9uUGljayhlbCkge1xuICAgIGNvbnN0IGFuY2hvciA9IGJ1aWxkQ3NzQW5jaG9yKGVsKTtcbiAgICBwb3J0Py5wb3N0TWVzc2FnZSh7XG4gICAgICAgIHR5cGU6IE1TR19UWVBFLlNFTEVDVEVELFxuICAgICAgICBwYXlsb2FkOiB7IGFuY2hvcnM6IFthbmNob3JdIH0sXG4gICAgICAgIGlkOiBjcnlwdG8ucmFuZG9tVVVJRCgpLFxuICAgIH0pO1xufVxuLyoqXG4gKiBTZW5kIHRvIHNpZGUgcGFuZWwgb25seSBpZiBNaXNzaW5nSWRzIGV4aXN0LlxuICovXG5mdW5jdGlvbiBwb3N0TWlzc2luZ0lkc0lmQW55KCkge1xuICAgIGNvbnN0IG1pc3NpbmdJZHMgPSBnZXRNaXNzaW5nSWRzKCk7XG4gICAgcG9ydD8ucG9zdE1lc3NhZ2Uoe1xuICAgICAgICB0eXBlOiBNU0dfVFlQRS5NSVNTSU5HX0lEUyxcbiAgICAgICAgcGF5bG9hZDogeyBtaXNzaW5nSWRzOiBtaXNzaW5nSWRzIH0sXG4gICAgICAgIGlkOiBjcnlwdG8ucmFuZG9tVVVJRCgpLFxuICAgIH0pO1xufVxuIiwiLyoqXG4gKiBBIHNpbXBsZSBlbGVtZW50IHNlbGVjdG9yIHRoYXQgaGlnaGxpZ2h0cyBlbGVtZW50cyBvbiBtb3VzZW92ZXJcbiAqIGFuZCBjb25maXJtcyBzZWxlY3Rpb24gb24gY2xpY2suXG4gKlxuICogQHJlbWFya3NcbiAqIC0gUmVnaXN0ZXJzIGNhcHR1cmUtcGhhc2UgbGlzdGVuZXJzIHdoZW4gZW5hYmxlZC5cbiAqIC0gVGhlIGhpZ2hsaWdodCBib3ggaXMgYWJzb2x1dGVseSBwb3NpdGlvbmVkIG9uIGBkb2N1bWVudC5ib2R5YC5cbiAqL1xuZXhwb3J0IGNsYXNzIFNlbGVjdG9yIHtcbiAgICBlbmFibGVkID0gZmFsc2U7XG4gICAgb25QaWNrO1xuICAgIG9uQ2xpY2sgPSAoZXYpID0+IHRoaXMuaGFuZGxlQ2xpY2soZXYpO1xuICAgIG9uUG9pbnRlckRvd24gPSAoZXYpID0+IHRoaXMuaGFuZGxlUG9pbnRlckRvd24oZXYpO1xuICAgIG9uTW91c2VPdmVyID0gKGV2KSA9PiB0aGlzLmhpZ2hsaWdodChldik7XG4gICAgaG92ZXJCb3ggPSBudWxsO1xuICAgIGNsZWFudXBUZW1wO1xuICAgIGxhc3RIb3ZlckVsO1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBzZWxlY3RvciB3aXRoIGEgY2FsbGJhY2sgaW52b2tlZCBvbiBzZWxlY3Rpb24gY29uZmlybWF0aW9uLlxuICAgICAqIEBwYXJhbSBvblBpY2sgLSBJbnZva2VkIHdoZW4gYSBjbGljayBjb25maXJtcyBhbiBlbGVtZW50XG4gICAgICovXG4gICAgY29uc3RydWN0b3Iob25QaWNrKSB7XG4gICAgICAgIHRoaXMub25QaWNrID0gb25QaWNrO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbmFibGVzIG9yIGRpc2FibGVzIHRoZSBzZWxlY3Rvci5cbiAgICAgKiBTdGFydHMvc3RvcHMgZXZlbnQgc3Vic2NyaXB0aW9ucyBhbmQgcmVtb3ZlcyB0aGUgaGlnaGxpZ2h0IG9uIGRpc2FibGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZW5hYmxlZCAtIFRydWUgdG8gZW5hYmxlOyBmYWxzZSB0byBkaXNhYmxlXG4gICAgICovXG4gICAgc2V0RW5hYmxlZChlbmFibGVkKSB7XG4gICAgICAgIGlmIChlbmFibGVkID09PSB0aGlzLmVuYWJsZWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMuZW5hYmxlZCA9IGVuYWJsZWQ7XG4gICAgICAgIGlmIChlbmFibGVkKSB7XG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub25DbGljaywgdHJ1ZSk7XG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVyZG93bicsIHRoaXMub25Qb2ludGVyRG93biwgdHJ1ZSk7XG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCB0aGlzLm9uTW91c2VPdmVyLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vbkNsaWNrLCB0cnVlKTtcbiAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJkb3duJywgdGhpcy5vblBvaW50ZXJEb3duLCB0cnVlKTtcbiAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsIHRoaXMub25Nb3VzZU92ZXIsIHRydWUpO1xuICAgICAgICAgICAgdGhpcy5jbGVhbnVwVGVtcD8uKCk7XG4gICAgICAgICAgICB0aGlzLmxhc3RIb3ZlckVsID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlSG92ZXIoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbGljayBoYW5kbGVyIHRoYXQgcHJldmVudHMgZGVmYXVsdCBiZWhhdmlvciwgc3RvcHMgcHJvcGFnYXRpb24sXG4gICAgICogYW5kIGVuc3VyZXMgbm8gZnVydGhlciBsaXN0ZW5lcnMgYXJlIGludm9rZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZXYgLSBDbGljayBldmVudFxuICAgICAqL1xuICAgIGhhbmRsZUNsaWNrKGV2KSB7XG4gICAgICAgIGlmICghdGhpcy5lbmFibGVkKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgZXYuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uPy4oKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUG9pbnRlciBkb3duIGhhbmRsZXIgdGhhdCBwcmV2ZW50cyBkZWZhdWx0IGJlaGF2aW9yIGFuZCBmb3J3YXJkcyB0aGUgZWxlbWVudCB0byBgb25QaWNrYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBldiAtIFBvaW50ZXIgZXZlbnRcbiAgICAgKi9cbiAgICBoYW5kbGVQb2ludGVyRG93bihldikge1xuICAgICAgICBpZiAoIXRoaXMuZW5hYmxlZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKGV2LmJ1dHRvbiAhPT0gMCB8fCAhZXYuaXNQcmltYXJ5KVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgZXYuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uPy4oKTtcbiAgICAgICAgY29uc3QgZWwgPSBldi50YXJnZXQ7XG4gICAgICAgIGlmICghZWwgfHwgZWwubm9kZVR5cGUgIT09IDEpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMub25QaWNrKGVsKTtcbiAgICAgICAgdGhpcy5jbGVhbnVwVGVtcD8uKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1vdXNlb3ZlciBoYW5kbGVyIHRoYXQgcmVwb3NpdGlvbnMgdGhlIGhpZ2hsaWdodCBib3ggdG8gdGhlIGhvdmVyZWQgZWxlbWVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBldiAtIE1vdXNlb3ZlciBldmVudFxuICAgICAqL1xuICAgIGhpZ2hsaWdodChldikge1xuICAgICAgICBpZiAoIXRoaXMuZW5hYmxlZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgZWwgPSBldi50YXJnZXQ7XG4gICAgICAgIGlmICghZWwgfHwgZWwubm9kZVR5cGUgIT09IDEpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IHJlY3QgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgdGhpcy5lbnN1cmVIb3ZlcigpO1xuICAgICAgICBjb25zdCBib3ggPSB0aGlzLmhvdmVyQm94O1xuICAgICAgICBib3guc3R5bGUubGVmdCA9IGAke3JlY3QubGVmdCArIHdpbmRvdy5zY3JvbGxYfXB4YDtcbiAgICAgICAgYm94LnN0eWxlLnRvcCA9IGAke3JlY3QudG9wICsgd2luZG93LnNjcm9sbFl9cHhgO1xuICAgICAgICBib3guc3R5bGUud2lkdGggPSBgJHtyZWN0LndpZHRofXB4YDtcbiAgICAgICAgYm94LnN0eWxlLmhlaWdodCA9IGAke3JlY3QuaGVpZ2h0fXB4YDtcbiAgICAgICAgaWYgKHRoaXMubGFzdEhvdmVyRWwgIT09IGVsKSB7XG4gICAgICAgICAgICB0aGlzLmNsZWFudXBUZW1wPy4oKTtcbiAgICAgICAgICAgIHRoaXMuY2xlYW51cFRlbXAgPSB0aGlzLnRlbXBFbmFibGVJZkRpc2FibGVkKGVsKTtcbiAgICAgICAgICAgIHRoaXMubGFzdEhvdmVyRWwgPSBlbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBUZW1wb3JhcmlseSBlbmFibGVzIGEgZGlzYWJsZWQgZm9ybSBjb250cm9sIChgPGJ1dHRvbj5gLCBgPGlucHV0PmAsIGA8c2VsZWN0PmAsIGA8dGV4dGFyZWE+YClcbiAgICAgKiB0byBhbGxvdyBwb2ludGVyIGFuZCBjbGljayBldmVudHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZWwgLSBUYXJnZXQgZWxlbWVudDsgaWdub3JlZCBpZiBub3QgYSBkaXNhYmxlZCBmb3JtIGNvbnRyb2wuXG4gICAgICogQHJldHVybnMgQSBjbGVhbnVwIGNhbGxiYWNrIHRoYXQgcmVzdG9yZXMgaXRzIG9yaWdpbmFsIHN0YXRlIChuby1vcCBpZiB1bmNoYW5nZWQpLlxuICAgICAqL1xuICAgIHRlbXBFbmFibGVJZkRpc2FibGVkKGVsKSB7XG4gICAgICAgIGNvbnN0IGN0cmwgPSBlbDtcbiAgICAgICAgaWYgKCEoJ2Rpc2FibGVkJyBpbiBjdHJsKSlcbiAgICAgICAgICAgIHJldHVybiAoKSA9PiB7IH07XG4gICAgICAgIGlmICghY3RybC5kaXNhYmxlZClcbiAgICAgICAgICAgIHJldHVybiAoKSA9PiB7IH07XG4gICAgICAgIGNvbnN0IHByZXYgPSB7XG4gICAgICAgICAgICBkaXNhYmxlZDogY3RybC5kaXNhYmxlZCxcbiAgICAgICAgICAgIGFyaWE6IGN0cmwuZ2V0QXR0cmlidXRlKCdhcmlhLWRpc2FibGVkJyksXG4gICAgICAgICAgICBwZTogY3RybC5zdHlsZS5wb2ludGVyRXZlbnRzLFxuICAgICAgICB9O1xuICAgICAgICAvLyBUZW1wb3JhcmlseSBlbmFibGVkIChzZW1hbnRpY3MgbWFpbnRhaW5lZCBpbiBhcmlhKVxuICAgICAgICBjdHJsLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgIGN0cmwuc2V0QXR0cmlidXRlKCdhcmlhLWRpc2FibGVkJywgJ3RydWUnKTtcbiAgICAgICAgY3RybC5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ2F1dG8nO1xuICAgICAgICAvLyBSZXN0b3JhdGlvbiBDbG9zdXJlXG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICBjdHJsLmRpc2FibGVkID0gcHJldi5kaXNhYmxlZDtcbiAgICAgICAgICAgIGlmIChwcmV2LmFyaWEgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjdHJsLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1kaXNhYmxlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY3RybC5zZXRBdHRyaWJ1dGUoJ2FyaWEtZGlzYWJsZWQnLCBwcmV2LmFyaWEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3RybC5zdHlsZS5wb2ludGVyRXZlbnRzID0gcHJldi5wZTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTGF6aWx5IGNyZWF0ZXMgdGhlIGhpZ2hsaWdodCBib3ggd2hlbiBuZWVkZWQuXG4gICAgICovXG4gICAgZW5zdXJlSG92ZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLmhvdmVyQm94KVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLmhvdmVyQm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5ob3ZlckJveC5zdHlsZSwge1xuICAgICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICAgICAgICBvdXRsaW5lOiAnM3B4IGRhc2hlZCByZ2JhKDk5LCAxMDIsIDI0MSwgMSknLFxuICAgICAgICAgICAgYmFja2dyb3VuZDogJ3JnYmEoOTksIDEwMiwgMjQxLCAwLjMpJyxcbiAgICAgICAgICAgIHBvaW50ZXJFdmVudHM6ICdub25lJyxcbiAgICAgICAgICAgIHpJbmRleDogJzIxNDc0ODM2NDcnLFxuICAgICAgICB9KTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLmhvdmVyQm94KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyB0aGUgaGlnaGxpZ2h0IGJveCBmcm9tIHRoZSBET00uXG4gICAgICovXG4gICAgcmVtb3ZlSG92ZXIoKSB7XG4gICAgICAgIHRoaXMuaG92ZXJCb3g/LnJlbW92ZSgpO1xuICAgICAgICB0aGlzLmhvdmVyQm94ID0gbnVsbDtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBmaW5kZXIgfSBmcm9tICdAbWVkdi9maW5kZXInO1xuLyoqXG4gKiBHZW5lcmF0ZXMgYSByZS1sb2NhdGFibGUgQ1NTIHNlbGVjdG9yIChhbmNob3IpIGZvciB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAqIFVzZXMgQG1lZHYvZmluZGVyIHRvIGluZmVyIGEgc3RhYmxlIHNlbGVjdG9yLlxuICpcbiAqIEBwYXJhbSBlbCAtIFRhcmdldCBET00gZWxlbWVudFxuICogQHJldHVybnMgR2VuZXJhdGVkIENTUyBhbmNob3JcbiAqIEByZW1hcmtzIFNlbGVjdG9yIGdlbmVyYXRpb24gaXMgdGltZS1saW1pdGVkIHZpYSBgdGltZW91dE1zYC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkQ3NzQW5jaG9yKGVsKSB7XG4gICAgY29uc3QgdmFsdWUgPSBmaW5kZXIoZWwsIHtcbiAgICAgICAgdGltZW91dE1zOiA1MDAsXG4gICAgfSk7XG4gICAgcmV0dXJuIHsga2luZDogJ2NzcycsIHZhbHVlLCB2ZXJzaW9uOiAxIH07XG59XG4iXSwibmFtZXMiOlsiQ0hBTk5FTCIsIk1TR19UWVBFIiwiYWNjZXB0ZWRBdHRyTmFtZXMiLCJTZXQiLCJhdHRyIiwibmFtZSIsInZhbHVlIiwibmFtZUlzT2siLCJoYXMiLCJzdGFydHNXaXRoIiwid29yZExpa2UiLCJ2YWx1ZUlzT2siLCJsZW5ndGgiLCJzbGljZSIsImlkTmFtZSIsImNsYXNzTmFtZSIsInRhZ05hbWUiLCJmaW5kZXIiLCJpbnB1dCIsIm9wdGlvbnMiLCJub2RlVHlwZSIsIk5vZGUiLCJFTEVNRU5UX05PREUiLCJFcnJvciIsInRvTG93ZXJDYXNlIiwiZGVmYXVsdHMiLCJyb290IiwiZG9jdW1lbnQiLCJib2R5IiwidGltZW91dE1zIiwic2VlZE1pbkxlbmd0aCIsIm9wdGltaXplZE1pbkxlbmd0aCIsIm1heE51bWJlck9mUGF0aENoZWNrcyIsIkluZmluaXR5Iiwic3RhcnRUaW1lIiwiRGF0ZSIsImNvbmZpZyIsInJvb3REb2N1bWVudCIsInJvb3ROb2RlIiwiRE9DVU1FTlRfTk9ERSIsIm93bmVyRG9jdW1lbnQiLCJmaW5kUm9vdERvY3VtZW50IiwiZm91bmRQYXRoIiwiY291bnQiLCJjYW5kaWRhdGUiLCJzdGFjayIsInBhdGhzIiwiY3VycmVudCIsImkiLCJsZXZlbCIsInRpZSIsIm5vZGUiLCJwdXNoIiwicGFyZW50RWxlbWVudCIsImNvbWJpbmF0aW9ucyIsInNvcnQiLCJieVBlbmFsdHkiLCJzZWFyY2giLCJnZXRUaW1lIiwiZlBhdGgiLCJmYWxsYmFjayIsInNlbGVjdG9yIiwidW5pcXVlIiwib3B0aW1pemVkIiwib3B0aW1pemUiLCJ0ZXN0Iiwid29yZHMiLCJzcGxpdCIsIndvcmQiLCJlbGVtZW50IiwiZWxlbWVudElkIiwiZ2V0QXR0cmlidXRlIiwiQ1NTIiwiZXNjYXBlIiwicGVuYWx0eSIsImNsYXNzTGlzdCIsImF0dHJpYnV0ZXMiLCJpbmRleCIsImluZGV4T2YiLCJ1bmRlZmluZWQiLCJudGhPZlR5cGUiLCJudGgiLCJudGhDaGlsZCIsInBhdGgiLCJxdWVyeSIsIm1hcCIsInJlZHVjZSIsImFjYyIsImEiLCJiIiwicGFyZW50IiwicGFyZW50Tm9kZSIsImNoaWxkIiwiZmlyc3RDaGlsZCIsIm5leHRTaWJsaW5nIiwiTmFOIiwiY29uY2F0IiwiY3NzIiwicXVlcnlTZWxlY3RvckFsbCIsIm5ld1BhdGgiLCJzcGxpY2UiLCJxdWVyeVNlbGVjdG9yIiwiaXNIVE1MRWxlbWVudCIsImVsIiwiSFRNTEVsZW1lbnQiLCJzaGFkb3dSb290Iiwicm9vdEVsIiwidHJhY2tlZCIsIk1hcCIsInJhZlBlbmRpbmciLCJob3ZlcmVkSWQiLCJsaXN0ZW5lcnNBdHRhY2hlZCIsImFzeW5jIiwibW91bnRPdmVybGF5IiwiaG9zdCIsImdldEVsZW1lbnRCeUlkIiwiY3JlYXRlRWxlbWVudCIsImlkIiwiZG9jdW1lbnRFbGVtZW50IiwiYXBwZW5kQ2hpbGQiLCJhdHRhY2hTaGFkb3ciLCJtb2RlIiwiY3NzSHJlZiIsImNocm9tZSIsInJ1bnRpbWUiLCJnZXRVUkwiLCJsaW5rIiwicmVsIiwiaHJlZiIsInNjaGVkdWxlIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwidXBkYXRlUG9zaXRpb25zIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsInBhc3NpdmUiLCJ2aXN1YWxWaWV3cG9ydCIsImVuc3VyZVRyYWNrZWRFbnRyeSIsIml0ZW0iLCJleGlzdGluZyIsImdldCIsImJveEVsIiwiYmFkZ2VFbCIsImNvbW1lbnRFbCIsImFwcGVuZCIsIm5ld0VudHJ5IiwiYW5jaG9yIiwiZWxSZWYiLCJtaXNzaW5nIiwic2V0IiwiYXBwbHlWaXN1YWxTdGF0ZSIsInNpemVQeCIsInNpemUiLCJjb2xvciIsInN0eWxlIiwic2V0UHJvcGVydHkiLCJ0b2dnbGUiLCJsYWJlbEZvcm1hdCIsInNoYXBlIiwicG9zaXRpb24iLCJmb250U2l6ZSIsInRleHRDb250ZW50IiwibGFiZWwiLCJmbXQiLCJ0b0FscGhhIiwidG9VcHBlckNhc2UiLCJTdHJpbmciLCJmb3JtYXRMYWJlbCIsImNvbW1lbnQiLCJkaXNwbGF5IiwiY2xlYXJPdmVybGF5IiwiaW5uZXJIVE1MIiwiY2xlYXIiLCJyZXNvbHZlRWxlbWVudCIsImNzc1NlbGVjdG9yIiwiXyIsInQiLCJlbnRyaWVzIiwiV2Vha1JlZiIsInIiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJsZWZ0IiwidG9wIiwid2lkdGgiLCJoZWlnaHQiLCJuIiwicyIsImZyb21DaGFyQ29kZSIsIk1hdGgiLCJmbG9vciIsInNlbGVjdGlvbiIsImVuYWJsZWQiLCJvblBpY2siLCJvbkNsaWNrIiwiZXYiLCJ0aGlzIiwiaGFuZGxlQ2xpY2siLCJvblBvaW50ZXJEb3duIiwiaGFuZGxlUG9pbnRlckRvd24iLCJvbk1vdXNlT3ZlciIsImhpZ2hsaWdodCIsImhvdmVyQm94IiwiY2xlYW51cFRlbXAiLCJsYXN0SG92ZXJFbCIsImNvbnN0cnVjdG9yIiwic2V0RW5hYmxlZCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJyZW1vdmVIb3ZlciIsInByZXZlbnREZWZhdWx0Iiwic3RvcFByb3BhZ2F0aW9uIiwic3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uIiwiYnV0dG9uIiwiaXNQcmltYXJ5IiwidGFyZ2V0IiwicmVjdCIsImVuc3VyZUhvdmVyIiwiYm94Iiwic2Nyb2xsWCIsInNjcm9sbFkiLCJ0ZW1wRW5hYmxlSWZEaXNhYmxlZCIsImN0cmwiLCJkaXNhYmxlZCIsInByZXYiLCJhcmlhIiwicGUiLCJwb2ludGVyRXZlbnRzIiwic2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwiT2JqZWN0IiwiYXNzaWduIiwib3V0bGluZSIsImJhY2tncm91bmQiLCJ6SW5kZXgiLCJyZW1vdmUiLCJraW5kIiwidmVyc2lvbiIsImJ1aWxkQ3NzQW5jaG9yIiwicG9ydCIsInBvc3RNZXNzYWdlIiwidHlwZSIsInBheWxvYWQiLCJhbmNob3JzIiwiY3J5cHRvIiwicmFuZG9tVVVJRCIsIm9uQ29ubmVjdCIsImFkZExpc3RlbmVyIiwicCIsImlzQ2hhbm5lbCIsImlzUGFuZWxDb250ZW50UG9ydCIsIm9uTWVzc2FnZSIsIm1zZyIsIm9rIiwiaXRlbXMiLCJpZHMiLCJkZWxldGUiLCJpdCIsImVudHJ5IiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZW5kZXJJdGVtcyIsIm1pc3NpbmdJZHMiLCJBcnJheSIsImZyb20iLCJmaWx0ZXIiLCJwb3N0TWlzc2luZ0lkc0lmQW55IiwiYWRkIiwiaGlnaGxpZ2h0T3ZlcmxheSIsImRvY0VsIiwic2UiLCJzY3JvbGxpbmdFbGVtZW50IiwiYmFzZVciLCJtYXgiLCJzY3JvbGxXaWR0aCIsIm9mZnNldFdpZHRoIiwiY2xpZW50V2lkdGgiLCJiYXNlSCIsInNjcm9sbEhlaWdodCIsIm9mZnNldEhlaWdodCIsImNsaWVudEhlaWdodCIsIm1pbkxlZnQiLCJOdW1iZXIiLCJQT1NJVElWRV9JTkZJTklUWSIsIm1pblRvcCIsIm1heFJpZ2h0IiwiTkVHQVRJVkVfSU5GSU5JVFkiLCJtYXhCb3R0b20iLCJtYXhTY3JvbGxXIiwibWF4U2Nyb2xsSCIsIm9mZlgiLCJwYWdlTGVmdCIsIm9mZlkiLCJwYWdlVG9wIiwiZWxlbWVudHMiLCJyaWdodCIsImJvdHRvbSIsImlzRmluaXRlIiwiYmJveFdpZHRoIiwiY2VpbCIsImJib3hIZWlnaHQiLCJtZWFzdXJlQ29udGVudFNpemUiLCJvbkRpc2Nvbm5lY3QiXSwic291cmNlUm9vdCI6IiJ9